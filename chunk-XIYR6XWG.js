import{a as R}from"./chunk-QW4DZL5W.js";import{a as y}from"./chunk-2LKYGCHS.js";import{b as f,d as C,e as S}from"./chunk-ANBYP55K.js";import{a as d}from"./chunk-DYBLNUKQ.js";import{c as i,g as b}from"./chunk-PXW4CVT7.js";import{B as g,g as m,ka as v,na as h,ta as l,x as u}from"./chunk-O6QGGAL6.js";var a=class{partitionKey;rowKey;user_id;conversation_id;feedback;sentiment;bot_name;title;timestamp;getEmojiPerSetiment(){switch(this.sentiment){case"negative":return"\u{1F61F}";case"mixed":return"\u{1F615}";case"positive":return"\u{1F60A}";case"neutral":return"\u{1F610}";default:return"\u2753"}}};var p=class extends y{partitionKey;rowKey;constructor(){super()}};var o=class o{http=l(b);urlService=l(d);_botNames=[];getAllConversations(t){let e=`${this.urlService.URLS.CHAT_HISTORY}/all-conversations`,r=new i;return t&&(r=r.set("bot_name",t)),this.http.get(e,{params:r})}getConversationsByUserId(t){let e=`${this.urlService.URLS.CHAT_HISTORY}/conversations`,r=new i().set("user_id",t);return this.http.get(e,{params:r})}getChatByConversationId(t){let e=`${this.urlService.URLS.CHAT_HISTORY}/chat`,r=new i().set("conv_id",t);return this.http.get(e,{params:r}).pipe(g(c=>c.map(n=>{let s=new p;return s.context=n.context&&JSON.parse(n.context),s.content=C(S(n.content,s)),s.partitionKey=n.partitionKey,s.rowKey=n.rowKey,s.role=n.role,s}))).pipe(f())}applyAnalysis(){let t=`${this.urlService.URLS.CHAT_HISTORY}/sentiment-analysis`;return this.http.post(t,null)}addFeedback(t,e){let r=`${this.urlService.URLS.CHAT_HISTORY}/add-conversation-feedback`,c=new i().set("conv_id",t).set("feedback",e);return this.http.post(r,null,{params:c})}getAllBotNames(){let t=`${this.urlService.URLS.CHAT_HISTORY}/bot-names`;return this._botNames.length?u(this._botNames):this.http.get(t).pipe(v(e=>this._botNames=e))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};m([R(()=>a)],o.prototype,"getAllConversations",1);var T=o;export{T as a};
