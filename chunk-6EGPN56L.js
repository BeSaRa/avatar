import{a as y,c as R}from"./chunk-NY236XMB.js";import{a as T}from"./chunk-IF3SVBNE.js";import{a as f,c as b,d as S}from"./chunk-FMTQMATD.js";import{a as i,b as d,f as C}from"./chunk-VFN6R4O3.js";import{B as m,H as v,da as g,g as u,ja as h,pa as c}from"./chunk-2CJENMGW.js";var p=class{partitionKey;rowKey;user_id;conversation_id;feedback;sentiment;bot_name;title;timestamp;getEmojiPerSetiment(){switch(this.sentiment){case"negative":return"\u{1F61F}";case"mixed":return"\u{1F615}";case"positive":return"\u{1F60A}";case"neutral":return"\u{1F610}";default:return"\u2753"}}};var l=class extends y{partitionKey;rowKey;constructor(){super()}};var o=class o{http=c(d);urlService=c(C);baseChatService=c(R);getAllConversations(t){let r=`${this.urlService.URLS.CHAT_HISTORY}/all-conversations`,s=new i;return t&&(s=s.set("bot_name",t)),this.http.get(r,{params:s})}getConversationsByUserId(t){let r=`${this.urlService.URLS.CHAT_HISTORY}/conversations`,s=new i().set("user_id",t);return this.http.get(r,{params:s})}getChatByConversationId(t){let r=`${this.urlService.URLS.CHAT_HISTORY}/chat`,s=new i().set("conv_id",t);return this.http.get(r,{params:s}).pipe(m(a=>a.map(n=>{let e=new l;return e.context=n.context?JSON.parse(n.context):"",e.content=S(n.content,e),e.partitionKey=n.partitionKey,e.rowKey=n.rowKey,e.role=n.role,e})),g(a=>{let n=a.map(e=>this.baseChatService.processFormattedText(e.content).pipe(m(w=>(e.content=b(w),e))));return v(n)}),f())}applyAnalysis(){let t=`${this.urlService.URLS.CHAT_HISTORY}/sentiment-analysis`;return this.http.post(t,null)}addFeedback(t,r){let s=`${this.urlService.URLS.CHAT_HISTORY}/add-feedback`,a=new i().set("conv_id",t).set("feedback",r);return this.http.post(s,null,{params:a})}getAllBotNames(){let t=`${this.urlService.URLS.CHAT_HISTORY}/bot-names`;return this.http.get(t)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};u([T(()=>p)],o.prototype,"getAllConversations",1);var H=o;export{H as a};
