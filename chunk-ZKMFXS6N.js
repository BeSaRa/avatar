import{r as Ot}from"./chunk-J3CC4BZF.js";import{a as Et,b as Mt}from"./chunk-MIGNOQJH.js";import"./chunk-FP6U4NYC.js";import{a as Tt}from"./chunk-IHOFWBF3.js";import{a as St}from"./chunk-V5O3HI7O.js";import{K as fe,O as yt,Q as wt,R as kt,W as ve,X as be,Y as _e,_ as xe,g as ut,o as gt,u as ft,w as vt}from"./chunk-ZDJXVAJQ.js";import"./chunk-GH4UQHOO.js";import{b as bt,f as _t,i as xt,j as Ct,n as ge}from"./chunk-TXQ7L4UT.js";import{g as K}from"./chunk-ONA3PISV.js";import{c as Ie,d as He,f as ne,g as ae,h as Le}from"./chunk-Q64FFBLU.js";import{$b as et,A as $e,Aa as c,B as Be,Ba as p,Bc as ie,Ca as _,Cb as x,Da as F,Ea as ce,Ec as R,Fa as Qe,Fb as Ee,Fc as rt,Gb as g,Gc as ue,Hb as Je,Hc as st,Ib as J,Ic as lt,J as Ne,Ja as A,K as Z,Lb as k,Ma as Ue,Na as pe,Nb as B,O as je,Oa as qe,Ob as O,Oc as dt,Pa as Ge,Pb as I,Q as Re,Qb as r,Rb as s,Sb as v,T as ze,Tc as ct,Ua as Te,Ub as S,V as Se,Vc as pt,Wb as b,Wc as mt,Xb as h,Xc as ht,Yb as Me,Zb as N,_b as Oe,a as Q,aa as D,ac as me,b as ke,ba as We,bc as he,ca as X,dc as tt,ea as U,eb as Ke,ec as it,fc as ee,gc as u,hc as T,ia as se,ic as C,j as oe,jc as te,ka as q,kb as l,kc as G,lb as f,lc as H,na as P,nb as Ze,nc as nt,p as E,pc as at,q as re,qc as L,ra as M,rc as j,sa as le,sb as Xe,sc as ot,t as Pe,ta as V,vb as w,wb as Ye,yb as Y,za as de,zb as $}from"./chunk-SWO22U5H.js";var Ut=0,Ve=new q("CdkAccordion"),It=(()=>{class i{constructor(){this._stateChanges=new E,this._openCloseAllActions=new E,this.id=`cdk-accordion-${Ut++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=V({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",R]},exportAs:["cdkAccordion"],standalone:!0,features:[G([{provide:Ve,useExisting:i}]),$,de]})}}return i})(),qt=0,Ht=(()=>{class i{get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let t=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,t)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(e,t,a){this.accordion=e,this._changeDetectorRef=t,this._expansionDispatcher=a,this._openCloseAllSubscription=oe.EMPTY,this.closed=new A,this.opened=new A,this.destroyed=new A,this.expandedChange=new A,this.id=`cdk-accordion-child-${qt++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((o,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static{this.\u0275fac=function(t){return new(t||i)(f(Ve,12),f(ie),f(fe))}}static{this.\u0275dir=V({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",R],disabled:[2,"disabled","disabled",R]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[G([{provide:Ve,useValue:void 0}]),$]})}}return i})(),Lt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=le({type:i})}static{this.\u0275inj=se({})}}return i})();var Zt=["body"],Xt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Yt=["mat-expansion-panel-header","*","mat-action-row"];function Jt(i,n){}var ei=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ti=["mat-panel-title","mat-panel-description","*"];function ii(i,n){if(i&1&&(r(0,"span",1),_(),r(1,"svg",2),v(2,"path",3),s()()),i&2){let e=h();g("@indicatorRotate",e._getExpandedState())}}var Fe=new q("MAT_ACCORDION"),Vt="225ms cubic-bezier(0.4,0.0,0.2,1)",At={indicatorRotate:Ie("indicatorRotate",[ae("collapsed, void",ne({transform:"rotate(0deg)"})),ae("expanded",ne({transform:"rotate(180deg)"})),Le("expanded <=> collapsed, void => collapsed",He(Vt))]),bodyExpansion:Ie("bodyExpansion",[ae("collapsed, void",ne({height:"0px",visibility:"hidden"})),ae("expanded",ne({height:"*",visibility:""})),Le("expanded <=> collapsed, void => collapsed",He(Vt))])},Dt=new q("MAT_EXPANSION_PANEL"),ni=(()=>{class i{constructor(e,t){this._template=e,this._expansionPanel=t}static{this.\u0275fac=function(t){return new(t||i)(f(Ze),f(Dt,8))}}static{this.\u0275dir=V({type:i,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return i})(),ai=0,Pt=new q("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),Ae=(()=>{class i extends Ht{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,t,a,o,d,y,z){super(e,t,a),this._viewContainerRef=o,this._animationMode=y,this._hideToggle=!1,this.afterExpand=new A,this.afterCollapse=new A,this._inputChanges=new E,this._headerId=`mat-expansion-panel-header-${ai++}`,this.accordion=e,this._document=d,this._animationsDisabled=y==="NoopAnimations",z&&(this.hideToggle=z.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(D(null),Z(()=>this.expanded&&!this._portal),Re(1)).subscribe(()=>{this._portal=new yt(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}_animationStarted(e){!Ft(e)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(e){Ft(e)||(e.toState==="expanded"?this.afterExpand.emit():e.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(t){return new(t||i)(f(Fe,12),f(ie),f(fe),f(Xe),f(dt),f(Te,8),f(Pt,8))}}static{this.\u0275cmp=M({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,a,o){if(t&1&&Oe(o,ni,5),t&2){let d;me(d=he())&&(a._lazyContent=d.first)}},viewQuery:function(t,a){if(t&1&&et(Zt,5),t&2){let o;me(o=he())&&(a._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,a){t&2&&J("mat-expanded",a.expanded)("_mat-animation-noopable",a._animationsDisabled)("mat-expansion-panel-spacing",a._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",R],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[G([{provide:Fe,useValue:void 0},{provide:Dt,useExisting:i}]),$,Y,de,H],ngContentSelectors:Yt,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,a){if(t&1){let o=S();Me(Xt),N(0),r(1,"div",1,0),b("@bodyExpansion.start",function(y){return c(o),p(a._animationStarted(y))})("@bodyExpansion.done",function(y){return c(o),p(a._animationDone(y))}),r(3,"div",2),N(4,1),x(5,Jt,0,0,"ng-template",3),s(),N(6,2),s()}t&2&&(l(),g("@bodyExpansion",a._getExpandedState())("id",a.id),Ee("aria-labelledby",a._headerId),l(4),g("cdkPortalOutlet",a._portal))},dependencies:[wt],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[At.bodyExpansion]},changeDetection:0})}}return i})();function Ft(i){return i.fromState==="void"}var De=(()=>{class i{constructor(e,t,a,o,d,y,z){this.panel=e,this._element=t,this._focusMonitor=a,this._changeDetectorRef=o,this._animationMode=y,this._parentChangeSubscription=oe.EMPTY,this.tabIndex=0;let Wt=e.accordion?e.accordion._stateChanges.pipe(Z(W=>!!(W.hideToggle||W.togglePosition))):Pe;this.tabIndex=parseInt(z||"")||0,this._parentChangeSubscription=Ne(e.opened,e.closed,Wt,e._inputChanges.pipe(Z(W=>!!(W.hideToggle||W.disabled||W.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Z(()=>e._containsFocus())).subscribe(()=>a.focusVia(t,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:ut(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,t){e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(t){return new(t||i)(f(Ae,1),f(qe),f(ft),f(ie),f(Pt,8),f(Te,8),Qe("tabindex"))}}static{this.\u0275cmp=M({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,a){t&1&&b("click",function(){return a._toggle()})("keydown",function(d){return a._keydown(d)}),t&2&&(Ee("id",a.panel._headerId)("tabindex",a.disabled?-1:a.tabIndex)("aria-controls",a._getPanelId())("aria-expanded",a._isExpanded())("aria-disabled",a.panel.disabled),Je("height",a._getHeaderHeight()),J("mat-expanded",a._isExpanded())("mat-expansion-toggle-indicator-after",a._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",a._getTogglePosition()==="before")("_mat-animation-noopable",a._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:rt(e)]},standalone:!0,features:[$,H],ngContentSelectors:ti,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(t,a){t&1&&(Me(ei),r(0,"span",0),N(1),N(2,1),N(3,2),s(),x(4,ii,3,1,"span",1)),t&2&&(J("mat-content-hide-toggle",!a._showToggle()),l(4),k(a._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[At.indicatorRotate]},changeDetection:0})}}return i})(),$t=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=V({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"],standalone:!0})}}return i})(),Bt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=V({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return i})(),Nt=(()=>{class i extends It{constructor(){super(...arguments),this._ownHeaders=new Ge,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(D(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(t=>t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new gt(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=ce(i)))(a||i)}})()}static{this.\u0275dir=V({type:i,selectors:[["mat-accordion"]],contentQueries:function(t,a,o){if(t&1&&Oe(o,De,5),t&2){let d;me(d=he())&&(a._headers=d)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,a){t&2&&J("mat-accordion-multi",a.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",R],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[G([{provide:Fe,useExisting:i}]),$,Y]})}}return i})(),jt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=le({type:i})}static{this.\u0275inj=se({imports:[vt,Lt,kt]})}}return i})();function ri(i,n){if(i&1&&(r(0,"div",1)(1,"h2",2),u(2),s(),te(3),v(4,"canvas",3),s()),i&2){let e=n.$implicit;l(2),T(e.value.title);let t=e.value.chart;l(2),g("data",t.data)("labels",t.data.labels)("type",t.type)("options",t.options)}}var m={sentiment:{negative:{fill:"rgba(244, 67, 54, 0.8)",border:"rgb(244, 67, 54)"},mixed:{fill:"rgba(255, 193, 7, 0.8)",border:"rgb(255, 193, 7)"},positive:{fill:"rgba(76, 175, 80, 0.8)",border:"rgb(76, 175, 80)"},neutral:{fill:"rgba(158, 158, 158, 0.8)",border:"rgb(158, 158, 158)"},undefined:{fill:"rgba(96, 125, 139, 0.8)",border:"rgb(96, 125, 139)"}},feedback:{like:{fill:"rgba(76, 175, 80, 0.8)",border:"rgb(76, 175, 80)"},dislike:{fill:"rgba(244, 67, 54, 0.8)",border:"rgb(244, 67, 54)"},unspecified:{fill:"rgba(158, 158, 158, 0.8)",border:"rgb(158, 158, 158)"}}},ye=class i{conversations=pe.required();lang=P(K);charts=ue(()=>this.conversations()?this.getCharts():this.getCharts());getCharts(){return{feedback_chart:{title:this.lang.locals.feedback_chart,chart:this.getFeedbackChartConfig()},sentiment_chart:{title:this.lang.locals.sentiment_chart,chart:this.getSentimentChartConfig()},performance_chart:{title:this.lang.locals.performance_chart,chart:this.getBotPerformanceChartConfig()}}}getChartOptions(n=!1){return{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{rtl:this.lang.currentLanguage==="ar"}},scales:n?{x:{stacked:!0},y:{beginAtZero:!0,stacked:!0}}:void 0}}calculateSetimentDistribution(){let n={negative:0,mixed:0,positive:0,neutral:0,undefined:0};return this.conversations().forEach(e=>{this.isValidSentiment(e.sentiment)?n[e.sentiment]++:n.undefined++}),{labels:[`\u{1F61F}${this.lang.locals.negative}`,`\u{1F615}${this.lang.locals.mixed}`,`\u{1F60A}${this.lang.locals.positive}`,`\u{1F610}${this.lang.locals.neutral}`,`\u2753${this.lang.locals.unspecified}`],datasets:[{label:this.lang.locals.sentiment,data:Object.values(n),backgroundColor:[m.sentiment.negative.fill,m.sentiment.mixed.fill,m.sentiment.positive.fill,m.sentiment.neutral.fill,m.sentiment.undefined.fill],borderColor:[m.sentiment.negative.border,m.sentiment.mixed.border,m.sentiment.positive.border,m.sentiment.neutral.border,m.sentiment.undefined.border],borderWidth:2}]}}getSentimentChartConfig(){return{data:this.calculateSetimentDistribution(),type:"pie",options:this.getSentimentChartOptions()}}getSentimentChartOptions(){return ke(Q({},this.getChartOptions()),{plugins:{legend:{display:!0,labels:{boxWidth:20,padding:10,font:{size:14,family:"Lusail"}},position:"top"},tooltip:ke(Q({},this.getChartOptions().plugins.tooltip),{callbacks:{title:()=>this.lang.locals.sentiment,label:n=>{let e=n.label||"",a=n.dataset.data.reduce((d,y)=>d+y,0),o=(n.raw/a*100).toFixed(1);return[`${e}:${o}%`,`${this.lang.locals.total}:${n.raw}`]}}}),datalabels:{textAlign:"center",color:"#ffffff",font:{size:14},backgroundColor:n=>n.dataset.backgroundColor[n.dataIndex],borderColor:"#ffffff",borderRadius:8,borderWidth:1,padding:{left:10,right:10},display:n=>{let e=n.dataset.data,t=e[n.dataIndex],a=e.reduce((o,d)=>o+d,0);return t>a*.1},formatter:(n,e)=>{let a=e.dataset.data.reduce((y,z)=>y+z,0),o=(n/a*100).toFixed(1);return[e.chart.data.labels[e.dataIndex],`${o}%`,`${this.lang.locals.total}:${n}`]}}}})}calculateFeedbackDistribution(){let n=0,e=0,t=0;return this.conversations().forEach(a=>{this.isValidFeedback(a.feedback)?a.feedback>0?n++:e++:t++}),{labels:[this.lang.locals.feedback],datasets:[{label:this.lang.locals.like,data:[n],backgroundColor:m.feedback.like.fill,borderColor:m.feedback.like.border,borderWidth:2},{label:this.lang.locals.dislike,data:[e],backgroundColor:m.feedback.dislike.fill,borderColor:m.feedback.dislike.border,borderWidth:2},{label:this.lang.locals.unspecified,data:[t],backgroundColor:m.feedback.unspecified.fill,borderColor:m.feedback.unspecified.border,borderWidth:2}]}}getFeedbackChartConfig(){return{data:this.calculateFeedbackDistribution(),type:"bar",options:this.getChartOptions()}}calculateBotPerformance(){let n={};return this.conversations().forEach(e=>{let t=e.bot_name;n[t]||(n[t]={likes:0,dislikes:0,unspecified:0}),this.isValidFeedback(e.feedback)?e.feedback>0?n[t].likes++:n[t].dislikes++:n[t].unspecified++}),{labels:Object.keys(n),datasets:[Q({label:this.lang.locals.like,data:Object.values(n).map(e=>e.likes)},this.generateBotColor(0)),Q({label:this.lang.locals.dislike,data:Object.values(n).map(e=>e.dislikes)},this.generateBotColor(1)),Q({label:this.lang.locals.unspecified,data:Object.values(n).map(e=>e.unspecified)},this.generateBotColor(2))]}}getBotPerformanceChartConfig(){return{data:this.calculateBotPerformance(),type:"bar",options:this.getChartOptions(!0)}}generateBotColor(n){let e=[{background:m.feedback.like.fill,border:m.feedback.like.border},{background:m.feedback.dislike.fill,border:m.feedback.dislike.border},{background:m.feedback.unspecified.fill,border:m.feedback.unspecified.border}];if(n<e.length)return{backgroundColor:e[n].background,borderColor:e[n].border,borderWidth:2};let t=[m.feedback.like.fill,m.feedback.like.border,m.feedback.dislike.fill,m.feedback.dislike.border],a=t[n%t.length],o=a.replace("rgb","rgba").replace(")",", 0.6)"),d=a.replace("rgb","rgba").replace(")",", 1)");return{backgroundColor:o,borderColor:d,borderWidth:2}}isValidFeedback(n){return n!=null&&n!==""}isValidSentiment(n){return["negative","mixed","positive","neutral"].includes(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-chat-history-charts"]],inputs:{conversations:[1,"conversations"]},standalone:!0,features:[H],decls:4,vars:2,consts:[[1,"flex","flex-col","gap-4","mb-4","md:flex-row"],[1,"card","bg-white","shadow-md","p-4","rounded-lg","w-full","md:w-1/3","hover:shadow-lg"],[1,"text-lg","font-bold","text-center","mb-4","text-gray-700"],["baseChart","","role","img",1,"max-h-80","w-full",3,"data","labels","type","options"]],template:function(e,t){e&1&&(r(0,"div",0),O(1,ri,5,5,"div",1,B),L(3,"keyvalue"),s()),e&2&&(l(),I(j(3,0,t.charts())))},dependencies:[Ot,ht]})};var li=["conversationsContainer"],di=(i,n)=>n.conversation_id,ci=i=>({"!bg-gray-400/40 !rounded-md !text-gray-700":i}),pi=(i,n,e)=>({"bg-green-100 text-green-800 border-green-400":i,"bg-red-100 text-red-800 border-red-400":n,"!bg-gray-100 !text-gray-800 !border-gray-400":e});function mi(i,n){if(i&1){let e=S();r(0,"li",22),b("keyup.enter",function(){let a=c(e).$implicit,o=h(2);return p(o.onFilterTypeSelect(a))})("click",function(){let a=c(e).$implicit,o=h(2);return p(o.onFilterTypeSelect(a))}),u(1),s()}if(i&2){let e=n.$implicit;l(),C(" ",e.label," ")}}function hi(i,n){if(i&1&&(r(0,"div",19)(1,"ul",20),O(2,mi,2,1,"li",21,B),s()()),i&2){let e=h();l(2),I(e.filterOptions)}}function ui(i,n){if(i&1){let e=S();r(0,"button",23),b("click",function(){c(e);let a=h();return p(a.resetContorl())}),_(),r(1,"svg",24),v(2,"path",25),s()()}}function gi(i,n){if(i&1){let e=S();r(0,"p",28),b("keyup",function(){let a=c(e).$implicit,o=h(2);return p(o.onSuggestionSelect(a))})("click",function(){let a=c(e).$implicit,o=h(2);return p(o.onSuggestionSelect(a))}),u(1),s()}if(i&2){let e=n.$implicit;l(),C(" ",e.label," ")}}function fi(i,n){if(i&1&&(r(0,"div",26),O(1,gi,2,1,"p",27,B),s()),i&2){let e=h();l(),I(e.suggestions())}}function vi(i,n){if(i&1&&u(0),i&2){let e=h(2);C(" ",e.lang.locals.like," ")}}function bi(i,n){if(i&1&&u(0),i&2){let e=h(2);C(" ",e.lang.locals.dislike," ")}}function _i(i,n){if(i&1&&u(0),i&2){let e=h(2);C(" ",e.lang.locals.unspecified," ")}}function xi(i,n){if(i&1){let e=S();r(0,"li",29),b("keyup.enter",function(){let a=c(e).$implicit,o=h();return p(o.OnSelectConversation(a.conversation_id))})("click",function(){let a=c(e).$implicit,o=h();return p(o.OnSelectConversation(a.conversation_id))}),r(1,"p",30),u(2),L(3,"date"),s(),r(4,"div",31)(5,"div",32)(6,"p",33),u(7),s(),r(8,"p",34),x(9,vi,1,1)(10,bi,1,1)(11,_i,1,1),s()(),r(12,"div",35)(13,"div",36)(14,"span",37),u(15),s()()()()()}if(i&2){let e,t=n.$implicit,a=h();g("ngClass",nt(12,ci,a.selectedConversation()===t.conversation_id)),l(2),T(ot(3,9,t.timestamp,"short")),l(4),g("matTooltip",a.lang.locals.conversation_title),l(),C(" ",t.title," "),l(),g("matTooltip",a.lang.locals.feedback)("ngClass",at(14,pi,t.feedback===a.feedbackOptions.LIKE,t.feedback===a.feedbackOptions.DISLIKE,t.feedback===a.feedbackOptions.UNSPECIFIED)),l(),k((e=t.feedback)===a.feedbackOptions.LIKE?9:e===a.feedbackOptions.DISLIKE?10:11),l(3),g("matTooltip",a.lang.locals.sentiment),l(3),T(t.getEmojiPerSetiment())}}function Ci(i,n){if(i&1&&(r(0,"div",18),_(),r(1,"svg",38),v(2,"path",39),s(),F(),r(3,"span",40),u(4),s()()),i&2){let e=h();l(4),T(e.lang.locals.no_data_to_preview)}}var we=class i{conversationsContainer=Ye.required("conversationsContainer");conversations=pe.required();onConversationSelect=Ue();lang=P(K);searchControl=new xt("",{nonNullable:!0});filterOptions=[{label:this.lang.locals.bot_name,value:"bot_name"},{label:this.lang.locals.sentiment,value:"sentiment"},{label:this.lang.locals.feedback,value:"feedback"}];showSuggestions=w(!1);selectedConversation=w(null);selectedFilter=w(this.filterOptions[0]);filterType$=new E;filterValue$=new E;filteredConversations=w([]);dropdownOpen=w(!1);feedbackOptions=Mt;currentSort="asc";suggestions=ue(()=>this.selectedFilter().value==="feedback"?[{label:this.lang.locals.like,value:1},{label:this.lang.locals.dislike,value:-1},{label:this.lang.locals.unspecified,value:0}]:this.selectedFilter().value==="sentiment"?[{label:this.lang.locals.negative,value:"negative"},{label:this.lang.locals.positive,value:"positive"},{label:this.lang.locals.mixed,value:"mixed"},{label:this.lang.locals.neutral,value:"neutral"},{label:this.lang.locals.unspecified,value:"undefined"}]:[]);ngOnInit(){this.listenToFilter()}constructor(){lt(()=>{new Tt(this.conversationsContainer().nativeElement,{suppressScrollX:!0}),this.conversationsContainer().nativeElement.addEventListener("wheel",n=>{n.stopPropagation()}),this.conversations()&&st(()=>{this.filterType$.next("bot_name")})})}loadSuggestions(){["sentiment","feedback"].includes(this.selectedFilter().value)&&this.showSuggestions.set(!0)}onFilterTypeSelect(n){this.resetContorl(),this.selectedFilter.set(n),this.dropdownOpen.set(!1),this.filterValue$.next(""),this.filterType$.next(n.value)}onSuggestionSelect(n){this.filterValue$.next(n.value),this.searchControl.setValue(n.label,{emitEvent:!1}),this.showSuggestions.set(!1)}listenToFilter(){let n=this.searchControl.valueChanges;Be([n.pipe(D(""),je(400),ze()),this.filterType$.pipe(D(this.selectedFilter().value)),this.filterValue$.pipe(D(""))]).pipe($e(([e,t,a])=>t!=="bot_name"&&a===""?this.conversations():this.conversations().filter(o=>{let d=o.bot_name?.toLowerCase().includes((e||"").toLowerCase());return t==="bot_name"?d:t==="sentiment"&&typeof a=="string"?o.sentiment?.toLowerCase()===a.toLowerCase():t==="feedback"?o.feedback===a:!0})),U(e=>{this.filteredConversations.set(e),this.resetScrollToTop()})).subscribe()}resetScrollToTop(){let n=this.conversationsContainer().nativeElement;n&&(n.scrollTop=0)}OnSelectConversation(n){this.selectedConversation.set(n),this.onConversationSelect.emit(n)}resetContorl(){this.searchControl.reset(""),this.filterValue$.next(""),this.filterType$.next(this.selectedFilter().value)}sort(){this.currentSort=this.currentSort==="asc"?"desc":"asc";let n=this.filteredConversations().sort((e,t)=>{let a=new Date(e.timestamp).getTime(),o=new Date(t.timestamp).getTime();return this.currentSort==="asc"?a-o:o-a});this.filteredConversations.set(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-conversation-list"]],viewQuery:function(e,t){e&1&&tt(t.conversationsContainer,li,5),e&2&&it()},inputs:{conversations:[1,"conversations"]},outputs:{onConversationSelect:"onConversationSelect"},standalone:!0,features:[H],decls:22,vars:12,consts:[["conversationsContainer",""],["trigger","cdkOverlayOrigin"],["suggestionTrigger","cdkOverlayOrigin"],[1,"w-full","h-full","border-l","border-gray-400","bg-gray-200","text-gray-700","rounded-md","overflow-hidden","relative"],[1,"flex","max-w-lg","mx-auto","items-center","bg-gray-200","sticky","rounded-t-md","top-0","z-10","p-3","rtl:flex-row-reverse","border-b","border-b-gray-300"],["cdkOverlayOrigin","",1,"relative","flex-shrink-0","z-10","inline-flex","items-center","py-2.5","px-8","text-sm","font-medium","text-center","text-white","bg-primary","border","border-gray-300","rtl:rounded-e-lg","ltr:rounded-s-lg","focus:ring-4","focus:outline-none","focus:ring-gray-400",3,"click"],[1,"absolute","left-0","m-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-6","fill-current"],["d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen"],[1,"relative","w-full"],["cdkOverlayOrigin","","type","text",1,"w-full","block","p-2.5","z-20","text-sm","text-gray-900","bg-gray-50","rtl:rounded-s-lg","ltr:rounded-e-lg","rtl:border-e-gray-50","ltr:border-s-gray-50","rtl:border-e-2","ltr:border-s-2","border","border-gray-300","focus:ring-primary","focus:border-primary","outline-0",3,"focus","readOnly","placeholder","formControl"],[1,"absolute","left-0","top-0","m-3","bg-transparent","outline-none"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayWidth"],["tabindex","2","type","button",1,"bg-transparent","mx-2","outline-none",3,"click","keyup.enter","matTooltip"],["d","M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z"],[1,"max-w-md"],["tabindex","1",1,"pb-3","pt-2","sm:pb-4","sm:pt-4","px-4","m-1","cursor-pointer","hover:bg-gray-400/20","hover:rounded-md","hover:text-gray-700",3,"ngClass"],[1,"flex","flex-col","justify-center","items-center","gap-4","mt-4"],[1,"absolute","ltr:left-0","rtl:right-0","z-10","w-40","mt-2","bg-white","border","border-gray-300","rounded-md","shadow-lg"],[1,"py-1"],["tabindex","1",1,"px-4","py-2","text-base","text-gray-700","hover:bg-gray-200","cursor-pointer"],["tabindex","1",1,"px-4","py-2","text-base","text-gray-700","hover:bg-gray-200","cursor-pointer",3,"keyup.enter","click"],[1,"absolute","left-0","top-0","m-3","bg-transparent","outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4","fill-current"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"],[1,"w-full","ltr:left-0","rtl:right-0","z-10","mt-2","bg-white","border","border-gray-300","rounded-md","shadow-lg"],["tabindex","1",1,"cursor-pointer","p-2","hover:bg-gray-200","hover:rounded-sm"],["tabindex","1",1,"cursor-pointer","p-2","hover:bg-gray-200","hover:rounded-sm",3,"keyup","click"],["tabindex","1",1,"pb-3","pt-2","sm:pb-4","sm:pt-4","px-4","m-1","cursor-pointer","hover:bg-gray-400/20","hover:rounded-md","hover:text-gray-700",3,"keyup.enter","click","ngClass"],[1,"text-gray-700/60","text-xs"],[1,"flex","items-center","space-x-4","rtl:space-x-reverse"],[1,"flex-1","min-w-0"],[1,"text-base","font-medium","text-gray-700","truncate","uppercase",3,"matTooltip"],[1,"w-fit","text-xs","font-medium","me-2","px-1","py-[0.0625rem]","rounded","border",3,"matTooltip","ngClass"],[1,"flex-shrink-0",3,"matTooltip"],[1,"flex","justify-center","items-center","border-dashed","border-gray-700","border","size-8","rounded-full","bg-gray-100","p-2","m-1"],[1,"text-xl","leading-[normal]"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-12","fill-current"],["d","M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M15.5,8C16.3,8 17,8.7 17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M12,14C13.75,14 15.29,14.72 16.19,15.81L14.77,17.23C14.32,16.5 13.25,16 12,16C10.75,16 9.68,16.5 9.23,17.23L7.81,15.81C8.71,14.72 10.25,14 12,14Z"],[1,"text-center","text-gray-700","text-lg"]],template:function(e,t){if(e&1){let a=S();r(0,"div",3,0)(2,"div",4)(3,"button",5,1),b("click",function(){return c(a),p(t.dropdownOpen.set(!t.dropdownOpen()))}),u(5),r(6,"span",6),_(),r(7,"svg",7),v(8,"path",8),s()()(),x(9,hi,4,0,"ng-template",9),b("overlayOutsideClick",function(){return c(a),p(t.dropdownOpen.set(!1))}),F(),r(10,"div",10)(11,"input",11,2),b("focus",function(){return c(a),p(t.loadSuggestions())}),s(),x(13,ui,3,0,"button",12)(14,fi,3,0,"ng-template",13),b("overlayOutsideClick",function(){return c(a),p(t.showSuggestions.set(!1))}),s(),r(15,"button",14),b("click",function(){return c(a),p(t.sort())})("keyup.enter",function(){return c(a),p(t.sort())}),_(),r(16,"svg",7),v(17,"path",15),s()()(),F(),r(18,"ul",16),O(19,xi,16,18,"li",17,di,!1,Ci,5,1,"div",18),s()()}if(e&2){let a=ee(4),o=ee(12);l(5),C(" ",t.selectedFilter().label||t.lang.locals.select_filter," "),l(4),g("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",t.dropdownOpen()),l(2),g("readOnly",t.selectedFilter().value!=="bot_name")("placeholder",t.lang.locals.search_about+" "+(t.selectedFilter().label||t.lang.locals.bot_name+","+t.lang.locals.feedback+","+t.lang.locals.sentiment)+"...")("formControl",t.searchControl),l(2),k(t.searchControl.value?13:-1),l(),g("cdkConnectedOverlayOrigin",o)("cdkConnectedOverlayOpen",t.showSuggestions())("cdkConnectedOverlayWidth",o.elementRef.nativeElement.offsetWidth),l(),g("matTooltip",t.lang.locals.sort_conversation),l(4),I(t.filteredConversations())}},dependencies:[ct,ge,bt,_t,Ct,_e,be,ve,xe,mt]})};var yi=(i,n)=>n.id;function wi(i,n){if(i&1){let e=S();r(0,"li",27),b("click",function(){let a=c(e).$implicit,o=h(2);return p(o.onBotSelect(a))})("keyup.enter",function(){let a=c(e).$implicit,o=h(2);return p(o.onBotSelect(a))}),u(1),s()}if(i&2){let e=n.$implicit;l(),C(" ",e," ")}}function ki(i,n){if(i&1&&(r(0,"div",24)(1,"ul",25),O(2,wi,2,1,"li",26,B),s()()),i&2){let e=h();l(2),I(e.botNames())}}function Si(i,n){i&1&&(r(0,"div",9)(1,"div",28),_(),r(2,"svg",29),v(3,"path",30)(4,"path",31),s(),F(),r(5,"span",32),u(6,"Loading..."),s()()())}function Ti(i,n){i&1&&(_(),r(0,"svg",14),v(1,"path",33),s())}function Ei(i,n){i&1&&(_(),r(0,"svg",15),v(1,"path",34),s())}function Mi(i,n){i&1&&(_(),r(0,"svg",16),v(1,"path",30)(2,"path",31),s())}function Oi(i,n){i&1&&(_(),r(0,"svg",15),v(1,"path",35),s())}function Ii(i,n){i&1&&(r(0,"div",21)(1,"div",9)(2,"div",28),_(),r(3,"svg",29),v(4,"path",30)(5,"path",31),s(),F(),r(6,"span",32),u(7,"Loading..."),s()()()())}function Hi(i,n){if(i&1&&(r(0,"div",36)(1,"p"),u(2),s()()),i&2){let e=h().$implicit;l(2),T(e.content)}}function Li(i,n){if(i&1&&(r(0,"div",37),v(1,"span",39),s()),i&2){let e=h().$implicit;l(),g("innerHTML",e.content,Ke)}}function Vi(i,n){if(i&1&&(r(0,"div",38)(1,"p"),u(2),s()()),i&2){let e=h().$implicit;l(2),T(e.content)}}function Fi(i,n){if(i&1&&x(0,Hi,3,1,"div",36)(1,Li,2,1,"div",37)(2,Vi,3,1,"div",38),i&2){let e=n.$implicit;k(e.isUser()?0:e.isAssistant()?1:2)}}function Ai(i,n){if(i&1&&(r(0,"div",23)(1,"p",40),u(2),s(),v(3,"img",41),s()),i&2){let e=h();l(2),T(e.lang.locals.choose_conversation)}}var zt=class i extends St(class{}){chatHistoryService=P(Et);lang=P(K);conversations=w([]);chats=w([]);loaderChat$=new re(!1);loaderSentiment$=new re(!1);conversationLoader$=new re(!1);loadConversation$=new E;botNames=w([this.lang.locals.all_bots]);showBotDp=w(!1);selectedBot=w(this.botNames()[0]);ngOnInit(){this.loadConversations(),this.loadConversation$.next(void 0),this.getBotNames()}loadChat(n){this.loaderChat$.next(!0),this.chatHistoryService.getChatByConversationId(n).pipe(X(this.destroy$),Se(()=>this.loaderChat$.next(!1))).subscribe(e=>{this.chats.set(e)})}loadConversations(){this.loadConversation$.pipe(U(()=>{this.conversationLoader$.next(!0)}),We(n=>this.chatHistoryService.getAllConversations(n)),U(()=>{this.conversationLoader$.next(!1)}),X(this.destroy$)).subscribe(n=>{this.conversations.set(n)})}sentimentAnalyis(){this.loaderSentiment$.next(!0),this.chatHistoryService.applyAnalysis().pipe(X(this.destroy$),U(()=>this.loadConversation$.next(this.selectedBot()===this.lang.locals.all_bots?void 0:this.selectedBot())),Se(()=>this.loaderSentiment$.next(!1))).subscribe()}getBotNames(){return this.chatHistoryService.getAllBotNames().pipe(X(this.destroy$)).subscribe(n=>this.botNames.set([...this.botNames(),...n]))}onBotSelect(n){this.selectedBot.set(n),this.showBotDp.set(!1),this.loadConversation$.next(n===this.lang.locals.all_bots?void 0:n)}reloadConversations(){this.loadConversation$.next(this.selectedBot()===this.lang.locals.all_bots?void 0:this.selectedBot())}static \u0275fac=(()=>{let n;return function(t){return(n||(n=ce(i)))(t||i)}})();static \u0275cmp=M({type:i,selectors:[["app-chat-history"]],standalone:!0,features:[Y,H],decls:43,vars:25,consts:[["botNameTrigger","cdkOverlayOrigin"],[1,"flex","items-center","gap-4"],[1,"relative","flex","flex-col","w-1/4"],[1,"text-gray-50","text-lg"],["type","button","cdkOverlayOrigin","",1,"relative","bg-gray-50","w-full","text-lg","text-gray-700","rounded-md","p-2.5","mb-4",3,"click"],[1,"absolute","left-0","m-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-6","fill-current"],["d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayWidth"],[1,"loader","flex","items-center","justify-center"],[3,"conversations"],["multi",""],[1,"text-gray-400"],["type","button","tabindex","1",1,"inline-flex","gap-4","items-center","text-white","bg-primary","focus:ring-4","focus:ring-gray-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2",3,"click","keyup.enter","matTooltip"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 200 50",1,"w-16","h-6"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-6","fill-white"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"size-6","text-gray-200","animate-spin","fill-primary"],[1,"flex","flex-col","lg:flex-row","bg-gray-100","rounded-md","shadow-md","h-[calc(100vh_-_18rem)]"],[1,"w-full","lg:w-4/12","p-4","lg:p-0","flex-shrink-0","overflow-auto","h-1/2","lg:h-full"],[3,"onConversationSelect","conversations"],[1,"w-full","lg:w-8/12","overflow-auto","relative","flex-auto","h-1/2","lg:h-full"],[1,"absolute","inset-0","flex","items-center","justify-center","backdrop-blur-sm","bg-white","bg-opacity-50","z-10","h-100vh"],[1,"flex-auto","overflow-hidden","flex","flex-col","relative","min-h-0","p-4"],[1,"flex","justify-center","items-center"],[1,"absolute","w-full","ltr:left-0","rtl:right-0","z-10","mt-2","text-lg","bg-white","border","border-gray-300","rounded-md","shadow-lg"],[1,"py-1"],["tabindex","1",1,"px-4","py-2","text-base","text-gray-700","hover:bg-gray-200","cursor-pointer"],["tabindex","1",1,"px-4","py-2","text-base","text-gray-700","hover:bg-gray-200","cursor-pointer",3,"click","keyup.enter"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","w-8","h-8","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"],["fill","none","stroke","currentColor","stroke-width","2","d","M0 25 L20 25 L30 10 L40 40 L50 25 L70 25 L80 5 L90 45 L100 25 L200 25",1,"animate-heartbeat"],["d","M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"],["d","M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z"],[1,"user-message","chat-message","ltr:self-end","min-w-[min(400px,100%)]","rtl:self-start","rtl:!rounded-tr-none","ltr:!rounded-tr-none"],[1,"assistant-message","chat-message","whitespace-break-spaces","ltr:self-start","min-w-[min(400px,100%)]","rtl:self-end","rtl:!rounded-tl-none","ltr:!rounded-tr-none"],[1,"system-message","chat-message"],[3,"innerHTML"],[1,"text-gray-700","text-xl","mt-10"],["src","assets/images/select.svg","alt","select",1,"w-1/4","h-1/4"]],template:function(e,t){if(e&1){let a=S();r(0,"div",1)(1,"div",2)(2,"span",3),u(3),s(),r(4,"button",4,0),b("click",function(){return c(a),p(t.showBotDp.set(!0))}),u(6),r(7,"span",5),_(),r(8,"svg",6),v(9,"path",7),s()()(),x(10,ki,4,0,"ng-template",8),b("overlayOutsideClick",function(){return c(a),p(t.showBotDp.set(!1))}),s(),x(11,Si,7,0,"div",9),L(12,"async"),s(),F(),v(13,"app-chat-history-charts",10),r(14,"mat-accordion",11)(15,"mat-expansion-panel")(16,"mat-expansion-panel-header")(17,"mat-panel-title"),u(18),s(),r(19,"mat-panel-description")(20,"p",12),u(21),s()()(),r(22,"button",13),b("click",function(){return c(a),p(t.sentimentAnalyis())})("keyup.enter",function(){return c(a),p(t.sentimentAnalyis())}),te(23),L(24,"async"),x(25,Ti,2,0,":svg:svg",14)(26,Ei,2,0,":svg:svg",15),u(27),s(),r(28,"button",13),b("click",function(){return c(a),p(t.reloadConversations())})("keyup.enter",function(){return c(a),p(t.reloadConversations())}),te(29),L(30,"async"),x(31,Mi,3,0,":svg:svg",16)(32,Oi,2,0,":svg:svg",15),s(),r(33,"div",17)(34,"div",18)(35,"app-conversation-list",19),b("onConversationSelect",function(d){return c(a),p(t.loadChat(d))}),s()(),r(36,"div",20),x(37,Ii,8,0,"div",21),L(38,"async"),r(39,"div",22),O(40,Fi,3,1,null,null,yi),x(42,Ai,4,1,"div",23),s()()()()()}if(e&2){let a=ee(5);l(3),C("",t.lang.locals.choose_bot,":"),l(3),C(" ",t.selectedBot()," "),l(4),g("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",t.showBotDp())("cdkConnectedOverlayWidth",a.elementRef.nativeElement.offsetWidth),l(),k(j(12,17,t.conversationLoader$)?11:-1),l(2),g("conversations",t.conversations()),l(5),T(t.lang.locals.conversations_and_chats),l(3),C(" ",t.lang.locals.conversation_description," "),l(),g("matTooltip",t.lang.locals.sentiment_analysis_description);let o=j(24,19,t.loaderSentiment$);l(3),k(o?25:26),l(2),C(" ",t.lang.locals.sentiment_chart," "),l(),g("matTooltip",t.lang.locals.reload_conversation);let d=j(30,21,t.conversationLoader$);l(3),k(d?31:32),l(4),g("conversations",t.conversations()),l(2),k(j(38,23,t.loaderChat$)?37:-1),l(3),I(t.chats()),l(2),k(t.chats().length?-1:42)}},dependencies:[jt,Nt,Ae,De,Bt,$t,pt,ge,_e,be,ve,ye,we,xe],styles:["@keyframes _ngcontent-%COMP%_heartbeat{0%{stroke-dasharray:200;stroke-dashoffset:200}50%{stroke-dasharray:200;stroke-dashoffset:0}to{stroke-dasharray:200;stroke-dashoffset:200}}.animate-heartbeat[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartbeat 2s infinite ease-in-out;stroke-linecap:round}"]})};export{zt as ChatHistoryComponent};
