import{a as N}from"./chunk-DT7ICBEB.js";import{a as B}from"./chunk-QGFLJZ7J.js";import{a as L}from"./chunk-V5O3HI7O.js";import{_ as O}from"./chunk-ZDJXVAJQ.js";import{b as Z}from"./chunk-MXTMFI7B.js";import{g as H}from"./chunk-ONA3PISV.js";import{c as _,d as u,f as a,h as f}from"./chunk-Q64FFBLU.js";import{Aa as v,Ba as b,Ca as h,Cb as M,Da as w,Ea as T,Gb as x,Lb as V,Ma as z,Q as C,Qb as o,Rb as d,Sb as m,Tc as $,Ub as A,Wb as y,Xb as S,e as E,gc as D,h as c,hc as F,kb as l,lc as I,na as g,nc as P,ra as R,vb as p,yb as k}from"./chunk-SWO22U5H.js";var e=E(N());var U=r=>({"bounce-animation":r});function G(r,s){if(r&1){let i=A();o(0,"button",6),y("click",function(){v(i);let n=S();return b(n.stopRecording())}),h(),o(1,"svg",7),m(2,"path",8),d(),w(),o(3,"span"),D(4),d()()}if(r&2){let i=S();l(4),F(i.lang.locals.cancel_recording)}}var Y=class r extends L(class{}){lang=g(H);store=g(Z);recognizingStatus=p(!1);recognizingText=p("");recognizedText=p("");recognizing$=z();recognized$=z();speechService=g(B);toggleRecording(){return c(this,null,function*(){this.store.isRecordingLoading()||(this.store.isRecordingStarted()&&this.recognizer?yield this.stopRecording():yield this.startRecording())})}stopRecording(){return c(this,null,function*(){this.recognizer?this.recognizer.stopContinuousRecognitionAsync(()=>{this.store.recordingStopped(),this.cleartext()}):this.store.recordingStopped()})}startRecording(){return c(this,null,function*(){this.recognizer||(yield this.prepareRecognizer()),this.store.recordingInProgress(),this.recognizer.startContinuousRecognitionAsync(()=>{this.recognizer.internalData.privConnectionPromise.__zone_symbol__state===!0&&this.store.recordingStarted(),this.recognizingStatus.set(!0)})})}prepareRecognizer(){return c(this,null,function*(){let s=e.AudioConfig.fromDefaultMicrophoneInput(),i=e.AutoDetectSourceLanguageConfig.fromLanguages(["ar-QA","en-US"]);this.recognizer=e.SpeechRecognizer.FromConfig(e.SpeechConfig.fromAuthorizationToken(this.store.speechToken.token(),this.store.speechToken.region()),i,s),this.recognizer.recognizing=(t,n)=>{n.result.reason===e.ResultReason.RecognizingSpeech&&(this.recognizingText.set(this.recognizedText()+" "+n.result.text),this.recognizing$.emit(this.recognizingText()),this.recognizingStatus.set(!0))},this.recognizer.recognized=(t,n)=>{n.result.reason===e.ResultReason.RecognizedSpeech&&this.store.isRecordingStarted()&&(this.recognizedText.update(j=>j+" "+n.result.text),this.recognized$.emit(this.recognizedText()),this.recognizingStatus.set(!1))},this.recognizer.canceled=()=>{this.store.recordingInProgress(),this.speechService.generateSpeechToken().pipe(C(1)).subscribe(()=>{this.prepareRecognizer().then(()=>this.startRecording())})},this.store.recordingStopped()})}cleartext(){this.recognizedText.set(""),this.recognizingText.set("")}static \u0275fac=(()=>{let s;return function(t){return(s||(s=T(r)))(t||r)}})();static \u0275cmp=R({type:r,selectors:[["app-recorder"]],outputs:{recognizing$:"recognizing$",recognized$:"recognized$"},standalone:!0,features:[k,I],decls:6,vars:6,consts:[[1,"relative"],[1,"absolute","flex","rtl:-left-1/2","ltr:-right-1/2","gap-1","items-center","justify-center","bg-black/50","text-xs","opacity-50","hover:opacity-100","text-white","rounded-full","w-max","p-2","-top-2","-translate-y-full"],[1,"rounded-full","bg-white","relative","text-primary","hover:bg-gray-200","shadow","shadow-primary","overflow-hidden","border","flex-shrink-0","flex-grow-0","flex","items-center","justify-center","outline-none","ring-offset-1","focus:ring-2","ring-primary","size-12",3,"click","matTooltip","disabled"],[1,"absolute","bg-primary/60","top-0","left-0","size-full","z-10","rounded-full","scale-0",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 256 256",1,"size-8"],["d","M128,176a48.05,48.05,0,0,0,48-48V64a48,48,0,0,0-96,0v64A48.05,48.05,0,0,0,128,176ZM96,64a32,32,0,0,1,64,0v64a32,32,0,0,1-64,0Zm40,143.6V240a8,8,0,0,1-16,0V207.6A80.11,80.11,0,0,1,48,128a8,8,0,0,1,16,0,64,64,0,0,0,128,0,8,8,0,0,1,16,0A80.11,80.11,0,0,1,136,207.6Z"],[1,"absolute","flex","rtl:-left-1/2","ltr:-right-1/2","gap-1","items-center","justify-center","bg-black/50","text-xs","opacity-50","hover:opacity-100","text-white","rounded-full","w-max","p-2","-top-2","-translate-y-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 256 256",1,"size-3"],["d","M200,32H160a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V48A16,16,0,0,0,200,32Zm0,176H160V48h40ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Zm0,176H56V48H96Z"]],template:function(i,t){i&1&&(o(0,"div",0),M(1,G,5,1,"button",1),o(2,"button",2),y("click",function(){return t.toggleRecording()}),m(3,"div",3),h(),o(4,"svg",4),m(5,"path",5),d()()()),i&2&&(l(),V(t.store.isRecordingStarted()?1:-1),l(),x("matTooltip",t.lang.locals.click_to_speak)("disabled",t.store.isRecordingLoading()),l(),x("ngClass",P(4,U,t.store.isRecordingStarted())))},dependencies:[$,O],styles:["[_nghost-%COMP%]{display:contents}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}20%{transform:scale(.6)}40%{transform:scale(.75)}60%{transform:scale(.4)}80%{transform:scale(.25)}}.bounce-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce .8s linear infinite}"]})};var le=_("fadeInSlideUp",[f(":enter, * => *",[a({opacity:0,transform:"translateY(20px)"}),u("0.5s ease-out",a({opacity:1,transform:"translateY(0)"}))])]),ge=_("slideFromBottom",[f(":enter",[a({transform:"translateY(100%)",opacity:0}),u("500ms ease-out",a({transform:"translateY(0)",opacity:1}))]),f(":leave",[u("300ms ease-in",a({transform:"translateY(100%)",opacity:0}))])]);export{Y as a,le as b,ge as c};
