import{a as m}from"./chunk-6IGLDT6K.js";import{c as f}from"./chunk-ANBYP55K.js";import{va as S}from"./chunk-MFSWGIIO.js";import{a as d}from"./chunk-DYBLNUKQ.js";import{c as i,d as l,e as b,g as h}from"./chunk-PXW4CVT7.js";import{B as n,a as c,b as u,na as g,ta as a}from"./chunk-O6QGGAL6.js";var v=new l(()=>!1);var I=new l(()=>"");var U=class p{http=a(h);urlService=a(d);fb=a(S);config=a(m);crawlWeb(t){let e=`${this.urlService.URLS.ADMIN}/crawler`;return this.http.post(e,t)}getContainers(){let t=`${this.urlService.URLS.ADMIN}/get-containers`;return this.http.get(t).pipe(n(e=>e.containers))}getLegalContainers(){let t=`${this.urlService.URLS.ADMIN}/get-legal-containers`;return this.http.get(t).pipe(n(e=>e.containers))}getSubfolder(t){let e=`${this.urlService.URLS.ADMIN}/get-subfolders/${t}`;return this.http.post(e,null).pipe(n(r=>r.subfolders))}deleteSubfolder(t,e){let r=`${this.urlService.URLS.ADMIN}/delete-subfolder`,s=new i().appendAll({container_name:t,subfolder_name:e});return this.http.delete(r,{params:s})}deleteByMetadata(t,e){let r=`${this.urlService.URLS.ADMIN}/delete-blob-by-metadata`,s=new i().appendAll({metadata_key:t,metadata_value:e});return this.http.delete(r,{params:s})}deleteByListOfTitles(t,e,r){let s=`${this.urlService.URLS.ADMIN}/delete-blob-by-list-of-titles`,o=new i().appendAll({container_name:t,subfolder_name:e});return this.http.delete(s,{params:o,body:r})}getBlobs(t,e){let r=`${this.urlService.URLS.ADMIN}/get-blobs/${t}`,s=new i().append("subfolder_name",e);return this.http.post(r,null,{params:s}).pipe(n(o=>o.blobs))}uploadBlobs(t,e){let r=`${this.urlService.URLS.ADMIN}/upload-blobs`,s=new i({fromObject:e}),o=new FormData;return t.forEach(C=>{o.append("files",C)}),this.http.post(r,o,{params:s})}downloadBlob(t,e){let r=`${this.urlService.URLS.ADMIN}/download-blob`,s=new i().set("container_name",t).set("blob_name",e);return this.http.post(r,null,{params:s})}getIndexInfo(t){let e=`${this.urlService.URLS.ADMIN}/index-info/${t}`;return this.http.get(e)}getIndexes(){let t=`${this.urlService.URLS.ADMIN}/indexes-name`;return this.http.get(t).pipe(n(e=>e.indexes))}resetIndex(t,e="chunk_id",r){let s=`${this.urlService.URLS.ADMIN}/reset-index/${t}`,o=new i;return r&&(o=new i().append("key",e).append("value",r)),this.http.post(s,null,{params:o})}runIndexer(t){let e=`${this.urlService.URLS.ADMIN}/run-indexer/${t}`;return this.http.post(e,null)}secureUrl(t){let e=`${this.urlService.URLS.ADMIN}/sas-token`,r=new i().append("blob_url",t);return this.http.get(e,{params:r})}createUrlGroup(){return this.fb.group({link:this.fb.control(""),headers:this.fb.array([]),cookies:this.fb.array([]),payload:this.fb.array([]),settings:this.createSettingsGroup()})}createSettingsGroup(){return this.fb.group({deep:this.fb.control(!1),selectors:this.fb.control([]),mediaCrawling:this.fb.control(!1),containerName:this.fb.control("rera-storage")})}getReportsCount(){let t=`${this.urlService.URLS.ADMIN}/get-blobs/rera-media-reports`;return this.http.post(t,null).pipe(n(e=>e.blobs.length))}getUrlsCount(){let t=`${this.urlService.URLS.ADMIN}/get-blobs/rera-media`;return this.http.post(t,null).pipe(n(e=>e.blobs.length))}getCrawlingStatistics(){let t=`${this.urlService.URLS.ADMIN}/get-subfolders-blobs/rera-media`;return this.http.get(t)}getSettingsByEntityName(){let t=this.config.CONFIG.ENTITY_NAME,e=`${this.urlService.URLS.ADMIN}/settings/${t}`;return this.http.get(e)}getCrawlingData(){return this.getSettingsByEntityName().pipe(n(t=>t.at(0).crawling_urls))}getXCrawlingData(){return this.getSettingsByEntityName().pipe(n(t=>t.at(0).media_settings.x_crawling.map(e=>u(c({},e),{id:f()}))))}scheduleUrl(t,e){let r=`${this.urlService.URLS.ADMIN}/settings/schedule`;return this.http.put(r,t,{context:new b().set(v,!0).set(I,e)})}updateXScheduleSettings(t){let e=`${this.urlService.URLS.ADMIN}/settings/x`;return this.http.put(e,t)}static \u0275fac=function(e){return new(e||p)};static \u0275prov=g({token:p,factory:p.\u0275fac,providedIn:"root"})};export{v as a,I as b,U as c};
