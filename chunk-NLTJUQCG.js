import{$ as EC,Z as bC,a as mC,aa as IC,c as yC,g as SC,h as Ih,ha as Rs,i as _h,ka as _C,n as CC,u as PC,v as RC,w as wC,x as Th}from"./chunk-JML6SUSJ.js";import{$ as Ur,Bb as iC,Da as XS,Db as nC,Eb as wh,Ha as ZS,Jc as fC,La as Ps,Mb as bh,Nb as sC,Oc as vC,Qb as oC,Ra as eC,Rc as gC,Sb as Eh,Xb as aC,Yb as cC,Zb as uC,a as sr,b as VS,cc as pC,d as l,dc as lC,f as ye,fa as KS,g as f,ha as Ph,hb as tC,hc as hC,ib as Ue,ka as Rh,n as Cs,oa as JS,pa as GS,pb as rC,qa as $S,xa as QS,xc as dC,ya as YS}from"./chunk-NMJA3KYW.js";var Oh=l(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.default=PO;var Ko,CO=new Uint8Array(16);function PO(){if(!Ko&&(Ko=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ko))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ko(CO)}});var TC=l(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=void 0;var RO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Jo.default=RO});var ws=l(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.default=void 0;var wO=bO(TC());function bO(r){return r&&r.__esModule?r:{default:r}}function EO(r){return typeof r=="string"&&wO.default.test(r)}var IO=EO;Go.default=IO});var Es=l(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.default=void 0;bs.unsafeStringify=AC;var _O=TO(ws());function TO(r){return r&&r.__esModule?r:{default:r}}var Me=[];for(let r=0;r<256;++r)Me.push((r+256).toString(16).slice(1));function AC(r,e=0){return Me[r[e+0]]+Me[r[e+1]]+Me[r[e+2]]+Me[r[e+3]]+"-"+Me[r[e+4]]+Me[r[e+5]]+"-"+Me[r[e+6]]+Me[r[e+7]]+"-"+Me[r[e+8]]+Me[r[e+9]]+"-"+Me[r[e+10]]+Me[r[e+11]]+Me[r[e+12]]+Me[r[e+13]]+Me[r[e+14]]+Me[r[e+15]]}function AO(r,e=0){let t=AC(r,e);if(!(0,_O.default)(t))throw TypeError("Stringified UUID is invalid");return t}var OO=AO;bs.default=OO});var MC=l($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var MO=xO(Oh()),DO=Es();function xO(r){return r&&r.__esModule?r:{default:r}}var OC,Mh,Dh=0,xh=0;function qO(r,e,t){let i=e&&t||0,n=e||new Array(16);r=r||{};let s=r.node||OC,o=r.clockseq!==void 0?r.clockseq:Mh;if(s==null||o==null){let d=r.random||(r.rng||MO.default)();s==null&&(s=OC=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=Mh=(d[6]<<8|d[7])&16383)}let a=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:xh+1,u=a-Dh+(c-xh)/1e4;if(u<0&&r.clockseq===void 0&&(o=o+1&16383),(u<0||a>Dh)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dh=a,xh=c,Mh=o,a+=122192928e5;let p=((a&268435455)*1e4+c)%4294967296;n[i++]=p>>>24&255,n[i++]=p>>>16&255,n[i++]=p>>>8&255,n[i++]=p&255;let h=a/4294967296*1e4&268435455;n[i++]=h>>>8&255,n[i++]=h&255,n[i++]=h>>>24&15|16,n[i++]=h>>>16&255,n[i++]=o>>>8|128,n[i++]=o&255;for(let d=0;d<6;++d)n[i+d]=s[d];return e||(0,DO.unsafeStringify)(n)}var NO=qO;$o.default=NO});var qh=l(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.default=void 0;var jO=kO(ws());function kO(r){return r&&r.__esModule?r:{default:r}}function zO(r){if(!(0,jO.default)(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var LO=zO;Qo.default=LO});var Nh=l(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.URL=Ci.DNS=void 0;Ci.default=HO;var FO=Es(),BO=UO(qh());function UO(r){return r&&r.__esModule?r:{default:r}}function WO(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var DC="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ci.DNS=DC;var xC="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ci.URL=xC;function HO(r,e,t){function i(n,s,o,a){var c;if(typeof n=="string"&&(n=WO(n)),typeof s=="string"&&(s=(0,BO.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+n.length);if(u.set(s),u.set(n,s.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let p=0;p<16;++p)o[a+p]=u[p];return o}return(0,FO.unsafeStringify)(u)}try{i.name=r}catch{}return i.DNS=DC,i.URL=xC,i}});var NC=l(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.default=void 0;function VO(r){if(typeof r=="string"){let e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return KO(JO(GO(r),r.length*8))}function KO(r){let e=[],t=r.length*32,i="0123456789abcdef";for(let n=0;n<t;n+=8){let s=r[n>>5]>>>n%32&255,o=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);e.push(o)}return e}function qC(r){return(r+64>>>9<<4)+14+1}function JO(r,e){r[e>>5]|=128<<e%32,r[qC(e)-1]=e;let t=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<r.length;o+=16){let a=t,c=i,u=n,p=s;t=We(t,i,n,s,r[o],7,-680876936),s=We(s,t,i,n,r[o+1],12,-389564586),n=We(n,s,t,i,r[o+2],17,606105819),i=We(i,n,s,t,r[o+3],22,-1044525330),t=We(t,i,n,s,r[o+4],7,-176418897),s=We(s,t,i,n,r[o+5],12,1200080426),n=We(n,s,t,i,r[o+6],17,-1473231341),i=We(i,n,s,t,r[o+7],22,-45705983),t=We(t,i,n,s,r[o+8],7,1770035416),s=We(s,t,i,n,r[o+9],12,-1958414417),n=We(n,s,t,i,r[o+10],17,-42063),i=We(i,n,s,t,r[o+11],22,-1990404162),t=We(t,i,n,s,r[o+12],7,1804603682),s=We(s,t,i,n,r[o+13],12,-40341101),n=We(n,s,t,i,r[o+14],17,-1502002290),i=We(i,n,s,t,r[o+15],22,1236535329),t=He(t,i,n,s,r[o+1],5,-165796510),s=He(s,t,i,n,r[o+6],9,-1069501632),n=He(n,s,t,i,r[o+11],14,643717713),i=He(i,n,s,t,r[o],20,-373897302),t=He(t,i,n,s,r[o+5],5,-701558691),s=He(s,t,i,n,r[o+10],9,38016083),n=He(n,s,t,i,r[o+15],14,-660478335),i=He(i,n,s,t,r[o+4],20,-405537848),t=He(t,i,n,s,r[o+9],5,568446438),s=He(s,t,i,n,r[o+14],9,-1019803690),n=He(n,s,t,i,r[o+3],14,-187363961),i=He(i,n,s,t,r[o+8],20,1163531501),t=He(t,i,n,s,r[o+13],5,-1444681467),s=He(s,t,i,n,r[o+2],9,-51403784),n=He(n,s,t,i,r[o+7],14,1735328473),i=He(i,n,s,t,r[o+12],20,-1926607734),t=Ve(t,i,n,s,r[o+5],4,-378558),s=Ve(s,t,i,n,r[o+8],11,-2022574463),n=Ve(n,s,t,i,r[o+11],16,1839030562),i=Ve(i,n,s,t,r[o+14],23,-35309556),t=Ve(t,i,n,s,r[o+1],4,-1530992060),s=Ve(s,t,i,n,r[o+4],11,1272893353),n=Ve(n,s,t,i,r[o+7],16,-155497632),i=Ve(i,n,s,t,r[o+10],23,-1094730640),t=Ve(t,i,n,s,r[o+13],4,681279174),s=Ve(s,t,i,n,r[o],11,-358537222),n=Ve(n,s,t,i,r[o+3],16,-722521979),i=Ve(i,n,s,t,r[o+6],23,76029189),t=Ve(t,i,n,s,r[o+9],4,-640364487),s=Ve(s,t,i,n,r[o+12],11,-421815835),n=Ve(n,s,t,i,r[o+15],16,530742520),i=Ve(i,n,s,t,r[o+2],23,-995338651),t=Ke(t,i,n,s,r[o],6,-198630844),s=Ke(s,t,i,n,r[o+7],10,1126891415),n=Ke(n,s,t,i,r[o+14],15,-1416354905),i=Ke(i,n,s,t,r[o+5],21,-57434055),t=Ke(t,i,n,s,r[o+12],6,1700485571),s=Ke(s,t,i,n,r[o+3],10,-1894986606),n=Ke(n,s,t,i,r[o+10],15,-1051523),i=Ke(i,n,s,t,r[o+1],21,-2054922799),t=Ke(t,i,n,s,r[o+8],6,1873313359),s=Ke(s,t,i,n,r[o+15],10,-30611744),n=Ke(n,s,t,i,r[o+6],15,-1560198380),i=Ke(i,n,s,t,r[o+13],21,1309151649),t=Ke(t,i,n,s,r[o+4],6,-145523070),s=Ke(s,t,i,n,r[o+11],10,-1120210379),n=Ke(n,s,t,i,r[o+2],15,718787259),i=Ke(i,n,s,t,r[o+9],21,-343485551),t=Wr(t,a),i=Wr(i,c),n=Wr(n,u),s=Wr(s,p)}return[t,i,n,s]}function GO(r){if(r.length===0)return[];let e=r.length*8,t=new Uint32Array(qC(e));for(let i=0;i<e;i+=8)t[i>>5]|=(r[i/8]&255)<<i%32;return t}function Wr(r,e){let t=(r&65535)+(e&65535);return(r>>16)+(e>>16)+(t>>16)<<16|t&65535}function $O(r,e){return r<<e|r>>>32-e}function Yo(r,e,t,i,n,s){return Wr($O(Wr(Wr(e,r),Wr(i,s)),n),t)}function We(r,e,t,i,n,s,o){return Yo(e&t|~e&i,r,e,n,s,o)}function He(r,e,t,i,n,s,o){return Yo(e&i|t&~i,r,e,n,s,o)}function Ve(r,e,t,i,n,s,o){return Yo(e^t^i,r,e,n,s,o)}function Ke(r,e,t,i,n,s,o){return Yo(t^(e|~i),r,e,n,s,o)}var QO=VO;Xo.default=QO});var kC=l(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;var YO=jC(Nh()),XO=jC(NC());function jC(r){return r&&r.__esModule?r:{default:r}}var ZO=(0,YO.default)("v3",48,XO.default),eM=ZO;Zo.default=eM});var zC=l(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.default=void 0;var tM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rM={randomUUID:tM};ea.default=rM});var BC=l(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.default=void 0;var LC=FC(zC()),iM=FC(Oh()),nM=Es();function FC(r){return r&&r.__esModule?r:{default:r}}function sM(r,e,t){if(LC.default.randomUUID&&!e&&!r)return LC.default.randomUUID();r=r||{};let i=r.random||(r.rng||iM.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,nM.unsafeStringify)(i)}var oM=sM;ta.default=oM});var UC=l(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.default=void 0;function aM(r,e,t,i){switch(r){case 0:return e&t^~e&i;case 1:return e^t^i;case 2:return e&t^e&i^t&i;case 3:return e^t^i}}function jh(r,e){return r<<e|r>>>32-e}function cM(r){let e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){let o=unescape(encodeURIComponent(r));r=[];for(let a=0;a<o.length;++a)r.push(o.charCodeAt(a))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);let i=r.length/4+2,n=Math.ceil(i/16),s=new Array(n);for(let o=0;o<n;++o){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=r[o*64+c*4]<<24|r[o*64+c*4+1]<<16|r[o*64+c*4+2]<<8|r[o*64+c*4+3];s[o]=a}s[n-1][14]=(r.length-1)*8/Math.pow(2,32),s[n-1][14]=Math.floor(s[n-1][14]),s[n-1][15]=(r.length-1)*8&4294967295;for(let o=0;o<n;++o){let a=new Uint32Array(80);for(let v=0;v<16;++v)a[v]=s[o][v];for(let v=16;v<80;++v)a[v]=jh(a[v-3]^a[v-8]^a[v-14]^a[v-16],1);let c=t[0],u=t[1],p=t[2],h=t[3],d=t[4];for(let v=0;v<80;++v){let y=Math.floor(v/20),S=jh(c,5)+aM(y,u,p,h)+d+e[y]+a[v]>>>0;d=h,h=p,p=jh(u,30)>>>0,u=c,c=S}t[0]=t[0]+c>>>0,t[1]=t[1]+u>>>0,t[2]=t[2]+p>>>0,t[3]=t[3]+h>>>0,t[4]=t[4]+d>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var uM=cM;ra.default=uM});var HC=l(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.default=void 0;var pM=WC(Nh()),lM=WC(UC());function WC(r){return r&&r.__esModule?r:{default:r}}var hM=(0,pM.default)("v5",80,lM.default),dM=hM;ia.default=dM});var VC=l(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.default=void 0;var fM="00000000-0000-0000-0000-000000000000";na.default=fM});var KC=l(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var vM=gM(ws());function gM(r){return r&&r.__esModule?r:{default:r}}function mM(r){if(!(0,vM.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}var yM=mM;sa.default=yM});var JC=l(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Object.defineProperty(Wt,"NIL",{enumerable:!0,get:function(){return wM.default}});Object.defineProperty(Wt,"parse",{enumerable:!0,get:function(){return _M.default}});Object.defineProperty(Wt,"stringify",{enumerable:!0,get:function(){return IM.default}});Object.defineProperty(Wt,"v1",{enumerable:!0,get:function(){return SM.default}});Object.defineProperty(Wt,"v3",{enumerable:!0,get:function(){return CM.default}});Object.defineProperty(Wt,"v4",{enumerable:!0,get:function(){return PM.default}});Object.defineProperty(Wt,"v5",{enumerable:!0,get:function(){return RM.default}});Object.defineProperty(Wt,"validate",{enumerable:!0,get:function(){return EM.default}});Object.defineProperty(Wt,"version",{enumerable:!0,get:function(){return bM.default}});var SM=Er(MC()),CM=Er(kC()),PM=Er(BC()),RM=Er(HC()),wM=Er(VC()),bM=Er(KC()),EM=Er(ws()),IM=Er(Es()),_M=Er(qh());function Er(r){return r&&r.__esModule?r:{default:r}}});var Hr=l(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.createNoDashGuid=ln.createGuid=void 0;var TM=JC(),GC=()=>TM.v4();ln.createGuid=GC;var AM=()=>GC().replace(new RegExp("-","g"),"").toUpperCase();ln.createNoDashGuid=AM});var hn=l(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.PlatformEvent=Pi.EventType=void 0;var OM=Hr(),MM;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(MM=Pi.EventType||(Pi.EventType={}));var kh=class{constructor(e,t){this.privName=e,this.privEventId=OM.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}};Pi.PlatformEvent=kh});var $C=l(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.AudioStreamNodeErrorEvent=he.AudioStreamNodeDetachedEvent=he.AudioStreamNodeAttachedEvent=he.AudioStreamNodeAttachingEvent=he.AudioStreamNodeEvent=he.AudioSourceErrorEvent=he.AudioSourceOffEvent=he.AudioSourceReadyEvent=he.AudioSourceInitializingEvent=he.AudioSourceEvent=void 0;var zh=hn(),Vr=class extends zh.PlatformEvent{constructor(e,t,i=zh.EventType.Info){super(e,i),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}};he.AudioSourceEvent=Vr;var Lh=class extends Vr{constructor(e){super("AudioSourceInitializingEvent",e)}};he.AudioSourceInitializingEvent=Lh;var Fh=class extends Vr{constructor(e){super("AudioSourceReadyEvent",e)}};he.AudioSourceReadyEvent=Fh;var Bh=class extends Vr{constructor(e){super("AudioSourceOffEvent",e)}};he.AudioSourceOffEvent=Bh;var Uh=class extends Vr{constructor(e,t){super("AudioSourceErrorEvent",e,zh.EventType.Error),this.privError=t}get error(){return this.privError}};he.AudioSourceErrorEvent=Uh;var Ri=class extends Vr{constructor(e,t,i){super(e,t),this.privAudioNodeId=i}get audioNodeId(){return this.privAudioNodeId}};he.AudioStreamNodeEvent=Ri;var Wh=class extends Ri{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}};he.AudioStreamNodeAttachingEvent=Wh;var Hh=class extends Ri{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}};he.AudioStreamNodeAttachedEvent=Hh;var Vh=class extends Ri{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}};he.AudioStreamNodeDetachedEvent=Vh;var Kh=class extends Ri{constructor(e,t,i){super("AudioStreamNodeErrorEvent",e,t),this.privError=i}get error(){return this.privError}};he.AudioStreamNodeErrorEvent=Kh});var QC=l(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.ConnectionMessageSentEvent=Se.ConnectionMessageReceivedEvent=Se.ConnectionEstablishErrorEvent=Se.ConnectionErrorEvent=Se.ConnectionClosedEvent=Se.ConnectionEstablishedEvent=Se.ConnectionStartEvent=Se.ConnectionEvent=Se.ServiceEvent=void 0;var wi=hn(),Jh=class extends wi.PlatformEvent{constructor(e,t,i=wi.EventType.Info){super(e,i),this.privJsonResult=t}get jsonString(){return this.privJsonResult}};Se.ServiceEvent=Jh;var or=class extends wi.PlatformEvent{constructor(e,t,i=wi.EventType.Info){super(e,i),this.privConnectionId=t}get connectionId(){return this.privConnectionId}};Se.ConnectionEvent=or;var Gh=class extends or{constructor(e,t,i){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=i}get uri(){return this.privUri}get headers(){return this.privHeaders}};Se.ConnectionStartEvent=Gh;var $h=class extends or{constructor(e){super("ConnectionEstablishedEvent",e)}};Se.ConnectionEstablishedEvent=$h;var Qh=class extends or{constructor(e,t,i){super("ConnectionClosedEvent",e,wi.EventType.Debug),this.privReason=i,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};Se.ConnectionClosedEvent=Qh;var Yh=class extends or{constructor(e,t,i){super("ConnectionErrorEvent",e,wi.EventType.Debug),this.privMessage=t,this.privType=i}get message(){return this.privMessage}get type(){return this.privType}};Se.ConnectionErrorEvent=Yh;var Xh=class extends or{constructor(e,t,i){super("ConnectionEstablishErrorEvent",e,wi.EventType.Error),this.privStatusCode=t,this.privReason=i}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};Se.ConnectionEstablishErrorEvent=Xh;var Zh=class extends or{constructor(e,t,i){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=i}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};Se.ConnectionMessageReceivedEvent=Zh;var ed=class extends or{constructor(e,t,i){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=i}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}};Se.ConnectionMessageSentEvent=ed});var Ht=l(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ObjectDisposedError=Kr.InvalidOperationError=Kr.ArgumentNullError=void 0;var td=class extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}};Kr.ArgumentNullError=td;var rd=class extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}};Kr.InvalidOperationError=rd;var id=class extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}};Kr.ObjectDisposedError=id});var sd=l(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.ConnectionMessage=Ei.MessageType=void 0;var oa=Ht(),DM=Hr(),bi;(function(r){r[r.Text=0]="Text",r[r.Binary=1]="Binary"})(bi=Ei.MessageType||(Ei.MessageType={}));var nd=class{constructor(e,t,i,n){if(this.privBody=null,e===bi.Text&&t&&typeof t!="string")throw new oa.InvalidOperationError("Payload must be a string");if(e===bi.Binary&&t&&!(t instanceof ArrayBuffer))throw new oa.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=i||{},this.privId=n||DM.createNoDashGuid(),this.messageType){case bi.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case bi.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===bi.Binary)throw new oa.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===bi.Text)throw new oa.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}};Ei.ConnectionMessage=nd});var YC=l(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.ConnectionOpenResponse=void 0;var od=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};aa.ConnectionOpenResponse=od});var XC=l(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.DeferralMap=void 0;var ad=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(i){this.privMap[e].reject(i)}finally{this.privMap[e]=void 0}}};ca.DeferralMap=ad});var ud=l(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.SendingAgentContextMessageEvent=dn.DialogEvent=void 0;var ZC=hn(),ua=class extends ZC.PlatformEvent{constructor(e,t=ZC.EventType.Info){super(e,t)}};dn.DialogEvent=ua;var cd=class extends ua{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};dn.SendingAgentContextMessageEvent=cd});var ld=l(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.EventSource=void 0;var xM=Ht(),qM=Hr(),pd=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new xM.ObjectDisposedError("EventSource");if(this.metadata)for(let t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(let t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){let t=qM.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach(t=>e.onEvent(t))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(t=>e.onEvent(t)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};pa.EventSource=pd});var eP=l(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.Events=void 0;var NM=Ht(),jM=ld(),la=class r{static setEventSource(e){if(!e)throw new NM.ArgumentNullError("eventSource");r.privInstance=e}static get instance(){return r.privInstance}};ha.Events=la;la.privInstance=new jM.EventSource});var rP=l(tP=>{"use strict";Object.defineProperty(tP,"__esModule",{value:!0})});var iP=l(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.ConnectionState=void 0;var kM;(function(r){r[r.None=0]="None",r[r.Connected=1]="Connected",r[r.Connecting=2]="Connecting",r[r.Disconnected=3]="Disconnected"})(kM=Is.ConnectionState||(Is.ConnectionState={}))});var sP=l(nP=>{"use strict";Object.defineProperty(nP,"__esModule",{value:!0})});var aP=l(oP=>{"use strict";Object.defineProperty(oP,"__esModule",{value:!0})});var uP=l(cP=>{"use strict";Object.defineProperty(cP,"__esModule",{value:!0})});var lP=l(pP=>{"use strict";Object.defineProperty(pP,"__esModule",{value:!0})});var dP=l(hP=>{"use strict";Object.defineProperty(hP,"__esModule",{value:!0})});var vP=l(fP=>{"use strict";Object.defineProperty(fP,"__esModule",{value:!0})});var mP=l(gP=>{"use strict";Object.defineProperty(gP,"__esModule",{value:!0})});var SP=l(yP=>{"use strict";Object.defineProperty(yP,"__esModule",{value:!0})});var dd=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.List=void 0;var zM=Ht(),hd=class r{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(let t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),e===0?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();let i=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),i}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();let t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){let e=Array();return this.privList.forEach(t=>{e.push(t)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();let t=[];for(let i=0;i<this.privList.length;i++)t.push(e(this.privList[i],i));return new r(t)}where(e){this.throwIfDisposed();let t=new r;for(let i=0;i<this.privList.length;i++)e(this.privList[i],i)&&t.add(this.privList[i]);return t}orderBy(e){this.throwIfDisposed();let i=this.toArray().sort(e);return new r(i)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((t,i)=>e(i,t))}clone(){return this.throwIfDisposed(),new r(this.toArray())}concat(e){return this.throwIfDisposed(),new r(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new r(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new zM.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(let t in e)t&&e[t]()}};da.List=hd});var gd=l(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.marshalPromiseToCallbacks=rt.Sink=rt.Deferred=rt.PromiseResultEventSource=rt.PromiseResult=rt.PromiseState=void 0;var Ir;(function(r){r[r.None=0]="None",r[r.Resolved=1]="Resolved",r[r.Rejected=2]="Rejected"})(Ir=rt.PromiseState||(rt.PromiseState={}));var fa=class{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(t=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=t)},t=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=t)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}};rt.PromiseResult=fa;var va=class{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}};rt.PromiseResultEventSource=va;var fd=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,t)=>{this.privResolve=e,this.privReject=t})}get promise(){return this.privPromise}};rt.Deferred=fd;var vd=class{constructor(){this.privState=Ir.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new va,this.privPromiseResult=new fa(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==Ir.None)throw new Error("'Cannot resolve a completed promise'");this.privState=Ir.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==Ir.None)throw new Error("'Cannot reject a completed promise'");this.privState=Ir.Rejected,this.privPromiseResultEvents.setError(e);for(let t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,t){e==null&&(e=()=>{}),this.privState===Ir.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===Ir.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===Ir.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())}executeSuccessCallback(e,t,i){try{t(e)}catch(n){this.executeErrorCallback(`'Unhandled callback error: ${n}'`,i)}}executeErrorCallback(e,t){if(t)try{t(e)}catch(i){throw new Error(`'Unhandled callback error: ${i}. InnerError: ${e}'`)}else throw new Error(`'Unhandled error: ${e}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}};rt.Sink=vd;function LM(r,e,t){r.then(i=>{try{e&&e(i)}catch(n){if(t)try{if(n instanceof Error){let s=n;t(s.name+": "+s.message)}else t(n)}catch{}}},i=>{if(t)try{if(i instanceof Error){let n=i;t(n.name+": "+n.message)}else t(i)}catch{}})}rt.marshalPromiseToCallbacks=LM});var Cd=l(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.Queue=void 0;var md=Ht(),yd=dd(),CP=gd(),ga=function(r){return r[r.Dequeue=0]="Dequeue",r[r.Peek=1]="Peek",r}(ga||{}),Sd=class{constructor(e){this.privPromiseStore=new yd.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new yd.List,this.privDetachables=[],this.privSubscribers=new yd.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(t=>t(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(t=>{this.privList.add(t)},()=>{})}dequeue(){this.throwIfDispose();let e=new CP.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:ga.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();let e=new CP.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:ga.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}drainAndDispose(e,t){return f(this,null,function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;let i=this.privSubscribers;if(i){for(;i.length()>0;)i.removeFirst().deferral.resolve(void 0);this.privSubscribers===i&&(this.privSubscribers=i)}for(let n of this.privDetachables)yield n.detach();if(this.privPromiseStore.length()>0&&e){let n=[];return this.privPromiseStore.toArray().forEach(s=>{n.push(s)}),Promise.all(n).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}})}dispose(e){return f(this,null,function*(){yield this.drainAndDispose(null,e)})}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){let i=e.removeFirst();if(i.type===ga.Peek)i.deferral.resolve(t.first());else{let n=t.removeFirst();i.deferral.resolve(n)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new md.InvalidOperationError(this.privDisposeReason):new md.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new md.InvalidOperationError("Queue disposing")}};ma.Queue=Sd});var PP=l(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.RawWebsocketMessage=void 0;var ya=sd(),_s=Ht(),FM=Hr(),Pd=class{constructor(e,t,i){if(this.privPayload=null,!t)throw new _s.ArgumentNullError("payload");if(e===ya.MessageType.Binary&&Object.getPrototypeOf(t).constructor.name!=="ArrayBuffer")throw new _s.InvalidOperationError("Payload must be ArrayBuffer");if(e===ya.MessageType.Text&&typeof t!="string")throw new _s.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||FM.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ya.MessageType.Binary)throw new _s.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ya.MessageType.Text)throw new _s.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};Sa.RawWebsocketMessage=Pd});var RP=l(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.RiffPcmEncoder=void 0;var Rd=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){let t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;let i=t.length*2,n=new ArrayBuffer(i),s=new DataView(n);return this.floatTo16BitPCM(s,0,t),n}setString(e,t,i){for(let n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))}floatTo16BitPCM(e,t,i){for(let n=0;n<i.length;n++,t+=2){let s=Math.max(-1,Math.min(1,i[n]));e.setInt16(t,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,t,i){if(!e)return null;if(i===t||i>t)return e;let n=t/i,s=Math.round(e.length/n),o=new Float32Array(s),a=0,c=0;for(;c<s;){let u=Math.round((c+1)*n),p=0,h=0;for(;a<u&&a<e.length;)p+=e[a++],h++;o[c++]=p/h}return o}};Ca.RiffPcmEncoder=Rd});var EP=l(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.Stream=void 0;var wP=Ht(),BM=Hr(),bP=Cd(),wd=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||BM.createNoDashGuid(),this.privReaderQueue=new bP.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new wP.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(e=>f(this,null,function*(){return(e===void 0||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new bP.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new wP.InvalidOperationError("Stream closed")}};Pa.Stream=wd});var Ra=l(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.TranslationStatus=void 0;var UM;(function(r){r[r.Success=0]="Success",r[r.Error=1]="Error"})(UM=Ts.TranslationStatus||(Ts.TranslationStatus={}))});var IP=l(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.ChunkedArrayBufferStream=void 0;var WM=A(),bd=class extends WM.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||this.privNextBufferReadyBytes===0&&e.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(e);return}let t=0;for(;t<e.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);let i=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),n=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(e.buffer.slice(t,i+t));n.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=i,t+=i,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};wa.ChunkedArrayBufferStream=bd});var TP=l(_P=>{"use strict";Object.defineProperty(_P,"__esModule",{value:!0})});var AP=l(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.Timeout=void 0;var ar=class r{static load(){let e=new Map([[0,()=>{}]]),t=new Map,n="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(n);return s.addEventListener("message",({data:c})=>{if(r.isCallNotification(c)){let{params:{timerId:u}}=c,p=e.get(u);if(typeof p=="number"){let h=t.get(p);if(h===void 0||h!==u)throw new Error("The timer is in an undefined state.")}else if(typeof p<"u")p(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(r.isClearResponse(c)){let{id:u}=c,p=t.get(u);if(p===void 0)throw new Error("The timer is in an undefined state.");t.delete(u),e.delete(p)}else{let{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{let u=Math.random();t.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{let p=Math.random();return e.set(p,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p}}),p}}}static loadWorkerTimers(){return()=>(r.workerTimers!==null||(r.workerTimers=r.load()),r.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}};ba.Timeout=ar;ar.workerTimers=null;ar.clearTimeout=r=>ar.timers().clearTimeout(r);ar.setTimeout=(r,e)=>ar.timers().setTimeout(r,e);ar.timers=ar.loadWorkerTimers()});var OP=l(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.OCSPCacheUpdateErrorEvent=W.OCSPResponseRetrievedEvent=W.OCSPCacheFetchErrorEvent=W.OCSPVerificationFailedEvent=W.OCSPCacheHitEvent=W.OCSPCacheEntryNeedsRefreshEvent=W.OCSPCacheEntryExpiredEvent=W.OCSPWSUpgradeStartedEvent=W.OCSPStapleReceivedEvent=W.OCSPCacheUpdateCompleteEvent=W.OCSPDiskCacheStoreEvent=W.OCSPMemoryCacheStoreEvent=W.OCSPCacheUpdateNeededEvent=W.OCSPDiskCacheHitEvent=W.OCSPCacheMissEvent=W.OCSPMemoryCacheHitEvent=W.OCSPEvent=void 0;var De=hn(),we=class extends De.PlatformEvent{constructor(e,t,i){super(e,t),this.privSignature=i}};W.OCSPEvent=we;var Ed=class extends we{constructor(e){super("OCSPMemoryCacheHitEvent",De.EventType.Debug,e)}};W.OCSPMemoryCacheHitEvent=Ed;var Id=class extends we{constructor(e){super("OCSPCacheMissEvent",De.EventType.Debug,e)}};W.OCSPCacheMissEvent=Id;var _d=class extends we{constructor(e){super("OCSPDiskCacheHitEvent",De.EventType.Debug,e)}};W.OCSPDiskCacheHitEvent=_d;var Td=class extends we{constructor(e){super("OCSPCacheUpdateNeededEvent",De.EventType.Debug,e)}};W.OCSPCacheUpdateNeededEvent=Td;var Ad=class extends we{constructor(e){super("OCSPMemoryCacheStoreEvent",De.EventType.Debug,e)}};W.OCSPMemoryCacheStoreEvent=Ad;var Od=class extends we{constructor(e){super("OCSPDiskCacheStoreEvent",De.EventType.Debug,e)}};W.OCSPDiskCacheStoreEvent=Od;var Md=class extends we{constructor(e){super("OCSPCacheUpdateCompleteEvent",De.EventType.Debug,e)}};W.OCSPCacheUpdateCompleteEvent=Md;var Dd=class extends we{constructor(){super("OCSPStapleReceivedEvent",De.EventType.Debug,"")}};W.OCSPStapleReceivedEvent=Dd;var xd=class extends we{constructor(e){super("OCSPWSUpgradeStartedEvent",De.EventType.Debug,e)}};W.OCSPWSUpgradeStartedEvent=xd;var qd=class extends we{constructor(e,t){super("OCSPCacheEntryExpiredEvent",De.EventType.Debug,e),this.privExpireTime=t}};W.OCSPCacheEntryExpiredEvent=qd;var Nd=class extends we{constructor(e,t,i){super("OCSPCacheEntryNeedsRefreshEvent",De.EventType.Debug,e),this.privExpireTime=i,this.privStartTime=t}};W.OCSPCacheEntryNeedsRefreshEvent=Nd;var jd=class extends we{constructor(e,t,i){super("OCSPCacheHitEvent",De.EventType.Debug,e),this.privExpireTime=i,this.privExpireTimeString=new Date(i).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}};W.OCSPCacheHitEvent=jd;var kd=class extends we{constructor(e,t){super("OCSPVerificationFailedEvent",De.EventType.Debug,e),this.privError=t}};W.OCSPVerificationFailedEvent=kd;var zd=class extends we{constructor(e,t){super("OCSPCacheFetchErrorEvent",De.EventType.Debug,e),this.privError=t}};W.OCSPCacheFetchErrorEvent=zd;var Ld=class extends we{constructor(e){super("OCSPResponseRetrievedEvent",De.EventType.Debug,e)}};W.OCSPResponseRetrievedEvent=Ld;var Fd=class extends we{constructor(e,t){super("OCSPCacheUpdateErrorEvent",De.EventType.Debug,e),this.privError=t}};W.OCSPCacheUpdateErrorEvent=Fd});var DP=l(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.BackgroundEvent=void 0;var MP=A(),Bd=class extends MP.PlatformEvent{constructor(e){super("BackgroundEvent",MP.EventType.Error),this.privError=e}get error(){return this.privError}};Ea.BackgroundEvent=Bd});var A=l(L=>{"use strict";var HM=L&&L.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),G=L&&L.__exportStar||function(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&HM(e,r,t)};Object.defineProperty(L,"__esModule",{value:!0});G($C(),L);G(QC(),L);G(sd(),L);G(YC(),L);G(XC(),L);G(ud(),L);G(Ht(),L);G(eP(),L);G(ld(),L);G(Hr(),L);G(rP(),L);G(iP(),L);G(sP(),L);G(aP(),L);G(uP(),L);G(lP(),L);G(dP(),L);G(vP(),L);G(mP(),L);G(SP(),L);G(dd(),L);G(hn(),L);G(gd(),L);G(Cd(),L);G(PP(),L);G(RP(),L);G(EP(),L);var VM=Ra();Object.defineProperty(L,"TranslationStatus",{enumerable:!0,get:function(){return VM.TranslationStatus}});G(IP(),L);G(TP(),L);G(AP(),L);G(OP(),L);G(DP(),L)});var Je=l(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.HeaderNames=void 0;var gt=class{};Ia.HeaderNames=gt;gt.AuthKey="Ocp-Apim-Subscription-Key";gt.Authorization="Authorization";gt.SpIDAuthKey="Apim-Subscription-Id";gt.ConnectionId="X-ConnectionId";gt.ContentType="Content-Type";gt.CustomCommandsAppId="X-CommandsAppId";gt.Path="Path";gt.RequestId="X-RequestId";gt.RequestStreamId="X-StreamId";gt.RequestTimestamp="X-Timestamp"});var Ta=l(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.AuthInfo=void 0;var Ud=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}};_a.AuthInfo=Ud});var xP=l(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.CognitiveSubscriptionKeyAuthentication=void 0;var KM=A(),JM=Je(),GM=Ta(),Wd=class{constructor(e){if(!e)throw new KM.ArgumentNullError("subscriptionKey");this.privAuthInfo=new GM.AuthInfo(JM.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};Aa.CognitiveSubscriptionKeyAuthentication=Wd});var kP=l(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.CognitiveTokenAuthentication=void 0;var qP=A(),NP=Ta(),jP=Je(),Oa=class r{constructor(e,t){if(!e)throw new qP.ArgumentNullError("fetchCallback");if(!t)throw new qP.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then(t=>new NP.AuthInfo(jP.HeaderNames.Authorization,t===void 0?void 0:r.privTokenPrefix+t))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(t=>new NP.AuthInfo(jP.HeaderNames.Authorization,t===void 0?void 0:r.privTokenPrefix+t))}};Ma.CognitiveTokenAuthentication=Oa;Oa.privTokenPrefix="Bearer "});var LP=l(zP=>{"use strict";Object.defineProperty(zP,"__esModule",{value:!0})});var BP=l(FP=>{"use strict";Object.defineProperty(FP,"__esModule",{value:!0})});var Hd=l(()=>{"use strict"});var Vd=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.LogLevel=void 0;var $M=A();Object.defineProperty(Da,"LogLevel",{enumerable:!0,get:function(){return $M.EventType}})});var x=l(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.Contracts=void 0;var Kd=class r{static throwIfNullOrUndefined(e,t){if(e==null)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(e===null)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,i){if(r.throwIfNullOrUndefined(e,t),(""+e).length>i)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(e,t,i){if(r.throwIfNullOrUndefined(e,t),(""+e).length<i)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+i.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(let i of e)r.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){r.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(e!==void 0)throw new Error("throwIfNotUndefined:"+t)}};xa.Contracts=Kd});var WP=l(cr=>{"use strict";var QM=cr&&cr.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),YM=cr&&cr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XM=cr&&cr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&QM(e,r,t);return YM(e,r),e};Object.defineProperty(cr,"__esModule",{value:!0});cr.ConsoleLoggingListener=void 0;var UP=XM(Hd()),As=Vd(),ZM=x(),Jd=class{constructor(e=As.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){ZM.Contracts.throwIfNullOrUndefined(UP.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){let t=this.toString(e);if(this.logCallback&&this.logCallback(t),this.privLogPath&&UP.writeFileSync(this.privLogPath,t+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case As.LogLevel.Debug:console.debug(t);break;case As.LogLevel.Info:console.info(t);break;case As.LogLevel.Warning:console.warn(t);break;case As.LogLevel.Error:console.error(t);break;default:console.log(t);break}}}toString(e){let t=[`${e.eventTime}`,`${e.name}`],i=e;for(let n in i)if(n&&e.hasOwnProperty(n)&&n!=="eventTime"&&n!=="eventType"&&n!=="eventId"&&n!=="name"&&n!=="constructor"){let s=i[n],o="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?o=s.toString():o=JSON.stringify(s)),t.push(`${n}: ${o}`)}return t.join(" | ")}};cr.ConsoleLoggingListener=Jd});var VP=l(HP=>{"use strict";Object.defineProperty(HP,"__esModule",{value:!0})});var Jr=l(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.AudioStreamFormatImpl=_r.AudioStreamFormat=_r.AudioFormatTag=void 0;var Os;(function(r){r[r.PCM=1]="PCM",r[r.MuLaw=2]="MuLaw",r[r.Siren=3]="Siren",r[r.MP3=4]="MP3",r[r.SILKSkype=5]="SILKSkype",r[r.OGG_OPUS=6]="OGG_OPUS",r[r.WEBM_OPUS=7]="WEBM_OPUS",r[r.ALaw=8]="ALaw",r[r.FLAC=9]="FLAC",r[r.OPUS=10]="OPUS",r[r.AMR_WB=11]="AMR_WB",r[r.G722=12]="G722"})(Os=_r.AudioFormatTag||(_r.AudioFormatTag={}));var qa=class{static getDefaultInputFormat(){return fn.getDefaultInputFormat()}static getWaveFormat(e,t,i,n){return new fn(e,t,i,n)}static getWaveFormatPCM(e,t,i){return new fn(e,t,i)}};_r.AudioStreamFormat=qa;var fn=class r extends qa{constructor(e=16e3,t=16,i=1,n=Os.PCM){super();let s=!0;switch(n){case Os.PCM:this.formatTag=1;break;case Os.ALaw:this.formatTag=6;break;case Os.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);let o=new DataView(this.privHeader);this.setString(o,0,"RIFF"),o.setUint32(4,0,!0),this.setString(o,8,"WAVEfmt "),o.setUint32(16,16,!0),o.setUint16(20,this.formatTag,!0),o.setUint16(22,this.channels,!0),o.setUint32(24,this.samplesPerSec,!0),o.setUint32(28,this.avgBytesPerSec,!0),o.setUint16(32,this.channels*(this.bitsPerSample/8),!0),o.setUint16(34,this.bitsPerSample,!0),this.setString(o,36,"data"),o.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(e){let t=window.AudioContext||window.webkitAudioContext||!1;if(t)return e!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,i){for(let n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))}};_r.AudioStreamFormatImpl=fn});var GP=l(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.MicAudioSource=Ii.AudioWorkletSourceURLPropertyName=void 0;var KP=I(),xe=A(),JP=Jr();Ii.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var Na=class r{constructor(e,t,i,n){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=r.AUDIOFORMAT.avgBytesPerSec/10,this.privId=i||xe.createNoDashGuid(),this.privEvents=new xe.EventSource,this.privMediaStream=n||null,this.privIsClosing=!1}get format(){return Promise.resolve(r.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new xe.Deferred;try{this.createAudioContext()}catch(i){if(i instanceof Error){let n=i;this.privInitializeDeferral.reject(n.name+": "+n.message)}else this.privInitializeDeferral.reject(i);return this.privInitializeDeferral.promise}let e=window.navigator,t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(i,n,s)=>{e.mediaDevices.getUserMedia(i).then(n).catch(s)}),t){let i=()=>{this.onEvent(new xe.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new xe.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},n=>{this.privMediaStream=n,this.onEvent(new xe.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},n=>{let s=`Error occurred during microphone initialization: ${n}`;this.privInitializeDeferral.reject(s),this.onEvent(new xe.AudioSourceErrorEvent(this.privId,s))})};this.privContext.state==="suspended"?this.privContext.resume().then(i).catch(n=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${n}`)}):i()}else{let i="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(i),this.onEvent(new xe.AudioSourceErrorEvent(i,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new xe.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(t=>(this.onEvent(new xe.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>f(this,null,function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new xe.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new xe.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return f(this,null,function*(){for(let e in this.privStreams)if(e){let t=this.privStreams[e];t&&t.close()}this.onEvent(new xe.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()})}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:r.AUDIOFORMAT.bitsPerSample,channelcount:r.AUDIOFORMAT.channels,connectivity:KP.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:r.AUDIOFORMAT.samplesPerSec,type:KP.type.Microphones}))}setProperty(e,t){if(e===Ii.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(t);else throw new Error("Property '"+e+"' is not supported on Microphone.")}getMicrophoneLabel(){let e="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;let t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(t===void 0)return Promise.resolve(this.privMicrophoneLabel);let i=new xe.Deferred;return navigator.mediaDevices.enumerateDevices().then(n=>{for(let s of n)if(s.deviceId===t){this.privMicrophoneLabel=s.label;break}i.resolve(this.privMicrophoneLabel)},()=>i.resolve(this.privMicrophoneLabel)),i.promise}listen(e){return f(this,null,function*(){yield this.turnOn();let t=new xe.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(n){throw this.onEvent(new xe.AudioStreamNodeErrorEvent(this.privId,e,n)),n}return t})}onEvent(e){this.privEvents.onEvent(e),xe.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=JP.AudioStreamFormatImpl.getAudioContext(r.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return f(this,null,function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&(yield this.privContext.suspend())})}};Ii.MicAudioSource=Na;Na.AUDIOFORMAT=JP.AudioStreamFormat.getDefaultInputFormat()});var QP=l(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.FileAudioSource=void 0;var $P=I(),at=A(),eD=Jr(),Gd=class{constructor(e,t,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||at.createNoDashGuid(),this.privEvents=new at.EventSource,this.privSource=e,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new at.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new at.AudioSourceInitializingEvent(this.privId)),this.onEvent(new at.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return f(this,null,function*(){this.onEvent(new at.AudioStreamNodeAttachingEvent(this.privId,e));let t=yield this.upload(e);return this.onEvent(new at.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>f(this,null,function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new at.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()}),id:()=>e,read:()=>t.read()})})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new at.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(let e in this.privStreams)if(e){let t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new at.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:$P.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:$P.type.File}))}readHeader(){let t=this.privSource.slice(0,4296),i=new at.Deferred,n=s=>{let o=new DataView(s),a=v=>String.fromCharCode(o.getUint8(v),o.getUint8(v+1),o.getUint8(v+2),o.getUint8(v+3));if(a(0)!=="RIFF"){i.reject("Invalid WAV header in file, RIFF was not found");return}if(a(8)!=="WAVE"||a(12)!=="fmt "){i.reject("Invalid WAV header in file, WAVEfmt was not found");return}let c=o.getInt32(16,!0),u=o.getUint16(22,!0),p=o.getUint32(24,!0),h=o.getUint16(34,!0),d=36+Math.max(c-16,0);for(;a(d)!=="data";d+=2)if(d>4288){i.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=d+8,i.resolve(eD.AudioStreamFormat.getWaveFormatPCM(p,h,u))};if(typeof window<"u"&&typeof Blob<"u"&&t instanceof Blob){let s=new FileReader;s.onload=o=>{let a=o.target.result;n(a)},s.readAsArrayBuffer(t)}else{let s=t;n(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength))}return i.promise}upload(e){return f(this,null,function*(){let t=i=>{let n=`Error occurred while processing '${this.privFilename}'. ${i}`;throw this.onEvent(new at.AudioStreamNodeErrorEvent(this.privId,e,n)),new Error(n)};try{yield this.turnOn();let i=yield this.privAudioFormatPromise,n=new at.ChunkedArrayBufferStream(i.avgBytesPerSec/10,e);this.privStreams[e]=n;let s=this.privSource.slice(this.privHeaderEnd),o=a=>{n.isClosed||(n.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()}),n.close())};if(typeof window<"u"&&typeof Blob<"u"&&s instanceof Blob){let a=new FileReader;a.onerror=c=>t(c.toString()),a.onload=c=>{let u=c.target.result;o(u)},a.readAsArrayBuffer(s)}else{let a=s;o(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return n}catch(i){t(i)}})}onEvent(e){this.privEvents.onEvent(e),at.Events.instance.onEvent(e)}};ja.FileAudioSource=Gd});var YP=l(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.PcmRecorder=void 0;var tD=A(),$d=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,i){let s=new tD.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(t),a=()=>{let u=(()=>{let p=0;try{return e.createScriptProcessor(p,1,1)}catch{p=2048;let d=e.sampleRate;for(;p<16384&&d>=32e3;)p<<=1,d>>=1;return e.createScriptProcessor(p,1,1)}})();u.onaudioprocess=p=>{let h=p.inputBuffer.getChannelData(0);if(i&&!i.isClosed){let d=s.encode(h);d&&i.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},o.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:o,stream:t}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){let u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,p=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(p)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=p=>{let h=p.data;if(i&&!i.isClosed){let d=s.encode(h);d&&i.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},o.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:o,stream:t}}).catch(()=>{a()})}else try{a()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(t=>t.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};ka.PcmRecorder=$d});var Qd=l(()=>{"use strict"});var Yd=l(()=>{"use strict"});var Zd=l((JU,Xd)=>{"use strict";var vn=typeof Reflect=="object"?Reflect:null,XP=vn&&typeof vn.apply=="function"?vn.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},za;vn&&typeof vn.ownKeys=="function"?za=vn.ownKeys:Object.getOwnPropertySymbols?za=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:za=function(e){return Object.getOwnPropertyNames(e)};function rD(r){console&&console.warn&&console.warn(r)}var eR=Number.isNaN||function(e){return e!==e};function te(){te.init.call(this)}Xd.exports=te;Xd.exports.once=oD;te.EventEmitter=te;te.prototype._events=void 0;te.prototype._eventsCount=0;te.prototype._maxListeners=void 0;var ZP=10;function La(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(te,"defaultMaxListeners",{enumerable:!0,get:function(){return ZP},set:function(r){if(typeof r!="number"||r<0||eR(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");ZP=r}});te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};te.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||eR(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function tR(r){return r._maxListeners===void 0?te.defaultMaxListeners:r._maxListeners}te.prototype.getMaxListeners=function(){return tR(this)};te.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")XP(c,this,t);else for(var u=c.length,p=oR(c,u),i=0;i<u;++i)XP(p[i],this,t);return!0};function rR(r,e,t,i){var n,s,o;if(La(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=i?[t,o]:[o,t]:i?o.unshift(t):o.push(t),n=tR(r),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,rD(a)}return r}te.prototype.addListener=function(e,t){return rR(this,e,t,!1)};te.prototype.on=te.prototype.addListener;te.prototype.prependListener=function(e,t){return rR(this,e,t,!0)};function iD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function iR(r,e,t){var i={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},n=iD.bind(i);return n.listener=t,i.wrapFn=n,n}te.prototype.once=function(e,t){return La(t),this.on(e,iR(this,e,t)),this};te.prototype.prependOnceListener=function(e,t){return La(t),this.prependListener(e,iR(this,e,t)),this};te.prototype.removeListener=function(e,t){var i,n,s,o,a;if(La(t),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():nD(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};te.prototype.off=te.prototype.removeListener;te.prototype.removeAllListeners=function(e){var t,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function nR(r,e,t){var i=r._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?t?[n.listener||n]:[n]:t?sD(n):oR(n,n.length)}te.prototype.listeners=function(e){return nR(this,e,!0)};te.prototype.rawListeners=function(e){return nR(this,e,!1)};te.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):sR.call(r,e)};te.prototype.listenerCount=sR;function sR(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}te.prototype.eventNames=function(){return this._eventsCount>0?za(this._events):[]};function oR(r,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=r[i];return t}function nD(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function sD(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function oD(r,e){return new Promise(function(t,i){function n(o){r.removeListener(e,s),i(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",n),t([].slice.call(arguments))}aR(r,e,s,{once:!0}),e!=="error"&&aD(r,n,{once:!0})})}function aD(r,e,t){typeof r.on=="function"&&aR(r,"error",e,t)}function aR(r,e,t,i){if(typeof r.on=="function")i.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function n(s){i.once&&r.removeEventListener(e,n),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var uR=l((GU,cR)=>{"use strict";var gn=1e3,mn=gn*60,yn=mn*60,_i=yn*24,cD=_i*7,uD=_i*365.25;cR.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return pD(r);if(t==="number"&&isFinite(r))return e.long?hD(r):lD(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function pD(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*uD;case"weeks":case"week":case"w":return t*cD;case"days":case"day":case"d":return t*_i;case"hours":case"hour":case"hrs":case"hr":case"h":return t*yn;case"minutes":case"minute":case"mins":case"min":case"m":return t*mn;case"seconds":case"second":case"secs":case"sec":case"s":return t*gn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function lD(r){var e=Math.abs(r);return e>=_i?Math.round(r/_i)+"d":e>=yn?Math.round(r/yn)+"h":e>=mn?Math.round(r/mn)+"m":e>=gn?Math.round(r/gn)+"s":r+"ms"}function hD(r){var e=Math.abs(r);return e>=_i?Fa(r,e,_i,"day"):e>=yn?Fa(r,e,yn,"hour"):e>=mn?Fa(r,e,mn,"minute"):e>=gn?Fa(r,e,gn,"second"):r+" ms"}function Fa(r,e,t,i){var n=e>=t*1.5;return Math.round(r/t)+" "+i+(n?"s":"")}});var lR=l(($U,pR)=>{"use strict";function dD(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=n,t.enabled=o,t.humanize=uR(),t.destroy=u,Object.keys(r).forEach(p=>{t[p]=r[p]}),t.names=[],t.skips=[],t.formatters={};function e(p){let h=0;for(let d=0;d<p.length;d++)h=(h<<5)-h+p.charCodeAt(d),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(p){let h,d=null,v,y;function S(...R){if(!S.enabled)return;let D=S,P=Number(new Date),m=P-(h||P);D.diff=m,D.prev=h,D.curr=P,h=P,R[0]=t.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let T=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(j,ce)=>{if(j==="%%")return"%";T++;let X=t.formatters[ce];if(typeof X=="function"){let ie=R[T];j=X.call(D,ie),R.splice(T,1),T--}return j}),t.formatArgs.call(D,R),(D.log||t.log).apply(D,R)}return S.namespace=p,S.useColors=t.useColors(),S.color=t.selectColor(p),S.extend=i,S.destroy=t.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(v!==t.namespaces&&(v=t.namespaces,y=t.enabled(p)),y),set:R=>{d=R}}),typeof t.init=="function"&&t.init(S),S}function i(p,h){let d=t(this.namespace+(typeof h>"u"?":":h)+p);return d.log=this.log,d}function n(p){t.save(p),t.namespaces=p,t.names=[],t.skips=[];let h,d=(typeof p=="string"?p:"").split(/[\s,]+/),v=d.length;for(h=0;h<v;h++)d[h]&&(p=d[h].replace(/\*/g,".*?"),p[0]==="-"?t.skips.push(new RegExp("^"+p.slice(1)+"$")):t.names.push(new RegExp("^"+p+"$")))}function s(){let p=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),p}function o(p){if(p[p.length-1]==="*")return!0;let h,d;for(h=0,d=t.skips.length;h<d;h++)if(t.skips[h].test(p))return!1;for(h=0,d=t.names.length;h<d;h++)if(t.names[h].test(p))return!0;return!1}function a(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function c(p){return p instanceof Error?p.stack||p.message:p}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}pR.exports=dD});var ef=l((mt,Ba)=>{"use strict";mt.formatArgs=vD;mt.save=gD;mt.load=mD;mt.useColors=fD;mt.storage=yD();mt.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();mt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fD(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vD(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ba.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,i=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(i=t))}),r.splice(i,0,e)}mt.log=console.debug||console.log||(()=>{});function gD(r){try{r?mt.storage.setItem("debug",r):mt.storage.removeItem("debug")}catch{}}function mD(){let r;try{r=mt.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function yD(){try{return localStorage}catch{}}Ba.exports=lR()(mt);var{formatters:SD}=Ba.exports;SD.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var hR=l(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});function CD(r){return function(e,t){return new Promise((i,n)=>{r.call(this,e,t,(s,o)=>{s?n(s):i(o)})})}}tf.default=CD});var vR=l((nf,fR)=>{"use strict";var dR=nf&&nf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},PD=Zd(),RD=dR(ef()),wD=dR(hR()),Ms=RD.default("agent-base");function bD(r){return!!r&&typeof r.addRequest=="function"}function rf(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Ua(r,e){return new Ua.Agent(r,e)}(function(r){class e extends PD.EventEmitter{constructor(i,n){super();let s=n;typeof i=="function"?this.callback=i:i&&(s=i),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:rf()?443:80}set defaultPort(i){this.explicitDefaultPort=i}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:rf()?"https:":"http:"}set protocol(i){this.explicitProtocol=i}callback(i,n,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(i,n){let s=Object.assign({},n);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=rf()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,i._last=!0,i.shouldKeepAlive=!1;let o=!1,a=null,c=s.timeout||this.timeout,u=v=>{i._hadError||(i.emit("error",v),i._hadError=!0)},p=()=>{a=null,o=!0;let v=new Error(`A "socket" was not created for HTTP request before ${c}ms`);v.code="ETIMEOUT",u(v)},h=v=>{o||(a!==null&&(clearTimeout(a),a=null),u(v))},d=v=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),bD(v)){Ms("Callback returned another Agent instance %o",v.constructor.name),v.addRequest(i,s);return}if(v){v.once("free",()=>{this.freeSocket(v,s)}),i.onSocket(v);return}let y=new Error(`no Duplex stream was returned to agent-base for \`${i.method} ${i.path}\``);u(y)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(Ms("Converting legacy callback function to promise"),this.promisifiedCallback=wD.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(p,c)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{Ms("Resolving socket for %o request: %o",s.protocol,`${i.method} ${i.path}`),Promise.resolve(this.promisifiedCallback(i,s)).then(d,h)}catch(v){Promise.reject(v).catch(h)}}freeSocket(i,n){Ms("Freeing socket %o %o",i.constructor.name,n),i.destroy()}destroy(){Ms("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(Ua||(Ua={}));fR.exports=Ua});var gR=l((Sn,Cn)=>{"use strict";(function(r){var e=typeof Sn=="object"&&Sn&&!Sn.nodeType&&Sn,t=typeof Cn=="object"&&Cn&&!Cn.nodeType&&Cn,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(r=i);var n,s=2147483647,o=36,a=1,c=26,u=38,p=700,h=72,d=128,v="-",y=/^xn--/,S=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=o-a,m=Math.floor,T=String.fromCharCode,J;function j(_){throw new RangeError(D[_])}function ce(_,q){for(var K=_.length,ue=[];K--;)ue[K]=q(_[K]);return ue}function X(_,q){var K=_.split("@"),ue="";K.length>1&&(ue=K[0]+"@",_=K[1]),_=_.replace(R,".");var fe=_.split("."),tt=ce(fe,q).join(".");return ue+tt}function ie(_){for(var q=[],K=0,ue=_.length,fe,tt;K<ue;)fe=_.charCodeAt(K++),fe>=55296&&fe<=56319&&K<ue?(tt=_.charCodeAt(K++),(tt&64512)==56320?q.push(((fe&1023)<<10)+(tt&1023)+65536):(q.push(fe),K--)):q.push(fe);return q}function Ie(_){return ce(_,function(q){var K="";return q>65535&&(q-=65536,K+=T(q>>>10&1023|55296),q=56320|q&1023),K+=T(q),K}).join("")}function ir(_){return _-48<10?_-22:_-65<26?_-65:_-97<26?_-97:o}function Ft(_,q){return _+22+75*(_<26)-((q!=0)<<5)}function me(_,q,K){var ue=0;for(_=K?m(_/p):_>>1,_+=m(_/q);_>P*c>>1;ue+=o)_=m(_/P);return m(ue+(P+1)*_/(_+u))}function Ze(_){var q=[],K=_.length,ue,fe=0,tt=d,Oe=h,vt,Bt,nr,br,Be,bt,Ut,Br,Si;for(vt=_.lastIndexOf(v),vt<0&&(vt=0),Bt=0;Bt<vt;++Bt)_.charCodeAt(Bt)>=128&&j("not-basic"),q.push(_.charCodeAt(Bt));for(nr=vt>0?vt+1:0;nr<K;){for(br=fe,Be=1,bt=o;nr>=K&&j("invalid-input"),Ut=ir(_.charCodeAt(nr++)),(Ut>=o||Ut>m((s-fe)/Be))&&j("overflow"),fe+=Ut*Be,Br=bt<=Oe?a:bt>=Oe+c?c:bt-Oe,!(Ut<Br);bt+=o)Si=o-Br,Be>m(s/Si)&&j("overflow"),Be*=Si;ue=q.length+1,Oe=me(fe-br,ue,br==0),m(fe/ue)>s-tt&&j("overflow"),tt+=m(fe/ue),fe%=ue,q.splice(fe++,0,tt)}return Ie(q)}function et(_){var q,K,ue,fe,tt,Oe,vt,Bt,nr,br,Be,bt=[],Ut,Br,Si,Ch;for(_=ie(_),Ut=_.length,q=d,K=0,tt=h,Oe=0;Oe<Ut;++Oe)Be=_[Oe],Be<128&&bt.push(T(Be));for(ue=fe=bt.length,fe&&bt.push(v);ue<Ut;){for(vt=s,Oe=0;Oe<Ut;++Oe)Be=_[Oe],Be>=q&&Be<vt&&(vt=Be);for(Br=ue+1,vt-q>m((s-K)/Br)&&j("overflow"),K+=(vt-q)*Br,q=vt,Oe=0;Oe<Ut;++Oe)if(Be=_[Oe],Be<q&&++K>s&&j("overflow"),Be==q){for(Bt=K,nr=o;br=nr<=tt?a:nr>=tt+c?c:nr-tt,!(Bt<br);nr+=o)Ch=Bt-br,Si=o-br,bt.push(T(Ft(br+Ch%Si,0))),Bt=m(Ch/Si);bt.push(T(Ft(Bt,0))),tt=me(K,Br,ue==fe),K=0,++ue}++K,++q}return bt.join("")}function wt(_){return X(_,function(q){return y.test(q)?Ze(q.slice(4).toLowerCase()):q})}function yi(_){return X(_,function(q){return S.test(q)?"xn--"+et(q):q})}if(n={version:"1.4.1",ucs2:{decode:ie,encode:Ie},decode:Ze,encode:et,toASCII:yi,toUnicode:wt},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return n});else if(e&&t)if(Cn.exports==e)t.exports=n;else for(J in n)n.hasOwnProperty(J)&&(e[J]=n[J]);else r.punycode=n})(Sn)});var yR=l((YU,mR)=>{"use strict";mR.exports=Error});var CR=l((XU,SR)=>{"use strict";SR.exports=EvalError});var RR=l((ZU,PR)=>{"use strict";PR.exports=RangeError});var bR=l((e6,wR)=>{"use strict";wR.exports=ReferenceError});var sf=l((t6,ER)=>{"use strict";ER.exports=SyntaxError});var Pn=l((r6,IR)=>{"use strict";IR.exports=TypeError});var TR=l((i6,_R)=>{"use strict";_R.exports=URIError});var Wa=l((n6,AR)=>{"use strict";AR.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var DR=l((s6,MR)=>{"use strict";var OR=typeof Symbol<"u"&&Symbol,ED=Wa();MR.exports=function(){return typeof OR!="function"||typeof Symbol!="function"||typeof OR("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ED()}});var qR=l((o6,xR)=>{"use strict";var of={__proto__:null,foo:{}},ID=Object;xR.exports=function(){return{__proto__:of}.foo===of.foo&&!(of instanceof ID)}});var kR=l((a6,jR)=>{"use strict";var _D="Function.prototype.bind called on incompatible ",TD=Object.prototype.toString,AD=Math.max,OD="[object Function]",NR=function(e,t){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var s=0;s<t.length;s+=1)i[s+e.length]=t[s];return i},MD=function(e,t){for(var i=[],n=t||0,s=0;n<e.length;n+=1,s+=1)i[s]=e[n];return i},DD=function(r,e){for(var t="",i=0;i<r.length;i+=1)t+=r[i],i+1<r.length&&(t+=e);return t};jR.exports=function(e){var t=this;if(typeof t!="function"||TD.apply(t)!==OD)throw new TypeError(_D+t);for(var i=MD(arguments,1),n,s=function(){if(this instanceof n){var p=t.apply(this,NR(i,arguments));return Object(p)===p?p:this}return t.apply(e,NR(i,arguments))},o=AD(0,t.length-i.length),a=[],c=0;c<o;c++)a[c]="$"+c;if(n=Function("binder","return function ("+DD(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n}});var Ha=l((c6,zR)=>{"use strict";var xD=kR();zR.exports=Function.prototype.bind||xD});var FR=l((u6,LR)=>{"use strict";var qD=Function.prototype.call,ND=Object.prototype.hasOwnProperty,jD=Ha();LR.exports=jD.call(qD,ND)});var Oi=l((p6,VR)=>{"use strict";var H,kD=yR(),zD=CR(),LD=RR(),FD=bR(),En=sf(),bn=Pn(),BD=TR(),HR=Function,af=function(r){try{return HR('"use strict"; return ('+r+").constructor;")()}catch{}},Ti=Object.getOwnPropertyDescriptor;if(Ti)try{Ti({},"")}catch{Ti=null}var cf=function(){throw new bn},UD=Ti?function(){try{return arguments.callee,cf}catch{try{return Ti(arguments,"callee").get}catch{return cf}}}():cf,Rn=DR()(),WD=qR()(),_e=Object.getPrototypeOf||(WD?function(r){return r.__proto__}:null),wn={},HD=typeof Uint8Array>"u"||!_e?H:_e(Uint8Array),Ai={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?H:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?H:ArrayBuffer,"%ArrayIteratorPrototype%":Rn&&_e?_e([][Symbol.iterator]()):H,"%AsyncFromSyncIteratorPrototype%":H,"%AsyncFunction%":wn,"%AsyncGenerator%":wn,"%AsyncGeneratorFunction%":wn,"%AsyncIteratorPrototype%":wn,"%Atomics%":typeof Atomics>"u"?H:Atomics,"%BigInt%":typeof BigInt>"u"?H:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?H:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?H:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?H:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":kD,"%eval%":eval,"%EvalError%":zD,"%Float32Array%":typeof Float32Array>"u"?H:Float32Array,"%Float64Array%":typeof Float64Array>"u"?H:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?H:FinalizationRegistry,"%Function%":HR,"%GeneratorFunction%":wn,"%Int8Array%":typeof Int8Array>"u"?H:Int8Array,"%Int16Array%":typeof Int16Array>"u"?H:Int16Array,"%Int32Array%":typeof Int32Array>"u"?H:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Rn&&_e?_e(_e([][Symbol.iterator]())):H,"%JSON%":typeof JSON=="object"?JSON:H,"%Map%":typeof Map>"u"?H:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Rn||!_e?H:_e(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?H:Promise,"%Proxy%":typeof Proxy>"u"?H:Proxy,"%RangeError%":LD,"%ReferenceError%":FD,"%Reflect%":typeof Reflect>"u"?H:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?H:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Rn||!_e?H:_e(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?H:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Rn&&_e?_e(""[Symbol.iterator]()):H,"%Symbol%":Rn?Symbol:H,"%SyntaxError%":En,"%ThrowTypeError%":UD,"%TypedArray%":HD,"%TypeError%":bn,"%Uint8Array%":typeof Uint8Array>"u"?H:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?H:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?H:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?H:Uint32Array,"%URIError%":BD,"%WeakMap%":typeof WeakMap>"u"?H:WeakMap,"%WeakRef%":typeof WeakRef>"u"?H:WeakRef,"%WeakSet%":typeof WeakSet>"u"?H:WeakSet};if(_e)try{null.error}catch(r){BR=_e(_e(r)),Ai["%Error.prototype%"]=BR}var BR,VD=function r(e){var t;if(e==="%AsyncFunction%")t=af("async function () {}");else if(e==="%GeneratorFunction%")t=af("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=af("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&_e&&(t=_e(n.prototype))}return Ai[e]=t,t},UR={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ds=Ha(),Va=FR(),KD=Ds.call(Function.call,Array.prototype.concat),JD=Ds.call(Function.apply,Array.prototype.splice),WR=Ds.call(Function.call,String.prototype.replace),Ka=Ds.call(Function.call,String.prototype.slice),GD=Ds.call(Function.call,RegExp.prototype.exec),$D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,QD=/\\(\\)?/g,YD=function(e){var t=Ka(e,0,1),i=Ka(e,-1);if(t==="%"&&i!=="%")throw new En("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new En("invalid intrinsic syntax, expected opening `%`");var n=[];return WR(e,$D,function(s,o,a,c){n[n.length]=a?WR(c,QD,"$1"):o||s}),n},XD=function(e,t){var i=e,n;if(Va(UR,i)&&(n=UR[i],i="%"+n[0]+"%"),Va(Ai,i)){var s=Ai[i];if(s===wn&&(s=VD(i)),typeof s>"u"&&!t)throw new bn("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new En("intrinsic "+e+" does not exist!")};VR.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new bn("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new bn('"allowMissing" argument must be a boolean');if(GD(/^%?[^%]*%?$/,e)===null)throw new En("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=YD(e),n=i.length>0?i[0]:"",s=XD("%"+n+"%",t),o=s.name,a=s.value,c=!1,u=s.alias;u&&(n=u[0],JD(i,KD([0,1],u)));for(var p=1,h=!0;p<i.length;p+=1){var d=i[p],v=Ka(d,0,1),y=Ka(d,-1);if((v==='"'||v==="'"||v==="`"||y==='"'||y==="'"||y==="`")&&v!==y)throw new En("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(c=!0),n+="."+d,o="%"+n+"%",Va(Ai,o))a=Ai[o];else if(a!=null){if(!(d in a)){if(!t)throw new bn("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ti&&p+1>=i.length){var S=Ti(a,d);h=!!S,h&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[d]}else h=Va(a,d),a=a[d];h&&!c&&(Ai[o]=a)}}return a}});var Ga=l((l6,KR)=>{"use strict";var ZD=Oi(),Ja=ZD("%Object.defineProperty%",!0)||!1;if(Ja)try{Ja({},"a",{value:1})}catch{Ja=!1}KR.exports=Ja});var Qa=l((h6,JR)=>{"use strict";var e1=Oi(),$a=e1("%Object.getOwnPropertyDescriptor%",!0);if($a)try{$a([],"length")}catch{$a=null}JR.exports=$a});var uf=l((d6,QR)=>{"use strict";var GR=Ga(),t1=sf(),In=Pn(),$R=Qa();QR.exports=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new In("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new In("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new In("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new In("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new In("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new In("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!$R&&$R(e,t);if(GR)GR(e,t,{configurable:o===null&&c?c.configurable:!o,enumerable:n===null&&c?c.enumerable:!n,value:i,writable:s===null&&c?c.writable:!s});else if(a||!n&&!s&&!o)e[t]=i;else throw new t1("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var lf=l((f6,XR)=>{"use strict";var pf=Ga(),YR=function(){return!!pf};YR.hasArrayLengthDefineBug=function(){if(!pf)return null;try{return pf([],"length",{value:1}).length!==1}catch{return!0}};XR.exports=YR});var iw=l((v6,rw)=>{"use strict";var r1=Oi(),ZR=uf(),i1=lf()(),ew=Qa(),tw=Pn(),n1=r1("%Math.floor%");rw.exports=function(e,t){if(typeof e!="function")throw new tw("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||n1(t)!==t)throw new tw("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,s=!0;if("length"in e&&ew){var o=ew(e,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(s=!1)}return(n||s||!i)&&(i1?ZR(e,"length",t,!0,!0):ZR(e,"length",t)),e}});var xs=l((g6,Ya)=>{"use strict";var hf=Ha(),Xa=Oi(),s1=iw(),o1=Pn(),ow=Xa("%Function.prototype.apply%"),aw=Xa("%Function.prototype.call%"),cw=Xa("%Reflect.apply%",!0)||hf.call(aw,ow),nw=Ga(),a1=Xa("%Math.max%");Ya.exports=function(e){if(typeof e!="function")throw new o1("a function is required");var t=cw(hf,aw,arguments);return s1(t,1+a1(0,e.length-(arguments.length-1)),!0)};var sw=function(){return cw(hf,ow,arguments)};nw?nw(Ya.exports,"apply",{value:sw}):Ya.exports.apply=sw});var _n=l((m6,lw)=>{"use strict";var uw=Oi(),pw=xs(),c1=pw(uw("String.prototype.indexOf"));lw.exports=function(e,t){var i=uw(e,!!t);return typeof i=="function"&&c1(e,".prototype.")>-1?pw(i):i}});var hw=l(()=>{"use strict"});var Dw=l((C6,Mw)=>{"use strict";var Rf=typeof Map=="function"&&Map.prototype,df=Object.getOwnPropertyDescriptor&&Rf?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ec=Rf&&df&&typeof df.get=="function"?df.get:null,dw=Rf&&Map.prototype.forEach,wf=typeof Set=="function"&&Set.prototype,ff=Object.getOwnPropertyDescriptor&&wf?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,tc=wf&&ff&&typeof ff.get=="function"?ff.get:null,fw=wf&&Set.prototype.forEach,u1=typeof WeakMap=="function"&&WeakMap.prototype,Ns=u1?WeakMap.prototype.has:null,p1=typeof WeakSet=="function"&&WeakSet.prototype,js=p1?WeakSet.prototype.has:null,l1=typeof WeakRef=="function"&&WeakRef.prototype,vw=l1?WeakRef.prototype.deref:null,h1=Boolean.prototype.valueOf,d1=Object.prototype.toString,f1=Function.prototype.toString,v1=String.prototype.match,bf=String.prototype.slice,$r=String.prototype.replace,g1=String.prototype.toUpperCase,gw=String.prototype.toLowerCase,Ew=RegExp.prototype.test,mw=Array.prototype.concat,ur=Array.prototype.join,m1=Array.prototype.slice,yw=Math.floor,mf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,vf=Object.getOwnPropertySymbols,yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ge=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Tn||!0)?Symbol.toStringTag:null,Iw=Object.prototype.propertyIsEnumerable,Sw=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Cw(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Ew.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-yw(-r):yw(r);if(i!==r){var n=String(i),s=bf.call(e,n.length+1);return $r.call(n,t,"$&_")+"."+$r.call($r.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $r.call(e,t,"$&_")}var Sf=hw(),Pw=Sf.custom,Rw=Tw(Pw)?Pw:null;Mw.exports=function r(e,t,i,n){var s=t||{};if(Gr(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Gr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Gr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Gr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Gr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ow(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?Cw(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return a?Cw(e,u):u}var p=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=p&&p>0&&typeof e=="object")return Cf(e)?"[Array]":"[Object]";var h=N1(s,i);if(typeof n>"u")n=[];else if(Aw(n,e)>=0)return"[Circular]";function d(me,Ze,et){if(Ze&&(n=m1.call(n),n.push(Ze)),et){var wt={depth:s.depth};return Gr(s,"quoteStyle")&&(wt.quoteStyle=s.quoteStyle),r(me,wt,i+1,n)}return r(me,s,i+1,n)}if(typeof e=="function"&&!ww(e)){var v=I1(e),y=Za(e,d);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(y.length>0?" { "+ur.call(y,", ")+" }":"")}if(Tw(e)){var S=Tn?$r.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):yf.call(e);return typeof e=="object"&&!Tn?qs(S):S}if(D1(e)){for(var R="<"+gw.call(String(e.nodeName)),D=e.attributes||[],P=0;P<D.length;P++)R+=" "+D[P].name+"="+_w(y1(D[P].value),"double",s);return R+=">",e.childNodes&&e.childNodes.length&&(R+="..."),R+="</"+gw.call(String(e.nodeName))+">",R}if(Cf(e)){if(e.length===0)return"[]";var m=Za(e,d);return h&&!q1(m)?"["+Pf(m,h)+"]":"[ "+ur.call(m,", ")+" ]"}if(C1(e)){var T=Za(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Iw.call(e,"cause")?"{ ["+String(e)+"] "+ur.call(mw.call("[cause]: "+d(e.cause),T),", ")+" }":T.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ur.call(T,", ")+" }"}if(typeof e=="object"&&o){if(Rw&&typeof e[Rw]=="function"&&Sf)return Sf(e,{depth:p-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(_1(e)){var J=[];return dw&&dw.call(e,function(me,Ze){J.push(d(Ze,e,!0)+" => "+d(me,e))}),bw("Map",ec.call(e),J,h)}if(O1(e)){var j=[];return fw&&fw.call(e,function(me){j.push(d(me,e))}),bw("Set",tc.call(e),j,h)}if(T1(e))return gf("WeakMap");if(M1(e))return gf("WeakSet");if(A1(e))return gf("WeakRef");if(R1(e))return qs(d(Number(e)));if(b1(e))return qs(d(mf.call(e)));if(w1(e))return qs(h1.call(e));if(P1(e))return qs(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!S1(e)&&!ww(e)){var ce=Za(e,d),X=Sw?Sw(e)===Object.prototype:e instanceof Object||e.constructor===Object,ie=e instanceof Object?"":"null prototype",Ie=!X&&Ge&&Object(e)===e&&Ge in e?bf.call(Qr(e),8,-1):ie?"Object":"",ir=X||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Ft=ir+(Ie||ie?"["+ur.call(mw.call([],Ie||[],ie||[]),": ")+"] ":"");return ce.length===0?Ft+"{}":h?Ft+"{"+Pf(ce,h)+"}":Ft+"{ "+ur.call(ce,", ")+" }"}return String(e)};function _w(r,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+r+i}function y1(r){return $r.call(String(r),/"/g,"&quot;")}function Cf(r){return Qr(r)==="[object Array]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function S1(r){return Qr(r)==="[object Date]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function ww(r){return Qr(r)==="[object RegExp]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function C1(r){return Qr(r)==="[object Error]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function P1(r){return Qr(r)==="[object String]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function R1(r){return Qr(r)==="[object Number]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function w1(r){return Qr(r)==="[object Boolean]"&&(!Ge||!(typeof r=="object"&&Ge in r))}function Tw(r){if(Tn)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!yf)return!1;try{return yf.call(r),!0}catch{}return!1}function b1(r){if(!r||typeof r!="object"||!mf)return!1;try{return mf.call(r),!0}catch{}return!1}var E1=Object.prototype.hasOwnProperty||function(r){return r in this};function Gr(r,e){return E1.call(r,e)}function Qr(r){return d1.call(r)}function I1(r){if(r.name)return r.name;var e=v1.call(f1.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Aw(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function _1(r){if(!ec||!r||typeof r!="object")return!1;try{ec.call(r);try{tc.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function T1(r){if(!Ns||!r||typeof r!="object")return!1;try{Ns.call(r,Ns);try{js.call(r,js)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function A1(r){if(!vw||!r||typeof r!="object")return!1;try{return vw.call(r),!0}catch{}return!1}function O1(r){if(!tc||!r||typeof r!="object")return!1;try{tc.call(r);try{ec.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function M1(r){if(!js||!r||typeof r!="object")return!1;try{js.call(r,js);try{Ns.call(r,Ns)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function D1(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Ow(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return Ow(bf.call(r,0,e.maxStringLength),e)+i}var n=$r.call($r.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,x1);return _w(n,"single",e)}function x1(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+g1.call(e.toString(16))}function qs(r){return"Object("+r+")"}function gf(r){return r+" { ? }"}function bw(r,e,t,i){var n=i?Pf(t,i):ur.call(t,", ");return r+" ("+e+") {"+n+"}"}function q1(r){for(var e=0;e<r.length;e++)if(Aw(r[e],`
`)>=0)return!1;return!0}function N1(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=ur.call(Array(r.indent+1)," ");else return null;return{base:t,prev:ur.call(Array(e+1),t)}}function Pf(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+ur.call(r,","+t)+`
`+e.prev}function Za(r,e){var t=Cf(r),i=[];if(t){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=Gr(r,n)?e(r[n],r):""}var s=typeof vf=="function"?vf(r):[],o;if(Tn){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in r)Gr(r,c)&&(t&&String(Number(c))===c&&c<r.length||Tn&&o["$"+c]instanceof Symbol||(Ew.call(/[^\w$]/,c)?i.push(e(c,r)+": "+e(r[c],r)):i.push(c+": "+e(r[c],r))));if(typeof vf=="function")for(var u=0;u<s.length;u++)Iw.call(r,s[u])&&i.push("["+e(s[u])+"]: "+e(r[s[u]],r));return i}});var Nw=l((P6,qw)=>{"use strict";var xw=Oi(),An=_n(),j1=Dw(),k1=Pn(),rc=xw("%WeakMap%",!0),ic=xw("%Map%",!0),z1=An("WeakMap.prototype.get",!0),L1=An("WeakMap.prototype.set",!0),F1=An("WeakMap.prototype.has",!0),B1=An("Map.prototype.get",!0),U1=An("Map.prototype.set",!0),W1=An("Map.prototype.has",!0),Ef=function(r,e){for(var t=r,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=r.next,r.next=i,i},H1=function(r,e){var t=Ef(r,e);return t&&t.value},V1=function(r,e,t){var i=Ef(r,e);i?i.value=t:r.next={key:e,next:r.next,value:t}},K1=function(r,e){return!!Ef(r,e)};qw.exports=function(){var e,t,i,n={assert:function(s){if(!n.has(s))throw new k1("Side channel does not contain "+j1(s))},get:function(s){if(rc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return z1(e,s)}else if(ic){if(t)return B1(t,s)}else if(i)return H1(i,s)},has:function(s){if(rc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return F1(e,s)}else if(ic){if(t)return W1(t,s)}else if(i)return K1(i,s);return!1},set:function(s,o){rc&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new rc),L1(e,s,o)):ic?(t||(t=new ic),U1(t,s,o)):(i||(i={key:{},next:null}),V1(i,s,o))}};return n}});var nc=l((R6,jw)=>{"use strict";var J1=String.prototype.replace,G1=/%20/g,If={RFC1738:"RFC1738",RFC3986:"RFC3986"};jw.exports={default:If.RFC3986,formatters:{RFC1738:function(r){return J1.call(r,G1,"+")},RFC3986:function(r){return String(r)}},RFC1738:If.RFC1738,RFC3986:If.RFC3986}});var Af=l((w6,zw)=>{"use strict";var $1=nc(),_f=Object.prototype.hasOwnProperty,Mi=Array.isArray,pr=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),Q1=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(Mi(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);t.obj[t.prop]=n}}},kw=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(i[n]=e[n]);return i},Y1=function r(e,t,i){if(!t)return e;if(typeof t!="object"){if(Mi(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!_f.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var n=e;return Mi(e)&&!Mi(t)&&(n=kw(e,i)),Mi(e)&&Mi(t)?(t.forEach(function(s,o){if(_f.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return _f.call(s,o)?s[o]=r(s[o],a,i):s[o]=a,s},n)},X1=function(e,t){return Object.keys(t).reduce(function(i,n){return i[n]=t[n],i},e)},Z1=function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Tf=1024,ex=function(e,t,i,n,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;c+=Tf){for(var u=o.length>=Tf?o.slice(c,c+Tf):o,p=[],h=0;h<u.length;++h){var d=u.charCodeAt(h);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===$1.RFC1738&&(d===40||d===41)){p[p.length]=u.charAt(h);continue}if(d<128){p[p.length]=pr[d];continue}if(d<2048){p[p.length]=pr[192|d>>6]+pr[128|d&63];continue}if(d<55296||d>=57344){p[p.length]=pr[224|d>>12]+pr[128|d>>6&63]+pr[128|d&63];continue}h+=1,d=65536+((d&1023)<<10|u.charCodeAt(h)&1023),p[p.length]=pr[240|d>>18]+pr[128|d>>12&63]+pr[128|d>>6&63]+pr[128|d&63]}a+=p.join("")}return a},tx=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],n=0;n<t.length;++n)for(var s=t[n],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var u=a[c],p=o[u];typeof p=="object"&&p!==null&&i.indexOf(p)===-1&&(t.push({obj:o,prop:u}),i.push(p))}return Q1(t),e},rx=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},ix=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},nx=function(e,t){return[].concat(e,t)},sx=function(e,t){if(Mi(e)){for(var i=[],n=0;n<e.length;n+=1)i.push(t(e[n]));return i}return t(e)};zw.exports={arrayToObject:kw,assign:X1,combine:nx,compact:tx,decode:Z1,encode:ex,isBuffer:ix,isRegExp:rx,maybeMap:sx,merge:Y1}});var Hw=l((b6,Ww)=>{"use strict";var Fw=Nw(),sc=Af(),ks=nc(),ox=Object.prototype.hasOwnProperty,Bw={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},lr=Array.isArray,ax=Array.prototype.push,Uw=function(r,e){ax.apply(r,lr(e)?e:[e])},cx=Date.prototype.toISOString,Lw=ks.default,be={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sc.encode,encodeValuesOnly:!1,format:Lw,formatter:ks.formatters[Lw],indices:!1,serializeDate:function(e){return cx.call(e)},skipNulls:!1,strictNullHandling:!1},ux=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Of={},px=function r(e,t,i,n,s,o,a,c,u,p,h,d,v,y,S,R,D,P){for(var m=e,T=P,J=0,j=!1;(T=T.get(Of))!==void 0&&!j;){var ce=T.get(e);if(J+=1,typeof ce<"u"){if(ce===J)throw new RangeError("Cyclic object value");j=!0}typeof T.get(Of)>"u"&&(J=0)}if(typeof p=="function"?m=p(t,m):m instanceof Date?m=v(m):i==="comma"&&lr(m)&&(m=sc.maybeMap(m,function(K){return K instanceof Date?v(K):K})),m===null){if(o)return u&&!R?u(t,be.encoder,D,"key",y):t;m=""}if(ux(m)||sc.isBuffer(m)){if(u){var X=R?t:u(t,be.encoder,D,"key",y);return[S(X)+"="+S(u(m,be.encoder,D,"value",y))]}return[S(t)+"="+S(String(m))]}var ie=[];if(typeof m>"u")return ie;var Ie;if(i==="comma"&&lr(m))R&&u&&(m=sc.maybeMap(m,u)),Ie=[{value:m.length>0?m.join(",")||null:void 0}];else if(lr(p))Ie=p;else{var ir=Object.keys(m);Ie=h?ir.sort(h):ir}var Ft=c?t.replace(/\./g,"%2E"):t,me=n&&lr(m)&&m.length===1?Ft+"[]":Ft;if(s&&lr(m)&&m.length===0)return me+"[]";for(var Ze=0;Ze<Ie.length;++Ze){var et=Ie[Ze],wt=typeof et=="object"&&typeof et.value<"u"?et.value:m[et];if(!(a&&wt===null)){var yi=d&&c?et.replace(/\./g,"%2E"):et,_=lr(m)?typeof i=="function"?i(me,yi):me:me+(d?"."+yi:"["+yi+"]");P.set(e,J);var q=Fw();q.set(Of,P),Uw(ie,r(wt,_,i,n,s,o,a,c,i==="comma"&&R&&lr(m)?null:u,p,h,d,v,y,S,R,D,q))}}return ie},lx=function(e){if(!e)return be;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||be.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=ks.default;if(typeof e.format<"u"){if(!ox.call(ks.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var n=ks.formatters[i],s=be.filter;(typeof e.filter=="function"||lr(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in Bw?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=be.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:be.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:be.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:be.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:be.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?be.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:be.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:be.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:be.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:be.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:be.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:be.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:be.strictNullHandling}};Ww.exports=function(r,e){var t=r,i=lx(e),n,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):lr(i.filter)&&(s=i.filter,n=s);var o=[];if(typeof t!="object"||t===null)return"";var a=Bw[i.arrayFormat],c=a==="comma"&&i.commaRoundTrip;n||(n=Object.keys(t)),i.sort&&n.sort(i.sort);for(var u=Fw(),p=0;p<n.length;++p){var h=n[p];i.skipNulls&&t[h]===null||Uw(o,px(t[h],h,a,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var d=o.join(i.delimiter),v=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),d.length>0?v+d:""}});var Jw=l((E6,Kw)=>{"use strict";var On=Af(),Mf=Object.prototype.hasOwnProperty,hx=Array.isArray,de={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:On.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},dx=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Vw=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},fx="utf8=%26%2310003%3B",vx="utf8=%E2%9C%93",gx=function(e,t){var i={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,s),a=-1,c,u=t.charset;if(t.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===vx?u="utf-8":o[c]===fx&&(u="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var p=o[c],h=p.indexOf("]="),d=h===-1?p.indexOf("="):h+1,v,y;d===-1?(v=t.decoder(p,de.decoder,u,"key"),y=t.strictNullHandling?null:""):(v=t.decoder(p.slice(0,d),de.decoder,u,"key"),y=On.maybeMap(Vw(p.slice(d+1),t),function(R){return t.decoder(R,de.decoder,u,"value")})),y&&t.interpretNumericEntities&&u==="iso-8859-1"&&(y=dx(y)),p.indexOf("[]=")>-1&&(y=hx(y)?[y]:y);var S=Mf.call(i,v);S&&t.duplicates==="combine"?i[v]=On.combine(i[v],y):(!S||t.duplicates==="last")&&(i[v]=y)}return i},mx=function(r,e,t,i){for(var n=i?e:Vw(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&(n===""||t.strictNullHandling&&n===null)?[]:[].concat(n);else{o=t.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,p=parseInt(u,10);!t.parseArrays&&u===""?o={0:n}:!isNaN(p)&&a!==u&&String(p)===u&&p>=0&&t.parseArrays&&p<=t.arrayLimit?(o=[],o[p]=n):u!=="__proto__"&&(o[u]=n)}n=o}return n},yx=function(e,t,i,n){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=i.depth>0&&o.exec(s),u=c?s.slice(0,c.index):s,p=[];if(u){if(!i.plainObjects&&Mf.call(Object.prototype,u)&&!i.allowPrototypes)return;p.push(u)}for(var h=0;i.depth>0&&(c=a.exec(s))!==null&&h<i.depth;){if(h+=1,!i.plainObjects&&Mf.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;p.push(c[1])}if(c){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");p.push("["+s.slice(c.index)+"]")}return mx(p,t,i,n)}},Sx=function(e){if(!e)return de;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?de.charset:e.charset,i=typeof e.duplicates>"u"?de.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:de.allowDots:!!e.allowDots;return{allowDots:n,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:de.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:de.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:de.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:de.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:de.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:de.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:de.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:de.decoder,delimiter:typeof e.delimiter=="string"||On.isRegExp(e.delimiter)?e.delimiter:de.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:de.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:de.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:de.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:de.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:de.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:de.strictNullHandling}};Kw.exports=function(r,e){var t=Sx(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?gx(r,t):r,n=t.plainObjects?Object.create(null):{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],c=yx(a,i[a],t,typeof r=="string");n=On.merge(n,c,t)}return t.allowSparse===!0?n:On.compact(n)}});var $w=l((I6,Gw)=>{"use strict";var Cx=Hw(),Px=Jw(),Rx=nc();Gw.exports={formats:Rx,parse:Px,stringify:Cx}});var Zw=l(Dn=>{"use strict";var wx=gR();function Et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bx=/^([a-z0-9.+-]+:)/i,Ex=/:[0-9]*$/,Ix=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_x=["<",">",'"',"`"," ","\r",`
`,"	"],Tx=["{","}","|","\\","^","`"].concat(_x),Df=["'"].concat(Tx),Qw=["%","/","?",";","#"].concat(Df),Yw=["/","?","#"],Ax=255,Xw=/^[+a-z0-9A-Z_-]{0,63}$/,Ox=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Mx={javascript:!0,"javascript:":!0},xf={javascript:!0,"javascript:":!0},Mn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},qf=$w();function zs(r,e,t){if(r&&typeof r=="object"&&r instanceof Et)return r;var i=new Et;return i.parse(r,e,t),i}Et.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(n);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var c=Ix.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=qf.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=bx.exec(a);if(u){u=u[0];var p=u.toLowerCase();this.protocol=p,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(u&&xf[u])&&(a=a.substr(2),this.slashes=!0)}if(!xf[u]&&(h||u&&!Mn[u])){for(var d=-1,v=0;v<Yw.length;v++){var y=a.indexOf(Yw[v]);y!==-1&&(d===-1||y<d)&&(d=y)}var S,R;d===-1?R=a.lastIndexOf("@"):R=a.lastIndexOf("@",d),R!==-1&&(S=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(S)),d=-1;for(var v=0;v<Qw.length;v++){var y=a.indexOf(Qw[v]);y!==-1&&(d===-1||y<d)&&(d=y)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var D=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!D)for(var P=this.hostname.split(/\./),v=0,m=P.length;v<m;v++){var T=P[v];if(T&&!T.match(Xw)){for(var J="",j=0,ce=T.length;j<ce;j++)T.charCodeAt(j)>127?J+="x":J+=T[j];if(!J.match(Xw)){var X=P.slice(0,v),ie=P.slice(v+1),Ie=T.match(Ox);Ie&&(X.push(Ie[1]),ie.unshift(Ie[2])),ie.length&&(a="/"+ie.join(".")+a),this.hostname=X.join(".");break}}}this.hostname.length>Ax?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=wx.toASCII(this.hostname));var ir=this.port?":"+this.port:"",Ft=this.hostname||"";this.host=Ft+ir,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Mx[p])for(var v=0,m=Df.length;v<m;v++){var me=Df[v];if(a.indexOf(me)!==-1){var Ze=encodeURIComponent(me);Ze===me&&(Ze=escape(me)),a=a.split(me).join(Ze)}}var et=a.indexOf("#");et!==-1&&(this.hash=a.substr(et),a=a.slice(0,et));var wt=a.indexOf("?");if(wt!==-1?(this.search=a.substr(wt),this.query=a.substr(wt+1),e&&(this.query=qf.parse(this.query)),a=a.slice(0,wt)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Mn[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ir=this.pathname||"",yi=this.search||"";this.path=ir+yi}return this.href=this.format(),this};function Dx(r){return typeof r=="string"&&(r=zs(r)),r instanceof Et?r.format():Et.prototype.format.call(r)}Et.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=qf.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Mn[e])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+n+t+o+i};function xx(r,e){return zs(r,!1,!0).resolve(e)}Et.prototype.resolve=function(r){return this.resolveObject(zs(r,!1,!0)).format()};function qx(r,e){return r?zs(r,!1,!0).resolveObject(e):e}Et.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new Et;e.parse(r,!1,!0),r=e}for(var t=new Et,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var c=o[a];c!=="protocol"&&(t[c]=r[c])}return Mn[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Mn[r.protocol]){for(var u=Object.keys(r),p=0;p<u.length;p++){var h=u[p];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!xf[r.protocol]){for(var m=(r.pathname||"").split("/");m.length&&!(r.host=m.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),t.pathname=m.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",v=t.search||"";t.path=d+v}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",S=r.host||r.pathname&&r.pathname.charAt(0)==="/",R=S||y||t.host&&r.pathname,D=R,P=t.pathname&&t.pathname.split("/")||[],m=r.pathname&&r.pathname.split("/")||[],T=t.protocol&&!Mn[t.protocol];if(T&&(t.hostname="",t.port=null,t.host&&(P[0]===""?P[0]=t.host:P.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host=null),R=R&&(m[0]===""||P[0]==="")),S)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,P=m;else if(m.length)P||(P=[]),P.pop(),P=P.concat(m),t.search=r.search,t.query=r.query;else if(r.search!=null){if(T){t.host=P.shift(),t.hostname=t.host;var J=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;J&&(t.auth=J.shift(),t.hostname=J.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!P.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var j=P.slice(-1)[0],ce=(t.host||r.host||P.length>1)&&(j==="."||j==="..")||j==="",X=0,ie=P.length;ie>=0;ie--)j=P[ie],j==="."?P.splice(ie,1):j===".."?(P.splice(ie,1),X++):X&&(P.splice(ie,1),X--);if(!R&&!D)for(;X--;X)P.unshift("..");R&&P[0]!==""&&(!P[0]||P[0].charAt(0)!=="/")&&P.unshift(""),ce&&P.join("/").substr(-1)!=="/"&&P.push("");var Ie=P[0]===""||P[0]&&P[0].charAt(0)==="/";if(T){t.hostname=Ie?"":P.length?P.shift():"",t.host=t.hostname;var J=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;J&&(t.auth=J.shift(),t.hostname=J.shift(),t.host=t.hostname)}return R=R||t.host&&P.length,R&&!Ie&&P.unshift(""),P.length>0?t.pathname=P.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};Et.prototype.parseHost=function(){var r=this.host,e=Ex.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};Dn.parse=zs;Dn.resolve=xx;Dn.resolveObject=qx;Dn.format=Dx;Dn.Url=Et});var oc=l((T6,eb)=>{"use strict";var Nx=Wa();eb.exports=function(){return Nx()&&!!Symbol.toStringTag}});var ib=l((A6,rb)=>{"use strict";var jx=oc()(),kx=_n(),Nf=kx("Object.prototype.toString"),ac=function(e){return jx&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Nf(e)==="[object Arguments]"},tb=function(e){return ac(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Nf(e)!=="[object Array]"&&Nf(e.callee)==="[object Function]"},zx=function(){return ac(arguments)}();ac.isLegacyArguments=tb;rb.exports=zx?ac:tb});var ob=l((O6,sb)=>{"use strict";var Lx=Object.prototype.toString,Fx=Function.prototype.toString,Bx=/^\s*(?:function)?\*/,nb=oc()(),jf=Object.getPrototypeOf,Ux=function(){if(!nb)return!1;try{return Function("return function*() {}")()}catch{}},kf;sb.exports=function(e){if(typeof e!="function")return!1;if(Bx.test(Fx.call(e)))return!0;if(!nb){var t=Lx.call(e);return t==="[object GeneratorFunction]"}if(!jf)return!1;if(typeof kf>"u"){var i=Ux();kf=i?jf(i):!1}return jf(e)===kf}});var pb=l((M6,ub)=>{"use strict";var cb=Function.prototype.toString,xn=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Lf,cc;if(typeof xn=="function"&&typeof Object.defineProperty=="function")try{Lf=Object.defineProperty({},"length",{get:function(){throw cc}}),cc={},xn(function(){throw 42},null,Lf)}catch(r){r!==cc&&(xn=null)}else xn=null;var Wx=/^\s*class\b/,Ff=function(e){try{var t=cb.call(e);return Wx.test(t)}catch{return!1}},zf=function(e){try{return Ff(e)?!1:(cb.call(e),!0)}catch{return!1}},uc=Object.prototype.toString,Hx="[object Object]",Vx="[object Function]",Kx="[object GeneratorFunction]",Jx="[object HTMLAllCollection]",Gx="[object HTML document.all class]",$x="[object HTMLCollection]",Qx=typeof Symbol=="function"&&!!Symbol.toStringTag,Yx=!(0 in[,]),Bf=function(){return!1};typeof document=="object"&&(ab=document.all,uc.call(ab)===uc.call(document.all)&&(Bf=function(e){if((Yx||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=uc.call(e);return(t===Jx||t===Gx||t===$x||t===Hx)&&e("")==null}catch{}return!1}));var ab;ub.exports=xn?function(e){if(Bf(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{xn(e,null,Lf)}catch(t){if(t!==cc)return!1}return!Ff(e)&&zf(e)}:function(e){if(Bf(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Qx)return zf(e);if(Ff(e))return!1;var t=uc.call(e);return t!==Vx&&t!==Kx&&!/^\[object HTML/.test(t)?!1:zf(e)}});var db=l((D6,hb)=>{"use strict";var Xx=pb(),Zx=Object.prototype.toString,lb=Object.prototype.hasOwnProperty,eq=function(e,t,i){for(var n=0,s=e.length;n<s;n++)lb.call(e,n)&&(i==null?t(e[n],n,e):t.call(i,e[n],n,e))},tq=function(e,t,i){for(var n=0,s=e.length;n<s;n++)i==null?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)},rq=function(e,t,i){for(var n in e)lb.call(e,n)&&(i==null?t(e[n],n,e):t.call(i,e[n],n,e))},iq=function(e,t,i){if(!Xx(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=i),Zx.call(e)==="[object Array]"?eq(e,t,n):typeof e=="string"?tq(e,t,n):rq(e,t,n)};hb.exports=iq});var vb=l((x6,fb)=>{"use strict";fb.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var mb=l((q6,gb)=>{"use strict";var Uf=vb(),nq=typeof globalThis>"u"?global:globalThis;gb.exports=function(){for(var e=[],t=0;t<Uf.length;t++)typeof nq[Uf[t]]=="function"&&(e[e.length]=Uf[t]);return e}});var Jf=l((N6,Pb)=>{"use strict";var lc=db(),sq=mb(),yb=xs(),Vf=_n(),pc=Qa(),oq=Vf("Object.prototype.toString"),Cb=oc()(),Sb=typeof globalThis>"u"?global:globalThis,Hf=sq(),Kf=Vf("String.prototype.slice"),Wf=Object.getPrototypeOf,aq=Vf("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},hc={__proto__:null};Cb&&pc&&Wf?lc(Hf,function(r){var e=new Sb[r];if(Symbol.toStringTag in e){var t=Wf(e),i=pc(t,Symbol.toStringTag);if(!i){var n=Wf(t);i=pc(n,Symbol.toStringTag)}hc["$"+r]=yb(i.get)}}):lc(Hf,function(r){var e=new Sb[r],t=e.slice||e.set;t&&(hc["$"+r]=yb(t))});var cq=function(e){var t=!1;return lc(hc,function(i,n){if(!t)try{"$"+i(e)===n&&(t=Kf(n,1))}catch{}}),t},uq=function(e){var t=!1;return lc(hc,function(i,n){if(!t)try{i(e),t=Kf(n,1)}catch{}}),t};Pb.exports=function(e){if(!e||typeof e!="object")return!1;if(!Cb){var t=Kf(oq(e),8,-1);return aq(Hf,t)>-1?t:t!=="Object"?!1:uq(e)}return pc?cq(e):null}});var wb=l((j6,Rb)=>{"use strict";var pq=Jf();Rb.exports=function(e){return!!pq(e)}});var kb=l(B=>{"use strict";var lq=ib(),hq=ob(),Vt=Jf(),bb=wb();function qn(r){return r.call.bind(r)}var Eb=typeof BigInt<"u",Ib=typeof Symbol<"u",It=qn(Object.prototype.toString),dq=qn(Number.prototype.valueOf),fq=qn(String.prototype.valueOf),vq=qn(Boolean.prototype.valueOf);Eb&&(_b=qn(BigInt.prototype.valueOf));var _b;Ib&&(Tb=qn(Symbol.prototype.valueOf));var Tb;function Fs(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}B.isArgumentsObject=lq;B.isGeneratorFunction=hq;B.isTypedArray=bb;function gq(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"}B.isPromise=gq;function mq(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):bb(r)||Ob(r)}B.isArrayBufferView=mq;function yq(r){return Vt(r)==="Uint8Array"}B.isUint8Array=yq;function Sq(r){return Vt(r)==="Uint8ClampedArray"}B.isUint8ClampedArray=Sq;function Cq(r){return Vt(r)==="Uint16Array"}B.isUint16Array=Cq;function Pq(r){return Vt(r)==="Uint32Array"}B.isUint32Array=Pq;function Rq(r){return Vt(r)==="Int8Array"}B.isInt8Array=Rq;function wq(r){return Vt(r)==="Int16Array"}B.isInt16Array=wq;function bq(r){return Vt(r)==="Int32Array"}B.isInt32Array=bq;function Eq(r){return Vt(r)==="Float32Array"}B.isFloat32Array=Eq;function Iq(r){return Vt(r)==="Float64Array"}B.isFloat64Array=Iq;function _q(r){return Vt(r)==="BigInt64Array"}B.isBigInt64Array=_q;function Tq(r){return Vt(r)==="BigUint64Array"}B.isBigUint64Array=Tq;function dc(r){return It(r)==="[object Map]"}dc.working=typeof Map<"u"&&dc(new Map);function Aq(r){return typeof Map>"u"?!1:dc.working?dc(r):r instanceof Map}B.isMap=Aq;function fc(r){return It(r)==="[object Set]"}fc.working=typeof Set<"u"&&fc(new Set);function Oq(r){return typeof Set>"u"?!1:fc.working?fc(r):r instanceof Set}B.isSet=Oq;function vc(r){return It(r)==="[object WeakMap]"}vc.working=typeof WeakMap<"u"&&vc(new WeakMap);function Mq(r){return typeof WeakMap>"u"?!1:vc.working?vc(r):r instanceof WeakMap}B.isWeakMap=Mq;function $f(r){return It(r)==="[object WeakSet]"}$f.working=typeof WeakSet<"u"&&$f(new WeakSet);function Dq(r){return $f(r)}B.isWeakSet=Dq;function gc(r){return It(r)==="[object ArrayBuffer]"}gc.working=typeof ArrayBuffer<"u"&&gc(new ArrayBuffer);function Ab(r){return typeof ArrayBuffer>"u"?!1:gc.working?gc(r):r instanceof ArrayBuffer}B.isArrayBuffer=Ab;function mc(r){return It(r)==="[object DataView]"}mc.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&mc(new DataView(new ArrayBuffer(1),0,1));function Ob(r){return typeof DataView>"u"?!1:mc.working?mc(r):r instanceof DataView}B.isDataView=Ob;var Gf=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ls(r){return It(r)==="[object SharedArrayBuffer]"}function Mb(r){return typeof Gf>"u"?!1:(typeof Ls.working>"u"&&(Ls.working=Ls(new Gf)),Ls.working?Ls(r):r instanceof Gf)}B.isSharedArrayBuffer=Mb;function xq(r){return It(r)==="[object AsyncFunction]"}B.isAsyncFunction=xq;function qq(r){return It(r)==="[object Map Iterator]"}B.isMapIterator=qq;function Nq(r){return It(r)==="[object Set Iterator]"}B.isSetIterator=Nq;function jq(r){return It(r)==="[object Generator]"}B.isGeneratorObject=jq;function kq(r){return It(r)==="[object WebAssembly.Module]"}B.isWebAssemblyCompiledModule=kq;function Db(r){return Fs(r,dq)}B.isNumberObject=Db;function xb(r){return Fs(r,fq)}B.isStringObject=xb;function qb(r){return Fs(r,vq)}B.isBooleanObject=qb;function Nb(r){return Eb&&Fs(r,_b)}B.isBigIntObject=Nb;function jb(r){return Ib&&Fs(r,Tb)}B.isSymbolObject=jb;function zq(r){return Db(r)||xb(r)||qb(r)||Nb(r)||jb(r)}B.isBoxedPrimitive=zq;function Lq(r){return typeof Uint8Array<"u"&&(Ab(r)||Mb(r))}B.isAnyArrayBuffer=Lq;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(B,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})})});var Lb=l((z6,zb)=>{"use strict";zb.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Fb=l((L6,Qf)=>{"use strict";typeof Object.create=="function"?Qf.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Qf.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}});var qi=l(U=>{"use strict";var Bb=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++)i[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return i},Fq=/%[sdj%]/g;U.format=function(r){if(!bc(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Yr(arguments[t]));return e.join(" ")}for(var t=1,i=arguments,n=i.length,s=String(r).replace(Fq,function(a){if(a==="%%")return"%";if(t>=n)return a;switch(a){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch{return"[Circular]"}default:return a}}),o=i[t];t<n;o=i[++t])wc(o)||!Nn(o)?s+=" "+o:s+=" "+Yr(o);return s};U.deprecate=function(r,e){if(typeof process<"u"&&process.noDeprecation===!0)return r;if(typeof process>"u")return function(){return U.deprecate(r,e).apply(this,arguments)};var t=!1;function i(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return i};var yc={},Ub=/^$/;process.env.NODE_DEBUG&&(Sc=process.env.NODE_DEBUG,Sc=Sc.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Ub=new RegExp("^"+Sc+"$","i"));var Sc;U.debuglog=function(r){if(r=r.toUpperCase(),!yc[r])if(Ub.test(r)){var e=process.pid;yc[r]=function(){var t=U.format.apply(U,arguments);console.error("%s %d: %s",r,e,t)}}else yc[r]=function(){};return yc[r]};function Yr(r,e){var t={seen:[],stylize:Uq};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),ev(e)?t.showHidden=e:e&&U._extend(t,e),xi(t.showHidden)&&(t.showHidden=!1),xi(t.depth)&&(t.depth=2),xi(t.colors)&&(t.colors=!1),xi(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Bq),Pc(t,r,t.depth)}U.inspect=Yr;Yr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Yr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Bq(r,e){var t=Yr.styles[e];return t?"\x1B["+Yr.colors[t][0]+"m"+r+"\x1B["+Yr.colors[t][1]+"m":r}function Uq(r,e){return r}function Wq(r){var e={};return r.forEach(function(t,i){e[t]=!0}),e}function Pc(r,e,t){if(r.customInspect&&e&&Cc(e.inspect)&&e.inspect!==U.inspect&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(t,r);return bc(i)||(i=Pc(r,i,t)),i}var n=Hq(r,e);if(n)return n;var s=Object.keys(e),o=Wq(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(e)),Us(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Yf(e);if(s.length===0){if(Cc(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Bs(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Rc(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Us(e))return Yf(e)}var c="",u=!1,p=["{","}"];if(Wb(e)&&(u=!0,p=["[","]"]),Cc(e)){var h=e.name?": "+e.name:"";c=" [Function"+h+"]"}if(Bs(e)&&(c=" "+RegExp.prototype.toString.call(e)),Rc(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Us(e)&&(c=" "+Yf(e)),s.length===0&&(!u||e.length==0))return p[0]+c+p[1];if(t<0)return Bs(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var d;return u?d=Vq(r,e,t,o,s):d=s.map(function(v){return Zf(r,e,t,o,v,u)}),r.seen.pop(),Kq(d,c,p)}function Hq(r,e){if(xi(e))return r.stylize("undefined","undefined");if(bc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(Hb(e))return r.stylize(""+e,"number");if(ev(e))return r.stylize(""+e,"boolean");if(wc(e))return r.stylize("null","null")}function Yf(r){return"["+Error.prototype.toString.call(r)+"]"}function Vq(r,e,t,i,n){for(var s=[],o=0,a=e.length;o<a;++o)Vb(e,String(o))?s.push(Zf(r,e,t,i,String(o),!0)):s.push("");return n.forEach(function(c){c.match(/^\d+$/)||s.push(Zf(r,e,t,i,c,!0))}),s}function Zf(r,e,t,i,n,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},c.get?c.set?a=r.stylize("[Getter/Setter]","special"):a=r.stylize("[Getter]","special"):c.set&&(a=r.stylize("[Setter]","special")),Vb(i,n)||(o="["+n+"]"),a||(r.seen.indexOf(c.value)<0?(wc(t)?a=Pc(r,c.value,null):a=Pc(r,c.value,t-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=r.stylize("[Circular]","special")),xi(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=r.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=r.stylize(o,"string"))}return o+": "+a}function Kq(r,e,t){var i=0,n=r.reduce(function(s,o){return i++,o.indexOf(`
`)>=0&&i++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}U.types=kb();function Wb(r){return Array.isArray(r)}U.isArray=Wb;function ev(r){return typeof r=="boolean"}U.isBoolean=ev;function wc(r){return r===null}U.isNull=wc;function Jq(r){return r==null}U.isNullOrUndefined=Jq;function Hb(r){return typeof r=="number"}U.isNumber=Hb;function bc(r){return typeof r=="string"}U.isString=bc;function Gq(r){return typeof r=="symbol"}U.isSymbol=Gq;function xi(r){return r===void 0}U.isUndefined=xi;function Bs(r){return Nn(r)&&tv(r)==="[object RegExp]"}U.isRegExp=Bs;U.types.isRegExp=Bs;function Nn(r){return typeof r=="object"&&r!==null}U.isObject=Nn;function Rc(r){return Nn(r)&&tv(r)==="[object Date]"}U.isDate=Rc;U.types.isDate=Rc;function Us(r){return Nn(r)&&(tv(r)==="[object Error]"||r instanceof Error)}U.isError=Us;U.types.isNativeError=Us;function Cc(r){return typeof r=="function"}U.isFunction=Cc;function $q(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}U.isPrimitive=$q;U.isBuffer=Lb();function tv(r){return Object.prototype.toString.call(r)}function Xf(r){return r<10?"0"+r.toString(10):r.toString(10)}var Qq=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Yq(){var r=new Date,e=[Xf(r.getHours()),Xf(r.getMinutes()),Xf(r.getSeconds())].join(":");return[r.getDate(),Qq[r.getMonth()],e].join(" ")}U.log=function(){console.log("%s - %s",Yq(),U.format.apply(U,arguments))};U.inherits=Fb();U._extend=function(r,e){if(!e||!Nn(e))return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r};function Vb(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Di=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;U.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Di&&e[Di]){var t=e[Di];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Di,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var i,n,s=new Promise(function(c,u){i=c,n=u}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(c,u){c?n(c):i(u)});try{e.apply(this,o)}catch(c){n(c)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Di&&Object.defineProperty(t,Di,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,Bb(e))};U.promisify.custom=Di;function Xq(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}function Zq(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);var n=t.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};r.apply(this,t).then(function(a){process.nextTick(o.bind(null,null,a))},function(a){process.nextTick(Xq.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,Bb(r)),e}U.callbackify=Zq});var nv=l((B6,$b)=>{"use strict";function Xr(r){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(r)}function Kb(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,tN(i.key),i)}}function eN(r,e,t){return e&&Kb(r.prototype,e),t&&Kb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function tN(r){var e=rN(r,"string");return Xr(e)==="symbol"?e:String(e)}function rN(r,e){if(Xr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Xr(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iN(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function nN(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&iv(r,e)}function iv(r,e){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},iv(r,e)}function sN(r){var e=cN();return function(){var i=Ec(r),n;if(e){var s=Ec(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return oN(this,n)}}function oN(r,e){if(e&&(Xr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aN(r)}function aN(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ec(r){return Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ec(r)}var Gb={},jn,rv;function Ws(r,e,t){t||(t=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}var n=function(s){nN(a,s);var o=sN(a);function a(c,u,p){var h;return iN(this,a),h=o.call(this,i(c,u,p)),h.code=r,h}return eN(a)}(t);Gb[r]=n}function Jb(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(i){return String(i)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function uN(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function pN(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function lN(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}Ws("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Ws("ERR_INVALID_ARG_TYPE",function(r,e,t){jn===void 0&&(jn=Ic()),jn(typeof r=="string","'name' must be a string");var i;typeof e=="string"&&uN(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";var n;if(pN(r," argument"))n="The ".concat(r," ").concat(i," ").concat(Jb(e,"type"));else{var s=lN(r,".")?"property":"argument";n='The "'.concat(r,'" ').concat(s," ").concat(i," ").concat(Jb(e,"type"))}return n+=". Received type ".concat(Xr(t)),n},TypeError);Ws("ERR_INVALID_ARG_VALUE",function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";rv===void 0&&(rv=qi());var i=rv.inspect(e);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(r,"' ").concat(t,". Received ").concat(i)},TypeError,RangeError);Ws("ERR_INVALID_RETURN_VALUE",function(r,e,t){var i;return t&&t.constructor&&t.constructor.name?i="instance of ".concat(t.constructor.name):i="type ".concat(Xr(t)),"Expected ".concat(r,' to be returned from the "').concat(e,'"')+" function but got ".concat(i,".")},TypeError);Ws("ERR_MISSING_ARGS",function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];jn===void 0&&(jn=Ic()),jn(e.length>0,"At least one arg needs to be specified");var i="The ",n=e.length;switch(e=e.map(function(s){return'"'.concat(s,'"')}),n){case 1:i+="".concat(e[0]," argument");break;case 2:i+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:i+=e.slice(0,n-1).join(", "),i+=", and ".concat(e[n-1]," arguments");break}return"".concat(i," must be specified")},TypeError);$b.exports.codes=Gb});var sE=l((U6,nE)=>{"use strict";function Qb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Yb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qb(Object(t),!0).forEach(function(i){hN(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Qb(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function hN(r,e,t){return e=tE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dN(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Xb(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,tE(i.key),i)}}function fN(r,e,t){return e&&Xb(r.prototype,e),t&&Xb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function tE(r){var e=vN(r,"string");return ct(e)==="symbol"?e:String(e)}function vN(r,e){if(ct(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(ct(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gN(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Js(r,e)}function mN(r){var e=iE();return function(){var i=Gs(r),n;if(e){var s=Gs(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return rE(this,n)}}function rE(r,e){if(e&&(ct(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sv(r)}function sv(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ov(r){var e=typeof Map=="function"?new Map:void 0;return ov=function(i){if(i===null||!yN(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return _c(i,arguments,Gs(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Js(n,i)},ov(r)}function _c(r,e,t){return iE()?_c=Reflect.construct.bind():_c=function(n,s,o){var a=[null];a.push.apply(a,s);var c=Function.bind.apply(n,a),u=new c;return o&&Js(u,o.prototype),u},_c.apply(null,arguments)}function iE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yN(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Js(r,e){return Js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Js(r,e)}function Gs(r){return Gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gs(r)}function ct(r){"@babel/helpers - typeof";return ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(r)}var SN=qi(),av=SN.inspect,CN=nv(),PN=CN.codes.ERR_INVALID_ARG_TYPE;function Zb(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function RN(r,e){if(e=Math.floor(e),r.length==0||e==0)return"";var t=r.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)r+=r,e--;return r+=r.substring(0,t-r.length),r}var Kt="",Hs="",Vs="",qe="",Ni={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},wN=10;function eE(r){var e=Object.keys(r),t=Object.create(Object.getPrototypeOf(r));return e.forEach(function(i){t[i]=r[i]}),Object.defineProperty(t,"message",{value:r.message}),t}function Ks(r){return av(r,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function bN(r,e,t){var i="",n="",s=0,o="",a=!1,c=Ks(r),u=c.split(`
`),p=Ks(e).split(`
`),h=0,d="";if(t==="strictEqual"&&ct(r)==="object"&&ct(e)==="object"&&r!==null&&e!==null&&(t="strictEqualObject"),u.length===1&&p.length===1&&u[0]!==p[0]){var v=u[0].length+p[0].length;if(v<=wN){if((ct(r)!=="object"||r===null)&&(ct(e)!=="object"||e===null)&&(r!==0||e!==0))return"".concat(Ni[t],`

`)+"".concat(u[0]," !== ").concat(p[0],`
`)}else if(t!=="strictEqualObject"){var y=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(v<y){for(;u[0][h]===p[0][h];)h++;h>2&&(d=`
  `.concat(RN(" ",h),"^"),h=0)}}}for(var S=u[u.length-1],R=p[p.length-1];S===R&&(h++<2?o=`
  `.concat(S).concat(o):i=S,u.pop(),p.pop(),!(u.length===0||p.length===0));)S=u[u.length-1],R=p[p.length-1];var D=Math.max(u.length,p.length);if(D===0){var P=c.split(`
`);if(P.length>30)for(P[26]="".concat(Kt,"...").concat(qe);P.length>27;)P.pop();return"".concat(Ni.notIdentical,`

`).concat(P.join(`
`),`
`)}h>3&&(o=`
`.concat(Kt,"...").concat(qe).concat(o),a=!0),i!==""&&(o=`
  `.concat(i).concat(o),i="");var m=0,T=Ni[t]+`
`.concat(Hs,"+ actual").concat(qe," ").concat(Vs,"- expected").concat(qe),J=" ".concat(Kt,"...").concat(qe," Lines skipped");for(h=0;h<D;h++){var j=h-s;if(u.length<h+1)j>1&&h>2&&(j>4?(n+=`
`.concat(Kt,"...").concat(qe),a=!0):j>3&&(n+=`
  `.concat(p[h-2]),m++),n+=`
  `.concat(p[h-1]),m++),s=h,i+=`
`.concat(Vs,"-").concat(qe," ").concat(p[h]),m++;else if(p.length<h+1)j>1&&h>2&&(j>4?(n+=`
`.concat(Kt,"...").concat(qe),a=!0):j>3&&(n+=`
  `.concat(u[h-2]),m++),n+=`
  `.concat(u[h-1]),m++),s=h,n+=`
`.concat(Hs,"+").concat(qe," ").concat(u[h]),m++;else{var ce=p[h],X=u[h],ie=X!==ce&&(!Zb(X,",")||X.slice(0,-1)!==ce);ie&&Zb(ce,",")&&ce.slice(0,-1)===X&&(ie=!1,X+=","),ie?(j>1&&h>2&&(j>4?(n+=`
`.concat(Kt,"...").concat(qe),a=!0):j>3&&(n+=`
  `.concat(u[h-2]),m++),n+=`
  `.concat(u[h-1]),m++),s=h,n+=`
`.concat(Hs,"+").concat(qe," ").concat(X),i+=`
`.concat(Vs,"-").concat(qe," ").concat(ce),m+=2):(n+=i,i="",(j===1||h===0)&&(n+=`
  `.concat(X),m++))}if(m>20&&h<D-2)return"".concat(T).concat(J,`
`).concat(n,`
`).concat(Kt,"...").concat(qe).concat(i,`
`)+"".concat(Kt,"...").concat(qe)}return"".concat(T).concat(a?J:"",`
`).concat(n).concat(i).concat(o).concat(d)}var EN=function(r,e){gN(i,r);var t=mN(i);function i(n){var s;if(dN(this,i),ct(n)!=="object"||n===null)throw new PN("options","Object",n);var o=n.message,a=n.operator,c=n.stackStartFn,u=n.actual,p=n.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,o!=null)s=t.call(this,String(o));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(Kt="\x1B[34m",Hs="\x1B[32m",qe="\x1B[39m",Vs="\x1B[31m"):(Kt="",Hs="",qe="",Vs="")),ct(u)==="object"&&u!==null&&ct(p)==="object"&&p!==null&&"stack"in u&&u instanceof Error&&"stack"in p&&p instanceof Error&&(u=eE(u),p=eE(p)),a==="deepStrictEqual"||a==="strictEqual")s=t.call(this,bN(u,p,a));else if(a==="notDeepStrictEqual"||a==="notStrictEqual"){var d=Ni[a],v=Ks(u).split(`
`);if(a==="notStrictEqual"&&ct(u)==="object"&&u!==null&&(d=Ni.notStrictEqualObject),v.length>30)for(v[26]="".concat(Kt,"...").concat(qe);v.length>27;)v.pop();v.length===1?s=t.call(this,"".concat(d," ").concat(v[0])):s=t.call(this,"".concat(d,`

`).concat(v.join(`
`),`
`))}else{var y=Ks(u),S="",R=Ni[a];a==="notDeepEqual"||a==="notEqual"?(y="".concat(Ni[a],`

`).concat(y),y.length>1024&&(y="".concat(y.slice(0,1021),"..."))):(S="".concat(Ks(p)),y.length>512&&(y="".concat(y.slice(0,509),"...")),S.length>512&&(S="".concat(S.slice(0,509),"...")),a==="deepEqual"||a==="equal"?y="".concat(R,`

`).concat(y,`

should equal

`):S=" ".concat(a," ").concat(S)),s=t.call(this,"".concat(y).concat(S))}return Error.stackTraceLimit=h,s.generatedMessage=!o,Object.defineProperty(sv(s),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),s.code="ERR_ASSERTION",s.actual=u,s.expected=p,s.operator=a,Error.captureStackTrace&&Error.captureStackTrace(sv(s),c),s.stack,s.name="AssertionError",rE(s)}return fN(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(s,o){return av(this,Yb(Yb({},o),{},{customInspect:!1,depth:0}))}}]),i}(ov(Error),av.custom);nE.exports=EN});var cv=l((W6,aE)=>{"use strict";var oE=Object.prototype.toString;aE.exports=function(e){var t=oE.call(e),i=t==="[object Arguments]";return i||(i=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&oE.call(e.callee)==="[object Function]"),i}});var gE=l((H6,vE)=>{"use strict";var fE;Object.keys||($s=Object.prototype.hasOwnProperty,uv=Object.prototype.toString,cE=cv(),pv=Object.prototype.propertyIsEnumerable,uE=!pv.call({toString:null},"toString"),pE=pv.call(function(){},"prototype"),Qs=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Tc=function(r){var e=r.constructor;return e&&e.prototype===r},lE={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hE=function(){if(typeof window>"u")return!1;for(var r in window)try{if(!lE["$"+r]&&$s.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{Tc(window[r])}catch{return!0}}catch{return!0}return!1}(),dE=function(r){if(typeof window>"u"||!hE)return Tc(r);try{return Tc(r)}catch{return!1}},fE=function(e){var t=e!==null&&typeof e=="object",i=uv.call(e)==="[object Function]",n=cE(e),s=t&&uv.call(e)==="[object String]",o=[];if(!t&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var a=pE&&i;if(s&&e.length>0&&!$s.call(e,0))for(var c=0;c<e.length;++c)o.push(String(c));if(n&&e.length>0)for(var u=0;u<e.length;++u)o.push(String(u));else for(var p in e)!(a&&p==="prototype")&&$s.call(e,p)&&o.push(String(p));if(uE)for(var h=dE(e),d=0;d<Qs.length;++d)!(h&&Qs[d]==="constructor")&&$s.call(e,Qs[d])&&o.push(Qs[d]);return o});var $s,uv,cE,pv,uE,pE,Qs,Tc,lE,hE,dE;vE.exports=fE});var lv=l((V6,SE)=>{"use strict";var IN=Array.prototype.slice,_N=cv(),mE=Object.keys,Ac=mE?function(e){return mE(e)}:gE(),yE=Object.keys;Ac.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(i){return _N(i)?yE(IN.call(i)):yE(i)})}else Object.keys=Ac;return Object.keys||Ac};SE.exports=Ac});var EE=l((K6,bE)=>{"use strict";var TN=lv(),RE=Wa()(),wE=_n(),CE=Object,AN=wE("Array.prototype.push"),PE=wE("Object.prototype.propertyIsEnumerable"),ON=RE?Object.getOwnPropertySymbols:null;bE.exports=function(e,t){if(e==null)throw new TypeError("target must be an object");var i=CE(e);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var s=CE(arguments[n]),o=TN(s),a=RE&&(Object.getOwnPropertySymbols||ON);if(a)for(var c=a(s),u=0;u<c.length;++u){var p=c[u];PE(s,p)&&AN(o,p)}for(var h=0;h<o.length;++h){var d=o[h];if(PE(s,d)){var v=s[d];i[d]=v}}}return i}});var _E=l((J6,IE)=>{"use strict";var hv=EE(),MN=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",e=r.split(""),t={},i=0;i<e.length;++i)t[e[i]]=e[i];var n=Object.assign({},t),s="";for(var o in n)s+=o;return r!==s},DN=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1};IE.exports=function(){return!Object.assign||MN()||DN()?hv:Object.assign}});var dv=l((G6,AE)=>{"use strict";var TE=function(r){return r!==r};AE.exports=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||TE(e)&&TE(t))}});var Oc=l(($6,OE)=>{"use strict";var xN=dv();OE.exports=function(){return typeof Object.is=="function"?Object.is:xN}});var Ys=l((Q6,qE)=>{"use strict";var qN=lv(),NN=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",jN=Object.prototype.toString,kN=Array.prototype.concat,ME=uf(),zN=function(r){return typeof r=="function"&&jN.call(r)==="[object Function]"},DE=lf()(),LN=function(r,e,t,i){if(e in r){if(i===!0){if(r[e]===t)return}else if(!zN(i)||!i())return}DE?ME(r,e,t,!0):ME(r,e,t)},xE=function(r,e){var t=arguments.length>2?arguments[2]:{},i=qN(e);NN&&(i=kN.call(i,Object.getOwnPropertySymbols(e)));for(var n=0;n<i.length;n+=1)LN(r,i[n],e[i[n]],t[i[n]])};xE.supportsDescriptors=!!DE;qE.exports=xE});var jE=l((Y6,NE)=>{"use strict";var FN=Oc(),BN=Ys();NE.exports=function(){var e=FN();return BN(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var FE=l((X6,LE)=>{"use strict";var UN=Ys(),WN=xs(),HN=dv(),kE=Oc(),VN=jE(),zE=WN(kE(),Object);UN(zE,{getPolyfill:kE,implementation:HN,shim:VN});LE.exports=zE});var fv=l((Z6,BE)=>{"use strict";BE.exports=function(e){return e!==e}});var vv=l((e3,UE)=>{"use strict";var KN=fv();UE.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:KN}});var HE=l((t3,WE)=>{"use strict";var JN=Ys(),GN=vv();WE.exports=function(){var e=GN();return JN(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}});var GE=l((r3,JE)=>{"use strict";var $N=xs(),QN=Ys(),YN=fv(),VE=vv(),XN=HE(),KE=$N(VE(),Number);QN(KE,{getPolyfill:VE,implementation:YN,shim:XN});JE.exports=KE});var fI=l((i3,dI)=>{"use strict";function $E(r,e){return rj(r)||tj(r,e)||ej(r,e)||ZN()}function ZN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ej(r,e){if(r){if(typeof r=="string")return QE(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QE(r,e)}}function QE(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function tj(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i,n,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(p){u=!0,n=p}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw n}}return a}}function rj(r){if(Array.isArray(r))return r}function _t(r){"@babel/helpers - typeof";return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(r)}var ij=/a/g.flags!==void 0,kc=function(e){var t=[];return e.forEach(function(i){return t.push(i)}),t},YE=function(e){var t=[];return e.forEach(function(i,n){return t.push([n,i])}),t},cI=Object.is?Object.is:FE(),Nc=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},gv=Number.isNaN?Number.isNaN:GE();function yv(r){return r.call.bind(r)}var Zs=yv(Object.prototype.hasOwnProperty),jc=yv(Object.prototype.propertyIsEnumerable),XE=yv(Object.prototype.toString),it=qi().types,nj=it.isAnyArrayBuffer,sj=it.isArrayBufferView,ZE=it.isDate,Mc=it.isMap,eI=it.isRegExp,Dc=it.isSet,oj=it.isNativeError,aj=it.isBoxedPrimitive,tI=it.isNumberObject,rI=it.isStringObject,iI=it.isBooleanObject,nI=it.isBigIntObject,cj=it.isSymbolObject,uj=it.isFloat32Array,pj=it.isFloat64Array;function lj(r){if(r.length===0||r.length>10)return!0;for(var e=0;e<r.length;e++){var t=r.charCodeAt(e);if(t<48||t>57)return!0}return r.length===10&&r>=Math.pow(2,32)}function xc(r){return Object.keys(r).filter(lj).concat(Nc(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function uI(r,e){if(r===e)return 0;for(var t=r.length,i=e.length,n=0,s=Math.min(t,i);n<s;++n)if(r[n]!==e[n]){t=r[n],i=e[n];break}return t<i?-1:i<t?1:0}var qc=void 0,hj=!0,dj=!1,mv=0,Sv=1,pI=2,lI=3;function fj(r,e){return ij?r.source===e.source&&r.flags===e.flags:RegExp.prototype.toString.call(r)===RegExp.prototype.toString.call(e)}function vj(r,e){if(r.byteLength!==e.byteLength)return!1;for(var t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function gj(r,e){return r.byteLength!==e.byteLength?!1:uI(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function mj(r,e){return r.byteLength===e.byteLength&&uI(new Uint8Array(r),new Uint8Array(e))===0}function yj(r,e){return tI(r)?tI(e)&&cI(Number.prototype.valueOf.call(r),Number.prototype.valueOf.call(e)):rI(r)?rI(e)&&String.prototype.valueOf.call(r)===String.prototype.valueOf.call(e):iI(r)?iI(e)&&Boolean.prototype.valueOf.call(r)===Boolean.prototype.valueOf.call(e):nI(r)?nI(e)&&BigInt.prototype.valueOf.call(r)===BigInt.prototype.valueOf.call(e):cj(e)&&Symbol.prototype.valueOf.call(r)===Symbol.prototype.valueOf.call(e)}function Tt(r,e,t,i){if(r===e)return r!==0?!0:t?cI(r,e):!0;if(t){if(_t(r)!=="object")return typeof r=="number"&&gv(r)&&gv(e);if(_t(e)!=="object"||r===null||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1}else{if(r===null||_t(r)!=="object")return e===null||_t(e)!=="object"?r==e:!1;if(e===null||_t(e)!=="object")return!1}var n=XE(r),s=XE(e);if(n!==s)return!1;if(Array.isArray(r)){if(r.length!==e.length)return!1;var o=xc(r,qc),a=xc(e,qc);return o.length!==a.length?!1:Xs(r,e,t,i,Sv,o)}if(n==="[object Object]"&&(!Mc(r)&&Mc(e)||!Dc(r)&&Dc(e)))return!1;if(ZE(r)){if(!ZE(e)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(e))return!1}else if(eI(r)){if(!eI(e)||!fj(r,e))return!1}else if(oj(r)||r instanceof Error){if(r.message!==e.message||r.name!==e.name)return!1}else if(sj(r)){if(!t&&(uj(r)||pj(r))){if(!vj(r,e))return!1}else if(!gj(r,e))return!1;var c=xc(r,qc),u=xc(e,qc);return c.length!==u.length?!1:Xs(r,e,t,i,mv,c)}else{if(Dc(r))return!Dc(e)||r.size!==e.size?!1:Xs(r,e,t,i,pI);if(Mc(r))return!Mc(e)||r.size!==e.size?!1:Xs(r,e,t,i,lI);if(nj(r)){if(!mj(r,e))return!1}else if(aj(r)&&!yj(r,e))return!1}return Xs(r,e,t,i,mv)}function sI(r,e){return e.filter(function(t){return jc(r,t)})}function Xs(r,e,t,i,n,s){if(arguments.length===5){s=Object.keys(r);var o=Object.keys(e);if(s.length!==o.length)return!1}for(var a=0;a<s.length;a++)if(!Zs(e,s[a]))return!1;if(t&&arguments.length===5){var c=Nc(r);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var p=c[a];if(jc(r,p)){if(!jc(e,p))return!1;s.push(p),u++}else if(jc(e,p))return!1}var h=Nc(e);if(c.length!==h.length&&sI(e,h).length!==u)return!1}else{var d=Nc(e);if(d.length!==0&&sI(e,d).length!==0)return!1}}if(s.length===0&&(n===mv||n===Sv&&r.length===0||r.size===0))return!0;if(i===void 0)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(r);if(v!==void 0){var y=i.val2.get(e);if(y!==void 0)return v===y}i.position++}i.val1.set(r,i.position),i.val2.set(e,i.position);var S=wj(r,e,t,s,i,n);return i.val1.delete(r),i.val2.delete(e),S}function oI(r,e,t,i){for(var n=kc(r),s=0;s<n.length;s++){var o=n[s];if(Tt(e,o,t,i))return r.delete(o),!0}return!1}function hI(r){switch(_t(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(gv(r))return!1}return!0}function Sj(r,e,t){var i=hI(t);return i??(e.has(i)&&!r.has(i))}function Cj(r,e,t,i,n){var s=hI(t);if(s!=null)return s;var o=e.get(s);return o===void 0&&!e.has(s)||!Tt(i,o,!1,n)?!1:!r.has(s)&&Tt(i,o,!1,n)}function Pj(r,e,t,i){for(var n=null,s=kc(r),o=0;o<s.length;o++){var a=s[o];if(_t(a)==="object"&&a!==null)n===null&&(n=new Set),n.add(a);else if(!e.has(a)){if(t||!Sj(r,e,a))return!1;n===null&&(n=new Set),n.add(a)}}if(n!==null){for(var c=kc(e),u=0;u<c.length;u++){var p=c[u];if(_t(p)==="object"&&p!==null){if(!oI(n,p,t,i))return!1}else if(!t&&!r.has(p)&&!oI(n,p,t,i))return!1}return n.size===0}return!0}function aI(r,e,t,i,n,s){for(var o=kc(r),a=0;a<o.length;a++){var c=o[a];if(Tt(t,c,n,s)&&Tt(i,e.get(c),n,s))return r.delete(c),!0}return!1}function Rj(r,e,t,i){for(var n=null,s=YE(r),o=0;o<s.length;o++){var a=$E(s[o],2),c=a[0],u=a[1];if(_t(c)==="object"&&c!==null)n===null&&(n=new Set),n.add(c);else{var p=e.get(c);if(p===void 0&&!e.has(c)||!Tt(u,p,t,i)){if(t||!Cj(r,e,c,u,i))return!1;n===null&&(n=new Set),n.add(c)}}}if(n!==null){for(var h=YE(e),d=0;d<h.length;d++){var v=$E(h[d],2),y=v[0],S=v[1];if(_t(y)==="object"&&y!==null){if(!aI(n,r,y,S,t,i))return!1}else if(!t&&(!r.has(y)||!Tt(r.get(y),S,!1,i))&&!aI(n,r,y,S,!1,i))return!1}return n.size===0}return!0}function wj(r,e,t,i,n,s){var o=0;if(s===pI){if(!Pj(r,e,t,n))return!1}else if(s===lI){if(!Rj(r,e,t,n))return!1}else if(s===Sv)for(;o<r.length;o++)if(Zs(r,o)){if(!Zs(e,o)||!Tt(r[o],e[o],t,n))return!1}else{if(Zs(e,o))return!1;for(var a=Object.keys(r);o<a.length;o++){var c=a[o];if(!Zs(e,c)||!Tt(r[c],e[c],t,n))return!1}return a.length===Object.keys(e).length}for(o=0;o<i.length;o++){var u=i[o];if(!Tt(r[u],e[u],t,n))return!1}return!0}function bj(r,e){return Tt(r,e,dj)}function Ej(r,e){return Tt(r,e,hj)}dI.exports={isDeepEqual:bj,isDeepStrictEqual:Ej}});var Ic=l((n3,DI)=>{"use strict";function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function vI(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,_j(i.key),i)}}function Ij(r,e,t){return e&&vI(r.prototype,e),t&&vI(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function _j(r){var e=Tj(r,"string");return Jt(e)==="symbol"?e:String(e)}function Tj(r,e){if(Jt(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Jt(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Aj(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var Oj=nv(),eo=Oj.codes,gI=eo.ERR_AMBIGUOUS_ARGUMENT,kn=eo.ERR_INVALID_ARG_TYPE,Mj=eo.ERR_INVALID_ARG_VALUE,Dj=eo.ERR_INVALID_RETURN_VALUE,ei=eo.ERR_MISSING_ARGS,ti=sE(),xj=qi(),zc=xj.inspect,CI=qi().types,qj=CI.isPromise,Lc=CI.isRegExp,Nj=_E()(),PI=Oc()(),Fc=_n()("RegExp.prototype.test"),Zr,Bc;function to(){var r=fI();Zr=r.isDeepEqual,Bc=r.isDeepStrictEqual}var mI=!1,ne=DI.exports=Cv,Uc={};function Gt(r){throw r.message instanceof Error?r.message:new ti(r)}function RI(r,e,t,i,n){var s=arguments.length,o;if(s===0)o="Failed";else if(s===1)t=r,r=void 0;else{if(mI===!1){mI=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}s===2&&(i="!=")}if(t instanceof Error)throw t;var c={actual:r,expected:e,operator:i===void 0?"fail":i,stackStartFn:n||RI};t!==void 0&&(c.message=t);var u=new ti(c);throw o&&(u.message=o,u.generatedMessage=!0),u}ne.fail=RI;ne.AssertionError=ti;function wI(r,e,t,i){if(!t){var n=!1;if(e===0)n=!0,i="No value argument passed to `assert.ok()`";else if(i instanceof Error)throw i;var s=new ti({actual:t,expected:!0,message:i,operator:"==",stackStartFn:r});throw s.generatedMessage=n,s}}function Cv(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];wI.apply(void 0,[Cv,e.length].concat(e))}ne.ok=Cv;ne.equal=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");e!=t&&Gt({actual:e,expected:t,message:i,operator:"==",stackStartFn:r})};ne.notEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");e==t&&Gt({actual:e,expected:t,message:i,operator:"!=",stackStartFn:r})};ne.deepEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");Zr===void 0&&to(),Zr(e,t)||Gt({actual:e,expected:t,message:i,operator:"deepEqual",stackStartFn:r})};ne.notDeepEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");Zr===void 0&&to(),Zr(e,t)&&Gt({actual:e,expected:t,message:i,operator:"notDeepEqual",stackStartFn:r})};ne.deepStrictEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");Zr===void 0&&to(),Bc(e,t)||Gt({actual:e,expected:t,message:i,operator:"deepStrictEqual",stackStartFn:r})};ne.notDeepStrictEqual=bI;function bI(r,e,t){if(arguments.length<2)throw new ei("actual","expected");Zr===void 0&&to(),Bc(r,e)&&Gt({actual:r,expected:e,message:t,operator:"notDeepStrictEqual",stackStartFn:bI})}ne.strictEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");PI(e,t)||Gt({actual:e,expected:t,message:i,operator:"strictEqual",stackStartFn:r})};ne.notStrictEqual=function r(e,t,i){if(arguments.length<2)throw new ei("actual","expected");PI(e,t)&&Gt({actual:e,expected:t,message:i,operator:"notStrictEqual",stackStartFn:r})};var yI=Ij(function r(e,t,i){var n=this;Aj(this,r),t.forEach(function(s){s in e&&(i!==void 0&&typeof i[s]=="string"&&Lc(e[s])&&Fc(e[s],i[s])?n[s]=i[s]:n[s]=e[s])})});function jj(r,e,t,i,n,s){if(!(t in r)||!Bc(r[t],e[t])){if(!i){var o=new yI(r,n),a=new yI(e,n,r),c=new ti({actual:o,expected:a,operator:"deepStrictEqual",stackStartFn:s});throw c.actual=r,c.expected=e,c.operator=s.name,c}Gt({actual:r,expected:e,message:i,operator:s.name,stackStartFn:s})}}function EI(r,e,t,i){if(typeof e!="function"){if(Lc(e))return Fc(e,r);if(arguments.length===2)throw new kn("expected",["Function","RegExp"],e);if(Jt(r)!=="object"||r===null){var n=new ti({actual:r,expected:e,message:t,operator:"deepStrictEqual",stackStartFn:i});throw n.operator=i.name,n}var s=Object.keys(e);if(e instanceof Error)s.push("name","message");else if(s.length===0)throw new Mj("error",e,"may not be an empty object");return Zr===void 0&&to(),s.forEach(function(o){typeof r[o]=="string"&&Lc(e[o])&&Fc(e[o],r[o])||jj(r,e,o,t,s,i)}),!0}return e.prototype!==void 0&&r instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function II(r){if(typeof r!="function")throw new kn("fn","Function",r);try{r()}catch(e){return e}return Uc}function SI(r){return qj(r)||r!==null&&Jt(r)==="object"&&typeof r.then=="function"&&typeof r.catch=="function"}function _I(r){return Promise.resolve().then(function(){var e;if(typeof r=="function"){if(e=r(),!SI(e))throw new Dj("instance of Promise","promiseFn",e)}else if(SI(r))e=r;else throw new kn("promiseFn",["Function","Promise"],r);return Promise.resolve().then(function(){return e}).then(function(){return Uc}).catch(function(t){return t})})}function TI(r,e,t,i){if(typeof t=="string"){if(arguments.length===4)throw new kn("error",["Object","Error","Function","RegExp"],t);if(Jt(e)==="object"&&e!==null){if(e.message===t)throw new gI("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===t)throw new gI("error/message",'The error "'.concat(e,'" is identical to the message.'));i=t,t=void 0}else if(t!=null&&Jt(t)!=="object"&&typeof t!="function")throw new kn("error",["Object","Error","Function","RegExp"],t);if(e===Uc){var n="";t&&t.name&&(n+=" (".concat(t.name,")")),n+=i?": ".concat(i):".";var s=r.name==="rejects"?"rejection":"exception";Gt({actual:void 0,expected:t,operator:r.name,message:"Missing expected ".concat(s).concat(n),stackStartFn:r})}if(t&&!EI(e,t,i,r))throw e}function AI(r,e,t,i){if(e!==Uc){if(typeof t=="string"&&(i=t,t=void 0),!t||EI(e,t)){var n=i?": ".concat(i):".",s=r.name==="doesNotReject"?"rejection":"exception";Gt({actual:e,expected:t,operator:r.name,message:"Got unwanted ".concat(s).concat(n,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:r})}throw e}}ne.throws=function r(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];TI.apply(void 0,[r,II(e)].concat(i))};ne.rejects=function r(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return _I(e).then(function(s){return TI.apply(void 0,[r,s].concat(i))})};ne.doesNotThrow=function r(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];AI.apply(void 0,[r,II(e)].concat(i))};ne.doesNotReject=function r(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return _I(e).then(function(s){return AI.apply(void 0,[r,s].concat(i))})};ne.ifError=function r(e){if(e!=null){var t="ifError got unwanted exception: ";Jt(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?t+=e.constructor.name:t+=e.message:t+=zc(e);var i=new ti({actual:e,expected:null,operator:"ifError",message:t,stackStartFn:r}),n=e.stack;if(typeof n=="string"){var s=n.split(`
`);s.shift();for(var o=i.stack.split(`
`),a=0;a<s.length;a++){var c=o.indexOf(s[a]);if(c!==-1){o=o.slice(0,c);break}}i.stack="".concat(o.join(`
`),`
`).concat(s.join(`
`))}throw i}};function OI(r,e,t,i,n){if(!Lc(e))throw new kn("regexp","RegExp",e);var s=n==="match";if(typeof r!="string"||Fc(e,r)!==s){if(t instanceof Error)throw t;var o=!t;t=t||(typeof r!="string"?'The "string" argument must be of type string. Received type '+"".concat(Jt(r)," (").concat(zc(r),")"):(s?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(zc(e),`. Input:

`).concat(zc(r),`
`));var a=new ti({actual:r,expected:e,message:t,operator:n,stackStartFn:i});throw a.generatedMessage=o,a}}ne.match=function r(e,t,i){OI(e,t,i,r,"match")};ne.doesNotMatch=function r(e,t,i){OI(e,t,i,r,"doesNotMatch")};function MI(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];wI.apply(void 0,[MI,e.length].concat(e))}ne.strict=Nj(MI,ne,{equal:ne.strictEqual,deepEqual:ne.deepStrictEqual,notEqual:ne.notStrictEqual,notDeepEqual:ne.notDeepStrictEqual});ne.strict.strict=ne.strict});var xI=l(Pv=>{"use strict";Object.defineProperty(Pv,"__esModule",{value:!0});function kj(r){return function(e,t){return new Promise((i,n)=>{r.call(this,e,t,(s,o)=>{s?n(s):i(o)})})}}Pv.default=kj});var NI=l((wv,qI)=>{"use strict";var zj=wv&&wv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Lj=Zd(),Fj=zj(xI());function Bj(r){return!!r&&typeof r.addRequest=="function"}function Uj(r){return!!r&&typeof r.addRequest=="function"}function Rv(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1)}function zn(r,e){return new zn.Agent(r,e)}(function(r){class e extends Lj.EventEmitter{constructor(i,n){super(),this.promisifiedCallback=void 0;let s=n;typeof i=="function"?this.callback=i:i&&(s=i),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.options=s||{},this.maxFreeSockets=1,this.maxSockets=1,this.sockets=[],this.requests=[]}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Rv()?443:80}set defaultPort(i){this.explicitDefaultPort=i}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Rv()?"https:":"http:"}set protocol(i){this.explicitProtocol=i}callback(i,n,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(i,n){let s=Object.assign({},n);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=Rv()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80);let o=Object.assign(Object.assign({},this.options),s);o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,i._last=!0,i.shouldKeepAlive=!1;let a=!1,c=null,u=this.timeout,p=this.freeSocket;function h(S){i._hadError||(i.emit("error",S),i._hadError=!0)}function d(){c=null,a=!0;let S=new Error(`A "socket" was not created for HTTP request before ${u}ms`);S.code="ETIMEOUT",h(S)}function v(S){a||(c!==null&&(clearTimeout(c),c=null),h(S))}function y(S){let R;function D(){p(R,o)}if(a)return;if(c!=null&&(clearTimeout(c),c=null),Bj(S)||Uj(S)){S.addRequest(i,o);return}if(S){R=S,R.on("free",D),i.onSocket(R);return}let P=new Error(`no Duplex stream was returned to agent-base for \`${i.method} ${i.path}\``);h(P)}if(typeof this.callback!="function"){h(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?this.promisifiedCallback=Fj.default(this.callback):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(c=setTimeout(d,u)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{Promise.resolve(this.promisifiedCallback(i,o)).then(y,v)}catch(S){Promise.reject(S).catch(v)}}freeSocket(i,n){i.destroy()}destroy(){}}r.Agent=e})(zn||(zn={}));zn.prototype=zn.Agent.prototype;qI.exports=zn});var FI=l((o3,LI)=>{"use strict";var jI=Qd(),kI=Yd(),Wj=Zw(),Hj=Ic(),zI=NI(),Vj=qi().inherits,ji=ef()("https-proxy-agent");LI.exports=ro;function ro(r){if(!(this instanceof ro))return new ro(r);if(typeof r=="string"&&(r=Wj.parse(r)),!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");ji("creating new HttpsProxyAgent instance: %o",r),zI.call(this,r);var e=Object.assign({},r);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in e)&&(e.ALPNProtocols=["http 1.1"]),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e}Vj(ro,zI);ro.prototype.callback=function(e,t,i){var n=this.proxy,s;this.secureProxy?s=kI.connect(n):s=jI.connect(n);var o=[],a=0;function c(){var m=s.read();m?v(m):s.once("readable",c)}function u(){s.removeListener("end",h),s.removeListener("error",d),s.removeListener("close",p),s.removeListener("readable",c)}function p(m){ji("onclose had error %o",m)}function h(){ji("onend")}function d(m){u(),i(m)}function v(m){o.push(m),a+=m.length;var T=Buffer.concat(o,a),J=T.toString("ascii");if(!~J.indexOf(`\r
\r
`)){ji("have not received end of HTTP headers yet..."),c();return}var j=J.substring(0,J.indexOf(`\r
`)),ce=+j.split(" ")[1];if(ji("got proxy server response: %o",j),ce==200){var X=s;o=T=null,t.secureEndpoint&&(ji("upgrading proxy-connected socket to TLS connection: %o",t.host),t.socket=s,t.servername=t.servername||t.host,t.host=null,t.hostname=null,t.port=null,X=kI.connect(t)),u(),e.once("socket",Kj),i(null,X)}else u(),s.destroy(),s=new jI.Socket,s.readable=!0,o=T,e.once("socket",y),i(null,s)}function y(m){ji("replaying proxy buffer for failed request"),Hj(m.listenerCount("data")>0),m.push(o),o=null}s.on("error",d),s.on("close",p),s.on("end",h),c();var S=t.host+":"+t.port,R="CONNECT "+S+` HTTP/1.1\r
`,D=Object.assign({},n.headers);n.auth&&(D["Proxy-Authorization"]="Basic "+Buffer.from(n.auth).toString("base64"));var P=t.host;Jj(t.port,t.secureEndpoint)||(P+=":"+t.port),D.Host=P,D.Connection="close",Object.keys(D).forEach(function(m){R+=m+": "+D[m]+`\r
`}),s.write(R+`\r
`)};function Kj(r){r.resume()}function Jj(r,e){return!!(!e&&r===80||e&&r===443)}});var UI=l((a3,BI)=>{"use strict";BI.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var Ev=l(At=>{"use strict";var Gj=At&&At.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),$j=At&&At.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),WI=At&&At.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&Gj(e,r,t);return $j(e,r),e},bv=At&&At.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});At.WebsocketMessageAdapter=void 0;var Qj=WI(Qd()),Yj=WI(Yd()),Xj=bv(vR()),Zj=bv(FI()),ek=bv(UI()),tk=Je(),k=A(),Wc=class r{constructor(e,t,i,n,s,o){if(!e)throw new k.ArgumentNullError("uri");if(!i)throw new k.ArgumentNullError("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new k.EventSource,this.privConnectionId=t,this.privMessageFormatter=i,this.privConnectionState=k.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=o,this.privHeaders[tk.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===k.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new k.Deferred,this.privCertificateValidatedDeferral=new k.Deferred,this.privConnectionState=k.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!r.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let i=new URL(this.privUri).protocol;i?.toLocaleLowerCase()==="wss:"?i="https:":i?.toLocaleLowerCase()==="ws:"&&(i="http:"),e.agent.protocol=i,this.privWebsocketClient=new ek.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new k.Queue,this.privDisconnectDeferral=new k.Deferred,this.privSendMessageQueue=new k.Queue,this.processSendQueue().catch(e=>{k.Events.instance.onEvent(new k.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new k.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new k.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=k.ConnectionState.Connected,this.onEvent(new k.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new k.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new k.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===k.ConnectionState.Connecting?(this.privConnectionState=k.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new k.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=k.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new k.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(t=>{k.Events.instance.onEvent(new k.BackgroundEvent(t))})},this.privWebsocketClient.onmessage=e=>{let t=new Date().toISOString();if(this.privConnectionState===k.ConnectionState.Connected){let i=new k.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(i.promise),e.data instanceof ArrayBuffer){let n=new k.RawWebsocketMessage(k.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(n).then(s=>{this.onEvent(new k.ConnectionMessageReceivedEvent(this.privConnectionId,t,s)),i.resolve(s)},s=>{i.reject(`Invalid binary message format. Error: ${s}`)})}else{let n=new k.RawWebsocketMessage(k.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(n).then(s=>{this.onEvent(new k.ConnectionMessageReceivedEvent(this.privConnectionId,t,s)),i.resolve(s)},s=>{i.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==k.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${k.ConnectionState[this.privConnectionState]} state`);let t=new k.Deferred,i=new k.Deferred;return this.privSendMessageQueue.enqueueFromPromise(i.promise),this.privMessageFormatter.fromConnectionMessage(e).then(n=>{i.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})},n=>{i.reject(`Error formatting the message. ${n}`)}),t.promise}read(){return this.privConnectionState!==k.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==k.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new k.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(t){return Promise.reject(`websocket send error: ${t}`)}}onClose(e,t){return f(this,null,function*(){let i=`Connection closed. ${e}: ${t}`;this.privConnectionState=k.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose(()=>{},i),yield this.privSendMessageQueue.drainAndDispose(n=>{n.sendStatusDeferral.reject(i)},i)})}processSendQueue(){return f(this,null,function*(){for(;;){let t=yield this.privSendMessageQueue.dequeue();if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(i){t.sendStatusDeferral.reject(i)}}})}onEvent(e){this.privConnectionEvents.onEvent(e),k.Events.instance.onEvent(e)}getAgent(){let e=new Xj.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){let t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new Zj.default(t)}createConnection(e,t){let i;if(t=VS(sr({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){let s=r.GetProxyAgent(this.proxyInfo);i=new Promise((o,a)=>{s.callback(e,t,(c,u)=>{c?a(c):o(u)})})}else t.secureEndpoint?i=Promise.resolve(Yj.connect(t)):i=Promise.resolve(Qj.connect(t));return i}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};At.WebsocketMessageAdapter=Wc;Wc.forceNpmWebSocket=!1});var HI=l(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.WebsocketConnection=void 0;var Iv=A(),rk=Ev(),_v=class{constructor(e,t,i,n,s,o=!1,a){if(this.privIsDisposed=!1,!e)throw new Iv.ArgumentNullError("uri");if(!n)throw new Iv.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;let c="",u=0;if(t){for(let p in t)if(p){c+=u===0&&e.indexOf("?")===-1?"?":"&";let h=encodeURIComponent(p);c+=h;let d=t[p];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(i){for(let p in i)if(p){c+=u===0&&e.indexOf("?")===-1?"?":"&";let h=encodeURIComponent(i[p]);c+=`${p}=${h}`,u++}}this.privUri=e+c,this.privId=a||Iv.createNoDashGuid(),this.privConnectionMessageAdapter=new rk.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,i,o)}dispose(){return f(this,null,function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())})}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};Hc.WebsocketConnection=_v});var VI=l(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.ReplayableAudioNode=void 0;var Tv=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){let e=this.privReplayOffset-this.privBufferStartOffset,t=Math.round(e*this.privBytesPerSecond*1e-7);t%2!==0&&t++;let i=0;for(;i<this.privBuffers.length&&t>=this.privBuffers[i].chunk.buffer.byteLength;)t-=this.privBuffers[i++].chunk.buffer.byteLength;if(i<this.privBuffers.length){let n=this.privBuffers[i].chunk.buffer.slice(t);return this.privReplayOffset+=n.byteLength/this.privBytesPerSecond*1e7,i===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:n,isEnd:!1,timeReceived:this.privBuffers[i].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new Av(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;let t=e-this.privBufferStartOffset,i=Math.round(t*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&i>=this.privBuffers[n].chunk.buffer.byteLength;)i-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-i/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(let t of this.privBuffers){let i=t.byteOffset/this.privBytesPerSecond*1e7,n=i+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=n)return t.chunk.timeReceived}return 0}};Vc.ReplayableAudioNode=Tv;var Av=class{constructor(e,t,i){this.chunk=e,this.serial=t,this.byteOffset=i}}});var Dv=l(hr=>{"use strict";var ik=hr&&hr.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),nk=hr&&hr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sk=hr&&hr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&ik(e,r,t);return nk(e,r),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.AudioFileWriter=void 0;var io=sk(Hd()),Ov=x(),Mv=class{constructor(e){Ov.Contracts.throwIfNullOrUndefined(io.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=io.openSync(e,"w")}set format(e){Ov.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=io.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){Ov.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),io.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),io.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};hr.AudioFileWriter=Mv});var xv=l(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PullAudioInputStreamImpl=Ot.PullAudioInputStream=Ot.PushAudioInputStreamImpl=Ot.PushAudioInputStream=Ot.AudioInputStream=void 0;var Kc=I(),Ne=A(),KI=Hr(),ok=C(),ak=Jr(),no=class{constructor(){}static createPushStream(e){return so.create(e)}static createPullStream(e,t){return oo.create(e,t)}};Ot.AudioInputStream=no;var so=class extends no{static create(e){return new Jc(e)}};Ot.PushAudioInputStream=so;var Jc=class extends so{constructor(e){super(),e===void 0?this.privFormat=ak.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=e,this.privEvents=new Ne.EventSource,this.privId=KI.createNoDashGuid(),this.privStream=new Ne.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new Ne.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Ne.AudioSourceReadyEvent(this.privId))}attach(e){return f(this,null,function*(){this.onEvent(new Ne.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();let t=this.privStream;return this.onEvent(new Ne.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>f(this,null,function*(){return this.onEvent(new Ne.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()}),id:()=>e,read:()=>t.read()}})}detach(e){this.onEvent(new Ne.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Kc.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:Kc.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Ne.Events.instance.onEvent(e)}toBuffer(e){let t=Buffer.alloc(e.byteLength),i=new Uint8Array(e);for(let n=0;n<t.length;++n)t[n]=i[n];return t}};Ot.PushAudioInputStreamImpl=Jc;var oo=class extends no{constructor(){super()}static create(e,t){return new Gc(e,t)}};Ot.PullAudioInputStream=oo;var Gc=class extends oo{constructor(e,t){super(),t===void 0?this.privFormat=ok.AudioStreamFormat.getDefaultInputFormat():this.privFormat=t,this.privEvents=new Ne.EventSource,this.privId=KI.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new Ne.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Ne.AudioSourceReadyEvent(this.privId))}attach(e){return f(this,null,function*(){return this.onEvent(new Ne.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new Ne.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new Ne.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let t=0,i;for(;t<this.privBufferSize;){let n=new ArrayBuffer(this.privBufferSize-t),s=this.privCallback.read(n);if(i===void 0?i=n:new Int8Array(i).set(new Int8Array(n),t),s===0)break;t+=s}return Promise.resolve({buffer:i.slice(0,t),isEnd:this.privIsClosed||t===0,timeReceived:Date.now()})}}})}detach(e){this.onEvent(new Ne.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Kc.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:Kc.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Ne.Events.instance.onEvent(e)}};Ot.PullAudioInputStreamImpl=Gc});var qv=l(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.SpeechSynthesisOutputFormat=void 0;var ck;(function(r){r[r.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",r[r.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",r[r.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",r[r.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",r[r.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",r[r.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",r[r.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",r[r.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",r[r.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",r[r.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",r[r.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",r[r.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",r[r.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",r[r.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",r[r.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",r[r.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",r[r.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",r[r.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",r[r.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",r[r.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",r[r.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",r[r.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",r[r.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",r[r.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",r[r.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",r[r.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",r[r.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",r[r.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",r[r.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",r[r.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",r[r.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",r[r.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",r[r.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",r[r.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",r[r.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",r[r.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",r[r.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",r[r.AmrWb16000Hz=37]="AmrWb16000Hz",r[r.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(ck=ao.SpeechSynthesisOutputFormat||(ao.SpeechSynthesisOutputFormat={}))});var Ln=l(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.AudioOutputFormatImpl=void 0;var F=qv(),z=Jr(),$c=class r extends z.AudioStreamFormatImpl{constructor(e,t,i,n,s,o,a,c,u){super(i,o,t,e),this.formatTag=e,this.avgBytesPerSec=n,this.blockAlign=s,this.priAudioFormatString=a,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?r.getDefaultOutputFormat():r.fromSpeechSynthesisOutputFormatString(r.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new r(z.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new r(z.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new r(z.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new r(z.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new r(z.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new r(z.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new r(z.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new r(z.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new r(z.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new r(z.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new r(z.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new r(z.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new r(z.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new r(z.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new r(z.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new r(z.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new r(z.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new r(z.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new r(z.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new r(z.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new r(z.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new r(z.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new r(z.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new r(z.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return r.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){let t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);let t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}};Qc.AudioOutputFormatImpl=$c;$c.SpeechSynthesisOutputFormatToString={[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[F.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"}});var ki=l(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.PushAudioOutputStreamImpl=Mt.PushAudioOutputStream=Mt.PullAudioOutputStreamImpl=Mt.PullAudioOutputStream=Mt.AudioOutputStream=void 0;var Nv=A(),uk=x(),pk=Ln(),co=class{constructor(){}static createPullStream(){return uo.create()}};Mt.AudioOutputStream=co;var uo=class extends co{static create(){return new Yc}};Mt.PullAudioOutputStream=uo;var Yc=class extends uo{constructor(){super(),this.privId=Nv.createNoDashGuid(),this.privStream=new Nv.Stream}set format(e){e==null&&(this.privFormat=pk.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return f(this,null,function*(){let t=new Int8Array(e),i=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),i=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;i<e.byteLength&&!this.privStream.isReadEnded;){let n=yield this.privStream.read();if(n!==void 0&&!n.isEnd){let s;n.buffer.byteLength>e.byteLength-i?(s=n.buffer.slice(0,e.byteLength-i),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-i))):s=n.buffer,t.set(new Int8Array(s),i),i+=s.byteLength}else this.privStream.readEnded()}return i})}write(e){uk.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}};Mt.PullAudioOutputStreamImpl=Yc;var Xc=class extends co{constructor(){super()}static create(e){return new Zc(e)}};Mt.PushAudioOutputStream=Xc;var Zc=class extends Xc{constructor(e){super(),this.privId=Nv.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}};Mt.PushAudioOutputStreamImpl=Zc});var jv=l(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.AudioOutputConfigImpl=ri.AudioConfigImpl=ri.AudioConfig=void 0;var zi=Ee(),lk=x(),Li=C(),hk=Dv(),dk=xv(),fk=ki(),po=class r{static fromDefaultMicrophoneInput(){let e=new zi.PcmRecorder(!0);return new Tr(new zi.MicAudioSource(e))}static fromMicrophoneInput(e){let t=new zi.PcmRecorder(!0);return new Tr(new zi.MicAudioSource(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new Tr(new zi.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof Li.PullAudioInputStreamCallback)return new Tr(new dk.PullAudioInputStreamImpl(e));if(e instanceof Li.AudioInputStream)return new Tr(e);if(typeof MediaStream<"u"&&e instanceof MediaStream){let t=new zi.PcmRecorder(!1);return new Tr(new zi.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new Ar(new Li.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(e===void 0)return r.fromDefaultSpeakerOutput();if(e instanceof Li.SpeakerAudioDestination)return new Ar(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new Ar(new hk.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof Li.PushAudioOutputStreamCallback)return new Ar(new fk.PushAudioOutputStreamImpl(e));if(e instanceof Li.PushAudioOutputStream)return new Ar(e);if(e instanceof Li.PullAudioOutputStream)return new Ar(e);throw new Error("Not Supported Type")}};ri.AudioConfig=po;var Tr=class extends po{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then(()=>{e&&e()},i=>{t&&t(i)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(lk.Contracts.throwIfNull(t,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(e,t);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}};ri.AudioConfigImpl=Tr;var Ar=class extends po{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}};ri.AudioOutputConfigImpl=Ar});var JI=l(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.CancellationReason=void 0;var vk;(function(r){r[r.Error=0]="Error",r[r.EndOfStream=1]="EndOfStream"})(vk=lo.CancellationReason||(lo.CancellationReason={}))});var GI=l(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.PullAudioInputStreamCallback=void 0;var kv=class{};eu.PullAudioInputStreamCallback=kv});var $I=l(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.PushAudioOutputStreamCallback=void 0;var zv=class{};tu.PushAudioOutputStreamCallback=zv});var YI=l(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.KeywordRecognitionModel=void 0;var QI=x(),Lv=class{constructor(){this.privDisposed=!1}static fromFile(e){throw QI.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw QI.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};ru.KeywordRecognitionModel=Lv});var XI=l(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.SessionEventArgs=void 0;var Fv=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};iu.SessionEventArgs=Fv});var ZI=l(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.RecognitionEventArgs=void 0;var gk=C(),Bv=class extends gk.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}};nu.RecognitionEventArgs=Bv});var e_=l(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.OutputFormat=void 0;var mk;(function(r){r[r.Simple=0]="Simple",r[r.Detailed=1]="Detailed"})(mk=ho.OutputFormat||(ho.OutputFormat={}))});var t_=l(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.IntentRecognitionEventArgs=void 0;var yk=C(),Uv=class extends yk.RecognitionEventArgs{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}};su.IntentRecognitionEventArgs=Uv});var r_=l(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.RecognitionResult=void 0;var Wv=class{constructor(e,t,i,n,s,o,a,c,u,p){this.privResultId=e,this.privReason=t,this.privText=i,this.privDuration=n,this.privOffset=s,this.privLanguage=o,this.privLanguageDetectionConfidence=a,this.privErrorDetails=c,this.privJson=u,this.privProperties=p}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};ou.RecognitionResult=Wv});var i_=l(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.SpeechRecognitionResult=void 0;var Sk=C(),Hv=class extends Sk.RecognitionResult{constructor(e,t,i,n,s,o,a,c,u,p,h){super(e,t,i,n,s,o,a,u,p,h),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};au.SpeechRecognitionResult=Hv});var n_=l(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.IntentRecognitionResult=void 0;var Ck=C(),Vv=class extends Ck.SpeechRecognitionResult{constructor(e,t,i,n,s,o,a,c,u,p,h){super(t,i,n,s,o,a,c,void 0,u,p,h),this.privIntentId=e}get intentId(){return this.privIntentId}};cu.IntentRecognitionResult=Vv});var s_=l(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.LanguageUnderstandingModelImpl=Un.LanguageUnderstandingModel=void 0;var Fn=x(),uu=class{constructor(){}static fromEndpoint(e){Fn.Contracts.throwIfNull(e,"uri"),Fn.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");let t=new Bn,i=e.host.indexOf(".");if(i===-1)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,i);let n=e.pathname.lastIndexOf("/")+1;if(n===-1)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),t.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){Fn.Contracts.throwIfNullOrWhitespace(e,"appId");let t=new Bn;return t.appId=e,t}static fromSubscription(e,t,i){Fn.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),Fn.Contracts.throwIfNullOrWhitespace(t,"appId"),Fn.Contracts.throwIfNullOrWhitespace(i,"region");let n=new Bn;return n.appId=t,n.region=i,n.subscriptionKey=e,n}};Un.LanguageUnderstandingModel=uu;var Bn=class extends uu{};Un.LanguageUnderstandingModelImpl=Bn});var a_=l(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.MeetingTranscriptionEventArgs=ii.ConversationTranscriptionEventArgs=ii.SpeechRecognitionEventArgs=void 0;var o_=C(),pu=class extends o_.RecognitionEventArgs{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}};ii.SpeechRecognitionEventArgs=pu;var Kv=class extends o_.RecognitionEventArgs{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}};ii.ConversationTranscriptionEventArgs=Kv;var Jv=class extends pu{};ii.MeetingTranscriptionEventArgs=Jv});var Wn=l(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.CancellationEventArgsBase=void 0;var Pk=C(),Gv=class extends Pk.RecognitionEventArgs{constructor(e,t,i,n,s){super(n,s),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};lu.CancellationEventArgsBase=Gv});var c_=l(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.SpeechRecognitionCanceledEventArgs=void 0;var Rk=Wn(),$v=class extends Rk.CancellationEventArgsBase{};hu.SpeechRecognitionCanceledEventArgs=$v});var u_=l(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.TranslationRecognitionEventArgs=void 0;var wk=C(),Qv=class extends wk.RecognitionEventArgs{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}};du.TranslationRecognitionEventArgs=Qv});var p_=l(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.TranslationSynthesisEventArgs=void 0;var bk=C(),Yv=class extends bk.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}};fu.TranslationSynthesisEventArgs=Yv});var Zv=l(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.TranslationRecognitionResult=void 0;var Ek=C(),Xv=class r extends Ek.SpeechRecognitionResult{constructor(e,t,i,n,s,o,a,c,u,p,h){super(t,i,n,s,o,a,c,void 0,u,p,h),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new r(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};vu.TranslationRecognitionResult=Xv});var l_=l(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.TranslationSynthesisResult=void 0;var eg=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}};gu.TranslationSynthesisResult=eg});var h_=l(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.ResultReason=void 0;var Ik;(function(r){r[r.NoMatch=0]="NoMatch",r[r.Canceled=1]="Canceled",r[r.RecognizingSpeech=2]="RecognizingSpeech",r[r.RecognizedSpeech=3]="RecognizedSpeech",r[r.RecognizedKeyword=4]="RecognizedKeyword",r[r.RecognizingIntent=5]="RecognizingIntent",r[r.RecognizedIntent=6]="RecognizedIntent",r[r.TranslatingSpeech=7]="TranslatingSpeech",r[r.TranslatedSpeech=8]="TranslatedSpeech",r[r.SynthesizingAudio=9]="SynthesizingAudio",r[r.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",r[r.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",r[r.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",r[r.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",r[r.RecognizedSpeakers=14]="RecognizedSpeakers",r[r.RecognizedSpeaker=15]="RecognizedSpeaker",r[r.ResetVoiceProfile=16]="ResetVoiceProfile",r[r.DeletedVoiceProfile=17]="DeletedVoiceProfile",r[r.VoicesListRetrieved=18]="VoicesListRetrieved",r[r.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",r[r.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",r[r.TranslatedInstantMessage=21]="TranslatedInstantMessage",r[r.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"})(Ik=fo.ResultReason||(fo.ResultReason={}))});var d_=l(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.SpeechConfigImpl=Hn.SpeechConfig=void 0;var vo=I(),Fi=x(),N=C(),mu=class{constructor(){}static fromSubscription(e,t){Fi.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),Fi.Contracts.throwIfNullOrWhitespace(t,"region");let i=new Bi;return i.setProperty(N.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(N.PropertyId.SpeechServiceConnection_IntentRegion,t),i.setProperty(N.PropertyId.SpeechServiceConnection_Key,e),i}static fromEndpoint(e,t){Fi.Contracts.throwIfNull(e,"endpoint");let i=new Bi;return i.setProperty(N.PropertyId.SpeechServiceConnection_Endpoint,e.href),t!==void 0&&i.setProperty(N.PropertyId.SpeechServiceConnection_Key,t),i}static fromHost(e,t){Fi.Contracts.throwIfNull(e,"hostName");let i=new Bi;return i.setProperty(N.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),t!==void 0&&i.setProperty(N.PropertyId.SpeechServiceConnection_Key,t),i}static fromAuthorizationToken(e,t){Fi.Contracts.throwIfNull(e,"authorizationToken"),Fi.Contracts.throwIfNullOrWhitespace(t,"region");let i=new Bi;return i.setProperty(N.PropertyId.SpeechServiceConnection_Region,t),i.setProperty(N.PropertyId.SpeechServiceConnection_IntentRegion,t),i.authorizationToken=e,i}close(){}};Hn.SpeechConfig=mu;var Bi=class r extends mu{constructor(){super(),this.privProperties=new N.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=N.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return N.OutputFormat[this.privProperties.getProperty(vo.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(vo.OutputFormatPropertyName,N.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){Fi.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,i,n){this.setProperty(N.PropertyId[N.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(N.PropertyId[N.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(N.PropertyId[N.PropertyId.SpeechServiceConnection_ProxyUserName],i),this.setProperty(N.PropertyId[N.PropertyId.SpeechServiceConnection_ProxyPassword],n)}setServiceProperty(e,t){let i=JSON.parse(this.privProperties.getProperty(vo.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privProperties.setProperty(vo.ServicePropertiesPropertyName,JSON.stringify(i))}setProfanity(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceResponse_ProfanityOption,N.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(N.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(vo.ForceDictationPropertyName,"true")}clone(){let e=new r;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return N.SpeechSynthesisOutputFormat[this.privProperties.getProperty(N.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(N.PropertyId.SpeechServiceConnection_SynthOutputFormat,N.SpeechSynthesisOutputFormat[e])}};Hn.SpeechConfigImpl=Bi});var f_=l(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.SpeechTranslationConfigImpl=Vn.SpeechTranslationConfig=void 0;var go=I(),$t=x(),M=C(),yu=class extends M.SpeechConfig{constructor(){super()}static fromSubscription(e,t){$t.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),$t.Contracts.throwIfNullOrWhitespace(t,"region");let i=new Ui;return i.properties.setProperty(M.PropertyId.SpeechServiceConnection_Key,e),i.properties.setProperty(M.PropertyId.SpeechServiceConnection_Region,t),i}static fromAuthorizationToken(e,t){$t.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),$t.Contracts.throwIfNullOrWhitespace(t,"region");let i=new Ui;return i.properties.setProperty(M.PropertyId.SpeechServiceAuthorization_Token,e),i.properties.setProperty(M.PropertyId.SpeechServiceConnection_Region,t),i}static fromHost(e,t){$t.Contracts.throwIfNull(e,"hostName");let i=new Ui;return i.setProperty(M.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),t!==void 0&&i.setProperty(M.PropertyId.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){$t.Contracts.throwIfNull(e,"endpoint"),$t.Contracts.throwIfNull(t,"subscriptionKey");let i=new Ui;return i.properties.setProperty(M.PropertyId.SpeechServiceConnection_Endpoint,e.href),i.properties.setProperty(M.PropertyId.SpeechServiceConnection_Key,t),i}};Vn.SpeechTranslationConfig=yu;var Ui=class extends yu{constructor(){super(),this.privSpeechProperties=new M.PropertyCollection,this.outputFormat=M.OutputFormat.Simple}set authorizationToken(e){$t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){$t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return M.OutputFormat[this.privSpeechProperties.getProperty(go.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(go.OutputFormatPropertyName,M.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){$t.Contracts.throwIfNullOrWhitespace(e,"value");let t=this.targetLanguages;t.includes(e)||(t.push(e),this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){$t.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_Region)}setProxy(e,t,i,n){this.setProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_ProxyUserName],i),this.setProperty(M.PropertyId[M.PropertyId.SpeechServiceConnection_ProxyPassword],n)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){let i=JSON.parse(this.privSpeechProperties.getProperty(go.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privSpeechProperties.setProperty(go.ServicePropertiesPropertyName,JSON.stringify(i))}setProfanity(e){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceResponse_ProfanityOption,M.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(go.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return M.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(M.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(M.PropertyId.SpeechServiceConnection_SynthOutputFormat,M.SpeechSynthesisOutputFormat[e])}};Vn.SpeechTranslationConfigImpl=Ui});var rg=l(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.PropertyCollection=void 0;var v_=C(),tg=class r{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let i;typeof e=="string"?i=e:i=v_.PropertyId[e];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===i)return this.privValues[n];if(t!==void 0)return String(t)}setProperty(e,t){let i;typeof e=="string"?i=e:i=v_.PropertyId[e];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===i){this.privValues[n]=t;return}this.privKeys.push(i),this.privValues.push(t)}clone(){let e=new r;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach(t=>{if(e.getProperty(t,void 0)===void 0){let i=this.getProperty(t);e.setProperty(t,i)}})}get keys(){return this.privKeys}};Su.PropertyCollection=tg});var Cu=l(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.PropertyId=void 0;var _k;(function(r){r[r.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",r[r.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",r[r.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",r[r.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",r[r.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",r[r.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",r[r.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",r[r.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",r[r.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",r[r.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",r[r.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",r[r.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",r[r.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",r[r.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",r[r.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",r[r.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",r[r.Speech_SessionId=16]="Speech_SessionId",r[r.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",r[r.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",r[r.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",r[r.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",r[r.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",r[r.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",r[r.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",r[r.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",r[r.CancellationDetails_Reason=25]="CancellationDetails_Reason",r[r.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",r[r.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",r[r.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",r[r.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",r[r.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",r[r.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",r[r.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",r[r.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",r[r.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",r[r.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",r[r.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",r[r.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",r[r.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",r[r.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",r[r.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",r[r.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",r[r.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",r[r.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",r[r.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",r[r.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",r[r.Conversation_ApplicationId=46]="Conversation_ApplicationId",r[r.Conversation_DialogType=47]="Conversation_DialogType",r[r.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",r[r.Conversation_From_Id=49]="Conversation_From_Id",r[r.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",r[r.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",r[r.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",r[r.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",r[r.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",r[r.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",r[r.ConversationTranslator_Host=56]="ConversationTranslator_Host",r[r.ConversationTranslator_Name=57]="ConversationTranslator_Name",r[r.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",r[r.ConversationTranslator_Token=59]="ConversationTranslator_Token",r[r.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",r[r.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",r[r.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",r[r.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",r[r.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",r[r.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",r[r.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",r[r.WebWorkerLoadType=67]="WebWorkerLoadType",r[r.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"})(_k=mo.PropertyId||(mo.PropertyId={}))});var m_=l(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.Recognizer=void 0;var Wi=I(),g_=A(),Pu=x(),Ru=C(),ig=class r{constructor(e,t,i){this.audioConfig=e!==void 0?e:Ru.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=i,this.implCommonRecognizerSetup()}close(e,t){Pu.Contracts.throwIfDisposed(this.privDisposed),g_.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return f(this,null,function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))})}static get telemetryEnabled(){return Wi.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){Wi.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e=typeof window<"u"?"Browser":"Node",t="unknown",i="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);let n=this.createRecognizerConfig(new Wi.SpeechServiceConfig(new Wi.Context(new Wi.OS(e,t,i))));this.privReco=this.createServiceRecognizer(r.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,n)}recognizeOnceAsyncImpl(e){return f(this,null,function*(){Pu.Contracts.throwIfDisposed(this.privDisposed);let t=new g_.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);let i=yield t.promise;return yield this.implRecognizerStop(),i})}startContinuousRecognitionAsyncImpl(e){return f(this,null,function*(){Pu.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)})}stopContinuousRecognitionAsyncImpl(){return f(this,null,function*(){Pu.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()})}implRecognizerStop(){return f(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}static getAuthFromProperties(e){let t=e.getProperty(Ru.PropertyId.SpeechServiceConnection_Key,void 0);return t&&t!==""?new Wi.CognitiveSubscriptionKeyAuthentication(t):new Wi.CognitiveTokenAuthentication(()=>{let n=e.getProperty(Ru.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)},()=>{let n=e.getProperty(Ru.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)})}};wu.Recognizer=ig});var y_=l(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SpeechRecognizer=void 0;var Kn=I(),bu=A(),ni=x(),ut=C(),ng=class r extends ut.Recognizer{constructor(e,t){let i=e;ni.Contracts.throwIfNull(i,"speechConfig"),ni.Contracts.throwIfNullOrWhitespace(i.properties.getProperty(ut.PropertyId.SpeechServiceConnection_RecoLanguage),ut.PropertyId[ut.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,i.properties,new Kn.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,t,i){let n=e;return t.properties.mergeTo(n.properties),new r(e,i)}get endpointId(){return ni.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(ut.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(ut.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){ni.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(ut.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return ni.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(ut.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return ni.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Kn.OutputFormatPropertyName,ut.OutputFormat[ut.OutputFormat.Simple])===ut.OutputFormat[ut.OutputFormat.Simple]?ut.OutputFormat.Simple:ut.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){bu.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Kn.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){bu.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Kn.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){bu.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){ni.Contracts.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){ni.Contracts.throwIfDisposed(this.privDisposedRecognizer),bu.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return f(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield ye(r.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new Kn.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new Kn.SpeechServiceRecognizer(e,t,s,n,this)}};Eu.SpeechRecognizer=ng});var S_=l(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.IntentRecognizer=void 0;var Hi=I(),Iu=A(),$e=x(),Or=C(),sg=class r extends Or.Recognizer{constructor(e,t){$e.Contracts.throwIfNullOrUndefined(e,"speechConfig");let i=e;$e.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(t,i.properties,new Hi.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=i.properties,$e.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Or.PropertyId.SpeechServiceConnection_RecoLanguage),Or.PropertyId[Or.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return $e.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(Or.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(Or.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Or.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if($e.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let i=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",i.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(i.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Iu.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Hi.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let i=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",i.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(i.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Iu.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Hi.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Iu.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,i){$e.Contracts.throwIfNull(e,"model"),i&&i("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(i){t&&t(i)}}addIntent(e,t){$e.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),$e.Contracts.throwIfNullOrWhitespace(t,"intentId"),$e.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,i){$e.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),$e.Contracts.throwIfNullOrWhitespace(e,"intentId"),$e.Contracts.throwIfNull(t,"model");let n=t;$e.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privAddedLmIntents[e]=new Hi.AddedLmIntent(n,i)}addAllIntents(e,t){$e.Contracts.throwIfNull(e,"model");let i=e;$e.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privUmbrellaIntent=new Hi.AddedLmIntent(i,t)}close(e,t){$e.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Iu.marshalPromiseToCallbacks(this.dispose(!0),e,t)}createRecognizerConfig(e){return new Hi.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new Hi.IntentServiceRecognizer(e,t,s,n,this)}dispose(e){return f(this,null,function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield ye(r.prototype,this,"dispose").call(this,e))})}buildSpeechContext(){let e,t,i,n=[];this.privUmbrellaIntent!==void 0&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,i=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(let s of Object.keys(this.privAddedLmIntents)){let o=this.privAddedLmIntents[s];if(e===void 0)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(t===void 0)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(i===void 0)i=o.modelImpl.subscriptionKey;else if(i!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");let a="luis/"+e+"-PRODUCTION#"+s;n.push(a)}return{Intent:{id:e,key:i===void 0?this.privProperties.getProperty(Or.PropertyId[Or.PropertyId.SpeechServiceConnection_Key]):i,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?n:["luis/"+e+"-PRODUCTION"]}}};_u.IntentRecognizer=sg});var C_=l(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.VoiceProfileType=void 0;var Tk;(function(r){r[r.TextIndependentIdentification=0]="TextIndependentIdentification",r[r.TextDependentVerification=1]="TextDependentVerification",r[r.TextIndependentVerification=2]="TextIndependentVerification"})(Tk=yo.VoiceProfileType||(yo.VoiceProfileType={}))});var cg=l(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ConnectionMessageImpl=Jn.ConnectionMessage=void 0;var P_=Je(),R_=A(),Ak=rg(),Ok=Cu(),og=class{};Jn.ConnectionMessage=og;var ag=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new Ak.PropertyCollection,this.privConnectionMessage.headers[P_.HeaderNames.ConnectionId]&&this.privProperties.setProperty(Ok.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[P_.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(t=>{this.privProperties.setProperty(t,this.privConnectionMessage.headers[t])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===R_.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===R_.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}};Jn.ConnectionMessageImpl=ag});var hg=l(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Connection=void 0;var ug=I(),pg=A(),w_=cg(),Mk=x(),So=C(),lg=class r{static fromRecognizer(e){let t=e.internalData,i=new r;return i.privInternalData=t,i.setupEvents(),i}static fromSynthesizer(e){let t=e.internalData,i=new r;return i.privInternalData=t,i.setupEvents(),i}openConnection(e,t){pg.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof ug.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");pg.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,i){if(Mk.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof ug.ServiceRecognizerBase){if(e.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,i)}else if(this.privInternalData instanceof ug.SynthesisAdapterBase){if(e.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,i)}}sendMessageAsync(e,t,i,n){pg.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),i,n)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{e.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new So.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new So.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new So.ConnectionMessageEventArgs(new w_.ConnectionMessageImpl(e.message))):e.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new So.ConnectionMessageEventArgs(new w_.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new So.ServiceEventArgs(e.jsonString,e.name))})}};Tu.Connection=lg});var b_=l(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.TranslationRecognizer=void 0;var Co=I(),Au=A(),Dk=hg(),Qt=x(),pe=C(),dg=class r extends pe.Recognizer{constructor(e,t,i){let n=e;Qt.Contracts.throwIfNull(n,"speechConfig"),super(t,n.properties,i||new Co.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&Qt.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationVoice),pe.PropertyId[pe.PropertyId.SpeechServiceConnection_TranslationVoice]),Qt.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages),pe.PropertyId[pe.PropertyId.SpeechServiceConnection_TranslationToLanguages]),Qt.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_RecoLanguage),pe.PropertyId[pe.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,t,i){let n=e;return t.properties.mergeTo(n.properties),new r(e,i)}get speechRecognitionLanguage(){return Qt.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Qt.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Qt.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(pe.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(pe.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){Qt.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Au.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Co.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){Au.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Co.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Au.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(Qt.Contracts.throwIfNullOrUndefined(e,"language to be removed"),this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){let t=this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),i=t.indexOf(e);i>-1&&(t.splice(i,1),this.properties.setProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){Qt.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(t=this.properties.getProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(pe.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){Qt.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Au.marshalPromiseToCallbacks(this.dispose(!0),e,t)}onConnection(){}dispose(e){return f(this,null,function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield ye(r.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new Co.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new Co.TranslationServiceRecognizer(e,t,s,n,this)}updateLanguages(e){let t=Dk.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};Ou.TranslationRecognizer=dg});var E_=l(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.Translations=void 0;var xk=C(),fg=class{constructor(){this.privMap=new xk.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}};Mu.Translations=fg});var I_=l(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.NoMatchReason=void 0;var qk;(function(r){r[r.NotRecognized=0]="NotRecognized",r[r.InitialSilenceTimeout=1]="InitialSilenceTimeout",r[r.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(qk=Po.NoMatchReason||(Po.NoMatchReason={}))});var __=l(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.NoMatchDetails=void 0;var vg=I(),Du=C(),gg=class r{constructor(e){this.privReason=e}static fromResult(e){let t=vg.SimpleSpeechPhrase.fromJSON(e.json),i=Du.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case vg.RecognitionStatus.BabbleTimeout:i=Du.NoMatchReason.InitialBabbleTimeout;break;case vg.RecognitionStatus.InitialSilenceTimeout:i=Du.NoMatchReason.InitialSilenceTimeout;break;default:i=Du.NoMatchReason.NotRecognized;break}return new r(i)}get reason(){return this.privReason}};xu.NoMatchDetails=gg});var T_=l(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.TranslationRecognitionCanceledEventArgs=void 0;var mg=class{constructor(e,t,i,n,s){this.privCancelReason=t,this.privErrorDetails=i,this.privResult=s,this.privSessionId=e,this.privErrorCode=n}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};qu.TranslationRecognitionCanceledEventArgs=mg});var A_=l(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.IntentRecognitionCanceledEventArgs=void 0;var Nk=C(),yg=class extends Nk.IntentRecognitionEventArgs{constructor(e,t,i,n,s,o){super(n,s,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Nu.IntentRecognitionCanceledEventArgs=yg});var Cg=l(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.CancellationDetailsBase=void 0;var Sg=class{constructor(e,t,i){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=i}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};ju.CancellationDetailsBase=Sg});var O_=l(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.CancellationDetails=void 0;var ku=I(),jk=Cg(),Gn=C(),Pg=class r extends jk.CancellationDetailsBase{constructor(e,t,i){super(e,t,i)}static fromResult(e){let t=Gn.CancellationReason.Error,i=Gn.CancellationErrorCode.NoError;if(e instanceof Gn.RecognitionResult&&e.json){let n=ku.SimpleSpeechPhrase.fromJSON(e.json);t=ku.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus)}return e.properties&&(i=Gn.CancellationErrorCode[e.properties.getProperty(ku.CancellationErrorCodePropertyName,Gn.CancellationErrorCode[Gn.CancellationErrorCode.NoError])]),new r(t,e.errorDetails||ku.EnumTranslation.implTranslateErrorDetails(i),i)}};zu.CancellationDetails=Pg});var M_=l(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.CancellationErrorCode=void 0;var kk;(function(r){r[r.NoError=0]="NoError",r[r.AuthenticationFailure=1]="AuthenticationFailure",r[r.BadRequestParameters=2]="BadRequestParameters",r[r.TooManyRequests=3]="TooManyRequests",r[r.ConnectionFailure=4]="ConnectionFailure",r[r.ServiceTimeout=5]="ServiceTimeout",r[r.ServiceError=6]="ServiceError",r[r.RuntimeError=7]="RuntimeError",r[r.Forbidden=8]="Forbidden"})(kk=Ro.CancellationErrorCode||(Ro.CancellationErrorCode={}))});var D_=l(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.ConnectionEventArgs=void 0;var zk=C(),Rg=class extends zk.SessionEventArgs{};Lu.ConnectionEventArgs=Rg});var x_=l(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.ServiceEventArgs=void 0;var Lk=C(),wg=class extends Lk.SessionEventArgs{constructor(e,t,i){super(i),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};Fu.ServiceEventArgs=wg});var q_=l(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.PhraseListGrammar=void 0;var bg=class r{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){let t=e.internalData;return new r(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}};Bu.PhraseListGrammar=bg});var Wu=l($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.DialogServiceConfigImpl=$n.DialogServiceConfig=void 0;var Fk=x(),wo=C(),Uu=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};$n.DialogServiceConfig=Uu;var Eg=class extends Uu{constructor(){super(),this.privSpeechConfig=new wo.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){Fk.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,i,n){this.setProperty(wo.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(wo.PropertyId.SpeechServiceConnection_ProxyPort,`${t}`),i&&this.setProperty(wo.PropertyId.SpeechServiceConnection_ProxyUserName,i),n&&this.setProperty(wo.PropertyId.SpeechServiceConnection_ProxyPassword,n)}setServiceProperty(e,t,i){this.privSpeechConfig.setServiceProperty(e,t)}close(){}};$n.DialogServiceConfigImpl=Eg});var N_=l(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.BotFrameworkConfig=void 0;var Vi=x(),Mr=Wu(),pt=C(),Ig=class extends Mr.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,i){Vi.Contracts.throwIfNullOrWhitespace(e,"subscription"),Vi.Contracts.throwIfNullOrWhitespace(t,"region");let n=new Mr.DialogServiceConfigImpl;return n.setProperty(pt.PropertyId.Conversation_DialogType,Mr.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(pt.PropertyId.SpeechServiceConnection_Key,e),n.setProperty(pt.PropertyId.SpeechServiceConnection_Region,t),i&&n.setProperty(pt.PropertyId.Conversation_ApplicationId,i),n}static fromAuthorizationToken(e,t,i){Vi.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),Vi.Contracts.throwIfNullOrWhitespace(t,"region");let n=new Mr.DialogServiceConfigImpl;return n.setProperty(pt.PropertyId.Conversation_DialogType,Mr.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(pt.PropertyId.SpeechServiceAuthorization_Token,e),n.setProperty(pt.PropertyId.SpeechServiceConnection_Region,t),i&&n.setProperty(pt.PropertyId.Conversation_ApplicationId,i),n}static fromHost(e,t,i){Vi.Contracts.throwIfNullOrUndefined(e,"host");let n=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);Vi.Contracts.throwIfNullOrUndefined(n,"resolvedHost");let s=new Mr.DialogServiceConfigImpl;return s.setProperty(pt.PropertyId.Conversation_DialogType,Mr.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(pt.PropertyId.SpeechServiceConnection_Host,n.toString()),t!==void 0&&s.setProperty(pt.PropertyId.SpeechServiceConnection_Key,t),s}static fromEndpoint(e,t){Vi.Contracts.throwIfNull(e,"endpoint");let i=new Mr.DialogServiceConfigImpl;return i.setProperty(pt.PropertyId.Conversation_DialogType,Mr.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(pt.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),t!==void 0&&i.setProperty(pt.PropertyId.SpeechServiceConnection_Key,t),i}};Hu.BotFrameworkConfig=Ig});var j_=l(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.CustomCommandsConfig=void 0;var Ki=x(),bo=Wu(),dr=C(),_g=class extends bo.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,i){Ki.Contracts.throwIfNullOrWhitespace(e,"applicationId"),Ki.Contracts.throwIfNullOrWhitespace(t,"subscription"),Ki.Contracts.throwIfNullOrWhitespace(i,"region");let n=new bo.DialogServiceConfigImpl;return n.setProperty(dr.PropertyId.Conversation_DialogType,bo.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(dr.PropertyId.Conversation_ApplicationId,e),n.setProperty(dr.PropertyId.SpeechServiceConnection_Key,t),n.setProperty(dr.PropertyId.SpeechServiceConnection_Region,i),n}static fromAuthorizationToken(e,t,i){Ki.Contracts.throwIfNullOrWhitespace(e,"applicationId"),Ki.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),Ki.Contracts.throwIfNullOrWhitespace(i,"region");let n=new bo.DialogServiceConfigImpl;return n.setProperty(dr.PropertyId.Conversation_DialogType,bo.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(dr.PropertyId.Conversation_ApplicationId,e),n.setProperty(dr.PropertyId.SpeechServiceAuthorization_Token,t),n.setProperty(dr.PropertyId.SpeechServiceConnection_Region,i),n}set applicationId(e){Ki.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(dr.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(dr.PropertyId.Conversation_ApplicationId)}};Vu.CustomCommandsConfig=_g});var Dr=l(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.QueryParameterNames=void 0;var oe=class{};Ku.QueryParameterNames=oe;oe.BotId="botid";oe.CustomSpeechDeploymentId="cid";oe.CustomVoiceDeploymentId="deploymentId";oe.EnableAudioLogging="storeAudio";oe.EnableLanguageId="lidEnabled";oe.EnableWordLevelTimestamps="wordLevelTimestamps";oe.EndSilenceTimeoutMs="endSilenceTimeoutMs";oe.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";oe.Format="format";oe.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";oe.Language="language";oe.Profanity="profanity";oe.RequestBotStatusMessages="enableBotMessageStatus";oe.StableIntermediateThreshold="stableIntermediateThreshold";oe.StableTranslation="stableTranslation";oe.TestHooks="testhooks";oe.Postprocessing="postprocessing";oe.CtsMeetingId="meetingId";oe.CtsDeviceId="deviceId";oe.CtsIsParticipant="isParticipant";oe.EnableAvatar="enableTalkingAvatar"});var Dt=l(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ConnectionFactoryBase=void 0;var Bk=I(),si=C(),oi=Dr(),Tg=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,i){new Map([[si.PropertyId.Speech_SegmentationSilenceTimeoutMs,oi.QueryParameterNames.SegmentationSilenceTimeoutMs],[si.PropertyId.SpeechServiceConnection_EnableAudioLogging,oi.QueryParameterNames.EnableAudioLogging],[si.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,oi.QueryParameterNames.EndSilenceTimeoutMs],[si.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,oi.QueryParameterNames.InitialSilenceTimeoutMs],[si.PropertyId.SpeechServiceResponse_PostProcessingOption,oi.QueryParameterNames.Postprocessing],[si.PropertyId.SpeechServiceResponse_ProfanityOption,oi.QueryParameterNames.Profanity],[si.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,oi.QueryParameterNames.EnableWordLevelTimestamps],[si.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,oi.QueryParameterNames.StableIntermediateThreshold]]).forEach((o,a)=>{this.setUrlParameter(a,o,e,t,i)});let s=JSON.parse(e.parameters.getProperty(Bk.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(o=>{t[o]=s[o]})}setUrlParameter(e,t,i,n,s){let o=i.parameters.getProperty(e,void 0);o&&(!s||s.search(t)===-1)&&(n[t]=o.toLocaleLowerCase())}};Ju.ConnectionFactoryBase=Tg});var F_=l($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.DialogConnectionFactory=void 0;var k_=Ee(),Uk=I(),yt=C(),z_=Dt(),Wk=I(),L_=Je(),Gu=Dr(),Eo=class r extends z_.ConnectionFactoryBase{create(e,t,i){let n=e.parameters.getProperty(yt.PropertyId.Conversation_ApplicationId,""),s=e.parameters.getProperty(yt.PropertyId.Conversation_DialogType),o=e.parameters.getProperty(yt.PropertyId.SpeechServiceConnection_Region),a=e.parameters.getProperty(yt.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c=e.parameters.getProperty(yt.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),u={};u[L_.HeaderNames.ConnectionId]=i,u[Gu.QueryParameterNames.Format]=e.parameters.getProperty(Uk.OutputFormatPropertyName,yt.OutputFormat[yt.OutputFormat.Simple]).toLowerCase(),u[Gu.QueryParameterNames.Language]=a,u[Gu.QueryParameterNames.RequestBotStatusMessages]=c,n&&(u[Gu.QueryParameterNames.BotId]=n,s===yt.DialogServiceConfig.DialogTypes.CustomCommands&&(u[L_.HeaderNames.CustomCommandsAppId]=n));let p=s===yt.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",h=s===yt.DialogServiceConfig.DialogTypes.CustomCommands?"v1":s===yt.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",d={};t.token!=null&&t.token!==""&&(d[t.headerName]=t.token);let v=e.parameters.getProperty(yt.PropertyId.SpeechServiceConnection_Endpoint,"");if(!v){let S=z_.ConnectionFactoryBase.getHostSuffix(o),R=e.parameters.getProperty(yt.PropertyId.SpeechServiceConnection_Host,`wss://${o}.${r.BaseUrl}${S}`);v=`${R.endsWith("/")?R:R+"/"}${p}${r.ApiKey}/${h}`}this.setCommonUrlParams(e,u,v);let y=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new k_.WebsocketConnection(v,u,d,new Wk.WebsocketMessageFormatter,k_.ProxyInfo.fromRecognizerConfig(e),y,i)}};$u.DialogConnectionFactory=Eo;Eo.ApiKey="api";Eo.BaseUrl="convai.speech"});var B_=l(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.DialogServiceConnector=void 0;var Hk=F_(),Ag=I(),Qn=A(),Qu=x(),Vk=C(),ai=Cu(),Og=class r extends Vk.Recognizer{constructor(e,t){let i=e;Qu.Contracts.throwIfNull(e,"dialogConfig"),super(t,i.properties,new Hk.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=i.properties.clone();let n=this.buildAgentConfig();this.privReco.agentConfig.set(n)}connect(e,t){Qn.marshalPromiseToCallbacks(this.privReco.connect(),e,t)}disconnect(e,t){Qn.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(ai.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Qu.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(ai.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(ai.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(ai.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){Qu.Contracts.throwIfDisposed(this.privIsDisposed);let n=f(this,null,function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;let s=new Qn.Deferred;yield this.privReco.recognize(Ag.RecognitionMode.Conversation,s.resolve,s.reject);let o=yield s.promise;return yield this.implRecognizerStop(),o});n.catch(()=>{this.dispose(!0).catch(()=>{})}),Qn.marshalPromiseToCallbacks(n.finally(()=>{this.isTurnComplete=!0}),e,t)}}sendActivityAsync(e,t,i){Qn.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,i)}close(e,t){Qu.Contracts.throwIfDisposed(this.privIsDisposed),Qn.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return f(this,null,function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield ye(r.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new Ag.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new Ag.DialogServiceAdapter(e,t,s,n,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(ai.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(ai.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(ai.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(ai.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};Yu.DialogServiceConnector=Og});var U_=l(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.ActivityReceivedEventArgs=void 0;var Mg=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};Xu.ActivityReceivedEventArgs=Mg});var W_=l(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.TurnStatusResponsePayload=void 0;var Dg=class r{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}};Zu.TurnStatusResponsePayload=Dg});var H_=l(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.TurnStatusReceivedEventArgs=void 0;var Kk=W_(),xg=class{constructor(e){this.privTurnStatus=Kk.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};ep.TurnStatusReceivedEventArgs=xg});var V_=l(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.ServicePropertyChannel=void 0;var Jk;(function(r){r[r.UriQueryParameter=0]="UriQueryParameter"})(Jk=Io.ServicePropertyChannel||(Io.ServicePropertyChannel={}))});var K_=l(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.ProfanityOption=void 0;var Gk;(function(r){r[r.Masked=0]="Masked",r[r.Removed=1]="Removed",r[r.Raw=2]="Raw"})(Gk=_o.ProfanityOption||(_o.ProfanityOption={}))});var J_=l(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.BaseAudioPlayer=void 0;var $k=Ht(),Qk=C(),Yk=Jr(),qg=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,e===void 0&&(e=Qk.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,i){try{this.ensureInitializedContext();let n=this.formatAudioData(e),s=new Float32Array(this.samples.length+n.length);s.set(this.samples,0),s.set(n,this.samples.length),this.samples=s,t&&t()}catch(n){i&&i(n)}}stopAudio(e,t){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},i=>{t&&t(i)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();let e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=Yk.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new $k.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){let i=new Float32Array(e.length);for(let n=0;n<e.length;n++)i[n]=e[n]/t;return i}updateAudioBuffer(){if(this.samples.length===0)return;let e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),i=this.samples.length/e,n=this.audioContext.createBuffer(e,i,this.audioFormat.samplesPerSec);for(let s=0;s<e;s++){let o=s,a=n.getChannelData(s);for(let c=0;c<this.samples.length;c++,o+=e)a[c]=this.samples[o]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}playAudio(e){return f(this,null,function*(){this.audioContext===null&&this.createAudioContext();let t=this.audioContext.createBufferSource(),i=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,n=>{t.buffer=n,t.connect(i),t.start(0)})})}};tp.BaseAudioPlayer=qg});var G_=l(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.ConnectionMessageEventArgs=void 0;var Ng=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};rp.ConnectionMessageEventArgs=Ng});var $_=l(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.VoiceProfile=void 0;var jg=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}};ip.VoiceProfile=jg});var Y_=l(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.VoiceProfileEnrollmentCancellationDetails=Yn.VoiceProfileEnrollmentResult=void 0;var Q_=I(),je=C(),kg=class r{constructor(e,t,i){this.privReason=e,this.privProperties=new je.PropertyCollection,this.privReason!==je.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=je.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(Q_.CancellationErrorCodePropertyName,je.CancellationErrorCode[je.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){let t=[];for(let i of e.value){let n=i.enrollmentStatus.toLowerCase()==="enrolling"?je.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?je.ResultReason.EnrolledVoiceProfile:je.ResultReason.Canceled,s=new r(n,null,null);s.privDetails=this.getIdentificationDetails(i),t.push(s)}return t}static FromVerificationProfileList(e){let t=[];for(let i of e.value){let n=i.enrollmentStatus.toLowerCase()==="enrolling"?je.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?je.ResultReason.EnrolledVoiceProfile:je.ResultReason.Canceled,s=new r(n,null,null);s.privDetails=this.getVerificationDetails(i),t.push(s)}return t}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};Yn.VoiceProfileEnrollmentResult=kg;var zg=class r extends je.CancellationDetailsBase{constructor(e,t,i){super(e,t,i)}static fromResult(e){let t=je.CancellationReason.Error,i=je.CancellationErrorCode.NoError;return e.properties&&(i=je.CancellationErrorCode[e.properties.getProperty(Q_.CancellationErrorCodePropertyName,je.CancellationErrorCode[je.CancellationErrorCode.NoError])]),new r(t,e.errorDetails,i)}};Yn.VoiceProfileEnrollmentCancellationDetails=zg});var Z_=l(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.VoiceProfileCancellationDetails=Xn.VoiceProfileResult=void 0;var X_=I(),Xk=x(),fr=C(),Lg=class{constructor(e,t){this.privReason=e,this.privProperties=new fr.PropertyCollection,e===fr.ResultReason.Canceled&&(Xk.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(X_.CancellationErrorCodePropertyName,fr.CancellationErrorCode[fr.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Xn.VoiceProfileResult=Lg;var Fg=class r extends fr.CancellationDetailsBase{constructor(e,t,i){super(e,t,i)}static fromResult(e){let t=fr.CancellationReason.Error,i=fr.CancellationErrorCode.NoError;return e.properties&&(i=fr.CancellationErrorCode[e.properties.getProperty(X_.CancellationErrorCodePropertyName,fr.CancellationErrorCode[fr.CancellationErrorCode.NoError])]),new r(t,e.errorDetails,i)}};Xn.VoiceProfileCancellationDetails=Fg});var eT=l(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.VoiceProfilePhraseResult=void 0;var Zk=x(),ez=C(),Bg=class extends ez.VoiceProfileResult{constructor(e,t,i,n){super(e,t),this.privPhrases=[],Zk.Contracts.throwIfNullOrUndefined(n,"phrase array"),this.privType=i,n&&n[0]&&(this.privPhrases=n)}get phrases(){return this.privPhrases}get type(){return this.privType}};np.VoiceProfilePhraseResult=Bg});var tT=l(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.VoiceProfileClient=void 0;var Ug=I(),tz=jv(),sp=x(),Ji=C(),Wg=class r extends Ji.Recognizer{constructor(e){sp.Contracts.throwIfNullOrUndefined(e,"speechConfig");let t=e;sp.Contracts.throwIfNull(t,"speechConfig"),super(tz.AudioConfig.fromStreamInput(Ji.AudioInputStream.createPushStream()),t.properties,new Ug.VoiceProfileConnectionFactory),this.privProperties=t.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Ji.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){sp.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Ji.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return f(this,null,function*(){let i=yield this.privVoiceAdapter.createProfile(e,t);return new Ji.VoiceProfile(i[0],e)})}retrieveEnrollmentResultAsync(e){return f(this,null,function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)})}getAllProfilesAsync(e){return f(this,null,function*(){return this.privVoiceAdapter.getAllProfiles(e)})}getActivationPhrasesAsync(e,t){return f(this,null,function*(){return this.privVoiceAdapter.getActivationPhrases(e,t)})}enrollProfileAsync(e,t){return f(this,null,function*(){let i=t;return sp.Contracts.throwIfNullOrUndefined(i,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=i,this.privVoiceAdapter.enrollProfile(e)})}deleteProfileAsync(e){return f(this,null,function*(){return this.privVoiceAdapter.deleteProfile(e)})}resetProfileAsync(e){return f(this,null,function*(){return this.privVoiceAdapter.resetProfile(e)})}close(){return f(this,null,function*(){yield this.dispose(!0)})}createServiceRecognizer(e,t,i,n){let s=i;return new Ug.VoiceServiceRecognizer(e,t,s,n,this)}dispose(e){return f(this,null,function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield ye(r.prototype,this,"dispose").call(this,e)))})}createRecognizerConfig(e){return new Ug.RecognizerConfig(e,this.properties)}getResult(e,t){return new Ji.VoiceProfileResult(e.ok?t:Ji.ResultReason.Canceled,e.statusText)}};op.VoiceProfileClient=Wg});var rT=l(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.SpeakerRecognizer=void 0;var Hg=I(),Gi=x(),Vg=C(),Kg=class r extends Vg.Recognizer{constructor(e,t){Gi.Contracts.throwIfNullOrUndefined(e,"speechConfig");let i=e;Gi.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(t,i.properties,new Hg.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=t,Gi.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(Vg.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Gi.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Vg.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return f(this,null,function*(){return Gi.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)})}close(){return f(this,null,function*(){Gi.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)})}recognizeSpeakerOnceAsyncImpl(e){return f(this,null,function*(){Gi.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();let t=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),t})}implRecognizerStop(){return f(this,null,function*(){this.privReco&&(yield this.privReco.stopRecognizing())})}createRecognizerConfig(e){return new Hg.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new Hg.SpeakerServiceRecognizer(e,t,s,n,this)}dispose(e){return f(this,null,function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield ye(r.prototype,this,"dispose").call(this,e))})}};ap.SpeakerRecognizer=Kg});var iT=l(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.SpeakerIdentificationModel=void 0;var rz=x(),iz=C(),Jg=class r{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],rz.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),e.length===0)throw new Error("Empty Voice Profiles array");for(let t of e){if(t.profileType!==iz.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+t.profileId);this.privVoiceProfiles.push(t),this.privProfileIds.push(t.profileId)}}static fromProfiles(e){return new r(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};cp.SpeakerIdentificationModel=Jg});var sT=l(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.SpeakerVerificationModel=void 0;var nz=x(),nT=C(),Gg=class r{constructor(e){if(nz.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===nT.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new r(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===nT.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};up.SpeakerVerificationModel=Gg});var $g=l(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.LanguageIdMode=void 0;var sz;(function(r){r[r.AtStart=0]="AtStart",r[r.Continuous=1]="Continuous"})(sz=To.LanguageIdMode||(To.LanguageIdMode={}))});var aT=l(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.AutoDetectSourceLanguageConfig=void 0;var oz=I(),az=x(),vr=C(),oT=$g(),Qg=class r{constructor(){this.privProperties=new vr.PropertyCollection,this.privProperties.setProperty(vr.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=oT.LanguageIdMode.AtStart}static fromOpenRange(){let e=new r;return e.properties.setProperty(vr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,oz.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){az.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");let t=new r;return t.properties.setProperty(vr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");let t=new r,i=[];return e.forEach(n=>{if(i.push(n.language),n.endpointId!==void 0&&n.endpointId!==""){let s=n.language+vr.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(s,n.endpointId)}}),t.properties.setProperty(vr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i.join()),t}get properties(){return this.privProperties}set mode(e){e===oT.LanguageIdMode.Continuous?(this.privProperties.setProperty(vr.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(vr.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(vr.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(vr.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}};pp.AutoDetectSourceLanguageConfig=Qg});var uT=l(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.AutoDetectSourceLanguageResult=void 0;var cT=x(),Yg=class r{constructor(e,t){cT.Contracts.throwIfNullOrUndefined(e,"language"),cT.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new r(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new r(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};lp.AutoDetectSourceLanguageResult=Yg});var pT=l(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.SourceLanguageConfig=void 0;var cz=x(),Xg=class r{constructor(e,t){cz.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new r(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};hp.SourceLanguageConfig=Xg});var hT=l(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.SpeakerRecognitionCancellationDetails=xr.SpeakerRecognitionResult=xr.SpeakerRecognitionResultType=void 0;var lT=I(),lt=C(),dp;(function(r){r[r.Verify=0]="Verify",r[r.Identify=1]="Identify"})(dp=xr.SpeakerRecognitionResultType||(xr.SpeakerRecognitionResultType={}));var Zg=class{constructor(e,t=lt.ResultReason.RecognizedSpeaker,i=lt.CancellationErrorCode.NoError,n=""){this.privProperties=new lt.PropertyCollection;let s=e.scenario==="TextIndependentIdentification"?dp.Identify:dp.Verify;this.privReason=t,this.privReason!==lt.ResultReason.Canceled?s===dp.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=lt.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,e.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=lt.ResultReason.NoMatch),e.verificationResult.profileId!==void 0&&e.verificationResult.profileId!==""&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=n,this.privProperties.setProperty(lT.CancellationErrorCodePropertyName,lt.CancellationErrorCode[i])),this.privProperties.setProperty(lt.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};xr.SpeakerRecognitionResult=Zg;var em=class r extends lt.CancellationDetailsBase{constructor(e,t,i){super(e,t,i)}static fromResult(e){let t=lt.CancellationReason.Error,i=lt.CancellationErrorCode.NoError;return e.properties&&(i=lt.CancellationErrorCode[e.properties.getProperty(lT.CancellationErrorCodePropertyName,lt.CancellationErrorCode[lt.CancellationErrorCode.NoError])]),new r(t,e.errorDetails,i)}};xr.SpeakerRecognitionCancellationDetails=em});var tm=l(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.ConversationImpl=Zn.Conversation=void 0;var Q=I(),Ao=A(),b=x(),$=C(),fp=class{constructor(){}static createConversationAsync(e,t,i,n){b.Contracts.throwIfNullOrUndefined(e,Q.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),b.Contracts.throwIfNullOrUndefined(e.region,Q.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!e.subscriptionKey&&!e.getProperty($.PropertyId[$.PropertyId.SpeechServiceAuthorization_Token])&&b.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Q.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let s,o,a;return typeof t=="string"?(s=new Oo(e,t),Ao.marshalPromiseToCallbacks(f(this,null,function*(){}),i,n)):(s=new Oo(e),o=t,a=i,s.createConversationAsync(()=>{o&&o()},c=>{a&&a(c)})),s}};Zn.Conversation=fp;var Oo=class extends fp{constructor(e,t){if(super(),this.privErrors=Q.ConversationConnectionConfig.restErrors,this.onConnected=s=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,s)}catch{}},this.onDisconnected=s=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,s)}catch{}finally{this.close(!1)}},this.onCanceled=(s,o)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,o)}catch{}},this.onParticipantUpdateCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.id);if(a!==void 0){switch(o.key){case Q.ConversationTranslatorCommandTypes.changeNickname:a.displayName=o.value;break;case Q.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=o.value;break;case Q.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=o.value;break;case Q.ConversationTranslatorCommandTypes.setMute:a.isMuted=o.value;break;case Q.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=o.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new $.ConversationParticipantsChangedEventArgs($.ParticipantChangedReason.Updated,[this.toParticipant(a)],o.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(s,o)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:o.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new $.ConversationParticipantsChangedEventArgs($.ParticipantChangedReason.Updated,this.toParticipants(!1),o.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(s,o)=>{try{let a=this.privParticipants.addOrUpdateParticipant(o.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new $.ConversationParticipantsChangedEventArgs($.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],o.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(o.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new $.ConversationParticipantsChangedEventArgs($.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],o.sessionId)))}catch{}},this.onTranslationReceived=(s,o)=>{try{switch(o.command){case Q.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new $.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case Q.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new $.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case Q.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new $.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break}}catch{}},this.onParticipantsListReceived=(s,o)=>{try{if(o.sessionToken!==void 0&&o.sessionToken!==null&&(this.privRoom.token=o.sessionToken),this.privParticipants.participants=[...o.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new $.ConversationParticipantsChangedEventArgs($.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),o.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty($.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(s,o)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,o)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new $.PropertyCollection,this.privManager=new Q.ConversationManager,e.getProperty($.PropertyId[$.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty($.PropertyId[$.PropertyId.SpeechServiceConnection_RecoLanguage],Q.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty($.PropertyId[$.PropertyId.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{e.targetLanguages.length===0&&e.addTargetLanguage(this.privLanguage),e.getProperty($.PropertyId[$.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity($.ProfanityOption.Masked);let o=e.getProperty($.PropertyId[$.PropertyId.ConversationTranslator_Name]);o==null&&(o="Host"),b.Contracts.throwIfNullOrTooLong(o,"nickname",50),b.Contracts.throwIfNullOrTooShort(o,"nickname",2),e.setProperty($.PropertyId[$.PropertyId.ConversationTranslator_Name],o)}this.privConfig=e;let n=e;b.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Q.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let e=this.conversationId,t=this.participants.map(s=>({id:s.id,preferredLanguage:s.preferredLanguage,voice:s.voice})),i={};for(let s of Q.ConversationConnectionConfig.transcriptionEventKeys){let o=this.properties.getProperty(s,"");o!==""&&(i[s]=o)}return{id:e,participants:t,conversationProperties:i}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){b.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,i=>{i||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=i,this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=Q.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}addParticipantAsync(e,t,i){b.Contracts.throwIfNullOrUndefined(e,"Participant"),Ao.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,i)}joinConversationAsync(e,t,i,n,s){try{b.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),b.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),b.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,o=>{b.Contracts.throwIfNullOrUndefined(o,this.privErrors.permissionDeniedConnect),this.privRoom=o,this.privConfig.authorizationToken=o.cognitiveSpeechAuthToken,n&&n(o.cognitiveSpeechAuthToken)},o=>{this.handleError(o,s)})}catch(o){this.handleError(o,s)}}deleteConversationAsync(e,t){Ao.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return f(this,null,function*(){b.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),b.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endConversationAsync(e,t){Ao.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}muteAllParticipantsAsync(e,t){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}muteParticipantAsync(e,t,i){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,i)},s=>{this.handleError(s,i)})}catch(n){this.handleError(n,i)}}removeParticipantAsync(e,t,i){try{if(b.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))Ao.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,i);else{b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let n="";typeof e=="string"?n=e:e.hasOwnProperty("id")?n=e.id:e.hasOwnProperty("userId")&&(n=e.userId),b.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(o=>o.id===n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(n),()=>{this.handleCallback(t,i)},o=>{this.handleError(o,i)})}}catch(n){this.handleError(n,i)}}unlockConversationAsync(e,t){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}unmuteAllParticipantsAsync(e,t){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}unmuteParticipantAsync(e,t,i){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,i)},s=>{this.handleError(s,i)})}catch(n){this.handleError(n,i)}}sendTextMessageAsync(e,t,i){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}setTranslatedLanguagesAsync(e,t,i){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}changeNicknameAsync(e,t,i){try{b.Contracts.throwIfDisposed(this.privIsDisposed),b.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),b.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),b.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return f(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let i=this.conversationInfo;return i.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(i,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){return f(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(t){throw t}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(i){t&&t(i)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){let i=e;t(i.name+": "+i.message)}else t(e)}toParticipants(e){let t=this.privParticipants.participants.map(i=>this.toParticipant(i));return e?t:t.filter(i=>i.isHost===!1)}toParticipant(e){return new $.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(e,"nickname"),b.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Q.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Q.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return b.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),b.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),b.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Q.ConversationTranslatorMessageTypes.instantMessage})}};Zn.ConversationImpl=Oo});var dT=l(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.ConversationCommon=void 0;var rm=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(i){t&&t(i)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){let i=e;t(i.name+": "+i.message)}else t(e)}};vp.ConversationCommon=rm});var fT=l(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.ConversationExpirationEventArgs=void 0;var uz=C(),im=class extends uz.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};gp.ConversationExpirationEventArgs=im});var vT=l(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.ConversationParticipantsChangedEventArgs=void 0;var pz=C(),nm=class extends pz.SessionEventArgs{constructor(e,t,i){super(i),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}};mp.ConversationParticipantsChangedEventArgs=nm});var gT=l(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.ConversationTranslationCanceledEventArgs=void 0;var lz=Wn(),sm=class extends lz.CancellationEventArgsBase{};yp.ConversationTranslationCanceledEventArgs=sm});var mT=l(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.ConversationTranslationEventArgs=void 0;var hz=C(),om=class extends hz.RecognitionEventArgs{constructor(e,t,i){super(t,i),this.privResult=e}get result(){return this.privResult}};Sp.ConversationTranslationEventArgs=om});var yT=l(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.ConversationTranslationResult=void 0;var dz=Zv(),am=class extends dz.TranslationRecognitionResult{constructor(e,t,i,n,s,o,a,c,u,p,h){super(t,n,s,o,a,c,void 0,void 0,u,p,h),this.privId=e,this.privOrigLang=i}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};Cp.ConversationTranslationResult=am});var um=l(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.StringUtils=void 0;var cm=class{static formatString(e,t){if(!e)return"";if(!t)return e;let i="",n="",s=c=>{i+=c},o=c=>{n+=c},a=s;for(let c=0;c<e.length;c++){let u=e[c],p=c+1<e.length?e[c+1]:"";switch(u){case"{":p==="{"?(a("{"),c++):a=o;break;case"}":p==="}"?(a("}"),c++):(t.hasOwnProperty(n)&&(i+=t[n]),a=s,n="");break;default:a(u);break}}return i}};Pp.StringUtils=cm});var PT=l(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.ConversationTranslatorConnectionFactory=void 0;var pm=Ee(),ST=um(),fz=x(),Rp=C(),vz=Je(),xt=Dr(),CT=Dt(),lm=I(),wp=class r extends CT.ConnectionFactoryBase{constructor(e){super(),fz.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,t,i){let n=e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",s=this.privConvGetter().room,o=s.cognitiveSpeechRegion||e.parameters.getProperty(Rp.PropertyId.SpeechServiceConnection_Region,""),a={hostSuffix:CT.ConnectionFactoryBase.getHostSuffix(o),path:r.CTS_VIRT_MIC_PATH,region:encodeURIComponent(o)};a[xt.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(Rp.PropertyId.SpeechServiceConnection_RecoLanguage,"")),a[xt.QueryParameterNames.CtsMeetingId]=encodeURIComponent(s.roomId),a[xt.QueryParameterNames.CtsDeviceId]=encodeURIComponent(s.participantId),a[xt.QueryParameterNames.CtsIsParticipant]=s.isHost?"":"&"+xt.QueryParameterNames.CtsIsParticipant;let c="",u={},p={};if(n){c=e.parameters.getProperty(Rp.PropertyId.SpeechServiceConnection_Endpoint),c||(c="wss://"+e.parameters.getProperty(Rp.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),c=ST.StringUtils.formatString(c,a);let d=new URL(c);d.searchParams.forEach((y,S)=>{u[S]=y}),new lm.TranscriberConnectionFactory().setQueryParams(u,e,c),u[xt.QueryParameterNames.CtsMeetingId]=a[xt.QueryParameterNames.CtsMeetingId],u[xt.QueryParameterNames.CtsDeviceId]=a[xt.QueryParameterNames.CtsDeviceId],s.isHost||(u[xt.QueryParameterNames.CtsIsParticipant]=""),xt.QueryParameterNames.Format in u||(u[xt.QueryParameterNames.Format]="simple"),d.searchParams.forEach((y,S)=>{d.searchParams.set(S,u[S]),delete u[S]}),c=d.toString()}else{let d=new lm.TranslationConnectionFactory;c=d.getEndpointUrl(e,!0),c=ST.StringUtils.formatString(c,a),d.setQueryParams(u,e,c)}p[vz.HeaderNames.ConnectionId]=i,p[pm.RestConfigBase.configParams.token]=s.token,t.token&&(p[t.headerName]=t.token);let h=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new pm.WebsocketConnection(c,u,p,new lm.WebsocketMessageFormatter,pm.ProxyInfo.fromRecognizerConfig(e),h,i)}};bp.ConversationTranslatorConnectionFactory=wp;wp.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"});var wT=l($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.ConversationTranslator=$i.SpeechState=void 0;var Mo=I(),gz=PT(),Ep=A(),Yt=x(),se=C(),mz=tm(),RT=Ip(),Xt;(function(r){r[r.Inactive=0]="Inactive",r[r.Connecting=1]="Connecting",r[r.Connected=2]="Connected"})(Xt=$i.SpeechState||($i.SpeechState={}));var hm=class extends se.TranslationRecognizer{constructor(e,t,i,n){super(e,t,new gz.ConversationTranslatorConnectionFactory(n)),this.privSpeechState=Xt.Inactive,i&&(this.privTranslator=i,this.sessionStarted=()=>{this.privSpeechState=Xt.Connected},this.sessionStopped=()=>{this.privSpeechState=Xt.Inactive},this.recognizing=(s,o)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,o)},this.recognized=(s,o)=>f(this,null,function*(){o.result?.errorDetails?(yield this.cancelSpeech(),this.fireCancelEvent(o.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,o)}),this.canceled=()=>f(this,null,function*(){if(this.privSpeechState!==Xt.Inactive)try{yield this.cancelSpeech()}catch{this.privSpeechState=Xt.Inactive}}))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=Xt.Connected}onCancelSpeech(){return f(this,null,function*(){this.privSpeechState=Xt.Inactive,yield this.cancelSpeech()})}fireCancelEvent(e){try{if(this.privTranslator.canceled){let t=new RT.ConversationTranslationCanceledEventArgs(se.CancellationReason.Error,e,se.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch{}}cancelSpeech(){return f(this,null,function*(){try{this.stopContinuousRecognitionAsync(),yield this.privReco?.disconnect(),this.privSpeechState=Xt.Inactive}catch{}})}},dm=class extends RT.ConversationCommon{constructor(e){super(e),this.privErrors=Mo.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new se.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===Xt.Connected||this.privCTRecognizer.state===Xt.Connecting||this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,t){let i=JSON.parse(this.privProperties.getProperty(Mo.ServicePropertiesPropertyName,"{}"));i[e]=t,this.privProperties.setProperty(Mo.ServicePropertiesPropertyName,JSON.stringify(i))}joinConversationAsync(e,t,i,n,s){try{if(typeof e=="string"){Yt.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Yt.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),s);let o=i;(o==null||o==="")&&(o=Mo.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=se.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(se.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(se.PropertyId[se.PropertyId.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(se.PropertyId[se.PropertyId.ConversationTranslator_Name],t);let a=[se.PropertyId.SpeechServiceConnection_Host,se.PropertyId.ConversationTranslator_Host,se.PropertyId.SpeechServiceConnection_Endpoint,se.PropertyId.SpeechServiceConnection_ProxyHostName,se.PropertyId.SpeechServiceConnection_ProxyPassword,se.PropertyId.SpeechServiceConnection_ProxyPort,se.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(let u of a){let p=this.privProperties.getProperty(u);if(p){let h=typeof u=="string"?u:se.PropertyId[u];this.privSpeechTranslationConfig.setProperty(h,p)}}let c=JSON.parse(this.privProperties.getProperty(Mo.ServicePropertiesPropertyName,"{}"));for(let u of Object.keys(c))this.privSpeechTranslationConfig.setServiceProperty(u,c[u],se.ServicePropertyChannel.UriQueryParameter);this.privConversation=new mz.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,o,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),s),this.privSpeechTranslationConfig.authorizationToken=u,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(n,s)},p=>{this.handleError(p,s)})},u=>{this.handleError(u,s)})}else typeof e=="object"?(Yt.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Yt.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(se.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,Yt.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),Yt.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(i,n)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),n)}catch(o){this.handleError(o,typeof i=="string"?s:n)}}leaveConversationAsync(e,t){Ep.marshalPromiseToCallbacks(f(this,null,function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()}),e,t)}sendTextMessageAsync(e,t,i){try{Yt.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Yt.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,i)}catch(n){this.handleError(n,i)}}startTranscribingAsync(e,t){Ep.marshalPromiseToCallbacks(f(this,null,function*(){try{Yt.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Yt.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&(yield this.connectTranslatorRecognizer()),Yt.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(i){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),i}}),e,t)}stopTranscribingAsync(e,t){Ep.marshalPromiseToCallbacks(f(this,null,function*(){try{if(!this.privIsSpeaking){yield this.cancelSpeech();return}this.privIsSpeaking=!1,yield new Promise((i,n)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(i,n)})}catch{yield this.cancelSpeech()}}),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,i){Ep.marshalPromiseToCallbacks(f(this,null,function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)}),t,i)}cancelSpeech(){return f(this,null,function*(){try{this.privIsSpeaking=!1,yield this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}})}connectTranslatorRecognizer(){return f(this,null,function*(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=se.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(se.PropertyId[se.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(se.PropertyId[se.PropertyId.SpeechServiceConnection_Key],"");let e=()=>this.privConversation;this.privCTRecognizer=new hm(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}})}startContinuousRecognition(){return new Promise((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)})}};$i.ConversationTranslator=dm});var bT=l(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.ConversationTranscriber=void 0;var Do=I(),fm=A(),Qi=x(),nt=C(),vm=class r extends nt.Recognizer{constructor(e,t){let i=e;Qi.Contracts.throwIfNull(i,"speechConfig"),Qi.Contracts.throwIfNullOrWhitespace(i.properties.getProperty(nt.PropertyId.SpeechServiceConnection_RecoLanguage),nt.PropertyId[nt.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,i.properties,new Do.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(nt.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,i){let n=e;return t.properties.mergeTo(n.properties),new r(e,i)}get endpointId(){return Qi.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(nt.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(nt.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Qi.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(nt.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Qi.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(nt.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Qi.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Do.OutputFormatPropertyName,nt.OutputFormat[nt.OutputFormat.Simple])===nt.OutputFormat[nt.OutputFormat.Simple]?nt.OutputFormat.Simple:nt.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,t){fm.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Do.RecognitionMode.Conversation),e,t)}stopTranscribingAsync(e,t){fm.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){Qi.Contracts.throwIfDisposed(this.privDisposedRecognizer),fm.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return f(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield ye(r.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new Do.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return n.isSpeakerDiarizationEnabled=!0,new Do.ConversationTranscriptionServiceRecognizer(e,t,s,n,this)}};_p.ConversationTranscriber=vm});var ET=l(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.Participant=es.User=void 0;var yz=C(),gm=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};es.User=gm;var mm=class r{constructor(e,t,i,n,s,o,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=i,this.privIsHost=n,this.privIsMuted=s,this.privIsUsingTts=o,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new yz.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,i){return new r(e,"",e,!1,!1,!1,t,i)}};es.Participant=mm});var IT=l(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.ParticipantChangedReason=void 0;var Sz;(function(r){r[r.JoinedConversation=0]="JoinedConversation",r[r.LeftConversation=1]="LeftConversation",r[r.Updated=2]="Updated"})(Sz=xo.ParticipantChangedReason||(xo.ParticipantChangedReason={}))});var _T=l(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.MeetingImpl=ts.Meeting=void 0;var Z=I(),qo=A(),E=x(),ae=C(),Tp=class{constructor(){}static createMeetingAsync(e,t,i,n){if(E.Contracts.throwIfNullOrUndefined(e,Z.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),E.Contracts.throwIfNullOrUndefined(e.region,Z.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),E.Contracts.throwIfNull(t,"meetingId"),t.length===0)throw new Error("meetingId cannot be empty");!e.subscriptionKey&&!e.getProperty(ae.PropertyId[ae.PropertyId.SpeechServiceAuthorization_Token])&&E.Contracts.throwIfNullOrUndefined(e.subscriptionKey,Z.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let s=new Ap(e,t);return qo.marshalPromiseToCallbacks(f(this,null,function*(){}),i,n),s}};ts.Meeting=Tp;var Ap=class extends Tp{constructor(e,t){super(),this.privErrors=Z.ConversationConnectionConfig.restErrors,this.onConnected=s=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,s)}catch{}},this.onDisconnected=s=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,s)}catch{}finally{this.close(!1)}},this.onCanceled=(s,o)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,o)}catch{}},this.onParticipantUpdateCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.id);if(a!==void 0){switch(o.key){case Z.ConversationTranslatorCommandTypes.changeNickname:a.displayName=o.value;break;case Z.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=o.value;break;case Z.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=o.value;break;case Z.ConversationTranslatorCommandTypes.setMute:a.isMuted=o.value;break;case Z.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=o.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ae.ConversationParticipantsChangedEventArgs(ae.ParticipantChangedReason.Updated,[this.toParticipant(a)],o.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(s,o)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:o.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ae.ConversationParticipantsChangedEventArgs(ae.ParticipantChangedReason.Updated,this.toParticipants(!1),o.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(s,o)=>{try{let a=this.privParticipants.addOrUpdateParticipant(o.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ae.ConversationParticipantsChangedEventArgs(ae.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],o.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(o.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ae.ConversationParticipantsChangedEventArgs(ae.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],o.sessionId)))}catch{}},this.onTranslationReceived=(s,o)=>{try{switch(o.command){case Z.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new ae.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case Z.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new ae.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case Z.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new ae.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break}}catch{}},this.onParticipantsListReceived=(s,o)=>{try{if(o.sessionToken!==void 0&&o.sessionToken!==null&&(this.privRoom.token=o.sessionToken),this.privParticipants.participants=[...o.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ae.ConversationParticipantsChangedEventArgs(ae.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),o.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(ae.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(s,o)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,o)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new ae.PropertyCollection,this.privManager=new Z.ConversationManager,e.getProperty(ae.PropertyId[ae.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(ae.PropertyId[ae.PropertyId.SpeechServiceConnection_RecoLanguage],Z.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(ae.PropertyId[ae.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=t,this.privConfig=e;let n=e;E.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Z.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let e=this.meetingId,t=this.participants.map(s=>({id:s.id,preferredLanguage:s.preferredLanguage,voice:s.voice})),i={};for(let s of Z.ConversationConnectionConfig.transcriptionEventKeys){let o=this.properties.getProperty(s,"");o!==""&&(i[s]=o)}return{id:e,participants:t,meetingProperties:i}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){E.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,i=>{i||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=i,this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}addParticipantAsync(e,t,i){E.Contracts.throwIfNullOrUndefined(e,"Participant"),qo.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,i)}joinMeetingAsync(e,t,i,n,s){try{E.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),E.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),E.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,o=>{E.Contracts.throwIfNullOrUndefined(o,this.privErrors.permissionDeniedConnect),this.privRoom=o,this.privConfig.authorizationToken=o.cognitiveSpeechAuthToken,n&&n(o.cognitiveSpeechAuthToken)},o=>{this.handleError(o,s)})}catch(o){this.handleError(o,s)}}deleteMeetingAsync(e,t){qo.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)}deleteMeetingImplAsync(){return f(this,null,function*(){E.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),E.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()})}endMeetingAsync(e,t){qo.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}muteAllParticipantsAsync(e,t){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}muteParticipantAsync(e,t,i){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(t,i)},s=>{this.handleError(s,i)})}catch(n){this.handleError(n,i)}}removeParticipantAsync(e,t,i){try{if(E.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))qo.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,i);else{E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),i);let n="";typeof e=="string"?n=e:e.hasOwnProperty("id")?n=e.id:e.hasOwnProperty("userId")&&(n=e.userId),E.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(o=>o.id===n)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(n),()=>{this.handleCallback(t,i)},o=>{this.handleError(o,i)})}}catch(n){this.handleError(n,i)}}unlockMeetingAsync(e,t){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}unmuteAllParticipantsAsync(e,t){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,t)},i=>{this.handleError(i,t)})}catch(i){this.handleError(i,t)}}unmuteParticipantAsync(e,t,i){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),i),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(t,i)},s=>{this.handleError(s,i)})}catch(n){this.handleError(n,i)}}sendTextMessageAsync(e,t,i){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}setTranslatedLanguagesAsync(e,t,i){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}changeNicknameAsync(e,t,i){try{E.Contracts.throwIfDisposed(this.privIsDisposed),E.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),E.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),E.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),i),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(t,i)},n=>{this.handleError(n,i)})}catch(n){this.handleError(n,i)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return f(this,null,function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this})}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let i=this.meetingInfo;return i.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(i,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}close(e){return f(this,null,function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(t){throw t}e&&this.dispose()})}handleCallback(e,t){if(e){try{e()}catch(i){t&&t(i)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){let i=e;t(i.name+": "+i.message)}else t(e)}toParticipants(e){let t=this.privParticipants.participants.map(i=>this.toParticipant(i));return e?t:t.filter(i=>i.isHost===!1)}toParticipant(e){return new ae.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),E.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),E.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),E.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),E.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),E.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),E.Contracts.throwIfNullOrWhitespace(e,"nickname"),E.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Z.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Z.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return E.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),E.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),E.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:Z.ConversationTranslatorMessageTypes.instantMessage})}};ts.MeetingImpl=Ap});var TT=l(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.MeetingTranscriptionCanceledEventArgs=void 0;var Cz=Wn(),ym=class extends Cz.CancellationEventArgsBase{};Op.MeetingTranscriptionCanceledEventArgs=ym});var AT=l(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.MeetingTranscriber=void 0;var Pz=I(),Sm=A(),No=x(),jo=C(),Rz=Ip(),Cm=class{constructor(e){this.privAudioConfig=e,this.privProperties=new jo.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return No.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(jo.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return jo.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(jo.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){No.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(jo.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,t,i){let n=e;No.Contracts.throwIfNullOrUndefined(Rz.MeetingImpl,"Meeting"),this.privRecognizer=new Pz.TranscriberRecognizer(e.config,this.privAudioConfig),No.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),Sm.marshalPromiseToCallbacks(n.connectTranscriberRecognizer(this.privRecognizer),t,i)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,t){this.privRecognizer.disconnectCallbacks(),Sm.marshalPromiseToCallbacks(f(this,null,function*(){}),e,t)}close(e,t){No.Contracts.throwIfDisposed(this.privDisposedRecognizer),Sm.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return f(this,null,function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))})}};Mp.MeetingTranscriber=Cm});var OT=l(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.ConversationTranscriptionResult=void 0;var wz=C(),Pm=class extends wz.RecognitionResult{constructor(e,t,i,n,s,o,a,c,u,p,h){super(e,t,i,n,s,o,a,u,p,h),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Dp.ConversationTranscriptionResult=Pm});var Ip=l(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});var MT=tm();Object.defineProperty(Ce,"Conversation",{enumerable:!0,get:function(){return MT.Conversation}});Object.defineProperty(Ce,"ConversationImpl",{enumerable:!0,get:function(){return MT.ConversationImpl}});var bz=dT();Object.defineProperty(Ce,"ConversationCommon",{enumerable:!0,get:function(){return bz.ConversationCommon}});var Ez=fT();Object.defineProperty(Ce,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ez.ConversationExpirationEventArgs}});var Iz=vT();Object.defineProperty(Ce,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Iz.ConversationParticipantsChangedEventArgs}});var _z=gT();Object.defineProperty(Ce,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return _z.ConversationTranslationCanceledEventArgs}});var Tz=mT();Object.defineProperty(Ce,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Tz.ConversationTranslationEventArgs}});var Az=yT();Object.defineProperty(Ce,"ConversationTranslationResult",{enumerable:!0,get:function(){return Az.ConversationTranslationResult}});var Oz=wT();Object.defineProperty(Ce,"ConversationTranslator",{enumerable:!0,get:function(){return Oz.ConversationTranslator}});var Mz=bT();Object.defineProperty(Ce,"ConversationTranscriber",{enumerable:!0,get:function(){return Mz.ConversationTranscriber}});var DT=ET();Object.defineProperty(Ce,"Participant",{enumerable:!0,get:function(){return DT.Participant}});Object.defineProperty(Ce,"User",{enumerable:!0,get:function(){return DT.User}});var Dz=IT();Object.defineProperty(Ce,"ParticipantChangedReason",{enumerable:!0,get:function(){return Dz.ParticipantChangedReason}});var xT=_T();Object.defineProperty(Ce,"Meeting",{enumerable:!0,get:function(){return xT.Meeting}});Object.defineProperty(Ce,"MeetingImpl",{enumerable:!0,get:function(){return xT.MeetingImpl}});var xz=TT();Object.defineProperty(Ce,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return xz.MeetingTranscriptionCanceledEventArgs}});var qz=AT();Object.defineProperty(Ce,"MeetingTranscriber",{enumerable:!0,get:function(){return qz.MeetingTranscriber}});var Nz=OT();Object.defineProperty(Ce,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Nz.ConversationTranscriptionResult}})});var xp=l(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.SynthesisRequest=rs.Synthesizer=void 0;var Yi=I(),jz=A(),qT=x(),ci=C(),Rm=class r{constructor(e){let t=e;qT.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new jz.Queue}get authorizationToken(){return this.properties.getProperty(ci.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){qT.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(ci.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(ci.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===Yi.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){let t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"},i=this.properties.getProperty(ci.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),n=this.properties.getProperty(ci.PropertyId.SpeechServiceConnection_SynthVoice,""),s=r.XMLEncode(e);return this.autoDetectSourceLanguage?i="en-US":n=n||t[i],n&&(s=`<voice name='${n}'>${s}</voice>`),s=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${i}'>${s}</speak>`,s}dispose(e){return f(this,null,function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)})}adapterSpeak(){return f(this,null,function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}})}createSynthesizerConfig(e){return new Yi.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e=typeof window<"u"?"Browser":"Node",t="unknown",i="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,t=navigator.userAgent,i=navigator.appVersion);let n=this.createSynthesizerConfig(new Yi.SpeechServiceConfig(new Yi.Context(new Yi.OS(e,t,i)))),s=this.privProperties.getProperty(ci.PropertyId.SpeechServiceConnection_Key,void 0),o=s&&s!==""?new Yi.CognitiveSubscriptionKeyAuthentication(s):new Yi.CognitiveTokenAuthentication(()=>{let a=this.privProperties.getProperty(ci.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)},()=>{let a=this.privProperties.getProperty(ci.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)});this.privAdapter=this.createSynthesisAdapter(o,this.privConnectionFactory,n),this.privRestAdapter=this.createRestSynthesisAdapter(o,n)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};rs.Synthesizer=Rm;var wm=class{constructor(e,t,i,n,s,o){this.requestId=e,this.text=t,this.isSSML=i,this.cb=n,this.err=s,this.dataStream=o}};rs.SynthesisRequest=wm});var jT=l(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.SpeechSynthesizer=void 0;var bm=I(),Em=A(),kz=Dv(),zz=Ln(),Lz=ki(),NT=x(),ui=C(),Fz=xp(),Im=class r extends ui.Synthesizer{constructor(e,t){super(e),t!==null&&(t===void 0?this.audioConfig=typeof window>"u"?void 0:ui.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=t),this.privConnectionFactory=new bm.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,i){let n=e;return t.properties.mergeTo(n.properties),new r(e,i)}speakTextAsync(e,t,i,n){this.speakImpl(e,!1,t,i,n)}speakSsmlAsync(e,t,i,n){this.speakImpl(e,!0,t,i,n)}getVoicesAsync(e=""){return f(this,null,function*(){return this.getVoices(e)})}close(e,t){NT.Contracts.throwIfDisposed(this.privDisposed),Em.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,t,i){return new bm.SpeechSynthesisAdapter(e,t,i,this,this.audioConfig)}createRestSynthesisAdapter(e,t){return new bm.SynthesisRestAdapter(t,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=zz.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(ui.SpeechSynthesisOutputFormat[this.properties.getProperty(ui.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,i,n,s){try{NT.Contracts.throwIfDisposed(this.privDisposed);let o=Em.createNoDashGuid(),a;s instanceof ui.PushAudioOutputStreamCallback?a=new Lz.PushAudioOutputStreamImpl(s):s instanceof ui.PullAudioOutputStream?a=s:s!==void 0?a=new kz.AudioFileWriter(s):a=void 0,this.synthesisRequestQueue.enqueue(new Fz.SynthesisRequest(o,e,t,c=>{if(this.privSynthesizing=!1,i)try{i(c)}catch(u){n&&n(u)}i=void 0,this.adapterSpeak().catch(()=>{})},c=>{n&&n(c)},a)),this.adapterSpeak().catch(()=>{})}catch(o){if(n)if(o instanceof Error){let a=o;n(a.name+": "+a.message)}else n(o);this.dispose(!0).catch(()=>{})}}getVoices(e){return f(this,null,function*(){let t=Em.createNoDashGuid(),i=yield this.privRestAdapter.getVoicesList(t);if(i.ok&&Array.isArray(i.json)){let n=i.json;return e&&e.length>0&&(n=n.filter(s=>!!s.Locale&&s.Locale.toLowerCase()===e.toLowerCase())),new ui.SynthesisVoicesResult(t,n,void 0)}else return new ui.SynthesisVoicesResult(t,void 0,`Error: ${i.status}: ${i.statusText}`)})}};qp.SpeechSynthesizer=Im});var kT=l(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.SynthesisResult=void 0;var _m=class{constructor(e,t,i,n){this.privResultId=e,this.privReason=t,this.privErrorDetails=i,this.privProperties=n}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};Np.SynthesisResult=_m});var zT=l(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.SpeechSynthesisResult=void 0;var Bz=C(),Tm=class extends Bz.SynthesisResult{constructor(e,t,i,n,s,o){super(e,t,n,s),this.privAudioData=i,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};jp.SpeechSynthesisResult=Tm});var LT=l(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.SpeechSynthesisEventArgs=void 0;var Am=class{constructor(e){this.privResult=e}get result(){return this.privResult}};kp.SpeechSynthesisEventArgs=Am});var FT=l(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.SpeechSynthesisWordBoundaryEventArgs=void 0;var Om=class{constructor(e,t,i,n,s,o){this.privAudioOffset=e,this.privDuration=t,this.privText=i,this.privWordLength=n,this.privTextOffset=s,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};zp.SpeechSynthesisWordBoundaryEventArgs=Om});var BT=l(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.SpeechSynthesisBookmarkEventArgs=void 0;var Mm=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};Lp.SpeechSynthesisBookmarkEventArgs=Mm});var UT=l(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.SpeechSynthesisVisemeEventArgs=void 0;var Dm=class{constructor(e,t,i){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};Fp.SpeechSynthesisVisemeEventArgs=Dm});var WT=l(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.SpeechSynthesisBoundaryType=void 0;var Uz;(function(r){r.Word="WordBoundary",r.Punctuation="PunctuationBoundary",r.Sentence="SentenceBoundary"})(Uz=ko.SpeechSynthesisBoundaryType||(ko.SpeechSynthesisBoundaryType={}))});var HT=l(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.SynthesisVoicesResult=void 0;var is=C(),xm=class extends is.SynthesisResult{constructor(e,t,i){if(Array.isArray(t)){super(e,is.ResultReason.VoicesListRetrieved,void 0,new is.PropertyCollection),this.privVoices=[];for(let n of t)this.privVoices.push(new is.VoiceInfo(n))}else super(e,is.ResultReason.Canceled,i||"Error information unavailable",new is.PropertyCollection)}get voices(){return this.privVoices}};Bp.SynthesisVoicesResult=xm});var VT=l(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.VoiceInfo=gr.SynthesisVoiceType=gr.SynthesisVoiceGender=void 0;var Zt;(function(r){r[r.Unknown=0]="Unknown",r[r.Female=1]="Female",r[r.Male=2]="Male",r[r.Neutral=3]="Neutral"})(Zt=gr.SynthesisVoiceGender||(gr.SynthesisVoiceGender={}));var qm;(function(r){r[r.OnlineNeural=1]="OnlineNeural",r[r.OnlineStandard=2]="OnlineStandard",r[r.OfflineNeural=3]="OfflineNeural",r[r.OfflineStandard=4]="OfflineStandard"})(qm=gr.SynthesisVoiceType||(gr.SynthesisVoiceType={}));var Wz={[Zt[Zt.Neutral]]:Zt.Neutral,[Zt[Zt.Male]]:Zt.Male,[Zt[Zt.Female]]:Zt.Female},Nm=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?qm.OnlineStandard:qm.OnlineNeural,this.privGender=Wz[e.Gender]||Zt.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(let t of e.StyleList)this.privStyleList.push(t);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}};gr.VoiceInfo=Nm});var JT=l(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.SpeakerAudioDestination=void 0;var Xi=A(),Hz=ki(),ht=Jr(),Vz=60*30,KT={[ht.AudioFormatTag.PCM]:"audio/wav",[ht.AudioFormatTag.MuLaw]:"audio/x-wav",[ht.AudioFormatTag.MP3]:"audio/mpeg",[ht.AudioFormatTag.OGG_OPUS]:"audio/ogg",[ht.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[ht.AudioFormatTag.ALaw]:"audio/x-wav",[ht.AudioFormatTag.FLAC]:"audio/flac",[ht.AudioFormatTag.AMR_WB]:"audio/amr-wb",[ht.AudioFormatTag.G722]:"audio/G722"},jm=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||Xi.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,i){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{t&&t()},n=>{i&&i(n)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},i=>{t&&t(i)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===ht.AudioFormatTag.PCM||this.privFormat.formatTag===ht.AudioFormatTag.MuLaw||this.privFormat.formatTag===ht.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let i=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(i).then(()=>{i=this.privFormat.addHeader(i);let n=new Blob([i],{type:KT[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(n),this.notifyPlayback().then(()=>{e&&e()},s=>{t&&t(s)})},n=>{t&&t(n)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;let t=KT[this.privFormat.formatTag];t===void 0?console.warn(`Unknown mimeType for format ${ht.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=Vz,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(i=>{Xi.Events.instance.onEvent(new Xi.BackgroundEvent(i))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(i=>{Xi.Events.instance.onEvent(new Xi.BackgroundEvent(i))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(i=>{Xi.Events.instance.onEvent(new Xi.BackgroundEvent(i))})):(console.warn(`Format ${ht.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Hz.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},i=>{t&&t(i)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return f(this,null,function*(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())})}handleSourceBufferUpdateEnd(){return f(this,null,function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())})}notifyPlayback(){return f(this,null,function*(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))})}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};Up.SpeakerAudioDestination=jm});var GT=l(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.ConversationTranscriptionCanceledEventArgs=void 0;var Kz=Wn(),km=class extends Kz.CancellationEventArgsBase{};Wp.ConversationTranscriptionCanceledEventArgs=km});var $T=l(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.MeetingTranscriptionCanceledEventArgs=void 0;var Jz=Wn(),zm=class extends Jz.CancellationEventArgsBase{};Hp.MeetingTranscriptionCanceledEventArgs=zm});var QT=l(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.PronunciationAssessmentGradingSystem=void 0;var Gz;(function(r){r[r.FivePoint=1]="FivePoint",r[r.HundredMark=2]="HundredMark"})(Gz=zo.PronunciationAssessmentGradingSystem||(zo.PronunciationAssessmentGradingSystem={}))});var YT=l(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.PronunciationAssessmentGranularity=void 0;var $z;(function(r){r[r.Phoneme=1]="Phoneme",r[r.Word=2]="Word",r[r.FullText=3]="FullText"})($z=Lo.PronunciationAssessmentGranularity||(Lo.PronunciationAssessmentGranularity={}))});var XT=l(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.PronunciationAssessmentConfig=void 0;var Vp=x(),le=C(),Lm=class r{constructor(e,t=le.PronunciationAssessmentGradingSystem.FivePoint,i=le.PronunciationAssessmentGranularity.Phoneme,n=!1){Vp.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new le.PropertyCollection,this.privProperties.setProperty(le.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(le.PropertyId.PronunciationAssessment_GradingSystem,le.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(le.PropertyId.PronunciationAssessment_Granularity,le.PronunciationAssessmentGranularity[i]),this.privProperties.setProperty(le.PropertyId.PronunciationAssessment_EnableMiscue,String(n))}static fromJSON(e){Vp.Contracts.throwIfNullOrUndefined(e,"json");let t=new r("");return t.privProperties=new le.PropertyCollection,t.properties.setProperty(le.PropertyId.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();let t=e.internalData;t.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(le.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,t.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(le.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){Vp.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(le.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){Vp.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){let t=e?"true":"false";this.properties.setProperty(le.PropertyId.PronunciationAssessment_EnableMiscue,t)}get enableMiscue(){return this.properties.getProperty(le.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){let e=this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),i=this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_ReferenceText);i&&(t.referenceText=i);let n=this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_GradingSystem);n&&(t.gradingSystem=n);let s=this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_Granularity);s&&(t.granularity=s),this.privPhonemeAlphabet&&(t.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(t.nbestPhonemeCount=this.privNBestPhonemeCount),t.enableProsodyAssessment=this.privEnableProsodyAssessment,t.dimension="Comprehensive",this.privProperties.getProperty(le.PropertyId.PronunciationAssessment_EnableMiscue)&&(t.enableMiscue=this.enableMiscue),this.privProperties.setProperty(le.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))}};Kp.PronunciationAssessmentConfig=Lm});var ZT=l(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.PronunciationAssessmentResult=ns.ContentAssessmentResult=void 0;var Fm=x(),Qz=C(),Jp=class{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}};ns.ContentAssessmentResult=Jp;var Bm=class r{constructor(e){let t=JSON.parse(e);Fm.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){Fm.Contracts.throwIfNullOrUndefined(e,"result");let t=e.properties.getProperty(Qz.PropertyId.SpeechServiceResponse_JsonResult);return Fm.Contracts.throwIfNullOrUndefined(t,"json"),new r(t)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new Jp(this.detailResult)}};ns.PronunciationAssessmentResult=Bm});var eA=l(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.AvatarConfig=void 0;var Yz=x(),Xz=C(),Um=class{constructor(e,t,i){this.privCustomized=!1,Yz.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=t,i===void 0&&(i=new Xz.AvatarVideoFormat),this.videoFormat=i}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}};Gp.AvatarConfig=Um});var tA=l(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.AvatarEventArgs=Zi.AvatarEventTypes=void 0;var Zz;(function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"})(Zz=Zi.AvatarEventTypes||(Zi.AvatarEventTypes={}));var Wm=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}};Zi.AvatarEventArgs=Wm});var Vm=l(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.SpeechSynthesisConnectionFactory=void 0;var rA=Ee(),Fo=C(),eL=Dt(),tL=I(),rL=Je(),$p=Dr(),Hm=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,i){let n=e.parameters.getProperty(Fo.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(Fo.PropertyId.SpeechServiceConnection_Region,void 0),o=eL.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(Fo.PropertyId.SpeechServiceConnection_EndpointId,void 0),c=a===void 0?"tts":"voice",u=e.parameters.getProperty(Fo.PropertyId.SpeechServiceConnection_Host,"wss://"+s+"."+c+".speech"+o),p={},h={};t.token!==void 0&&t.token!==""&&(h[t.headerName]=t.token),h[rL.HeaderNames.ConnectionId]=i,a!==void 0&&a!==""&&(!n||n.search($p.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(p[$p.QueryParameterNames.CustomVoiceDeploymentId]=a),e.avatarEnabled&&(!n||n.search($p.QueryParameterNames.EnableAvatar)===-1)&&(p[$p.QueryParameterNames.EnableAvatar]="true"),n||(n=u+this.synthesisUri),e.parameters.setProperty(Fo.PropertyId.SpeechServiceConnection_Url,n);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new rA.WebsocketConnection(n,p,h,new tL.WebsocketMessageFormatter,rA.ProxyInfo.fromParameters(e.parameters),d,i)}};Qp.SpeechSynthesisConnectionFactory=Hm});var iA=l(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.AvatarSynthesizer=void 0;var iL=Vm(),nL=I(),ve=A(),sL=Ln(),qr=C(),Yp=x(),oL=xp(),Km=class extends qr.Synthesizer{constructor(e,t){super(e),Yp.Contracts.throwIfNullOrUndefined(t,"avatarConfig"),this.privConnectionFactory=new iL.SpeechSynthesisConnectionFactory,this.privAvatarConfig=t,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=sL.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(qr.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return f(this,null,function*(){Yp.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,Yp.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let t=new ve.Deferred;e.onicegatheringstatechange=()=>{ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,ve.EventType.Debug)),e.iceGatheringState==="complete"&&(ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: ice gathering complete.",ve.EventType.Info)),t.resolve())},e.onicecandidate=a=>{a.candidate?ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: ice candidate: "+a.candidate.candidate,ve.EventType.Debug)):(ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: ice candidate: complete",ve.EventType.Debug)),t.resolve())},setTimeout(()=>{e.iceGatheringState!=="complete"&&(ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: ice gathering timeout.",ve.EventType.Warning)),t.resolve())},2e3);let i=yield e.createOffer();yield e.setLocalDescription(i),yield t.promise,ve.Events.instance.onEvent(new ve.PlatformEvent("peer connection: got local SDP.",ve.EventType.Info)),this.privProperties.setProperty(qr.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));let n=yield this.speak("",!1);if(n.reason!==qr.ResultReason.SynthesizingAudioCompleted)return new qr.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties);let s=atob(n.properties.getProperty(qr.PropertyId.TalkingAvatarService_WebRTC_SDP)),o=new RTCSessionDescription(JSON.parse(s));return yield e.setRemoteDescription(o),new qr.SynthesisResult(n.resultId,n.reason,void 0,n.properties)})}speakTextAsync(e){return f(this,null,function*(){let t=yield this.speak(e,!1);return new qr.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}speakSsmlAsync(e){return f(this,null,function*(){let t=yield this.speak(e,!0);return new qr.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)})}stopSpeakingAsync(){return f(this,null,function*(){for(;this.synthesisRequestQueue.length()>0;)(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()})}stopAvatarAsync(){return f(this,null,function*(){return Yp.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)})}close(){return f(this,null,function*(){if(!this.privDisposed)return this.dispose(!0)})}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,t,i){return new nL.AvatarSynthesisAdapter(e,t,i,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){let t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}speak(e,t){return f(this,null,function*(){let i=ve.createNoDashGuid(),n=new ve.Deferred;return this.synthesisRequestQueue.enqueue(new oL.SynthesisRequest(i,e,t,s=>{n.resolve(s),this.privSynthesizing=!1,this.adapterSpeak()},s=>{n.reject(s),this.privSynthesizing=!1})),this.adapterSpeak(),n.promise})}};Xp.AvatarSynthesizer=Km});var nA=l(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.AvatarVideoFormat=ss.Coordinate=void 0;var Jm=class{constructor(e,t){this.x=e,this.y=t}};ss.Coordinate=Jm;var Gm=class{constructor(e="H264",t=2e6,i=1920,n=1080){this.codec=e,this.bitrate=t,this.width=i,this.height=n}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}};ss.AvatarVideoFormat=Gm});var sA=l(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.AvatarWebRTCConnectionResult=void 0;var aL=C(),$m=class extends aL.SynthesisResult{constructor(e,t,i,n,s){super(t,i,n,s),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};Zp.AvatarWebRTCConnectionResult=$m});var oA=l(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.Diagnostics=void 0;var cL=Ee(),uL=A(),el=class{static SetLoggingLevel(e){this.privListener=new cL.ConsoleLoggingListener(e),uL.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if(typeof window>"u")this.privListener&&(this.privListener.logPath=e);else throw new Error("File system logging not available in browser.")}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};tl.Diagnostics=el;el.privListener=void 0});var C=l(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var pL=jv();Object.defineProperty(g,"AudioConfig",{enumerable:!0,get:function(){return pL.AudioConfig}});var aA=Jr();Object.defineProperty(g,"AudioStreamFormat",{enumerable:!0,get:function(){return aA.AudioStreamFormat}});Object.defineProperty(g,"AudioFormatTag",{enumerable:!0,get:function(){return aA.AudioFormatTag}});var Qm=xv();Object.defineProperty(g,"AudioInputStream",{enumerable:!0,get:function(){return Qm.AudioInputStream}});Object.defineProperty(g,"PullAudioInputStream",{enumerable:!0,get:function(){return Qm.PullAudioInputStream}});Object.defineProperty(g,"PushAudioInputStream",{enumerable:!0,get:function(){return Qm.PushAudioInputStream}});var Ym=ki();Object.defineProperty(g,"AudioOutputStream",{enumerable:!0,get:function(){return Ym.AudioOutputStream}});Object.defineProperty(g,"PullAudioOutputStream",{enumerable:!0,get:function(){return Ym.PullAudioOutputStream}});Object.defineProperty(g,"PushAudioOutputStream",{enumerable:!0,get:function(){return Ym.PushAudioOutputStream}});var lL=JI();Object.defineProperty(g,"CancellationReason",{enumerable:!0,get:function(){return lL.CancellationReason}});var hL=GI();Object.defineProperty(g,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return hL.PullAudioInputStreamCallback}});var dL=$I();Object.defineProperty(g,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return dL.PushAudioOutputStreamCallback}});var fL=YI();Object.defineProperty(g,"KeywordRecognitionModel",{enumerable:!0,get:function(){return fL.KeywordRecognitionModel}});var vL=XI();Object.defineProperty(g,"SessionEventArgs",{enumerable:!0,get:function(){return vL.SessionEventArgs}});var gL=ZI();Object.defineProperty(g,"RecognitionEventArgs",{enumerable:!0,get:function(){return gL.RecognitionEventArgs}});var mL=e_();Object.defineProperty(g,"OutputFormat",{enumerable:!0,get:function(){return mL.OutputFormat}});var yL=t_();Object.defineProperty(g,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return yL.IntentRecognitionEventArgs}});var SL=r_();Object.defineProperty(g,"RecognitionResult",{enumerable:!0,get:function(){return SL.RecognitionResult}});var CL=i_();Object.defineProperty(g,"SpeechRecognitionResult",{enumerable:!0,get:function(){return CL.SpeechRecognitionResult}});var PL=n_();Object.defineProperty(g,"IntentRecognitionResult",{enumerable:!0,get:function(){return PL.IntentRecognitionResult}});var RL=s_();Object.defineProperty(g,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return RL.LanguageUnderstandingModel}});var Xm=a_();Object.defineProperty(g,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return Xm.SpeechRecognitionEventArgs}});Object.defineProperty(g,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return Xm.ConversationTranscriptionEventArgs}});Object.defineProperty(g,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return Xm.MeetingTranscriptionEventArgs}});var wL=c_();Object.defineProperty(g,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return wL.SpeechRecognitionCanceledEventArgs}});var bL=u_();Object.defineProperty(g,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return bL.TranslationRecognitionEventArgs}});var EL=p_();Object.defineProperty(g,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return EL.TranslationSynthesisEventArgs}});var IL=Zv();Object.defineProperty(g,"TranslationRecognitionResult",{enumerable:!0,get:function(){return IL.TranslationRecognitionResult}});var _L=l_();Object.defineProperty(g,"TranslationSynthesisResult",{enumerable:!0,get:function(){return _L.TranslationSynthesisResult}});var TL=h_();Object.defineProperty(g,"ResultReason",{enumerable:!0,get:function(){return TL.ResultReason}});var cA=d_();Object.defineProperty(g,"SpeechConfig",{enumerable:!0,get:function(){return cA.SpeechConfig}});Object.defineProperty(g,"SpeechConfigImpl",{enumerable:!0,get:function(){return cA.SpeechConfigImpl}});var uA=f_();Object.defineProperty(g,"SpeechTranslationConfig",{enumerable:!0,get:function(){return uA.SpeechTranslationConfig}});Object.defineProperty(g,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return uA.SpeechTranslationConfigImpl}});var AL=rg();Object.defineProperty(g,"PropertyCollection",{enumerable:!0,get:function(){return AL.PropertyCollection}});var OL=Cu();Object.defineProperty(g,"PropertyId",{enumerable:!0,get:function(){return OL.PropertyId}});var ML=m_();Object.defineProperty(g,"Recognizer",{enumerable:!0,get:function(){return ML.Recognizer}});var DL=y_();Object.defineProperty(g,"SpeechRecognizer",{enumerable:!0,get:function(){return DL.SpeechRecognizer}});var xL=S_();Object.defineProperty(g,"IntentRecognizer",{enumerable:!0,get:function(){return xL.IntentRecognizer}});var qL=C_();Object.defineProperty(g,"VoiceProfileType",{enumerable:!0,get:function(){return qL.VoiceProfileType}});var NL=b_();Object.defineProperty(g,"TranslationRecognizer",{enumerable:!0,get:function(){return NL.TranslationRecognizer}});var jL=E_();Object.defineProperty(g,"Translations",{enumerable:!0,get:function(){return jL.Translations}});var kL=I_();Object.defineProperty(g,"NoMatchReason",{enumerable:!0,get:function(){return kL.NoMatchReason}});var zL=__();Object.defineProperty(g,"NoMatchDetails",{enumerable:!0,get:function(){return zL.NoMatchDetails}});var LL=T_();Object.defineProperty(g,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return LL.TranslationRecognitionCanceledEventArgs}});var FL=A_();Object.defineProperty(g,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return FL.IntentRecognitionCanceledEventArgs}});var BL=Cg();Object.defineProperty(g,"CancellationDetailsBase",{enumerable:!0,get:function(){return BL.CancellationDetailsBase}});var UL=O_();Object.defineProperty(g,"CancellationDetails",{enumerable:!0,get:function(){return UL.CancellationDetails}});var WL=M_();Object.defineProperty(g,"CancellationErrorCode",{enumerable:!0,get:function(){return WL.CancellationErrorCode}});var HL=D_();Object.defineProperty(g,"ConnectionEventArgs",{enumerable:!0,get:function(){return HL.ConnectionEventArgs}});var VL=x_();Object.defineProperty(g,"ServiceEventArgs",{enumerable:!0,get:function(){return VL.ServiceEventArgs}});var KL=hg();Object.defineProperty(g,"Connection",{enumerable:!0,get:function(){return KL.Connection}});var JL=q_();Object.defineProperty(g,"PhraseListGrammar",{enumerable:!0,get:function(){return JL.PhraseListGrammar}});var GL=Wu();Object.defineProperty(g,"DialogServiceConfig",{enumerable:!0,get:function(){return GL.DialogServiceConfig}});var $L=N_();Object.defineProperty(g,"BotFrameworkConfig",{enumerable:!0,get:function(){return $L.BotFrameworkConfig}});var QL=j_();Object.defineProperty(g,"CustomCommandsConfig",{enumerable:!0,get:function(){return QL.CustomCommandsConfig}});var YL=B_();Object.defineProperty(g,"DialogServiceConnector",{enumerable:!0,get:function(){return YL.DialogServiceConnector}});var XL=U_();Object.defineProperty(g,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return XL.ActivityReceivedEventArgs}});var ZL=H_();Object.defineProperty(g,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return ZL.TurnStatusReceivedEventArgs}});var eF=V_();Object.defineProperty(g,"ServicePropertyChannel",{enumerable:!0,get:function(){return eF.ServicePropertyChannel}});var tF=K_();Object.defineProperty(g,"ProfanityOption",{enumerable:!0,get:function(){return tF.ProfanityOption}});var rF=J_();Object.defineProperty(g,"BaseAudioPlayer",{enumerable:!0,get:function(){return rF.BaseAudioPlayer}});var iF=G_();Object.defineProperty(g,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return iF.ConnectionMessageEventArgs}});var nF=cg();Object.defineProperty(g,"ConnectionMessage",{enumerable:!0,get:function(){return nF.ConnectionMessage}});var sF=$_();Object.defineProperty(g,"VoiceProfile",{enumerable:!0,get:function(){return sF.VoiceProfile}});var pA=Y_();Object.defineProperty(g,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return pA.VoiceProfileEnrollmentResult}});Object.defineProperty(g,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return pA.VoiceProfileEnrollmentCancellationDetails}});var lA=Z_();Object.defineProperty(g,"VoiceProfileResult",{enumerable:!0,get:function(){return lA.VoiceProfileResult}});Object.defineProperty(g,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return lA.VoiceProfileCancellationDetails}});var oF=eT();Object.defineProperty(g,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return oF.VoiceProfilePhraseResult}});var aF=tT();Object.defineProperty(g,"VoiceProfileClient",{enumerable:!0,get:function(){return aF.VoiceProfileClient}});var cF=rT();Object.defineProperty(g,"SpeakerRecognizer",{enumerable:!0,get:function(){return cF.SpeakerRecognizer}});var uF=iT();Object.defineProperty(g,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return uF.SpeakerIdentificationModel}});var pF=sT();Object.defineProperty(g,"SpeakerVerificationModel",{enumerable:!0,get:function(){return pF.SpeakerVerificationModel}});var lF=aT();Object.defineProperty(g,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return lF.AutoDetectSourceLanguageConfig}});var hF=uT();Object.defineProperty(g,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return hF.AutoDetectSourceLanguageResult}});var dF=pT();Object.defineProperty(g,"SourceLanguageConfig",{enumerable:!0,get:function(){return dF.SourceLanguageConfig}});var Zm=hT();Object.defineProperty(g,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Zm.SpeakerRecognitionResult}});Object.defineProperty(g,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Zm.SpeakerRecognitionResultType}});Object.defineProperty(g,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Zm.SpeakerRecognitionCancellationDetails}});var dt=Ip();Object.defineProperty(g,"Conversation",{enumerable:!0,get:function(){return dt.Conversation}});Object.defineProperty(g,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return dt.ConversationExpirationEventArgs}});Object.defineProperty(g,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return dt.ConversationParticipantsChangedEventArgs}});Object.defineProperty(g,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return dt.ConversationTranslationCanceledEventArgs}});Object.defineProperty(g,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return dt.ConversationTranslationEventArgs}});Object.defineProperty(g,"ConversationTranslationResult",{enumerable:!0,get:function(){return dt.ConversationTranslationResult}});Object.defineProperty(g,"ConversationTranslator",{enumerable:!0,get:function(){return dt.ConversationTranslator}});Object.defineProperty(g,"ConversationTranscriber",{enumerable:!0,get:function(){return dt.ConversationTranscriber}});Object.defineProperty(g,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return dt.ConversationTranscriptionResult}});Object.defineProperty(g,"Meeting",{enumerable:!0,get:function(){return dt.Meeting}});Object.defineProperty(g,"MeetingTranscriber",{enumerable:!0,get:function(){return dt.MeetingTranscriber}});Object.defineProperty(g,"Participant",{enumerable:!0,get:function(){return dt.Participant}});Object.defineProperty(g,"ParticipantChangedReason",{enumerable:!0,get:function(){return dt.ParticipantChangedReason}});Object.defineProperty(g,"User",{enumerable:!0,get:function(){return dt.User}});var fF=xp();Object.defineProperty(g,"Synthesizer",{enumerable:!0,get:function(){return fF.Synthesizer}});var vF=qv();Object.defineProperty(g,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return vF.SpeechSynthesisOutputFormat}});var gF=jT();Object.defineProperty(g,"SpeechSynthesizer",{enumerable:!0,get:function(){return gF.SpeechSynthesizer}});var mF=kT();Object.defineProperty(g,"SynthesisResult",{enumerable:!0,get:function(){return mF.SynthesisResult}});var yF=zT();Object.defineProperty(g,"SpeechSynthesisResult",{enumerable:!0,get:function(){return yF.SpeechSynthesisResult}});var SF=LT();Object.defineProperty(g,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return SF.SpeechSynthesisEventArgs}});var CF=FT();Object.defineProperty(g,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return CF.SpeechSynthesisWordBoundaryEventArgs}});var PF=BT();Object.defineProperty(g,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return PF.SpeechSynthesisBookmarkEventArgs}});var RF=UT();Object.defineProperty(g,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return RF.SpeechSynthesisVisemeEventArgs}});var wF=WT();Object.defineProperty(g,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return wF.SpeechSynthesisBoundaryType}});var bF=HT();Object.defineProperty(g,"SynthesisVoicesResult",{enumerable:!0,get:function(){return bF.SynthesisVoicesResult}});var EF=VT();Object.defineProperty(g,"VoiceInfo",{enumerable:!0,get:function(){return EF.VoiceInfo}});var IF=JT();Object.defineProperty(g,"SpeakerAudioDestination",{enumerable:!0,get:function(){return IF.SpeakerAudioDestination}});var _F=GT();Object.defineProperty(g,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return _F.ConversationTranscriptionCanceledEventArgs}});var TF=$T();Object.defineProperty(g,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return TF.MeetingTranscriptionCanceledEventArgs}});var AF=QT();Object.defineProperty(g,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return AF.PronunciationAssessmentGradingSystem}});var OF=YT();Object.defineProperty(g,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return OF.PronunciationAssessmentGranularity}});var MF=XT();Object.defineProperty(g,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return MF.PronunciationAssessmentConfig}});var DF=ZT();Object.defineProperty(g,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return DF.PronunciationAssessmentResult}});var xF=$g();Object.defineProperty(g,"LanguageIdMode",{enumerable:!0,get:function(){return xF.LanguageIdMode}});var qF=eA();Object.defineProperty(g,"AvatarConfig",{enumerable:!0,get:function(){return qF.AvatarConfig}});var NF=tA();Object.defineProperty(g,"AvatarEventArgs",{enumerable:!0,get:function(){return NF.AvatarEventArgs}});var jF=iA();Object.defineProperty(g,"AvatarSynthesizer",{enumerable:!0,get:function(){return jF.AvatarSynthesizer}});var hA=nA();Object.defineProperty(g,"AvatarVideoFormat",{enumerable:!0,get:function(){return hA.AvatarVideoFormat}});Object.defineProperty(g,"Coordinate",{enumerable:!0,get:function(){return hA.Coordinate}});var kF=sA();Object.defineProperty(g,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return kF.AvatarWebRTCConnectionResult}});var zF=oA();Object.defineProperty(g,"Diagnostics",{enumerable:!0,get:function(){return zF.Diagnostics}});var LF=Vd();Object.defineProperty(g,"LogLevel",{enumerable:!0,get:function(){return LF.LogLevel}})});var dA=l(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.ProxyInfo=void 0;var rl=C(),ey=class r{constructor(e,t,i,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=i,this.privProxyPassword=n}static fromParameters(e){return new r(e.getProperty(rl.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(rl.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(rl.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(rl.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};il.ProxyInfo=ey});var vA=l((HW,fA)=>{"use strict";var FF=new Set(["json","buffer","string"]);fA.exports=r=>(...e)=>{let t=new Set,i,n,s,o="";return e.forEach(a=>{if(typeof a=="string")if(a.toUpperCase()===a)if(i){let c=`Can't set method to ${a}, already set to ${i}.`;throw new Error(c)}else i=a;else if(a.startsWith("http:")||a.startsWith("https:"))o=a;else if(FF.has(a))n=a;else throw new Error(`Unknown encoding, ${a}`);else if(typeof a=="number")t.add(a);else if(typeof a=="object")if(Array.isArray(a)||a instanceof Set)a.forEach(c=>t.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=a}else throw new Error(`Unknown type: ${typeof a}`)}),i||(i="GET"),t.size===0&&t.add(200),r(t,i,n,s,o)}});var yA=l((gA,mA)=>{"use strict";var BF=vA(),ty=class r extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let i;Object.defineProperty(this,"responseBody",{get:()=>(i||(i=this.arrayBuffer()),i)}),this.headers={};for(let[s,o]of e.headers.entries())this.headers[s.toLowerCase()]=o}},UF=(r,e,t,i,n)=>(c,u,...p)=>f(gA,[c,u,...p],function*(s,o,a={}){s=n+(s||"");let h=new URL(s);if(i||(i={}),h.username&&(i.Authorization="Basic "+btoa(h.username+":"+h.password),h=new URL(h.protocol+"//"+h.host+h.pathname+h.search)),h.protocol!=="https:"&&h.protocol!=="http:")throw new Error(`Unknown protocol, ${h.protocol}`);if(o&&!(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="string"))if(typeof o=="object")o=JSON.stringify(o),i["Content-Type"]="application/json";else throw new Error("Unknown body type.");a=new Headers(sr(sr({},i||{}),a));let d=yield fetch(h,{method:e,headers:a,body:o});if(d.statusCode=d.status,!r.has(d.status))throw new ty(d);return t==="json"?d.json():t==="buffer"?d.arrayBuffer():t==="string"?d.text():d});mA.exports=BF(UF)});var CA=l(Nr=>{"use strict";var WF=Nr&&Nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.RestMessageAdapter=Nr.RestRequestType=void 0;var HF=WF(yA()),SA=A(),nl;(function(r){r.Get="GET",r.Post="POST",r.Delete="DELETE",r.File="file"})(nl=Nr.RestRequestType||(Nr.RestRequestType={}));var ry=class{constructor(e){if(!e)throw new SA.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let i="";try{let n=t.trim().split(/[\r\n]+/),s={};n.forEach(o=>{let a=o.split(": "),c=a.shift().toLowerCase(),u=a.join(": ");s[c]=u}),i=s[e.toLowerCase()]}catch{}return i}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,i={},n=null){let s=new SA.Deferred,o=e===nl.File?"POST":e,a=(u,p={})=>{let h=u;return{data:JSON.stringify(p),headers:JSON.stringify(u.headers),json:p,ok:u.statusCode>=200&&u.statusCode<300,status:u.statusCode,statusText:p.error?p.error.message:h.statusText?h.statusText:h.statusMessage}},c=u=>{let p=HF.default(t,o,this.privHeaders,200,201,202,204,400,401,402,403,404),h=this.queryParams(i)===""?"":`?${this.queryParams(i)}`;p(h,u).then(d=>f(this,null,function*(){if(e===nl.Delete||d.statusCode===204)s.resolve(a(d));else try{let v=yield d.json();s.resolve(a(d,v))}catch{s.resolve(a(d))}})).catch(d=>{s.reject(d)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===nl.Post&&n&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),c(n),s.promise}queryParams(e={}){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}};Nr.RestMessageAdapter=ry});var iy=l(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.RestConfigBase=void 0;var os=class r{static get requestOptions(){return r.privDefaultRequestOptions}static get configParams(){return r.privDefaultParams}static get restErrors(){return r.privRestErrors}};sl.RestConfigBase=os;os.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};os.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};os.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}});var Ee=l(ke=>{"use strict";var VF=ke&&ke.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),er=ke&&ke.__exportStar||function(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&VF(e,r,t)};Object.defineProperty(ke,"__esModule",{value:!0});er(WP(),ke);er(VP(),ke);er(GP(),ke);er(QP(),ke);er(YP(),ke);er(HI(),ke);er(Ev(),ke);er(VI(),ke);er(dA(),ke);er(CA(),ke);er(iy(),ke)});var wA=l(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.IntentConnectionFactory=void 0;var PA=Ee(),Bo=C(),RA=Dt(),KF=I(),JF=Je(),ny=class extends RA.ConnectionFactoryBase{create(e,t,i){let n=e.parameters.getProperty(Bo.PropertyId.SpeechServiceConnection_Endpoint);if(!n){let c=e.parameters.getProperty(Bo.PropertyId.SpeechServiceConnection_IntentRegion),u=RA.ConnectionFactoryBase.getHostSuffix(c);n=e.parameters.getProperty(Bo.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".sr.speech"+u)+"/speech/recognition/interactive/cognitiveservices/v1"}let s={format:"simple",language:e.parameters.getProperty(Bo.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,s,n);let o={};t.token!==void 0&&t.token!==""&&(o[t.headerName]=t.token),o[JF.HeaderNames.ConnectionId]=i,e.parameters.setProperty(Bo.PropertyId.SpeechServiceConnection_Url,n);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new PA.WebsocketConnection(n,s,o,new KF.WebsocketMessageFormatter,PA.ProxyInfo.fromRecognizerConfig(e),a,i)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};ol.IntentConnectionFactory=ny});var _A=l(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.VoiceProfileConnectionFactory=as.SpeakerRecognitionConnectionFactory=void 0;var bA=Ee(),en=C(),EA=Dt(),GF=I(),IA=Je(),al=class extends EA.ConnectionFactoryBase{create(e,t,i,n){let s=e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_Endpoint);if(!s){let u=e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_Region),p=EA.ConnectionFactoryBase.getHostSuffix(u),h=e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_Host,`wss://${u}.spr-frontend.speech${p}`),d=e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");s=`${h}/speaker/ws/${this.scenarioToPath(d)}/${i}`}let o={format:"simple",language:e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,o,s);let a={};t.token!==void 0&&t.token!==""&&(a[t.headerName]=t.token),a[IA.HeaderNames.ConnectionId]=n,a[IA.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(en.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(en.PropertyId.SpeechServiceConnection_Url,s);let c=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new bA.WebsocketConnection(s,o,a,new GF.WebsocketMessageFormatter,bA.ProxyInfo.fromRecognizerConfig(e),c,n)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}},sy=class extends al{create(e,t,i){return super.create(e,t,"recognition",i)}};as.SpeakerRecognitionConnectionFactory=sy;var oy=class extends al{create(e,t,i){return super.create(e,t,"profile",i)}};as.VoiceProfileConnectionFactory=oy});var ul=l(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.RecognitionEndedEvent=ze.RecognitionCompletionStatus=ze.RecognitionStartedEvent=ze.ConnectingToServiceEvent=ze.ListeningStartedEvent=ze.RecognitionTriggeredEvent=ze.SpeechRecognitionEvent=void 0;var cl=A(),pi=class extends cl.PlatformEvent{constructor(e,t,i,n=cl.EventType.Info){super(e,n),this.privRequestId=t,this.privSessionId=i}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}};ze.SpeechRecognitionEvent=pi;var ay=class extends pi{constructor(e,t,i,n){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};ze.RecognitionTriggeredEvent=ay;var cy=class extends pi{constructor(e,t,i,n){super("ListeningStartedEvent",e,t),this.privAudioSourceId=i,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};ze.ListeningStartedEvent=cy;var uy=class extends pi{constructor(e,t,i){super("ConnectingToServiceEvent",e,i),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}};ze.ConnectingToServiceEvent=uy;var py=class extends pi{constructor(e,t,i,n,s){super("RecognitionStartedEvent",e,s),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}};ze.RecognitionStartedEvent=py;var TA;(function(r){r[r.Success=0]="Success",r[r.AudioSourceError=1]="AudioSourceError",r[r.AudioSourceTimeout=2]="AudioSourceTimeout",r[r.AuthTokenFetchError=3]="AuthTokenFetchError",r[r.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",r[r.UnAuthorized=5]="UnAuthorized",r[r.ConnectTimeout=6]="ConnectTimeout",r[r.ConnectError=7]="ConnectError",r[r.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",r[r.UnknownError=9]="UnknownError"})(TA=ze.RecognitionCompletionStatus||(ze.RecognitionCompletionStatus={}));var ly=class extends pi{constructor(e,t,i,n,s,o,a,c){super("RecognitionEndedEvent",e,s,a===TA.Success?cl.EventType.Info:cl.EventType.Error),this.privAudioSourceId=t,this.privAudioNodeId=i,this.privAuthFetchEventId=n,this.privStatus=a,this.privError=c,this.privServiceTag=o}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}};ze.RecognitionEndedEvent=ly});var tn=l(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.SpeechConnectionMessage=void 0;var hy=A(),jr=Je(),dy=class r extends hy.ConnectionMessage{constructor(e,t,i,n,s,o,a,c){if(!t)throw new hy.ArgumentNullError("path");if(!i)throw new hy.ArgumentNullError("requestId");let u={};if(u[jr.HeaderNames.Path]=t,u[jr.HeaderNames.RequestId]=i,u[jr.HeaderNames.RequestTimestamp]=new Date().toISOString(),n&&(u[jr.HeaderNames.ContentType]=n),o&&(u[jr.HeaderNames.RequestStreamId]=o),a)for(let p in a)p&&(u[p]=a[p]);c?super(e,s,u,c):super(e,s,u),this.privPath=t,this.privRequestId=i,this.privContentType=n,this.privStreamId=o,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,i=null,n=null,s=null,o={};if(e.headers)for(let a in e.headers)a&&(a.toLowerCase()===jr.HeaderNames.Path.toLowerCase()?t=e.headers[a]:a.toLowerCase()===jr.HeaderNames.RequestId.toLowerCase()?i=e.headers[a]:a.toLowerCase()===jr.HeaderNames.ContentType.toLowerCase()?n=e.headers[a]:a.toLowerCase()===jr.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[a]:o[a]=e.headers[a]);return new r(e.messageType,t,i,n,e.body,s,o,e.id)}};pl.SpeechConnectionMessage=dy});var AA=l(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ServiceRecognizerBase=void 0;var $F=Ee(),ge=A(),re=C(),mr=I(),li=tn(),ll=class r{constructor(e,t,i,n,s){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new ge.ArgumentNullError("authentication");if(!t)throw new ge.ArgumentNullError("connectionFactory");if(!i)throw new ge.ArgumentNullError("audioSource");if(!n)throw new ge.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=n.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=i,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=s,this.privRequestSession=new mr.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new ge.EventSource,this.privServiceEvents=new ge.EventSource,this.privDynamicGrammar=new mr.DynamicGrammarBuilder,this.privSpeechContext=new mr.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new mr.AgentConfig,this.privRecognizerConfig.parameters.getProperty(re.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=ge.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(a=>{if(a.name==="ConnectionClosedEvent"){let c=a;(c.statusCode===1003||c.statusCode===1007||c.statusCode===1002||c.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(re.CancellationReason.Error,c.statusCode===1007?re.CancellationErrorCode.BadRequestParameters:re.CancellationErrorCode.ConnectionFailure,`${c.reason} websocket error code: ${c.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=ge.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){let e=this.privRecognizerConfig.parameters.getProperty(re.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(e!==void 0){let t=e.split(","),i=this.privRecognizerConfig.parameters.getProperty(re.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),n=i!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:n},output:{interimResults:{mode:"Always"}},targetLanguages:t}),i!==void 0){let s={};for(let o of t)s[o]=i;this.privSpeechContext.setSection("synthesis",{defaultVoices:s})}}}setSpeechSegmentationTimeoutJson(){let e=this.privRecognizerConfig.parameters.getProperty(re.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(e!==void 0){let t=this.recognitionMode===mr.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===mr.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",i=parseInt(e,10),n=this.privSpeechContext.getSection("phraseDetection");n.mode=t,n[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:i}},this.privSpeechContext.setSection("phraseDetection",n)}}setLanguageIdJson(){let e=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){let i=this.privRecognizerConfig.autoDetectSourceLanguages.split(","),n;this.privRecognizerConfig.languageIdMode==="Continuous"?n="DetectContinuous":n="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:i,mode:n,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});let s=this.privRecognizerConfig.sourceLanguageModels;s!==void 0&&(e.customModels=s,e.onInterim={action:"None"},e.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(re.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(re.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(mr.OutputFormatPropertyName,re.OutputFormat[re.OutputFormat.Simple]).toLowerCase()===re.OutputFormat[re.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(re.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(re.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return f(this,null,function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{yield(yield this.privConnectionConfigurationPromise).dispose(e)}catch{return}})}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,i){return f(this,null,function*(){if(this.recognizeOverride!==void 0){yield this.recognizeOverride(e,t,i);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let n=this.connectImpl(),s;try{let c=yield this.audioSource.attach(this.privRequestSession.audioNodeId),u=yield this.audioSource.format,p=yield this.audioSource.deviceInfo;this.privIsLiveAudio=p.type&&p.type===mr.type.Microphones,s=new $F.ReplayableAudioNode(c,u.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(s,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield n}catch(c){yield this.cancelRecognitionLocal(re.CancellationReason.Error,re.CancellationErrorCode.ConnectionFailure,c);return}let o=new re.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,o),this.receiveMessage(),this.sendAudio(s).catch(c=>f(this,null,function*(){yield this.cancelRecognitionLocal(re.CancellationReason.Error,re.CancellationErrorCode.RuntimeError,c)}))})}stopRecognizing(){return f(this,null,function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}})}connect(){return f(this,null,function*(){return yield this.connectImpl(),Promise.resolve()})}connectAsync(e,t){this.connectImpl().then(()=>{try{e&&e()}catch(i){t&&t(i)}},i=>{try{t&&t(i)}catch{}})}disconnect(){return f(this,null,function*(){if(yield this.cancelRecognitionLocal(re.CancellationReason.Error,re.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&(yield this.disconnectOverride()),this.privConnectionPromise!==void 0)try{yield(yield this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0})}sendMessage(e){}sendNetworkMessage(e,t){return f(this,null,function*(){let i=typeof t=="string"?ge.MessageType.Text:ge.MessageType.Binary,n=typeof t=="string"?"application/json":"";return(yield this.fetchConnection()).send(new li.SpeechConnectionMessage(i,e,this.privRequestSession.requestId,n,t))})}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return f(this,null,function*(){let e=this.privRequestSession.getTelemetry();if(r.telemetryDataEnabled!==!0||this.privIsDisposed||e===null)return;if(r.telemetryData)try{r.telemetryData(e)}catch{}yield(yield this.fetchConnection()).send(new li.SpeechConnectionMessage(ge.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))})}cancelRecognitionLocal(e,t,i){return f(this,null,function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,i))})}receiveMessage(){return f(this,null,function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection(),t=yield e.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!t)return this.receiveMessage();this.privServiceHasSentMessage=!0;let i=li.SpeechConnectionMessage.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let n=mr.SpeechDetected.fromJSON(i.textBody),s=new re.RecognitionEventArgs(n.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,s);break;case"speech.enddetected":let o;i.textBody.length>0?o=i.textBody:o="{ Offset: 0 }";let a=mr.SpeechDetected.fromJSON(o),c=new re.RecognitionEventArgs(a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(re.CancellationReason.EndOfStream,re.CancellationErrorCode.NoError,void 0));let u=new re.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u);return}else e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(i))||this.privServiceEvents&&this.serviceEvents.onEvent(new ge.ServiceEvent(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch{return null}})}updateSpeakerDiarizationAudioOffset(){let t=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(t)}sendSpeechContext(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let i=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),i)return e.send(new li.SpeechConnectionMessage(ge.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",i))}noOp(){}sendPrePayloadJSON(e,t=!0){return f(this,null,function*(){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)})}sendWaveHeader(e){return f(this,null,function*(){let t=yield this.audioSource.format;return e.send(new li.SpeechConnectionMessage(ge.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))})}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(e=>e.state()===ge.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,t,i){if(t.onSpeechContext(),r.telemetryDataEnabled!==!0){let s={context:{system:JSON.parse(i).context.system}};i=JSON.stringify(s)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){let n=JSON.parse(i);n.context.DisableReferenceChannel="True",n.context.MicSpec="1_0_0",i=JSON.stringify(n)}if(i)return e.send(new li.SpeechConnectionMessage(ge.MessageType.Text,"speech.config",t.requestId,"application/json",i))}fetchConnection(){return f(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===ge.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}sendAudio(e){return f(this,null,function*(){let t=yield this.audioSource.format;this.privAverageBytesPerMs=t.avgBytesPerSec/1e3;let i=Date.now(),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=t.avgBytesPerSec/1e3*parseInt(n,10),o=this.privRequestSession.recogNumber,a=()=>f(this,null,function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){let c=yield this.fetchConnection(),u=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let p,h;if(!u||u.isEnd?(p=null,h=0):(p=u.buffer,this.privRequestSession.onAudioSent(p.byteLength),s>=this.privRequestSession.bytesSent?h=0:h=Math.max(0,i-Date.now())),h!==0&&(yield this.delay(h)),p!==null&&(i=Date.now()+p.byteLength*1e3/(t.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o)if(c.send(new li.SpeechConnectionMessage(ge.MessageType.Binary,"audio",this.privRequestSession.requestId,null,p)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),u?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return a()}});return a()})}retryableConnect(){return f(this,null,function*(){let e=!1;this.privAuthFetchEventId=ge.createNoDashGuid();let t=this.privRequestSession.sessionId;this.privConnectionId=t!==void 0?t:ge.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let i=0,n="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){let o=yield e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);yield this.privRequestSession.onAuthCompleted(!1);let a=this.privConnectionFactory.create(this.privRecognizerConfig,o,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(a.events),a.events.attach(u=>{this.connectionEvents.onEvent(u)});let c=yield a.open();if(c.statusCode===200)return yield this.privRequestSession.onConnectionEstablishCompleted(c.statusCode),Promise.resolve(a);c.statusCode===1006&&(e=!0),i=c.statusCode,n=c.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(i,n),Promise.reject(`Unable to contact server. StatusCode: ${i}, ${this.privRecognizerConfig.parameters.getProperty(re.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${n}`)})}delay(e){return new Promise(t=>this.privSetTimeout(t,e))}writeBufferToConsole(e){let t="Buffer Size: ";if(e===null)t+="null";else{let i=new Uint8Array(e);t+=`${e.byteLength}\r
`;for(let n=0;n<e.byteLength;n++)t+=i[n].toString(16).padStart(2,"0")+" ",(n+1)%16===0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return f(this,null,function*(){yield(yield this.fetchConnection()).send(new li.SpeechConnectionMessage(ge.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))})}configureConnection(){return f(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)})}};hl.ServiceRecognizerBase=ll;ll.telemetryDataEnabled=!0});var OA=l(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.ConversationServiceRecognizer=void 0;var qt=C(),yr=I(),fy=class extends yr.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.handleSpeechPhraseMessage=o=>f(this,null,function*(){return this.handleSpeechPhrase(o)}),this.handleSpeechHypothesisMessage=o=>this.handleSpeechHypothesis(o)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,i){}handleRecognizingCallback(e,t,i){}processSpeechMessages(e){return f(this,null,function*(){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),t=!0;break;default:break}return t})}cancelRecognition(e,t,i,n,s){}handleSpeechPhrase(e){return f(this,null,function*(){let t=yr.SimpleSpeechPhrase.fromJSON(e),i=yr.EnumTranslation.implTranslateRecognitionResult(t.RecognitionStatus),n,s=new qt.PropertyCollection;s.setProperty(qt.PropertyId.SpeechServiceResponse_JsonResult,e);let o=t.Offset+this.privRequestSession.currentTurnAudioOffset,a=o;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+t.Offset+t.Duration),qt.ResultReason.Canceled===i){let c=yr.EnumTranslation.implTranslateCancelResult(t.RecognitionStatus),u=yr.EnumTranslation.implTranslateCancelErrorCode(t.RecognitionStatus);yield this.cancelRecognitionLocal(c,u,yr.EnumTranslation.implTranslateErrorDetails(u))}else if(!(this.privRequestSession.isSpeechEnded&&i===qt.ResultReason.NoMatch&&t.RecognitionStatus!==yr.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(yr.OutputFormatPropertyName)===qt.OutputFormat[qt.OutputFormat.Simple])n=new qt.SpeechRecognitionResult(this.privRequestSession.requestId,i,t.DisplayText,t.Duration,o,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,s);else{let c=yr.DetailedSpeechPhrase.fromJSON(e),u=c.Offset+this.privRequestSession.currentTurnAudioOffset,p=c.getJsonWithCorrectedOffsets(u);n=new qt.SpeechRecognitionResult(this.privRequestSession.requestId,i,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,p,s),a=n.offset}this.handleRecognizedCallback(n,a,this.privRequestSession.sessionId)}})}handleSpeechHypothesis(e){let t=yr.SpeechHypothesis.fromJSON(e),i=t.Offset+this.privRequestSession.currentTurnAudioOffset,n=new qt.PropertyCollection;n.setProperty(qt.PropertyId.SpeechServiceResponse_JsonResult,e);let s=new qt.SpeechRecognitionResult(this.privRequestSession.requestId,qt.ResultReason.RecognizingSpeech,t.Text,t.Duration,i,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,n);this.privRequestSession.onHypothesis(i),this.handleRecognizingCallback(s,t.Duration,this.privRequestSession.sessionId)}};dl.ConversationServiceRecognizer=fy});var DA=l(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.RecognizerConfig=Sr.SpeechResultFormat=Sr.RecognitionMode=void 0;var fl=C(),MA=I(),vl;(function(r){r[r.Interactive=0]="Interactive",r[r.Conversation=1]="Conversation",r[r.Dictation=2]="Dictation"})(vl=Sr.RecognitionMode||(Sr.RecognitionMode={}));var QF;(function(r){r[r.Simple=0]="Simple",r[r.Detailed=1]="Detailed"})(QF=Sr.SpeechResultFormat||(Sr.SpeechResultFormat={}));var vy=class{constructor(e,t){this.privSpeechServiceConfig=e||new MA.SpeechServiceConfig(new MA.Context(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(fl.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===vl.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=vl[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==vl.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(fl.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(fl.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){let e=[],t=!1;if(this.autoDetectSourceLanguages!==void 0)for(let i of this.autoDetectSourceLanguages.split(",")){let n=i+fl.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(n,void 0);s!==void 0?(e.push({language:i,endpoint:s}),t=!0):e.push({language:i,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}};Sr.RecognizerConfig=vy});var qA=l(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0})});var jA=l(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.WebsocketMessageFormatter=void 0;var Nt=A(),NA=`\r
`,gy=class{toConnectionMessage(e){let t=new Nt.Deferred;try{if(e.messageType===Nt.MessageType.Text){let i=e.textContent,n={},s=null;if(i){let o=i.split(`\r
\r
`);o&&o.length>0&&(n=this.parseHeaders(o[0]),o.length>1&&(s=o[1]))}t.resolve(new Nt.ConnectionMessage(e.messageType,s,n,e.id))}else if(e.messageType===Nt.MessageType.Binary){let i=e.binaryContent,n={},s=null;if(!i||i.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");let o=new DataView(i),a=o.getInt16(0);if(i.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<a;u++)c+=String.fromCharCode(o.getInt8(u+2));n=this.parseHeaders(c),i.byteLength>a+2&&(s=i.slice(2+a)),t.resolve(new Nt.ConnectionMessage(e.messageType,s,n,e.id))}}catch(i){t.reject(`Error formatting the message. Error: ${i}`)}return t.promise}fromConnectionMessage(e){let t=new Nt.Deferred;try{if(e.messageType===Nt.MessageType.Text){let i=`${this.makeHeaders(e)}${NA}${e.textBody?e.textBody:""}`;t.resolve(new Nt.RawWebsocketMessage(Nt.MessageType.Text,i,e.id))}else if(e.messageType===Nt.MessageType.Binary){let i=this.makeHeaders(e),n=e.binaryBody,s=this.stringToArrayBuffer(i),o=new Int8Array(s),a=o.byteLength,c=new Int8Array(2+a+(n?n.byteLength:0));if(c[0]=a>>8&255,c[1]=a&255,c.set(o,2),n){let p=new Int8Array(n);c.set(p,2+a)}let u=c.buffer;t.resolve(new Nt.RawWebsocketMessage(Nt.MessageType.Binary,u,e.id))}}catch(i){t.reject(`Error formatting the message. ${i}`)}return t.promise}makeHeaders(e){let t="";if(e.headers)for(let i in e.headers)i&&(t+=`${i}: ${e.headers[i]}${NA}`);return t}parseHeaders(e){let t={};if(e){let i=e.match(/[^\r\n]+/g);if(t){for(let n of i)if(n){let s=n.indexOf(":"),o=s>0?n.substr(0,s).trim().toLowerCase():n,a=s>0&&n.length>s+1?n.substr(s+1).trim():"";t[o]=a}}}return t}stringToArrayBuffer(e){let t=new ArrayBuffer(e.length),i=new DataView(t);for(let n=0;n<e.length;n++)i.setUint8(n,e.charCodeAt(n));return t}};gl.WebsocketMessageFormatter=gy});var FA=l(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.SpeechConnectionFactory=void 0;var kA=Ee(),zA=I(),hi=C(),LA=Dt(),my=I(),YF=Je(),rn=Dr(),yy=class extends LA.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,i){let n=e.parameters.getProperty(hi.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(hi.PropertyId.SpeechServiceConnection_Region,void 0),o=LA.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(hi.PropertyId.SpeechServiceConnection_Host,"wss://"+s+".stt.speech"+o),c={},u=e.parameters.getProperty(hi.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=e.parameters.getProperty(hi.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(u?(!n||n.search(rn.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[rn.QueryParameterNames.CustomSpeechDeploymentId]=u):p&&(!n||n.search(rn.QueryParameterNames.Language)===-1)&&(c[rn.QueryParameterNames.Language]=p),(!n||n.search(rn.QueryParameterNames.Format)===-1)&&(c[rn.QueryParameterNames.Format]=e.parameters.getProperty(zA.OutputFormatPropertyName,hi.OutputFormat[hi.OutputFormat.Simple]).toLowerCase()),e.autoDetectSourceLanguages!==void 0&&(c[rn.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,c,n),!n)switch(e.recognitionMode){case my.RecognitionMode.Conversation:e.parameters.getProperty(zA.ForceDictationPropertyName,"false")==="true"?n=a+this.dictationRelativeUri:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?n=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:n=a+this.conversationRelativeUri;break;case my.RecognitionMode.Dictation:n=a+this.dictationRelativeUri;break;default:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?n=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:n=a+this.interactiveRelativeUri;break}let h={};t.token!==void 0&&t.token!==""&&(h[t.headerName]=t.token),h[YF.HeaderNames.ConnectionId]=i;let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",v=new kA.WebsocketConnection(n,c,h,new my.WebsocketMessageFormatter,kA.ProxyInfo.fromRecognizerConfig(e),d,i),y=v.uri;return e.parameters.setProperty(hi.PropertyId.SpeechServiceConnection_Url,y),v}};ml.SpeechConnectionFactory=yy});var WA=l(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.ConversationTranscriberConnectionFactory=void 0;var BA=Ee(),St=C(),XF=I(),UA=Dt(),ZF=I(),eB=Je(),jt=Dr(),Sy=class extends UA.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,t,i){let n=e.parameters.getProperty(St.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(St.PropertyId.SpeechServiceConnection_Region,void 0),o=UA.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(St.PropertyId.SpeechServiceConnection_Host,"wss://"+s+".stt.speech"+o),c={},u=e.parameters.getProperty(St.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=e.parameters.getProperty(St.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);u?(!n||n.search(jt.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[jt.QueryParameterNames.CustomSpeechDeploymentId]=u):p&&(!n||n.search(jt.QueryParameterNames.Language)===-1)&&(c[jt.QueryParameterNames.Language]=p),e.autoDetectSourceLanguages!==void 0&&(c[jt.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,c,n),n||(n=`${a}${this.universalUri}`);let h={};t.token!==void 0&&t.token!==""&&(h[t.headerName]=t.token),h[eB.HeaderNames.ConnectionId]=i;let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",v=new BA.WebsocketConnection(n,c,h,new ZF.WebsocketMessageFormatter,BA.ProxyInfo.fromRecognizerConfig(e),d,i),y=v.uri;return e.parameters.setProperty(St.PropertyId.SpeechServiceConnection_Url,y),v}setV2UrlParams(e,t,i){new Map([[St.PropertyId.Speech_SegmentationSilenceTimeoutMs,jt.QueryParameterNames.SegmentationSilenceTimeoutMs],[St.PropertyId.SpeechServiceConnection_EnableAudioLogging,jt.QueryParameterNames.EnableAudioLogging],[St.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,jt.QueryParameterNames.EndSilenceTimeoutMs],[St.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,jt.QueryParameterNames.InitialSilenceTimeoutMs],[St.PropertyId.SpeechServiceResponse_PostProcessingOption,jt.QueryParameterNames.Postprocessing],[St.PropertyId.SpeechServiceResponse_ProfanityOption,jt.QueryParameterNames.Profanity],[St.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,jt.QueryParameterNames.StableIntermediateThreshold]]).forEach((o,a)=>{this.setUrlParameter(a,o,e,t,i)});let s=JSON.parse(e.parameters.getProperty(XF.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(o=>{t[o]=s[o]})}};yl.ConversationTranscriberConnectionFactory=Sy});var JA=l(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.TranscriberConnectionFactory=void 0;var HA=Ee(),Ct=C(),VA=Dt(),KA=I(),tB=Je(),Uo=Dr(),Cy=class extends VA.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,t,i){let n=e.parameters.getProperty(Ct.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(Ct.PropertyId.SpeechServiceConnection_Region,"centralus"),o=VA.ConnectionFactoryBase.getHostSuffix(s),a="wss://transcribe."+s+".cts.speech"+o+this.multiaudioRelativeUri,c=e.parameters.getProperty(Ct.PropertyId.SpeechServiceConnection_Host,a),u={};this.setQueryParams(u,e,n),n||(n=c);let p={};t.token!==void 0&&t.token!==""&&(p[t.headerName]=t.token),p[tB.HeaderNames.ConnectionId]=i,e.parameters.setProperty(Ct.PropertyId.SpeechServiceConnection_Url,n);let h=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new HA.WebsocketConnection(n,u,p,new KA.WebsocketMessageFormatter,HA.ProxyInfo.fromRecognizerConfig(e),h,i)}setQueryParams(e,t,i){let n=t.parameters.getProperty(Ct.PropertyId.SpeechServiceConnection_EndpointId,void 0),s=t.parameters.getProperty(Ct.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);n&&!(Uo.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[Uo.QueryParameterNames.CustomSpeechDeploymentId]=n),s&&!(Uo.QueryParameterNames.Language in e)&&(e[Uo.QueryParameterNames.Language]=s);let o=t.parameters.getProperty(Ct.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",a=t.parameters.getProperty(KA.OutputFormatPropertyName,Ct.OutputFormat[Ct.OutputFormat.Simple])!==Ct.OutputFormat[Ct.OutputFormat.Simple];(o||a)&&(e[Uo.QueryParameterNames.Format]=Ct.OutputFormat[Ct.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,i)}};Sl.TranscriberConnectionFactory=Cy});var YA=l(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.TranslationConnectionFactory=void 0;var GA=Ee(),rB=um(),kr=C(),$A=Dt(),Py=I(),iB=Je(),QA=Dr(),Ry=class extends $A.ConnectionFactoryBase{create(e,t,i){let n=this.getEndpointUrl(e),s={};e.autoDetectSourceLanguages!==void 0&&(s[QA.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(s,e,n);let o={};t.token!==void 0&&t.token!==""&&(o[t.headerName]=t.token),o[iB.HeaderNames.ConnectionId]=i,e.parameters.setProperty(kr.PropertyId.SpeechServiceConnection_Url,n);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new GA.WebsocketConnection(n,s,o,new Py.WebsocketMessageFormatter,GA.ProxyInfo.fromRecognizerConfig(e),a,i)}getEndpointUrl(e,t){let i=e.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_Region),n=$A.ConnectionFactoryBase.getHostSuffix(i),s=e.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_Endpoint,void 0);return s||(e.autoDetectSourceLanguages!==void 0?s=e.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+n)+"/speech/universal/v2":s=e.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+n)+"/speech/translation/cognitiveservices/v1"),t===!0?s:rB.StringUtils.formatString(s,{region:i})}setQueryParams(e,t,i){e.from=t.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===Py.RecognitionMode.Interactive?"interactive":t.recognitionMode===Py.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,i),this.setUrlParameter(kr.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,QA.QueryParameterNames.StableTranslation,t,e,i);let n=t.parameters.getProperty(kr.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);n!==void 0&&(e.voice=n,e.features="texttospeech")}};Cl.TranslationConnectionFactory=Ry});var XA=l(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.EnumTranslation=void 0;var Te=C(),Pe=I(),wy=class{static implTranslateRecognitionResult(e,t=!1){let i=Te.ResultReason.Canceled;switch(e){case Pe.RecognitionStatus.Success:i=Te.ResultReason.RecognizedSpeech;break;case Pe.RecognitionStatus.EndOfDictation:i=t?Te.ResultReason.RecognizedSpeech:Te.ResultReason.NoMatch;break;case Pe.RecognitionStatus.NoMatch:case Pe.RecognitionStatus.InitialSilenceTimeout:case Pe.RecognitionStatus.BabbleTimeout:i=Te.ResultReason.NoMatch;break;case Pe.RecognitionStatus.Error:case Pe.RecognitionStatus.BadRequest:case Pe.RecognitionStatus.Forbidden:default:i=Te.ResultReason.Canceled;break}return i}static implTranslateCancelResult(e){let t=Te.CancellationReason.EndOfStream;switch(e){case Pe.RecognitionStatus.Success:case Pe.RecognitionStatus.EndOfDictation:case Pe.RecognitionStatus.NoMatch:t=Te.CancellationReason.EndOfStream;break;case Pe.RecognitionStatus.InitialSilenceTimeout:case Pe.RecognitionStatus.BabbleTimeout:case Pe.RecognitionStatus.Error:case Pe.RecognitionStatus.BadRequest:case Pe.RecognitionStatus.Forbidden:default:t=Te.CancellationReason.Error;break}return t}static implTranslateCancelErrorCode(e){let t=Te.CancellationErrorCode.NoError;switch(e){case Pe.RecognitionStatus.Error:t=Te.CancellationErrorCode.ServiceError;break;case Pe.RecognitionStatus.TooManyRequests:t=Te.CancellationErrorCode.TooManyRequests;break;case Pe.RecognitionStatus.BadRequest:t=Te.CancellationErrorCode.BadRequestParameters;break;case Pe.RecognitionStatus.Forbidden:t=Te.CancellationErrorCode.Forbidden;break;default:t=Te.CancellationErrorCode.NoError;break}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case Te.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case Te.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case Te.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break;default:break}return t}};Pl.EnumTranslation=wy});var ZA=l(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.RecognitionStatus=di.SynthesisStatus=void 0;var nB;(function(r){r[r.Success=0]="Success",r[r.SynthesisEnd=1]="SynthesisEnd",r[r.Error=2]="Error"})(nB=di.SynthesisStatus||(di.SynthesisStatus={}));var sB;(function(r){r[r.Success=0]="Success",r[r.NoMatch=1]="NoMatch",r[r.InitialSilenceTimeout=2]="InitialSilenceTimeout",r[r.BabbleTimeout=3]="BabbleTimeout",r[r.Error=4]="Error",r[r.EndOfDictation=5]="EndOfDictation",r[r.TooManyRequests=6]="TooManyRequests",r[r.BadRequest=7]="BadRequest",r[r.Forbidden=8]="Forbidden"})(sB=di.RecognitionStatus||(di.RecognitionStatus={}))});var t0=l(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.TranslationSynthesisEnd=void 0;var e0=I(),by=class r{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e0.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e0.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new r(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};Rl.TranslationSynthesisEnd=by});var r0=l(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.TranslationHypothesis=void 0;var oB=x(),aB=Ra(),Ey=class r{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=aB.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new r(JSON.parse(e))}static fromTranslationResponse(e){oB.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");let t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new r(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}};wl.TranslationHypothesis=Ey});var i0=l(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.TranslationPhrase=void 0;var cB=x(),uB=I(),pB=Ra(),Iy=class r{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=uB.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=pB.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new r(JSON.parse(e))}static fromTranslationResponse(e){cB.Contracts.throwIfNullOrUndefined(e,"translationResponse");let t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new r(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};bl.TranslationPhrase=Iy});var s0=l(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.TranslationServiceRecognizer=void 0;var n0=A(),Y=C(),Qe=I(),_y=class extends Qe.ConversationServiceRecognizer{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privTranslationRecognizer=s,this.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}processTypeSpecificMessages(e){return f(this,null,function*(){let t=new Y.PropertyCollection,i=yield this.processSpeechMessages(e);if(i)return!0;let n=o=>f(this,null,function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),o.RecognitionStatus===Qe.RecognitionStatus.Success){let a=this.fireEventForResult(o,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(c){this.privErrorCallback&&this.privErrorCallback(c)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let a=Qe.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus),c=new Y.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,a,o.Text,o.Duration,this.privRequestSession.currentTurnAudioOffset+o.Offset,o.Language,o.Confidence,void 0,e.textBody,t);if(a===Y.ResultReason.Canceled){let u=Qe.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),p=Qe.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);yield this.cancelRecognitionLocal(u,p,Qe.EnumTranslation.implTranslateErrorDetails(p))}else{if(!(this.privRequestSession.isSpeechEnded&&a===Y.ResultReason.NoMatch&&o.RecognitionStatus!==Qe.RecognitionStatus.InitialSilenceTimeout)){let u=new Y.TranslationRecognitionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}}),s=(o,a)=>{let c=this.fireEventForResult(o,a);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+c.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}i=!0};switch(e.messageType===n0.MessageType.Text&&t.setProperty(Y.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":s(Qe.TranslationHypothesis.fromJSON(e.textBody),t);break;case"translation.response":let o=JSON.parse(e.textBody);if(o.SpeechPhrase)yield n(Qe.TranslationPhrase.fromTranslationResponse(o));else{let c=JSON.parse(e.textBody);c.SpeechHypothesis&&s(Qe.TranslationHypothesis.fromTranslationResponse(c),t)}break;case"translation.phrase":yield n(Qe.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"audio.end":case"translation.synthesis.end":let a=Qe.TranslationSynthesisEnd.fromJSON(e.textBody);switch(a.SynthesisStatus){case Qe.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let c=new Y.TranslationSynthesisResult(Y.ResultReason.Canceled,void 0),u=new Y.TranslationSynthesisEventArgs(c,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}if(this.privTranslationRecognizer.canceled){let c=new Y.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,Y.CancellationReason.Error,a.FailureReason,Y.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,c)}catch{}}break;case Qe.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break;default:break}i=!0;break;default:break}return i})}cancelRecognition(e,t,i,n,s){let o=new Y.PropertyCollection;if(o.setProperty(Qe.CancellationErrorCodePropertyName,Y.CancellationErrorCode[n]),this.privTranslationRecognizer.canceled){let a=new Y.TranslationRecognitionCanceledEventArgs(e,i,s,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Y.TranslationRecognitionResult(void 0,t,Y.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,t,i){try{let n=new Y.TranslationRecognitionEventArgs(Y.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,i);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch{}}handleRecognizedCallback(e,t,i){try{let n=new Y.TranslationRecognitionEventArgs(Y.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,i);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,n)}catch{}}fireEventForResult(e,t){let i;if(e.Translation.Translations!==void 0){i=new Y.Translations;for(let p of e.Translation.Translations)i.set(p.Language,p.Text||p.DisplayText)}let n,s;e instanceof Qe.TranslationPhrase?(e.Translation&&e.Translation.TranslationStatus===n0.TranslationStatus.Success?n=Y.ResultReason.TranslatedSpeech:n=Y.ResultReason.RecognizedSpeech,s=e.Confidence):n=Y.ResultReason.TranslatingSpeech;let o=e.Language,a=e.Offset+this.privRequestSession.currentTurnAudioOffset,c=new Y.TranslationRecognitionResult(i,this.privRequestSession.requestId,n,e.Text,e.Duration,a,o,s,e.Translation.FailureReason,JSON.stringify(e),t);return new Y.TranslationRecognitionEventArgs(c,a,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){let i=e===void 0?Y.ResultReason.SynthesizingAudioCompleted:Y.ResultReason.SynthesizingAudio,n=new Y.TranslationSynthesisResult(i,e),s=new Y.TranslationSynthesisEventArgs(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,s)}catch{}}};El.TranslationServiceRecognizer=_y});var o0=l(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.SpeechDetected=void 0;var Ty=class r{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new r(e)}get Offset(){return this.privSpeechStartDetected.Offset}};Il.SpeechDetected=Ty});var a0=l(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.SpeechHypothesis=void 0;var Ay=class r{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new r(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};_l.SpeechHypothesis=Ay});var c0=l(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.SpeechKeyword=void 0;var Oy=class r{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new r(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}};Tl.SpeechKeyword=Oy});var u0=l(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.SpeechServiceRecognizer=void 0;var Le=C(),kt=I(),My=class extends kt.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privSpeechRecognizer=s}processTypeSpecificMessages(e){return f(this,null,function*(){let t,i=new Le.PropertyCollection;i.setProperty(Le.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=kt.SpeechHypothesis.fromJSON(e.textBody),o=s.Offset+this.privRequestSession.currentTurnAudioOffset;t=new Le.SpeechRecognitionResult(this.privRequestSession.requestId,Le.ResultReason.RecognizingSpeech,s.Text,s.Duration,o,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,i),this.privRequestSession.onHypothesis(o);let a=new Le.SpeechRecognitionEventArgs(t,s.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,a)}catch{}n=!0;break;case"speech.phrase":let c=kt.SimpleSpeechPhrase.fromJSON(e.textBody),u=kt.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),Le.ResultReason.Canceled===u){let p=kt.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),h=kt.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(p,h,kt.EnumTranslation.implTranslateErrorDetails(h))}else{if(!(this.privRequestSession.isSpeechEnded&&u===Le.ResultReason.NoMatch&&c.RecognitionStatus!==kt.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(kt.OutputFormatPropertyName)===Le.OutputFormat[Le.OutputFormat.Simple])t=new Le.SpeechRecognitionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,e.textBody,i);else{let h=kt.DetailedSpeechPhrase.fromJSON(e.textBody),d=h.Offset+this.privRequestSession.currentTurnAudioOffset,v=h.getJsonWithCorrectedOffsets(d);t=new Le.SpeechRecognitionResult(this.privRequestSession.requestId,u,h.RecognitionStatus===kt.RecognitionStatus.Success?h.NBest[0].Display:void 0,h.Duration,d,h.Language,h.LanguageDetectionConfidence,void 0,void 0,v,i)}let p=new Le.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,p)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0;break;default:break}return n})}cancelRecognition(e,t,i,n,s){let o=new Le.PropertyCollection;if(o.setProperty(kt.CancellationErrorCodePropertyName,Le.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){let a=new Le.SpeechRecognitionCanceledEventArgs(i,s,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Le.SpeechRecognitionResult(t,Le.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};Al.SpeechServiceRecognizer=My});var p0=l(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.ConversationTranscriptionServiceRecognizer=void 0;var st=C(),zt=I(),Dy=class extends zt.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privConversationTranscriber=s,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";let t={};t.mode="Anonymous",t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}}processTypeSpecificMessages(e){return f(this,null,function*(){let t,i=new st.PropertyCollection;i.setProperty(st.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=zt.SpeechHypothesis.fromJSON(e.textBody),o=s.Offset+this.privRequestSession.currentTurnAudioOffset;t=new st.ConversationTranscriptionResult(this.privRequestSession.requestId,st.ResultReason.RecognizingSpeech,s.Text,s.Duration,o,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,i),this.privRequestSession.onHypothesis(o);let a=new st.ConversationTranscriptionEventArgs(t,s.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,a)}catch{}n=!0;break;case"speech.phrase":let c=zt.SimpleSpeechPhrase.fromJSON(e.textBody),u=zt.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),st.ResultReason.Canceled===u){let p=zt.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),h=zt.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(p,h,zt.EnumTranslation.implTranslateErrorDetails(h))}else if(!(this.privRequestSession.isSpeechEnded&&u===st.ResultReason.NoMatch&&c.RecognitionStatus!==zt.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(zt.OutputFormatPropertyName)===st.OutputFormat[st.OutputFormat.Simple])t=new st.ConversationTranscriptionResult(this.privRequestSession.requestId,u,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,e.textBody,i);else{let h=zt.DetailedSpeechPhrase.fromJSON(e.textBody),d=h.Offset+this.privRequestSession.currentTurnAudioOffset,v=h.getJsonWithCorrectedOffsets(d);t=new st.ConversationTranscriptionResult(this.privRequestSession.requestId,u,h.RecognitionStatus===zt.RecognitionStatus.Success?h.NBest[0].Display:void 0,h.Duration,d,h.Language,h.LanguageDetectionConfidence,c.SpeakerId,void 0,v,i)}let p=new st.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,p)}catch{}}n=!0;break;default:break}return n})}cancelRecognition(e,t,i,n,s){if(new st.PropertyCollection().setProperty(zt.CancellationErrorCodePropertyName,st.CancellationErrorCode[n]),this.privConversationTranscriber.canceled){let a=new st.ConversationTranscriptionCanceledEventArgs(i,s,n,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,a)}catch{}}}};Ol.ConversationTranscriptionServiceRecognizer=Dy});var h0=l(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.TranscriptionServiceRecognizer=void 0;var lB=A(),zr=C(),l0=I(),hB=tn(),xy=class extends l0.ConversationServiceRecognizer{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privTranscriberRecognizer=s,this.sendPrePayloadJSONOverride=o=>this.sendTranscriptionStartJSON(o),this.privRecognizerConfig.parameters.getProperty(zr.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,t){return f(this,null,function*(){if(this.privRequestSession.isRecognizing){let i=yield this.fetchConnection();yield this.sendSpeechEvent(i,this.createSpeechEventPayload(e,t))}})}sendMeetingSpeechEventAsync(e,t){return f(this,null,function*(){if(this.privRequestSession.isRecognizing){let i=yield this.fetchConnection();yield this.sendSpeechEvent(i,this.createMeetingSpeechEventPayload(e,t))}})}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,t,i){try{let n=new zr.SpeechRecognitionEventArgs(e,t,i);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,n),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(s){this.privErrorCallback&&this.privErrorCallback(s)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(e,t,i){try{let n=new zr.SpeechRecognitionEventArgs(e,t,i);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,n)}catch{}}cancelRecognition(e,t,i,n,s){let o=new zr.PropertyCollection;if(o.setProperty(l0.CancellationErrorCodePropertyName,zr.CancellationErrorCode[n]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let a=new zr.MeetingTranscriptionCanceledEventArgs(i,s,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}}else if(this.privTranscriberRecognizer.canceled){let a=new zr.ConversationTranscriptionCanceledEventArgs(i,s,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new zr.SpeechRecognitionResult(t,zr.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}sendTranscriptionStartJSON(e){return f(this,null,function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let t=this.privTranscriberRecognizer.getMeetingInfo(),i=this.createMeetingSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,i)}else{let t=this.privTranscriberRecognizer.getConversationInfo(),i=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,i)}yield this.sendWaveHeader(e)})}sendSpeechEvent(e,t){let i=JSON.stringify(t);if(i)return e.send(new hB.SpeechConnectionMessage(lB.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",i))}createSpeechEventPayload(e,t){let i={id:"meeting",name:t,meeting:e.conversationProperties};return i.meeting.id=e.id,i.meeting.attendees=e.participants,i}createMeetingSpeechEventPayload(e,t){let i={id:"meeting",name:t,meeting:e.meetingProperties};return i.meeting.id=e.id,i.meeting.attendees=e.participants,i}};Ml.TranscriptionServiceRecognizer=xy});var d0=l(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.DetailedSpeechPhrase=void 0;var dB=I(),qy=class r{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=dB.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(let i of this.privDetailedSpeechPhrase.NBest)if(i.Words&&i.Words[0]){t=i.Words[0].Offset;break}if(t&&t<e){let i=e-t;for(let n of this.privDetailedSpeechPhrase.NBest){if(n.Words)for(let s of n.Words)s.Offset+=i;if(n.DisplayWords)for(let s of n.DisplayWords)s.Offset+=i}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};Dl.DetailedSpeechPhrase=qy});var f0=l(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.SimpleSpeechPhrase=void 0;var fB=I(),Ny=class r{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=fB.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};xl.SimpleSpeechPhrase=Ny});var v0=l(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.AddedLmIntent=void 0;var jy=class{constructor(e,t){this.modelImpl=e,this.intentName=t}};ql.AddedLmIntent=jy});var m0=l(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.IntentServiceRecognizer=void 0;var g0=A(),Re=C(),cs=I(),ky=class extends cs.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privIntentRecognizer=s,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,i,n=!1,s=new Re.PropertyCollection;switch(e.messageType===g0.MessageType.Text&&s.setProperty(Re.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":let a=cs.SpeechHypothesis.fromJSON(e.textBody);if(t=new Re.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Re.ResultReason.RecognizingIntent,a.Text,a.Duration,a.Offset+this.privRequestSession.currentTurnAudioOffset,a.Language,a.LanguageDetectionConfidence,void 0,e.textBody,s),this.privRequestSession.onHypothesis(t.offset),i=new Re.IntentRecognitionEventArgs(t,a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch{}n=!0;break;case"speech.phrase":let c=cs.SimpleSpeechPhrase.fromJSON(e.textBody);t=new Re.IntentRecognitionResult(void 0,this.privRequestSession.requestId,cs.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,s),i=new Re.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);let u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||Re.ResultReason.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),u()):this.privPendingIntentArgs=i,n=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,i===void 0){if(e.textBody==="")return;i=new Re.IntentRecognitionEventArgs(new Re.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let p=cs.IntentResponse.fromJSON(e.textBody);if(p!==null&&p.topScoringIntent&&p.topScoringIntent.intent){let h=this.privAddedLmIntents[p.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(h=this.privUmbrellaIntent),h){let d=h===void 0||h.intentName===void 0?p.topScoringIntent.intent:h.intentName,v=i.result.reason;d!==void 0&&(v=Re.ResultReason.RecognizedIntent);let y=i.result.properties!==void 0?i.result.properties:new Re.PropertyCollection;y.setProperty(Re.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),i=new Re.IntentRecognitionEventArgs(new Re.IntentRecognitionResult(d,i.result.resultId,v,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,y),i.offset,i.sessionId)}}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}n=!0;break;default:break}let o=new g0.Deferred;return o.resolve(n),o.promise}cancelRecognition(e,t,i,n,s){let o=new Re.PropertyCollection;if(o.setProperty(cs.CancellationErrorCodePropertyName,Re.CancellationErrorCode[n]),this.privIntentRecognizer.canceled){let a=new Re.IntentRecognitionCanceledEventArgs(i,s,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Re.IntentRecognitionResult(void 0,t,Re.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};Nl.IntentServiceRecognizer=ky});var y0=l(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.IntentResponse=void 0;var zy=class r{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};jl.IntentResponse=zy});var C0=l(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0})});var R0=l(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.ServiceTelemetryListener=void 0;var Lr=A(),P0=ul(),Ly=class{constructor(e,t,i){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=i,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof P0.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Lr.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Lr.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Lr.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Lr.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Lr.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof P0.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Lr.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Lr.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Lr.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Lr.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){let e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let t={Metrics:e,ReceivedMessages:this.privReceivedMessages},i=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],i}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}};kl.ServiceTelemetryListener=Ly});var w0=l(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.RequestSession=void 0;var us=A(),zl=ul(),vB=R0(),Fy=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=us.createNoDashGuid(),this.privAudioNodeId=us.createNoDashGuid(),this.privTurnDeferral=new us.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new vB.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new zl.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return f(this,null,function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new zl.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))})}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new zl.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return f(this,null,function*(){e&&(yield this.onComplete())})}onConnectionEstablishCompleted(e,t){return f(this,null,function*(){if(e===200){this.onEvent(new zl.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&(yield this.onComplete())})}onServiceTurnEndResponse(e){return f(this,null,function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())})}onSpeechContext(){this.privRequestId=us.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new us.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return f(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}})}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return f(this,null,function*(){yield this.onComplete()})}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),us.Events.instance.onEvent(e)}onComplete(){return f(this,null,function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())})}detachAudioNode(){return f(this,null,function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))})}};Ll.RequestSession=Fy});var b0=l(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.SpeechContext=void 0;var By=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t,i=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),i&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){let e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}};Fl.SpeechContext=By});var E0=l(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.DynamicGrammarBuilder=void 0;var Uy=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;let e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){let t=[];this.privPhrases.forEach(i=>{t.push({Text:i})}),e.Groups=[{Type:"Generic",Items:t}]}return e}};Bl.DynamicGrammarBuilder=Uy});var _0=l(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0})});var Hy=l(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.MessageDataStreamType=nn.ActivityPayloadResponse=void 0;var Wy=class r{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}};nn.ActivityPayloadResponse=Wy;var gB;(function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"})(gB=nn.MessageDataStreamType||(nn.MessageDataStreamType={}))});var T0=l(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.DialogServiceTurnState=void 0;var mB=Ln(),yB=ki(),SB=Hy(),Vy=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===SB.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=yB.AudioOutputStream.createPullStream(),this.privAudioStream.format=t!==void 0?t:mB.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};Ul.DialogServiceTurnState=Vy});var O0=l(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.DialogServiceTurnStateManager=void 0;var A0=Ht(),CB=T0(),Ky=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new A0.InvalidOperationError("Service error: There is already a turn with id:"+e);let t=new CB.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new A0.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);let t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}};Wl.DialogServiceTurnStateManager=Ky});var M0=l(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.DialogServiceAdapter=void 0;var PB=Ee(),RB=ud(),Ye=A(),wB=Ln(),V=C(),bB=O0(),Cr=I(),EB=Hy(),Hl=tn(),Jy=class extends Cr.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privEvents=new Ye.EventSource,this.privDialogServiceConnector=s,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new bB.DialogServiceTurnStateManager,this.recognizeOverride=(o,a,c)=>this.listenOnce(o,a,c),this.postConnectImplOverride=o=>this.dialogConnectImpl(o),this.configConnectionOverride=o=>this.configConnection(o),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=i,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(o=>{o.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}sendMessage(e){return f(this,null,function*(){let t=Ye.createGuid(),i=Ye.createNoDashGuid(),n={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},s=JSON.stringify(n);yield(yield this.fetchConnection()).send(new Hl.SpeechConnectionMessage(Ye.MessageType.Text,"agent",i,"application/json",s))})}privDisconnect(){return f(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,V.CancellationReason.Error,V.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1})}processTypeSpecificMessages(e){let t=new V.PropertyCollection;e.messageType===Ye.MessageType.Text&&t.setProperty(V.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i,n;switch(e.path.toLowerCase()){case"speech.phrase":let o=Cr.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),o.RecognitionStatus!==Cr.RecognitionStatus.TooManyRequests&&o.RecognitionStatus!==Cr.RecognitionStatus.Error){let d=this.fireEventForResult(o,t);if(this.privLastResult=d.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch{}}n=!0;break;case"speech.hypothesis":let a=Cr.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset;i=new V.SpeechRecognitionResult(this.privRequestSession.requestId,V.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(c);let u=new V.SpeechRecognitionEventArgs(i,a.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u)}catch{}n=!0;break;case"speech.keyword":let p=Cr.SpeechKeyword.fromJSON(e.textBody);i=new V.SpeechRecognitionResult(this.privRequestSession.requestId,p.Status==="Accepted"?V.ResultReason.RecognizedKeyword:V.ResultReason.NoMatch,p.Text,p.Duration,p.Offset,void 0,void 0,void 0,void 0,e.textBody,t),p.Status!=="Accepted"&&(this.privLastResult=i);let h=new V.SpeechRecognitionEventArgs(i,i.duration,i.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,h)}catch{}n=!0;break;case"audio":{let d=e.requestId.toUpperCase(),v=this.privTurnStateManager.GetTurn(d);try{e.binaryBody?v.audioStream.write(e.binaryBody):v.endAudioStream()}catch{}}n=!0;break;case"response":this.handleResponseMessage(e),n=!0;break;default:break}let s=new Ye.Deferred;return s.resolve(n),s.promise}cancelRecognition(e,t,i,n,s){return f(this,null,function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){let o=new V.PropertyCollection;o.setProperty(Cr.CancellationErrorCodePropertyName,V.CancellationErrorCode[n]);let a=new V.SpeechRecognitionCanceledEventArgs(i,s,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch{}if(this.privSuccessCallback){let c=new V.SpeechRecognitionResult(void 0,V.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(c),this.privSuccessCallback=void 0}catch{}}}})}listenOnce(e,t,i){return f(this,null,function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(V.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let n=this.connectImpl(),s=this.sendPreAudioMessages(),o=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new PB.ReplayableAudioNode(o,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield n,yield s}catch(d){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,V.CancellationReason.Error,V.CancellationErrorCode.ConnectionFailure,d),Promise.resolve()}let p=new V.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.sendAudio(u).then(()=>{},d=>f(this,null,function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,V.CancellationReason.Error,V.CancellationErrorCode.RuntimeError,d)}))})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){let e=new Ye.Deferred,t=()=>f(this,null,function*(){try{let i=this.isDisposed(),n=!this.isDisposed()&&this.terminateMessageLoop;if(i||n){e.resolve(void 0);return}let o=yield(yield this.fetchConnection()).read();if(!o)return t();let a=Hl.SpeechConnectionMessage.fromConnectionMessage(o);switch(a.path.toLowerCase()){case"turn.start":{let y=a.requestId.toUpperCase(),S=this.privRequestSession.requestId.toUpperCase();y!==S?this.privTurnStateManager.StartTurn(y):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let u=Cr.SpeechDetected.fromJSON(a.textBody),p=new V.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let h;a.textBody.length>0?h=a.textBody:h="{ Offset: 0 }";let d=Cr.SpeechDetected.fromJSON(h);this.privRequestSession.onServiceRecognized(d.Offset+this.privRequestSession.currentTurnAudioOffset);let v=new V.RecognitionEventArgs(d.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v);break;case"turn.end":{let y=a.requestId.toUpperCase(),S=this.privRequestSession.requestId.toUpperCase();if(y!==S)this.privTurnStateManager.CompleteTurn(y);else{let R=new V.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,R),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(D){this.privErrorCallback&&this.privErrorCallback(D)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(a))||this.serviceEvents&&this.serviceEvents.onEvent(new Ye.ServiceEvent(a.path.toLowerCase(),a.textBody))}catch{}}return t()}catch{this.terminateMessageLoop=!0,e.resolve()}});return t().catch(i=>{Ye.Events.instance.onEvent(new Ye.BackgroundEvent(i))}),e.promise}startMessageLoop(){return f(this,null,function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,V.CancellationReason.Error,V.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()})}configConnection(e){return f(this,null,function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)})}sendPreAudioMessages(){return f(this,null,function*(){let e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)})}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(V.PropertyId.Conversation_DialogType)===V.DialogServiceConfig.DialogTypes.CustomCommands){let i=this.agentConfig.get();i.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(V.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(i)}this.onEvent(new RB.SendingAgentContextMessageEvent(this.agentConfig));let t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new Hl.SpeechConnectionMessage(Ye.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){let t=Ye.createGuid(),i=this.privDialogServiceConnector.properties.getProperty(V.PropertyId.Conversation_Speech_Activity_Template),s=JSON.stringify({channelData:"",context:{interactionId:t},messagePayload:typeof i===void 0?void 0:i,version:.5});return e.send(new Hl.SpeechConnectionMessage(Ye.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",s))}fireEventForResult(e,t){let i=Cr.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,s=new V.SpeechRecognitionResult(this.privRequestSession.requestId,i,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new V.SpeechRecognitionEventArgs(s,n,this.privRequestSession.sessionId)}handleResponseMessage(e){let t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":let i=e.requestId.toUpperCase(),n=EB.ActivityPayloadResponse.fromJSON(e.textBody),s=this.privTurnStateManager.GetTurn(i);if(n.conversationId){let c=this.agentConfig.get();c.botInfo.conversationId=n.conversationId,this.agentConfig.set(c)}let o=s.processActivityPayload(n,wB.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(V.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new V.ActivityReceivedEventArgs(n.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,a)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new V.TurnStatusReceivedEventArgs(e.textBody))}catch{}break;default:Ye.Events.instance.onEvent(new Ye.BackgroundEvent(`Unexpected response of type ${t.messageType}. Ignoring.`));break}}onEvent(e){this.privEvents.onEvent(e),Ye.Events.instance.onEvent(e)}addKeywordContextData(){let e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(e===void 0)return;let t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),s=t===void 0?[]:t.split(";"),o=i===void 0?[]:i.split(";"),a=[];for(let c=0;c<n.length;c++){let u={};u.text=n[c],c<s.length&&(u.offset=Number(s[c])),c<o.length&&(u.duration=Number(o[c])),a.push(u)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:a,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};Vl.DialogServiceAdapter=Jy});var D0=l(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.AgentConfig=void 0;var Gy=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};Kl.AgentConfig=Gy});var Gl=l(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.ConversationConnectionConfig=void 0;var IB=iy(),Pr=class r extends IB.RestConfigBase{static get host(){return r.privHost}static get apiVersion(){return r.privApiVersion}static get clientAppId(){return r.privClientAppId}static get defaultLanguageCode(){return r.privDefaultLanguageCode}static get restPath(){return r.privRestPath}static get webSocketPath(){return r.privWebSocketPath}static get transcriptionEventKeys(){return r.privTranscriptionEventKeys}};Jl.ConversationConnectionConfig=Pr;Pr.privHost="dev.microsofttranslator.com";Pr.privRestPath="/capito/room";Pr.privApiVersion="2.0";Pr.privDefaultLanguageCode="en-US";Pr.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";Pr.privWebSocketPath="/capito/translate";Pr.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]});var x0=l(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.ConversationManager=void 0;var $l=Ee(),fi=x(),Fr=C(),sn=Gl(),$y=class{constructor(){this.privRequestParams=sn.ConversationConnectionConfig.configParams,this.privErrors=sn.ConversationConnectionConfig.restErrors,this.privHost=sn.ConversationConnectionConfig.host,this.privApiVersion=sn.ConversationConnectionConfig.apiVersion,this.privRestPath=sn.ConversationConnectionConfig.restPath,this.privRestAdapter=new $l.RestMessageAdapter({})}createOrJoin(e,t,i,n){try{fi.Contracts.throwIfNullOrUndefined(e,"args");let s=e.getProperty(Fr.PropertyId.SpeechServiceConnection_RecoLanguage,sn.ConversationConnectionConfig.defaultLanguageCode),o=e.getProperty(Fr.PropertyId.ConversationTranslator_Name,"conversation_host"),a=e.getProperty(Fr.PropertyId.ConversationTranslator_Host,this.privHost),c=e.getProperty(Fr.PropertyId.ConversationTranslator_CorrelationId),u=e.getProperty(Fr.PropertyId.SpeechServiceConnection_Key),p=e.getProperty(Fr.PropertyId.SpeechServiceConnection_Region),h=e.getProperty(Fr.PropertyId.SpeechServiceAuthorization_Token);fi.Contracts.throwIfNullOrWhitespace(s,"languageCode"),fi.Contracts.throwIfNullOrWhitespace(o,"nickname"),fi.Contracts.throwIfNullOrWhitespace(a,"endpointHost");let d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.languageCode]=s,d[this.privRequestParams.nickname]=o;let v={};c&&(v[this.privRequestParams.correlationId]=c),v[this.privRequestParams.clientAppId]=sn.ConversationConnectionConfig.clientAppId,t!==void 0?d[this.privRequestParams.roomId]=t:(fi.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionRegion),v[this.privRequestParams.subscriptionRegion]=p,u?v[this.privRequestParams.subscriptionKey]=u:h?v[this.privRequestParams.authorization]=`Bearer ${h}`:fi.Contracts.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));let y={};y.headers=v,this.privRestAdapter.options=y;let S=`https://${a}${this.privRestPath}`;this.privRestAdapter.request($l.RestRequestType.Post,S,d,null).then(R=>{let D=$l.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,R.headers);if(!R.ok){if(n){let m=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",R.status.toString()),T;try{T=JSON.parse(R.data),m+=` [${T.error.code}: ${T.error.message}]`}catch{m+=` [${R.data}]`}D&&(m+=` ${D}`),n(m)}return}let P=JSON.parse(R.data);if(P&&(P.requestId=D),i){try{i(P)}catch(m){n&&n(m)}i=void 0}}).catch(()=>{})}catch(s){if(n)if(s instanceof Error){let o=s;n(o.name+": "+o.message)}else n(s)}}leave(e,t){return new Promise((i,n)=>{try{fi.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),fi.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));let s=e.getProperty(Fr.PropertyId.ConversationTranslator_Host,this.privHost),o=e.getProperty(Fr.PropertyId.ConversationTranslator_CorrelationId),a={};a[this.privRequestParams.apiVersion]=this.privApiVersion,a[this.privRequestParams.sessionToken]=t;let c={};o&&(c[this.privRequestParams.correlationId]=o);let u={};u.headers=c,this.privRestAdapter.options=u;let p=`https://${s}${this.privRestPath}`;this.privRestAdapter.request($l.RestRequestType.Delete,p,a,null).then(h=>{h.ok,i()}).catch(()=>{})}catch(s){if(s instanceof Error){let o=s;n(o.name+": "+o.message)}else n(s)}})}};Ql.ConversationManager=$y});var Yy=l(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.ConversationConnectionMessage=void 0;var _B=A(),Qy=class extends _B.ConnectionMessage{constructor(e,t,i,n){super(e,t,i,n);let s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}};Yl.ConversationConnectionMessage=Qy});var N0=l(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.ConversationWebsocketMessageFormatter=void 0;var on=A(),q0=Yy(),Xy=class{toConnectionMessage(e){let t=new on.Deferred;try{if(e.messageType===on.MessageType.Text){let i=new q0.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(i)}else e.messageType===on.MessageType.Binary&&t.resolve(new q0.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(i){t.reject(`Error formatting the message. Error: ${i}`)}return t.promise}fromConnectionMessage(e){let t=new on.Deferred;try{if(e.messageType===on.MessageType.Text){let i=`${e.textBody?e.textBody:""}`;t.resolve(new on.RawWebsocketMessage(on.MessageType.Text,i,e.id))}}catch(i){t.reject(`Error formatting the message. ${i}`)}return t.promise}};Xl.ConversationWebsocketMessageFormatter=Xy});var k0=l(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.ConversationConnectionFactory=void 0;var j0=Ee(),TB=A(),AB=x(),Zy=C(),OB=Dt(),ps=Gl(),MB=N0(),eS=class extends OB.ConnectionFactoryBase{create(e,t,i){let n=e.parameters.getProperty(Zy.PropertyId.ConversationTranslator_Host,ps.ConversationConnectionConfig.host),s=e.parameters.getProperty(Zy.PropertyId.ConversationTranslator_CorrelationId,TB.createGuid()),o=`wss://${n}${ps.ConversationConnectionConfig.webSocketPath}`,a=e.parameters.getProperty(Zy.PropertyId.ConversationTranslator_Token,void 0);AB.Contracts.throwIfNullOrUndefined(a,"token");let c={};c[ps.ConversationConnectionConfig.configParams.apiVersion]=ps.ConversationConnectionConfig.apiVersion,c[ps.ConversationConnectionConfig.configParams.token]=a,c[ps.ConversationConnectionConfig.configParams.correlationId]=s;let u=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new j0.WebsocketConnection(o,c,{},new MB.ConversationWebsocketMessageFormatter,j0.ProxyInfo.fromRecognizerConfig(e),u,i)}};Zl.ConversationConnectionFactory=eS});var z0=l(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.ConversationRequestSession=void 0;var tS=A(),rS=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=tS.createNoDashGuid(),this.privRequestCompletionDeferral=new tS.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=tS.createNoDashGuid():this.onComplete()}dispose(){return f(this,null,function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)yield e.detach()}})}onComplete(){}};eh.ConversationRequestSession=rS});var uS=l(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.ConversationReceivedTranslationEventArgs=ft.ParticipantsListEventArgs=ft.ParticipantAttributeEventArgs=ft.ParticipantEventArgs=ft.LockRoomEventArgs=ft.MuteAllEventArgs=void 0;var Wo=C(),iS=class extends Wo.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}};ft.MuteAllEventArgs=iS;var nS=class extends Wo.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}};ft.LockRoomEventArgs=nS;var sS=class extends Wo.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}};ft.ParticipantEventArgs=sS;var oS=class extends Wo.SessionEventArgs{constructor(e,t,i,n){super(n),this.privKey=t,this.privValue=i,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}};ft.ParticipantAttributeEventArgs=oS;var aS=class extends Wo.SessionEventArgs{constructor(e,t,i,n,s,o,a,c,u){super(u),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=i,this.privProfanityFilter=n,this.privRoomProfanityFilter=s,this.privIsRoomLocked=o,this.privIsRoomLocked=a,this.privParticipants=c}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}};ft.ParticipantsListEventArgs=aS;var cS=class{constructor(e,t,i){this.privPayload=t,this.privCommand=e,this.privSessionId=i}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}};ft.ConversationReceivedTranslationEventArgs=cS});var lS=l(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.ConversationTranslatorCommandTypes=vi.ConversationTranslatorMessageTypes=vi.InternalParticipants=void 0;var pS=class{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(e===void 0)return;let t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(t=>t.id===e)}getParticipant(e){return this.participants.find(t=>t.id===e)}deleteParticipant(e){this.participants=this.participants.filter(t=>t.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}};vi.InternalParticipants=pS;vi.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};vi.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}});var L0=l(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.CommandResponsePayload=void 0;var DB=r=>JSON.parse(r),hS=class r{constructor(e){this.privCommandResponse=DB(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new r(e)}};th.CommandResponsePayload=hS});var F0=l(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.ParticipantPayloadResponse=ls.ParticipantsListPayloadResponse=void 0;var xB=r=>JSON.parse(r),qB=r=>JSON.parse(r),dS=class r{constructor(e){this.privParticipantsPayloadResponse=xB(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new r(e)}};ls.ParticipantsListPayloadResponse=dS;var fS=class r{constructor(e){this.privParticipantPayloadResponse=qB(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new r(e)}};ls.ParticipantPayloadResponse=fS});var B0=l(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.TextResponsePayload=hs.SpeechResponsePayload=void 0;var NB=r=>JSON.parse(r),jB=r=>JSON.parse(r),vS=class r{constructor(e){this.privSpeechResponse=NB(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new r(e)}};hs.SpeechResponsePayload=vS;var gS=class r{constructor(e){this.privTextResponse=jB(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new r(e)}};hs.TextResponsePayload=gS});var H0=l(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var kB=L0();Object.defineProperty(an,"CommandResponsePayload",{enumerable:!0,get:function(){return kB.CommandResponsePayload}});var U0=F0();Object.defineProperty(an,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return U0.ParticipantsListPayloadResponse}});Object.defineProperty(an,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return U0.ParticipantPayloadResponse}});var W0=B0();Object.defineProperty(an,"SpeechResponsePayload",{enumerable:!0,get:function(){return W0.SpeechResponsePayload}});Object.defineProperty(an,"TextResponsePayload",{enumerable:!0,get:function(){return W0.TextResponsePayload}})});var J0=l(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.ConversationServiceAdapter=void 0;var Ho=A(),tr=C(),V0=I(),K0=Yy(),zB=z0(),Pt=uS(),gi=lS(),Vo=H0(),mS=class r extends V0.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=s,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=o=>this.conversationConnectImpl(o),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new zB.ConversationRequestSession(Ho.createNoDashGuid()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){return f(this,null,function*(){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&(yield(yield this.privConnectionConfigPromise).dispose(e)),yield ye(r.prototype,this,"dispose").call(this,e)})}sendMessage(e){return f(this,null,function*(){return(yield this.fetchConnection()).send(new K0.ConversationConnectionMessage(Ho.MessageType.Text,e))})}sendMessageAsync(e){return f(this,null,function*(){yield(yield this.fetchConnection()).send(new K0.ConversationConnectionMessage(Ho.MessageType.Text,e))})}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,tr.CancellationReason.Error,tr.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return f(this,null,function*(){return!0})}cancelRecognition(e,t,i,n,s){this.terminateMessageLoop=!0;let o=new tr.ConversationTranslationCanceledEventArgs(i,s,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch{}}conversationConnectImpl(e){return f(this,null,function*(){return this.privConnectionLoop=this.startMessageLoop(),e})}receiveConversationMessageOverride(){return f(this,null,function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let e=new Ho.Deferred;try{let i=yield(yield this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();let n=this.privConversationRequestSession.sessionId,s=i.conversationMessageType.toLowerCase(),o=!1;try{switch(s){case"info":case"participant_command":case"command":let a=Vo.CommandResponsePayload.fromJSON(i.textBody);switch(a.command.toLowerCase()){case"participantlist":let v=Vo.ParticipantsListPayloadResponse.fromJSON(i.textBody),y=v.participants.map(T=>({avatar:T.avatar,displayName:T.nickname,id:T.participantId,isHost:T.ishost,isMuted:T.ismuted,isUsingTts:T.usetts,preferredLanguage:T.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new Pt.ParticipantsListEventArgs(v.roomid,v.token,v.translateTo,v.profanityFilter,v.roomProfanityFilter,v.roomLocked,v.muteAll,y,n));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantAttributeEventArgs(a.participantId,gi.ConversationTranslatorCommandTypes.setTranslateToLanguages,a.value,n));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantAttributeEventArgs(a.participantId,gi.ConversationTranslatorCommandTypes.setProfanityFiltering,a.value,n));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantAttributeEventArgs(a.participantId,gi.ConversationTranslatorCommandTypes.setMute,a.value,n));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new Pt.MuteAllEventArgs(a.value,n));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new tr.ConversationExpirationEventArgs(a.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantAttributeEventArgs(a.participantId,gi.ConversationTranslatorCommandTypes.setUseTTS,a.value,n));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new Pt.LockRoomEventArgs(a.value,n));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantAttributeEventArgs(a.participantId,gi.ConversationTranslatorCommandTypes.changeNickname,a.value,n));break;case"joinsession":let S=Vo.ParticipantPayloadResponse.fromJSON(i.textBody),R={avatar:S.avatar,displayName:S.nickname,id:S.participantId,isHost:S.ishost,isMuted:S.ismuted,isUsingTts:S.usetts,preferredLanguage:S.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantEventArgs(R,n));break;case"leavesession":let D={id:a.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new Pt.ParticipantEventArgs(D,n));break;case"disconnectsession":let P={id:a.participantId};break;case"token":let m=new V0.CognitiveTokenAuthentication(()=>{let T=a.token;return Promise.resolve(T)},()=>{let T=a.token;return Promise.resolve(T)});this.authentication=m,this.privConversationServiceConnector.onToken(m);break;default:break}break;case"partial":case"final":let c=Vo.SpeechResponsePayload.fromJSON(i.textBody),u=s==="final"?tr.ResultReason.TranslatedParticipantSpeech:tr.ResultReason.TranslatingParticipantSpeech,p=new tr.ConversationTranslationResult(c.participantId,this.getTranslations(c.translations),c.language,c.id,u,c.recognition,void 0,void 0,i.textBody,void 0);c.isFinal?((p.text!==void 0&&p.text.length>0||c.id===this.privLastPartialUtteranceId)&&(o=!0),o&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Pt.ConversationReceivedTranslationEventArgs(gi.ConversationTranslatorMessageTypes.final,p,n))):p.text!==void 0&&(this.privLastPartialUtteranceId=c.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Pt.ConversationReceivedTranslationEventArgs(gi.ConversationTranslatorMessageTypes.partial,p,n)));break;case"translated_message":let h=Vo.TextResponsePayload.fromJSON(i.textBody),d=new tr.ConversationTranslationResult(h.participantId,this.getTranslations(h.translations),h.language,void 0,void 0,h.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Pt.ConversationReceivedTranslationEventArgs(gi.ConversationTranslatorMessageTypes.instantMessage,d,n));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return e.promise})}startMessageLoop(){return f(this,null,function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let e=this.receiveConversationMessageOverride();try{return yield e}catch(t){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",tr.CancellationReason.Error,tr.CancellationErrorCode.RuntimeError,t),null}})}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(e=>e.state()===Ho.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let t;if(e!==void 0){t=new tr.Translations;for(let i of e)t.set(i.lang,i.translation)}return t}};rh.ConversationServiceAdapter=mS});var G0=l(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.ConversationTranslatorRecognizer=vs.ConversationRecognizerFactory=void 0;var LB=I(),ds=A(),fs=x(),yS=C(),FB=k0(),BB=J0(),SS=class{static fromConfig(e,t,i){return new ih(e,t,i)}};vs.ConversationRecognizerFactory=SS;var ih=class r extends yS.Recognizer{constructor(e,t,i){let n=t;fs.Contracts.throwIfNull(n,"speechConfig");let s=e;fs.Contracts.throwIfNull(s,"conversationImpl"),super(i,n.properties,new FB.ConversationConnectionFactory),this.privConversation=s,this.privIsDisposed=!1,this.privProperties=n.properties.clone(),this.privConnection=yS.Connection.fromRecognizer(this),this.privProperties.getProperty(yS.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=ds.Timeout.setTimeout,this.privClearTimeout=ds.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,i){try{fs.Contracts.throwIfDisposed(this.privIsDisposed),fs.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,i)}catch(n){if(i)if(n instanceof Error){let s=n;i(s.name+": "+s.message)}else i(n)}}disconnect(e,t){try{fs.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},i=>{t&&t(i)})}catch(i){if(t)if(i instanceof Error){let n=i;t(n.name+": "+n.message)}else t(i);this.dispose(!0).catch(n=>{ds.Events.instance.onEvent(new ds.BackgroundEvent(n))})}}sendRequest(e,t,i){try{fs.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,i)}catch(n){if(i)if(n instanceof Error){let s=n;i(s.name+": "+s.message)}else i(n);this.dispose(!0).catch(s=>{ds.Events.instance.onEvent(new ds.BackgroundEvent(s))})}}onToken(e){this.privConversation.onToken(e)}close(){return f(this,null,function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))})}dispose(e){return f(this,null,function*(){this.privIsDisposed||e&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield ye(r.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new LB.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,i,n){let s=i;return new BB.ConversationServiceAdapter(e,t,s,n,this)}sendMessage(e,t,i){let n=this.privReco;((o,a,c)=>{o!==void 0?o.then(()=>{try{a&&a()}catch(u){c&&c(`'Unhandled error on promise callback: ${u}'`)}},u=>{try{c&&c(u)}catch{}}):c&&c("Null promise")})(n.sendMessageAsync(e),t,i),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};vs.ConversationTranslatorRecognizer=ih});var Q0=l(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.TranscriberRecognizer=void 0;var $0=A(),rr=x(),gs=C(),nh=I(),CS=class r extends gs.Recognizer{constructor(e,t){let i=e;rr.Contracts.throwIfNull(i,"speechTranslationConfig");let n=t;rr.Contracts.throwIfNull(n,"audioConfigImpl"),rr.Contracts.throwIfNullOrWhitespace(i.speechRecognitionLanguage,gs.PropertyId[gs.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,i.properties,new nh.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return rr.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(gs.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(gs.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){rr.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(gs.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){rr.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return rr.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){rr.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return rr.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,t){$0.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(nh.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){$0.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return f(this,null,function*(){this.privDisposedRecognizer||(yield this.dispose(!0))})}pushConversationEvent(e,t){return f(this,null,function*(){let i=this.privReco;rr.Contracts.throwIfNullOrUndefined(i,"serviceRecognizer"),yield i.sendSpeechEventAsync(e,t)})}pushMeetingEvent(e,t){return f(this,null,function*(){let i=this.privReco;rr.Contracts.throwIfNullOrUndefined(i,"serviceRecognizer"),yield i.sendMeetingSpeechEventAsync(e,t)})}enforceAudioGating(){return f(this,null,function*(){let i=(yield this.audioConfig.format).channels;if(i===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(i!==8)throw new Error(`Unsupported audio configuration: Detected ${i}-channel audio`)})}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,i)=>{e.canceled&&e.canceled(e,i)},this.recognizing=(t,i)=>{e.transcribing&&e.transcribing(e,i)},this.recognized=(t,i)=>{e.transcribed&&e.transcribed(e,i)},this.sessionStarted=(t,i)=>{e.sessionStarted&&e.sessionStarted(e,i)},this.sessionStopped=(t,i)=>{e.sessionStopped&&e.sessionStopped(e,i)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){return f(this,null,function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield ye(r.prototype,this,"dispose").call(this,e))})}createRecognizerConfig(e){return new nh.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,i,n){let s=i;return new nh.TranscriptionServiceRecognizer(e,t,s,n,this)}};sh.TranscriberRecognizer=CS});var Y0=l(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var UB=x0();Object.defineProperty(ot,"ConversationManager",{enumerable:!0,get:function(){return UB.ConversationManager}});var WB=Gl();Object.defineProperty(ot,"ConversationConnectionConfig",{enumerable:!0,get:function(){return WB.ConversationConnectionConfig}});var HB=G0();Object.defineProperty(ot,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return HB.ConversationRecognizerFactory}});var VB=Q0();Object.defineProperty(ot,"TranscriberRecognizer",{enumerable:!0,get:function(){return VB.TranscriberRecognizer}});var ms=uS();Object.defineProperty(ot,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return ms.ConversationReceivedTranslationEventArgs}});Object.defineProperty(ot,"LockRoomEventArgs",{enumerable:!0,get:function(){return ms.LockRoomEventArgs}});Object.defineProperty(ot,"MuteAllEventArgs",{enumerable:!0,get:function(){return ms.MuteAllEventArgs}});Object.defineProperty(ot,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return ms.ParticipantAttributeEventArgs}});Object.defineProperty(ot,"ParticipantEventArgs",{enumerable:!0,get:function(){return ms.ParticipantEventArgs}});Object.defineProperty(ot,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return ms.ParticipantsListEventArgs}});var PS=lS();Object.defineProperty(ot,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return PS.ConversationTranslatorCommandTypes}});Object.defineProperty(ot,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return PS.ConversationTranslatorMessageTypes}});Object.defineProperty(ot,"InternalParticipants",{enumerable:!0,get:function(){return PS.InternalParticipants}})});var wS=l(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.SynthesisAudioMetadata=cn.MetadataType=void 0;var KB;(function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"})(KB=cn.MetadataType||(cn.MetadataType={}));var RS=class r{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new r(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}};cn.SynthesisAudioMetadata=RS});var Z0=l(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.SynthesisStartedEvent=Rr.ConnectingToSynthesisServiceEvent=Rr.SynthesisTriggeredEvent=Rr.SpeechSynthesisEvent=void 0;var X0=A(),ys=class extends X0.PlatformEvent{constructor(e,t,i=X0.EventType.Info){super(e,i),this.privRequestId=t}get requestId(){return this.privRequestId}};Rr.SpeechSynthesisEvent=ys;var bS=class extends ys{constructor(e,t,i){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=i}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};Rr.SynthesisTriggeredEvent=bS;var ES=class extends ys{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};Rr.ConnectingToSynthesisServiceEvent=ES;var IS=class extends ys{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};Rr.SynthesisStartedEvent=IS});var eO=l(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.SynthesisTurn=void 0;var oh=A(),JB=ki(),ah=C(),GB=wS(),_S=Z0(),TS=class r{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=oh.createNoDashGuid(),this.privTurnDeferral=new oh.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let e=new ah.PropertyCollection;return e.setProperty(ah.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return f(this,null,function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null})}getAllReceivedAudioWithHeader(){return f(this,null,function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){let e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()})}startNewSynthesis(e,t,i,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=i,this.privAudioOutputStream=new JB.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",n!==void 0&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new _S.SynthesisTriggeredEvent(this.requestId,void 0,n===void 0?void 0:n.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new _S.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(e===200){this.onEvent(new _S.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else e===403&&this.onComplete()}onServiceResponseMessage(e){let t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new oh.Deferred;let t=JSON.parse(e);t.webrtc&&(this.privWebRTCSDP=t.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){e.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return f(this,null,function*(){let e=yield this.getAllReceivedAudioWithHeader();return new ah.SpeechSynthesisResult(this.requestId,ah.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)})}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){oh.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&e[0]==="<"&&e[e.length-1]===">"}updateTextOffset(e,t){t===GB.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!r.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!r.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return f(this,null,function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}})}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}};ch.SynthesisTurn=TS});var tO=l(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.SynthesisAdapterBase=void 0;var Xe=A(),Rt=C(),Lt=I(),Ss=tn(),uh=class{constructor(e,t,i,n){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new Xe.ArgumentNullError("authentication");if(!t)throw new Xe.ArgumentNullError("connectionFactory");if(!i)throw new Xe.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=i,this.privIsDisposed=!1,this.privSessionAudioDestination=n,this.privSynthesisTurn=new Lt.SynthesisTurn,this.privConnectionEvents=new Xe.EventSource,this.privServiceEvents=new Xe.EventSource,this.privSynthesisContext=new Lt.SynthesisContext,this.privAgentConfig=new Lt.AgentConfig,this.connectionEvents.attach(s=>{if(s.name==="ConnectionClosedEvent"){let o=s;o.statusCode!==1e3&&this.cancelSynthesisLocal(Rt.CancellationReason.Error,o.statusCode===1007?Rt.CancellationErrorCode.BadRequestParameters:Rt.CancellationErrorCode.ConnectionFailure,`${o.reason} websocket error code: ${o.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=e),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return f(this,null,function*(){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&(yield(yield this.privConnectionConfigurationPromise).dispose(e))})}connect(){return f(this,null,function*(){yield this.connectImpl()})}sendNetworkMessage(e,t){return f(this,null,function*(){let i=typeof t=="string"?Xe.MessageType.Text:Xe.MessageType.Binary,n=typeof t=="string"?"application/json":"";return(yield this.fetchConnection()).send(new Ss.SpeechConnectionMessage(i,e,this.privSynthesisTurn.requestId,n,t))})}Speak(e,t,i,n,s,o){return f(this,null,function*(){let a;if(t?a=e:a=this.privSynthesizer.buildSsml(e),this.speakOverride!==void 0)return this.speakOverride(a,i,n,s);this.privSuccessCallback=n,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(i,e,t,o);try{yield this.connectImpl();let c=yield this.fetchConnection();yield this.sendSynthesisContext(c),yield this.sendSsmlMessage(c,a,i),this.onSynthesisStarted(i),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(Rt.CancellationReason.Error,Rt.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}})}stopSpeaking(){return f(this,null,function*(){return yield this.connectImpl(),(yield this.fetchConnection()).send(new Ss.SpeechConnectionMessage(Xe.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))})}cancelSynthesis(e,t,i,n){let s=new Rt.PropertyCollection;s.setProperty(Lt.CancellationErrorCodePropertyName,Rt.CancellationErrorCode[i]);let o=new Rt.SpeechSynthesisResult(e,Rt.ResultReason.Canceled,void 0,n,s);if(this.onSynthesisCancelled(o),this.privSuccessCallback)try{this.privSuccessCallback(o)}catch{}}cancelSynthesisLocal(e,t,i){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,i))}processTypeSpecificMessages(e){return!0}receiveMessage(){return f(this,null,function*(){try{let t=yield(yield this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;let i=Ss.SpeechConnectionMessage.fromConnectionMessage(t);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(i.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.onSynthesizing(i.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(i.binaryBody));break;case"audio.metadata":let n=Lt.SynthesisAudioMetadata.fromJSON(i.textBody).Metadata;for(let o of n)switch(o.Type){case Lt.MetadataType.WordBoundary:case Lt.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(o);let a=new Rt.SpeechSynthesisWordBoundaryEventArgs(o.Data.Offset,o.Data.Duration,o.Data.text.Text,o.Data.text.Length,o.Type===Lt.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,o.Data.text.BoundaryType);this.onWordBoundary(a);break;case Lt.MetadataType.Bookmark:let c=new Rt.SpeechSynthesisBookmarkEventArgs(o.Data.Offset,o.Data.Bookmark);this.onBookmarkReached(c);break;case Lt.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(o),o.Data.IsLastAnimation){let u=new Rt.SpeechSynthesisVisemeEventArgs(o.Data.Offset,o.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(u)}break;case Lt.MetadataType.AvatarSignal:this.onAvatarEvent(o);break;case Lt.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(o);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let s;try{s=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(s)}catch(o){this.privErrorCallback&&this.privErrorCallback(o)}this.onSynthesisCompleted(s);break;default:this.processTypeSpecificMessages(i)||this.privServiceEvents&&this.serviceEvents.onEvent(new Xe.ServiceEvent(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch{}})}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();let t=this.synthesisContext.toJSON();if(t)return e.send(new Ss.SpeechConnectionMessage(Xe.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}setSpeechConfigSynthesisSection(){}connectImpl(e=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(i=>i.state()===Xe.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=Xe.createNoDashGuid(),this.privConnectionId=Xe.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then(i=>f(this,null,function*(){this.privSynthesisTurn.onAuthCompleted(!1);let n=this.privConnectionFactory.create(this.privSynthesizerConfig,i,this.privConnectionId);n.events.attach(o=>{this.connectionEvents.onEvent(o)});let s=yield n.open();return s.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(n)):s.statusCode===403&&!e?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(s.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${s.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(Rt.PropertyId.SpeechServiceConnection_Url)} Reason: ${s.reason}`))}),i=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(i)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new Ss.SpeechConnectionMessage(Xe.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,i){return e.send(new Ss.SpeechConnectionMessage(Xe.MessageType.Text,"ssml",i,"application/ssml+xml",t))}fetchConnection(){return f(this,null,function*(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===Xe.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)})}configureConnection(){return f(this,null,function*(){let e=yield this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)})}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};ph.SynthesisAdapterBase=uh;uh.telemetryDataEnabled=!0});var iO=l(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.AvatarSynthesisAdapter=void 0;var rO=C(),$B=I(),AS=class extends $B.SynthesisAdapterBase{constructor(e,t,i,n,s){super(e,t,i,void 0),this.privAvatarSynthesizer=n,this.privSynthesizer=n,this.privAvatarConfig=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(rO.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){let t=new rO.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,t)}catch{}}}};lh.AvatarSynthesisAdapter=AS});var nO=l(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.SpeechSynthesisAdapter=void 0;var mi=C(),QB=I(),OS=class extends QB.SynthesisAdapterBase{constructor(e,t,i,n,s){super(e,t,i,s),this.privSpeechSynthesizer=n,this.privSynthesizer=n}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){let t=new mi.SpeechSynthesisEventArgs(new mi.SpeechSynthesisResult(e,mi.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{let t=this.privSynthesisTurn.audioOutputFormat.addHeader(e),i=new mi.SpeechSynthesisEventArgs(new mi.SpeechSynthesisResult(this.privSynthesisTurn.requestId,mi.ResultReason.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,i)}catch{}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){let t=new mi.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,t)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new mi.SpeechSynthesisEventArgs(e))}catch{}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch{}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch{}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch{}}};hh.SpeechSynthesisAdapter=OS});var sO=l(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.SynthesisRestAdapter=void 0;var MS=Ee(),DS=C(),YB=Dt(),XB=Je(),xS=class{constructor(e,t){let i=e.parameters.getProperty(DS.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!i){let s=e.parameters.getProperty(DS.PropertyId.SpeechServiceConnection_Region,"westus"),o=YB.ConnectionFactoryBase.getHostSuffix(s);i=e.parameters.getProperty(DS.PropertyId.SpeechServiceConnection_Host,`https://${s}.tts.speech${o}`)}this.privUri=`${i}/cognitiveservices/voices/list`;let n=MS.RestConfigBase.requestOptions;this.privRestAdapter=new MS.RestMessageAdapter(n),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(XB.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(t=>(this.privRestAdapter.setHeaders(t.headerName,t.token),this.privRestAdapter.request(MS.RestRequestType.Get,this.privUri)))}};dh.SynthesisRestAdapter=xS});var cO=l(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.SynthesizerConfig=un.SynthesisServiceType=void 0;var oO=I(),aO;(function(r){r[r.Standard=0]="Standard",r[r.Custom=1]="Custom"})(aO=un.SynthesisServiceType||(un.SynthesisServiceType={}));var qS=class{constructor(e,t){this.privSynthesisServiceType=aO.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new oO.SpeechServiceConfig(new oO.Context(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}};un.SynthesizerConfig=qS});var uO=l(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.SynthesisContext=void 0;var NS=C(),jS=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){let t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!e?.bookmarkReached,punctuationBoundaryEnabled:e?.properties.getProperty(NS.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!e?.wordBoundary),sentenceBoundaryEnabled:e?.properties.getProperty(NS.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!e?.visemeReceived,wordBoundaryEnabled:e?.properties.getProperty(NS.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!e?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:e?.autoDetectSourceLanguage}}}};fh.SynthesisContext=jS});var pO=l(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.SpeakerRecognitionConfig=void 0;var ZB=I(),kS=class{constructor(e,t){this.privContext=e||new ZB.Context(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}};vh.SpeakerRecognitionConfig=kS});var hO=l(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.SpeakerServiceRecognizer=void 0;var e2=Ee(),gh=A(),Fe=C(),lO=I(),t2=tn(),zS=class extends lO.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privSpeakerRecognizer=s,this.privSpeakerAudioSource=i,this.recognizeSpeaker=o=>this.recognizeSpeakerOnce(o),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let t=!1,i=new Fe.PropertyCollection;switch(e.messageType===gh.MessageType.Text&&i.setProperty(Fe.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.response":let s=JSON.parse(e.textBody),o;s.status.statusCode.toLowerCase()!=="success"?o=new Fe.SpeakerRecognitionResult(s,Fe.ResultReason.Canceled,Fe.CancellationErrorCode.ServiceError,s.status.reason):o=new Fe.SpeakerRecognitionResult(s,Fe.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(o),t=!0;break;default:break}let n=new gh.Deferred;return n.resolve(t),n.promise}cancelRecognition(e,t,i,n,s){if(new Fe.PropertyCollection().setProperty(lO.CancellationErrorCodePropertyName,Fe.CancellationErrorCode[n]),this.privResultDeferral){let a=new Fe.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:s,reason:s}},Fe.ResultReason.Canceled,n,s);try{this.privResultDeferral.resolve(a)}catch(c){this.privResultDeferral.reject(c)}}}recognizeSpeakerOnce(e){return f(this,null,function*(){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new gh.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Fe.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let t=this.connectImpl(),i=this.sendPreAudioMessages(this.extractSpeakerContext(e)),n=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),s=yield this.privSpeakerAudioSource.format,o=yield this.privSpeakerAudioSource.deviceInfo,a=new e2.ReplayableAudioNode(n,s.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:o};try{yield t,yield i}catch(p){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Fe.CancellationReason.Error,Fe.CancellationErrorCode.ConnectionFailure,p)}let c=new Fe.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage(),this.sendAudio(a).then(()=>{},p=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Fe.CancellationReason.Error,Fe.CancellationErrorCode.RuntimeError,p)}),this.privResultDeferral.promise})}sendPreAudioMessages(e){return f(this,null,function*(){let t=yield this.fetchConnection();yield this.sendSpeakerRecognition(t,e)})}sendSpeakerRecognition(e,t){return f(this,null,function*(){let i=JSON.stringify(t);return e.send(new t2.SpeechConnectionMessage(gh.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",i))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};mh.SpeakerServiceRecognizer=zS});var fO=l(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.VoiceServiceRecognizer=void 0;var r2=Ee(),wr=A(),ee=C(),dO=I(),LS=tn(),FS=class extends dO.ServiceRecognizerBase{constructor(e,t,i,n,s){super(e,t,i,n,s),this.privDeferralMap=new wr.DeferralMap,this.privSpeakerAudioSource=i,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let t=!1,i=new ee.PropertyCollection;switch(e.messageType===wr.MessageType.Text&&i.setProperty(ee.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":let s=JSON.parse(e.textBody);switch(s.operation.toLowerCase()){case"create":this.handleCreateResponse(s,e.requestId);break;case"delete":case"reset":this.handleResultResponse(s,e.requestId);break;case"fetch":let u=JSON.parse(e.textBody);this.handleFetchResponse(u,e.requestId);break;default:break}t=!0;break;case"speaker.phrases":let o=JSON.parse(e.textBody);this.handlePhrasesResponse(o,e.requestId),t=!0;break;case"speaker.profile.enrollment":let a=JSON.parse(e.textBody),c=new ee.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(a.enrollment?a.enrollment.enrollmentStatus:a.status.statusCode),a.enrollment?JSON.stringify(a.enrollment):void 0,a.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,c),this.privRequestSession.onSpeechEnded(),t=!0;break;default:break}let n=new wr.Deferred;return n.resolve(t),n.promise}cancelRecognition(e,t,i,n,s){new ee.PropertyCollection().setProperty(dO.CancellationErrorCodePropertyName,ee.CancellationErrorCode[n]);let a=new ee.VoiceProfileEnrollmentResult(ee.ResultReason.Canceled,s,s);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,a)}createProfile(e,t){return f(this,null,function*(){this.voiceProfileType=e.toString();let i=this.connectImpl();try{let n=new wr.Deferred;return yield i,yield this.sendCreateProfile(n,e,t),this.receiveMessage(),n.promise}catch(n){throw n}})}resetProfile(e){return f(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)})}deleteProfile(e){return f(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)})}retrieveEnrollmentResult(e){return f(this,null,function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)})}getAllProfiles(e){return f(this,null,function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)})}getActivationPhrases(e,t){return f(this,null,function*(){this.voiceProfileType=e.toString();let i=this.connectImpl();try{let n=new wr.Deferred;return yield i,yield this.sendPhrasesRequest(n,e,t),this.receiveMessage(),n.promise}catch(n){throw n}})}enrollProfile(e){return f(this,null,function*(){this.voiceProfileType=e.profileType.toString();let t=new wr.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(ee.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let i=this.connectImpl(),n=this.sendPreAudioMessages(e,t),s=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),o=yield this.privSpeakerAudioSource.format,a=yield this.privSpeakerAudioSource.deviceInfo,c=new r2.ReplayableAudioNode(s,o.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:a};try{yield i,yield n}catch(h){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ee.CancellationReason.Error,ee.CancellationErrorCode.ConnectionFailure,h)}let u=new ee.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},h=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ee.CancellationReason.Error,ee.CancellationErrorCode.RuntimeError,h)}),t.promise})}sendPreAudioMessages(e,t){return f(this,null,function*(){let i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),yield this.sendBaseRequest(i,"enroll",this.scenarioFrom(e.profileType),e)})}sendPhrasesRequest(e,t,i){return f(this,null,function*(){let n=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let s=this.scenarioFrom(t),o={locale:i,scenario:s};return n.send(new LS.SpeechConnectionMessage(wr.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}sendCreateProfile(e,t,i){return f(this,null,function*(){let n=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let s=t===ee.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===ee.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",o={locale:i,number:"1",scenario:s};return n.send(new LS.SpeechConnectionMessage(wr.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))})}sendCommonRequest(e,t,i=void 0){return f(this,null,function*(){let n=this.connectImpl();try{let s=new wr.Deferred;this.privRequestSession.onSpeechContext(),yield n;let o=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,s),yield this.sendBaseRequest(o,e,this.scenarioFrom(t),i),this.receiveMessage(),s.promise}catch(s){throw s}})}sendBaseRequest(e,t,i,n){return f(this,null,function*(){let s={scenario:i};return n?s.profileIds=[n.profileId]:s.maxPageSize=-1,e.send(new LS.SpeechConnectionMessage(wr.MessageType.Text,`speaker.profile.${t}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))})}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(this.privDeferralMap.getId(t))if(e.status.statusCode.toLowerCase()!=="success"){let i=ee.ResultReason.Canceled,n=new ee.VoiceProfilePhraseResult(i,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,n)}else if(e.phrases&&e.phrases.length>0){let i=ee.ResultReason.EnrollingVoiceProfile,n=new ee.VoiceProfilePhraseResult(i,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,n)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${t} not found`)}handleCreateResponse(e,t){if(e.profiles&&e.profiles.length>0)if(this.privDeferralMap.getId(t)){let i=e.profiles.map(n=>n.profileId);this.privDeferralMap.complete(t,i)}else throw new Error(`Voice Profile create request for requestID ${t} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(e,t){if(this.privDeferralMap.getId(t)){let i=e.operation.toLowerCase()==="delete"?ee.ResultReason.DeletedVoiceProfile:ee.ResultReason.ResetVoiceProfile,n=e.status.statusCode.toLowerCase()==="success"?i:ee.ResultReason.Canceled,s=new ee.VoiceProfileResult(n,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(t,s)}else throw new Error(`Voice Profile create request for requestID ${t} not found`)}handleFetchResponse(e,t){if(this.privDeferralMap.getId(t)&&e.profiles[0]){if(this.privExpectedProfileId&&e.profiles.length===1&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let i=e.profiles[0],n=new ee.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(i.enrollmentStatus),JSON.stringify(i),e.status.reason);this.privDeferralMap.complete(t,n)}else if(e.profiles.length>0){let i=e.profiles,n=[];for(let s of i)n.push(new ee.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(s.enrollmentStatus),JSON.stringify(s),e.status.reason));this.privDeferralMap.complete(t,n)}}else throw new Error(`Voice Profile fetch request for requestID ${t} not found`)}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return ee.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return ee.ResultReason.Canceled;default:return ee.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===ee.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===ee.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};yh.VoiceServiceRecognizer=FS});var vO=l(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.type=Ae.connectivity=Ae.Device=Ae.OS=Ae.System=Ae.Context=Ae.SpeechServiceConfig=void 0;var BS=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,t)=>{if(t&&typeof t=="object"&&!Array.isArray(t)){let i={};for(let n in t)Object.hasOwnProperty.call(t,n)&&(i[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return i}return t})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};Ae.SpeechServiceConfig=BS;var US=class{constructor(e){this.system=new Sh,this.os=e}};Ae.Context=US;var Sh=class{constructor(){let e="1.40.0";this.name="SpeechSDK",this.version=e,this.build="JavaScript",this.lang="JavaScript"}};Ae.System=Sh;var WS=class{constructor(e,t,i){this.platform=e,this.name=t,this.version=i}};Ae.OS=WS;var HS=class{constructor(e,t,i){this.manufacturer=e,this.model=t,this.version=i}};Ae.Device=HS;var i2;(function(r){r.Bluetooth="Bluetooth",r.Wired="Wired",r.WiFi="WiFi",r.Cellular="Cellular",r.InBuilt="InBuilt",r.Unknown="Unknown"})(i2=Ae.connectivity||(Ae.connectivity={}));var n2;(function(r){r.Phone="Phone",r.Speaker="Speaker",r.Car="Car",r.Headset="Headset",r.Thermostat="Thermostat",r.Microphones="Microphones",r.Deskphone="Deskphone",r.RemoteControl="RemoteControl",r.Unknown="Unknown",r.File="File",r.Stream="Stream"})(n2=Ae.type||(Ae.type={}))});var I=l(w=>{"use strict";var s2=w&&w.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),O=w&&w.__exportStar||function(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&s2(e,r,t)};Object.defineProperty(w,"__esModule",{value:!0});w.AutoDetectSourceLanguagesOpenRangeOptionName=w.ForceDictationPropertyName=w.ServicePropertiesPropertyName=w.CancellationErrorCodePropertyName=w.OutputFormatPropertyName=void 0;O(xP(),w);O(kP(),w);O(Ta(),w);O(LP(),w);O(BP(),w);O(wA(),w);O(_A(),w);O(ul(),w);O(AA(),w);O(OA(),w);O(DA(),w);O(qA(),w);O(jA(),w);O(FA(),w);O(WA(),w);O(JA(),w);O(YA(),w);O(Vm(),w);O(XA(),w);O(ZA(),w);O(t0(),w);O(r0(),w);O(i0(),w);O(s0(),w);O(o0(),w);O(a0(),w);O(c0(),w);O(u0(),w);O(p0(),w);O(h0(),w);O(d0(),w);O(f0(),w);O(v0(),w);O(m0(),w);O(y0(),w);O(C0(),w);O(w0(),w);O(b0(),w);O(E0(),w);O(_0(),w);O(M0(),w);O(D0(),w);O(Y0(),w);O(wS(),w);O(eO(),w);O(tO(),w);var o2=iO();Object.defineProperty(w,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return o2.AvatarSynthesisAdapter}});var a2=nO();Object.defineProperty(w,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return a2.SpeechSynthesisAdapter}});O(sO(),w);O(cO(),w);O(uO(),w);O(pO(),w);O(hO(),w);O(fO(),w);O(vO(),w);w.OutputFormatPropertyName="OutputFormat";w.CancellationErrorCodePropertyName="CancellationErrorCode";w.ServicePropertiesPropertyName="ServiceProperties";w.ForceDictationPropertyName="ForceDictation";w.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"});var l2=l(pn=>{"use strict";var c2=pn&&pn.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),u2=pn&&pn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&c2(e,r,t)};Object.defineProperty(pn,"__esModule",{value:!0});var p2=I();new p2.AgentConfig;u2(C(),pn)});function E2(r){return class extends r{destroy$=new Cs;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.destroy$.unsubscribe()}}}var d2=["tooltip"],yO=20;var SO=new Ph("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let r=Rh(Rs);return()=>r.scrollStrategies.reposition({scrollThrottle:yO})}});function f2(r){return()=>r.scrollStrategies.reposition({scrollThrottle:yO})}var v2={provide:SO,deps:[Rs],useFactory:f2};function g2(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var m2=new Ph("mat-tooltip-default-options",{providedIn:"root",factory:g2});var gO="tooltip-panel",mO=yC({passive:!0}),y2=8,S2=8,C2=24,P2=200,rV=(()=>{class r{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Ih(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let i=Ih(t);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=_h(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=_h(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){let i=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,i,n,s,o,a,c,u,p,h,d,v){this._overlay=t,this._elementRef=i,this._scrollDispatcher=n,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=c,this._focusMonitor=u,this._dir=h,this._defaultOptions=d,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=R2,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new Cs,this._injector=Rh(XS),this._scrollStrategy=p,this._document=v,d&&(this._showDelay=d.showDelay,this._hideDelay=d.hideDelay,d.position&&(this.position=d.position),d.positionAtOrigin&&(this.positionAtOrigin=d.positionAtOrigin),d.touchGestures&&(this.touchGestures=d.touchGestures),d.tooltipClass&&(this.tooltipClass=d.tooltipClass)),h.change.pipe(Ur(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=y2}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ur(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,n])=>{t.removeEventListener(i,n,mO)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let n=this._createOverlay(i);this._detach(),this._portal=this._portal||new IC(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=n.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Ur(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(t):(i._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof Ps)return this._overlayRef;this._detach()}let i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return n.positionChanges.pipe(Ur(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${gO}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ur(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ur(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ur(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!SC(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let i=t.getConfig().positionStrategy,n=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(sr(sr({},n.main),s.main)),this._addOffset(sr(sr({},n.fallback),s.fallback))])}_addOffset(t){let i=S2,n=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-i:t.originY==="bottom"?t.offsetY=i:t.originX==="start"?t.offsetX=n?-i:i:t.originX==="end"&&(t.offsetX=n?i:-i),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",i=this.position,n;i=="above"||i=="below"?n={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&t||i=="right"&&!t?n={originX:"start",originY:"center"}:(i=="after"||i=="right"&&t||i=="left"&&!t)&&(n={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",i=this.position,n;i=="above"?n={overlayX:"center",overlayY:"bottom"}:i=="below"?n={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&t||i=="right"&&!t?n={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&t||i=="left"&&!t)&&(n={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),iC(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){let{overlayY:i,originX:n,originY:s}=t,o;if(i==="center"?this._dir&&this._dir.value==="rtl"?o=n==="end"?"left":"right":o=n==="start"?"left":"right":o=i==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let a=this._overlayRef;if(a){let c=`${this._cssClassPrefix}-${gO}-`;a.removePanelClass(c+this._currentPosition),a.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let i;t.x!==void 0&&t.y!==void 0&&(i=t),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let i=t.targetTouches?.[0],n=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,n)},this._defaultOptions.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{let n=i.relatedTarget;(!n||!this._overlayRef?.overlayElement.contains(n))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,n])=>{this._elementRef.nativeElement.addEventListener(i,n,mO)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let i=this._document.elementFromPoint(t.clientX,t.clientY),n=this._elementRef.nativeElement;i!==n&&!n.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let i=this._elementRef.nativeElement,n=i.style;(t==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),(t==="on"||!i.draggable)&&(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(i){return new(i||r)(Ue(Rs),Ue(Ps),Ue(bC),Ue(rC),Ue(ZS),Ue(mC),Ue(CC),Ue(PC),Ue(SO),Ue(wC),Ue(m2,8),Ue(fC))}}static{this.\u0275dir=$S({type:r,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,n){i&2&&wh("mat-mdc-tooltip-disabled",n.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return r})(),R2=(()=>{class r{constructor(t,i,n){this._changeDetectorRef=t,this._elementRef=i,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Cs,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=n==="NoopAnimations"}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>C2&&t.width>=P2}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let i=this._tooltip.nativeElement,n=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:n),i.classList.add(t?n:s),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(i);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static{this.\u0275fac=function(i){return new(i||r)(Ue(dC),Ue(Ps),Ue(eC,8))}}static{this.\u0275cmp=JS({type:r,selectors:[["mat-tooltip-component"]],viewQuery:function(i,n){if(i&1&&aC(d2,7),i&2){let s;cC(s=uC())&&(n._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,n){i&1&&Eh("mouseleave",function(o){return n._handleMouseLeave(o)})},standalone:!0,features:[hC],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,n){if(i&1){let s=oC();bh(0,"div",1,0),Eh("animationend",function(a){return QS(s),YS(n._handleAnimationEnd(a))}),bh(2,"div",2),pC(3),sC()()}i&2&&(wh("mdc-tooltip--multiline",n._isMultiline),nC("ngClass",n.tooltipClass),tC(3),lC(n.message))},dependencies:[vC],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return r})();var iV=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=GS({type:r})}static{this.\u0275inj=KS({providers:[v2],imports:[RC,gC,_C,Th,Th,EC]})}}return r})();export{E2 as a,l2 as b,rV as c,iV as d};
