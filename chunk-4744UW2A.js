import{a as er,b as tr}from"./chunk-ZZBFIXT2.js";import{a as Ze}from"./chunk-F5F6TCEI.js";import{a as Un}from"./chunk-KQIHERE2.js";import{a as yt}from"./chunk-XTPXPODU.js";import{a as Gn}from"./chunk-FTP5OKF7.js";import{a as we}from"./chunk-FBS6Y7ZU.js";import{a as We}from"./chunk-OHIWOG7L.js";import"./chunk-KNZUA67I.js";import{a as bn,b as _n,c as vn,d as xn,i as yn}from"./chunk-5BZPFUY4.js";import"./chunk-P3B5ZGRD.js";import{a as W}from"./chunk-EC4P36VE.js";import{a as Wn,b as Zn,c as Xn,d as Yn,e as Jn,f as Ct}from"./chunk-TS34SMTU.js";import"./chunk-J2HB2Y4E.js";import"./chunk-ZX4VXR5W.js";import{b as di}from"./chunk-INJDVHFI.js";import{a as ue,b as ge,c as Pe,d as xt,e as qe,f as ze,g as Ke}from"./chunk-3NBMALXY.js";import"./chunk-FWDT53KA.js";import{a as Kn}from"./chunk-XIYR6XWG.js";import"./chunk-QW4DZL5W.js";import"./chunk-2LKYGCHS.js";import{a as qn,c as fe}from"./chunk-X5CIYX27.js";import"./chunk-6IGLDT6K.js";import"./chunk-2N4EDZNV.js";import{a as si,c as jn,h as Lt,j as $n,k as Qn}from"./chunk-ANBYP55K.js";import"./chunk-EARLHVX5.js";import{a as kn}from"./chunk-SSNXJZ43.js";import"./chunk-IHOFWBF3.js";import{a as K}from"./chunk-HC4WQR6A.js";import{b as ci,c as zn}from"./chunk-WLQKWWON.js";import{$ as re,Ba as Ln,C as Tn,Ca as Oi,E as ni,Fa as Rn,G as Li,Ha as On,Ia as li,P as Ri,Pa as Nn,Qa as Hn,Ra as Bn,Z as ai,_ as Mn,a as Vt,ba as Y,c as Cn,ca as Qe,ea as J,fa as xe,g as wn,ia as ke,ja as Pn,ka as _t,la as Me,m as Sn,ma as ye,na as vt,oa as oi,pa as Ce,ta as Dn,u as In,ua as Vn,va as q,xa as z}from"./chunk-MFSWGIIO.js";import{c as $e,d as Ie,f as ie,g as ri,h as An,i as Te,k as Fn,l as En}from"./chunk-OK5S6IU3.js";import{a as bt,b as P}from"./chunk-DYBLNUKQ.js";import{c as lt,e as hn,g as ht}from"./chunk-PXW4CVT7.js";import{$a as qt,$b as E,Aa as tn,Ab as Kt,Ac as u,Ad as le,B as Bt,Bc as y,Bd as un,Cc as ot,Db as w,Dd as ii,Ed as gn,Fa as Se,Fb as Et,Ga as nn,H as Ut,Ha as _,Hb as ln,Hc as Ue,Hd as ft,I as Gt,Ia as v,Ib as sn,Ic as Vi,J as Zi,Ja as S,Jb as O,Jc as gt,K as Xi,Ka as U,Kc as be,La as ee,Lb as tt,Lc as A,M as jt,Mc as M,N as $t,Na as Ne,Nc as L,Nd as fn,Ob as h,Oc as Ge,P as se,Pc as mn,Qa as he,Qb as cn,Qc as pe,R as Oe,Ra as Ft,Rb as it,Rc as ei,Sb as m,Sc as Ee,Ta as Je,Tb as Wt,Tc as de,Ua as G,Ub as X,Va as me,Vb as Zt,W as Fe,Wa as rn,Wb as nt,Xb as x,Yb as H,Z as R,Zb as rt,_b as F,a as Nt,ac as o,ad as Dt,b as Ht,bc as l,cc as f,dc as Be,dd as ve,ea as Yi,ec as at,ed as ti,fc as Z,fd as Re,ga as dt,gc as C,ha as ne,i as zi,ia as T,jc as b,k as ct,ka as D,lb as et,lc as d,ma as Qt,mb as Ve,mc as Xt,n as Ki,na as mt,nc as Yt,nd as je,oa as Ji,oc as Jt,pc as Le,q as At,qa as pt,qb as an,qc as Di,rc as Mt,sb as a,sc as _e,ta as p,tb as V,tc as ae,u as Wi,uc as oe,vb as He,vc as dn,vd as $,wc as Pt,x as Q,xa as k,xb as on,xc as ut,ya as en,yc as j,za as ce,zb as zt,zc as c,zd as pn}from"./chunk-O6QGGAL6.js";function Tr(n,i){n&1&&(S(),o(0,"svg",3),f(1,"path",5),l())}var Xe=class n{checked=sn(!1);label=G("");id=G("checkbox");classes=G("");onSelect=Je();onTouched=()=>{};onChange=()=>{};onChecked(i){let e=i.target;this.checked.set(e.checked),this.onSelect.emit(e.checked),this.onChange(e.checked)}writeValue(i){this.checked.update(()=>!!i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}markAsTouched(){this.onTouched()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-checkbox"]],inputs:{checked:[1,"checked"],label:[1,"label"],id:[1,"id"],classes:[1,"classes"]},outputs:{checked:"checkedChange",onSelect:"onSelect"},standalone:!0,features:[be([{provide:ai,useExisting:Qt(()=>n),multi:!0}]),A],decls:6,vars:9,consts:[[3,"for"],["type","checkbox",1,"hidden",3,"change","blur","id","checked"],[1,"size-5","min-h-5","min-w-5","flex","items-center","justify-center","border-2","border-gray-300","rounded-md","transition-all","duration-200","ease-in-out",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-white"],[1,"text-sm","font-medium","text-gray-800"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(e,t){e&1&&(o(0,"label",0)(1,"input",1),b("change",function(s){return t.onChecked(s)})("blur",function(){return t.markAsTouched()}),l(),o(2,"span",2),h(3,Tr,2,0,":svg:svg",3),l(),o(4,"span",4),c(5),l()()),e&2&&(nt("flex gap-3 items-center ",t.classes(),""),m("for",t.id()),a(),m("id",t.id())("checked",t.checked()),a(),m("ngClass",t.checked()?"bg-primary border-primary":"bg-white"),a(),x(t.checked()?3:-1),a(2),u(t.label()))},dependencies:[$]})};var st=class n{name=G.required({alias:"appTemplate"});template=p(He);getName(){return this.name()}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ce({type:n,selectors:[["","appTemplate",""]],inputs:{name:[1,"appTemplate","name"]},standalone:!0})};var kr=n=>({"!bg-gray-100":n});function Ar(n,i){n&1&&(S(),o(0,"svg",6),f(1,"path",8),l())}function Fr(n,i){n&1&&(S(),o(0,"svg",6),f(1,"path",9),l())}function Er(n,i){if(n&1){let e=C();o(0,"button",12),b("click",function(){let r=_(e).$implicit,s=d(2);return v(s.selectItem(r))}),o(1,"span"),c(2),l()()}if(n&2){let e=i.$implicit,t=d(2);m("ngClass",L(2,kr,t.computedValues().get(e)===t.selectedValue())),a(2),u(t.computedLabels().get(e))}}function Mr(n,i){if(n&1&&(o(0,"div",10),F(1,Er,3,4,"button",11,H),l()),n&2){let e=d();a(),E(e.items())}}var mi=class n{items=G.required();placeholder=G("select an option");optionValue=G();optionLabel=G();selectedValue=w(void 0);isDropdownOpen=w(!1);disabled=w(!1);templates=ln(st);onSelect=Je();onChange=()=>{};onTouched=()=>{};computedLabels=Re(()=>new Map(this.items().map(i=>[i,this.optionLabel()?i[this.optionLabel()]:i])));computedValues=Re(()=>new Map(this.items().map(i=>[i,this.optionValue()?i[this.optionValue()]:i])));selectedLabel=Re(()=>{let i=(this.items()??[]).find(e=>this.computedValues().get(e)===this.selectedValue());return i?this.computedLabels().get(i):null});ngAfterContentInit(){this.templates().forEach(i=>{switch(i.getName()){case"icon":this.iconTemplate=i.template}})}selectItem(i){let e=this.computedValues().get(i);this.selectedValue.set(e),this.onChange(e),this.onSelect.emit(e),this.isDropdownOpen.set(!1)}writeValue(i){this.selectedValue.set(i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled.set(i)}markAsTouched(){this.onTouched()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-dropdown"]],contentQueries:function(e,t,r){e&1&&dn(r,t.templates,st,4),e&2&&ut()},inputs:{items:[1,"items"],placeholder:[1,"placeholder"],optionValue:[1,"optionValue"],optionLabel:[1,"optionLabel"]},outputs:{onSelect:"onSelect"},standalone:!0,features:[be([{provide:ai,useExisting:n,multi:!0}]),A],decls:10,vars:7,consts:[["trigger","cdkOverlayOrigin"],[1,"relative","w-full"],["cdkOverlayOrigin","",1,"w-full","flex","justify-between","items-center","px-4","py-2","text-gray-700","focus:bg-gray-300","bg-gray-200","rounded-md","text-xs",3,"click","blur","disabled"],[1,"flex","items-center","space-x-2","gap-2"],[3,"ngTemplateOutlet"],[1,"mx-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayWidth"],["d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"],["d","M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"],["appPerfectScroll","",1,"bg-white","border","border-gray-300","max-h-48","shadow-lg","rounded-md","w-full"],["type","button",1,"w-full","px-4","py-2","hover:bg-gray-100","cursor-pointer","flex","items-center","space-x-2",3,"ngClass"],["type","button",1,"w-full","px-4","py-2","hover:bg-gray-100","cursor-pointer","flex","items-center","space-x-2",3,"click","ngClass"]],template:function(e,t){if(e&1){let r=C();o(0,"div",1)(1,"button",2,0),b("click",function(){return _(r),v(t.isDropdownOpen.set(!t.isDropdownOpen()))})("blur",function(){return _(r),v(t.markAsTouched())}),o(3,"span",3),Z(4,4),o(5,"span",5),c(6),l()(),h(7,Ar,2,0,":svg:svg",6)(8,Fr,2,0,":svg:svg",6),l(),h(9,Mr,3,0,"ng-template",7),b("overlayOutsideClick",function(){return _(r),v(t.isDropdownOpen.set(!1))}),l()}if(e&2){let r=j(2);a(),m("disabled",t.disabled()),a(3),m("ngTemplateOutlet",t.iconTemplate),a(2),u(t.selectedLabel()||t.placeholder()),a(),x(t.isDropdownOpen()?8:7),a(2),m("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",t.isDropdownOpen())("cdkConnectedOverlayWidth",r.elementRef.nativeElement.offsetWidth)}},dependencies:[Bn,Hn,Nn,$,W,le]})};var Pr=()=>({suppressScrollX:!0});function Dr(n,i){if(n&1&&Z(0,4),n&2){d();let e=j(14);m("ngTemplateOutlet",e)}}function Vr(n,i){if(n&1){let e=C();o(0,"app-checkbox",14),b("onSelect",function(r){_(e);let s=d(2);return v(s.toggleSelectAll(r))}),l()}if(n&2){let e=d(2);m("classes","h-full bg-gray-300 p-3 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition cursor-pointer")("formControl",e.checkAllForm)("id","select-all")("label",e.checkAllForm.value?e.lang.locals.deselect_all:e.lang.locals.select_all)}}function Lr(n,i){if(n&1){let e=C();o(0,"app-checkbox",15),b("onSelect",function(r){let s=_(e).$implicit,g=d(2);return v(g.onQuestionSelect(r,s))}),l()}if(n&2){let e=i.$implicit,t=d(2);m("classes","h-full bg-gray-100 p-3 rounded-lg shadow-md hover:bg-gray-200 transition cursor-pointer")("id",e.RowKey)("checked",t.selectedRawKey.has(e.RowKey))("label",e.ActualQuestion)}}function Rr(n,i){if(n&1&&(o(0,"div",13)(1,"p",16),c(2),l()()),n&2){let e=d(2);a(2),y(" ",e.lang.locals.all_questions_have_been_archived," ")}}function Or(n,i){if(n&1&&(o(0,"p",8),c(1),l(),o(2,"div",9)(3,"div",10),h(4,Vr,1,4,"app-checkbox",11),F(5,Lr,1,4,"app-checkbox",12,H,!1,Rr,3,1,"div",13),l()()),n&2){let e=d();a(),y(" ",e.lang.locals.choose_questions_to_archive," "),a(3),x(e.allFAQs().length?4:-1),a(),E(e.allFAQs())}}function Nr(n,i){if(n&1&&Z(0,4),n&2){d();let e=j(14);m("ngTemplateOutlet",e)}}function Hr(n,i){n&1&&(o(0,"div",17)(1,"div",18),S(),o(2,"svg",19),f(3,"path",20)(4,"path",21),l(),U(),o(5,"span",22),c(6,"Loading..."),l()()())}var pi=class n extends K(class{}){lang=p(P);faqService=p(yt);ref=p(ue);botName=p(ge);toArchivedFAQs=[];allFAQs=w([]);isLoading=w(!1);isLoadingArhive=w(!1);checkAllForm=new ke(!1,{nonNullable:!0});selectedRawKey=new Set;ngOnInit(){this.getUnArchivedFAQs()}getUnArchivedFAQs(){this.isLoading.set(!0),this.faqService.getUnArchivedFAQs(this.botName).pipe(T(this.destroy$),D(i=>this.allFAQs.set(i)),R(()=>this.isLoading.set(!1))).subscribe()}onQuestionSelect(i,e){i?(this.toArchivedFAQs.push(e),this.selectedRawKey.add(e.RowKey),this.toArchivedFAQs.length===this.allFAQs().length&&this.checkAllForm.patchValue(!0)):this.deleteFromArchived(e)}deleteFromArchived(i){let e=this.toArchivedFAQs.findIndex(t=>t.RowKey===i.RowKey);e>-1&&(this.toArchivedFAQs.splice(e,1),this.selectedRawKey.delete(i.RowKey),this.checkAllForm.patchValue(!1))}addToArchive(){this.isLoadingArhive.set(!0),this.faqService.addToArchivedFAQs(this.botName,this.toArchivedFAQs).pipe(T(this.destroy$),R(()=>{this.isLoadingArhive.set(!1),this.ref.close(!0)})).subscribe()}toggleSelectAll(i){this.resetLists(),i&&this.allFAQs().forEach(e=>{this.toArchivedFAQs.push(e),this.selectedRawKey.add(e.RowKey)})}resetLists(){this.toArchivedFAQs=[],this.selectedRawKey.clear()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-add-faq-popup"]],standalone:!0,features:[O,A],decls:15,vars:7,consts:[["loader",""],[1,"flex","flex-col","w-[min(70rem,80vw)]"],[1,"p-4","bg-primary","text-white","text-lg","font-semibold"],["appPerfectScroll","",3,"perfectScrollOptions"],[3,"ngTemplateOutlet"],[1,"flex","w-full","justify-between","mt-6","space-x-2","gap-4","p-4"],["mat-dialog-close","","type","button",1,"bg-gray-300","w-1/2","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none"],["type","button",1,"inline-flex","items-center","justify-center","gap-2","bg-primary/90","w-1/2","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click"],[1,"text-gray-700","text-base","opacity-40"],[1,"p-4","flex","flex-auto","flex-col"],[1,"flex","flex-col","space-y-2"],[3,"classes","formControl","id","label"],[3,"classes","id","checked","label"],[1,"flex","items-center","justify-center"],[3,"onSelect","classes","formControl","id","label"],[3,"onSelect","classes","id","checked","label"],[1,"text-gray-700","text-2xl"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){if(e&1){let r=C();o(0,"div",1)(1,"div",2),c(2),l(),o(3,"mat-dialog-content",3),h(4,Dr,1,1,"ng-container",4)(5,Or,8,3),l(),o(6,"mat-dialog-actions")(7,"div",5)(8,"button",6),c(9),l(),o(10,"button",7),b("click",function(){return _(r),v(t.addToArchive())}),c(11),h(12,Nr,1,1,"ng-container",4),l()()()(),h(13,Hr,7,0,"ng-template",null,0,de)}e&2&&(a(2),u(t.lang.locals.faq_list),a(),m("perfectScrollOptions",M(6,Pr)),a(),x(t.isLoading()?4:5),a(5),y(" ",t.lang.locals.cancel," "),a(2),y(" ",t.lang.locals.add_to_archive," "),a(),x(t.isLoadingArhive()?12:-1))},dependencies:[Ke,xt,ze,qe,W,Xe,z,J,Me,le]})};var wt=class n{renderer=p(zt);el=p(me);ngOnInit(){this.renderer.setAttribute(this.el.nativeElement,"ignore-el","true")}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ce({type:n,selectors:[["","appIgnoreSelection",""]],standalone:!0})};function Br(n,i){if(n&1&&(o(0,"div",3),f(1,"img",8),l()),n&2){let e=d();a(),m("src",e.data.imageUrl,Ve)}}function Ur(n,i){if(n&1&&(o(0,"div",4)(1,"p"),c(2),l()()),n&2){let e=d();a(2),u(e.data.message)}}function Gr(n,i){if(n&1&&f(0,"div",5),n&2){let e=d();m("innerHTML",e.data.htmlContent,et)}}var Ae=class n{ref=p(ue);data=p(ge);lang=p(P);onConfirm(){this.ref.close(!0)}onCancel(){this.ref.close(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-confirmation-popup"]],standalone:!0,features:[A],decls:12,vars:12,consts:[["appIgnoreSelection","",1,"flex","flex-col","w-[min(500px,80vw)]"],[1,"p-4","bg-primary","text-white"],[1,"p-4","min-h-0","flex","flex-auto","flex-col"],[1,"mb-4"],[1,"mb-4","text-gray-700","text-center"],[1,"mb-4","text-gray-700",3,"innerHTML"],[1,"flex","justify-between","mt-6","space-x-2","gap-4","p-4"],["type","button",3,"click"],["alt","Dialog Image",1,"w-full","h-auto","rounded-md",3,"src"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1),c(2),l(),o(3,"div",2),h(4,Br,2,1,"div",3)(5,Ur,3,1,"div",4)(6,Gr,1,1,"div",5),l()(),o(7,"div",6)(8,"button",7),b("click",function(){return t.onCancel()}),c(9),l(),o(10,"button",7),b("click",function(){return t.onConfirm()}),c(11),l()()),e&2&&(a(2),u(t.lang.locals.confirm_action),a(2),x(t.data.imageUrl?4:-1),a(),x(t.data.message?5:-1),a(),x(t.data.htmlContent?6:-1),a(2),nt("bg-gray-300 w-1/2 text-gray-800 font-medium py-2 px-4 rounded-lg hover:bg-gray-400 focus:ring-2 focus:ring-gray-200 focus:outline-none ",t.data.cancelButtonClasses||"",""),a(),y(" ",t.data.cancelButtonText||t.lang.locals.cancel," "),a(),nt("bg-primary/90 w-1/2 text-white font-medium py-2 px-4 rounded-lg hover:bg-primary focus:ring-4 focus:ring-gray-300 focus:outline-none disabled:opacity-50 ",t.data.confirmButtonClasses||"",""),a(),y(" ",t.data.confirmButtonText||t.lang.locals.confirm," "))},dependencies:[wt]})};function ir(n){let i=p(q);return i.group({PartitionKey:i.control(n.PartitionKey),RowKey:i.control(n.RowKey),ActualQuestion:i.control(n.ActualQuestion,[Y.required]),TotalCount:i.control(n.TotalCount),OrderIndex:i.control(n.OrderIndex,[Y.required,Y.min(1)]),botname:i.control(n.botname)})}var jr=()=>({suppressScrollX:!0}),nr=n=>({"bg-red-50 !border-red-400":n});function $r(n,i){if(n&1&&Z(0,13),n&2){d();let e=j(21);m("ngTemplateOutlet",e)}}function Qr(n,i){n&1&&(o(0,"div",14)(1,"div",15),S(),o(2,"svg",16),f(3,"path",17)(4,"path",18),l(),U(),o(5,"span",19),c(6,"Loading..."),l()()())}var ui=class n extends K(class{}){lang=p(P);faqService=p(yt);ref=p(ue);fb=p(q);injctor=p(Ne);faqData=p(ge);isLoading=w(!1);ngOnInit(){this.prepareForm()}prepareForm(){Se(this.injctor,()=>{this.faqFrom=ir(this.faqData.selectedQuestion)})}editFAQ(){this.isLoading.set(!0);let{RowKey:i,OrderIndex:e}=this.faqFrom.value,{OrderIndex:t}=this.faqData.selectedQuestion,r=this.faqData.allFAQ.find(g=>g.OrderIndex===e&&g.RowKey!==i),s=(g,I)=>this.faqService.updateArchivedFAQs(g,I).pipe(T(this.destroy$));Q(r).pipe(ne(g=>g?Ut([s(i,this.faqFrom.value),s(g.RowKey,{OrderIndex:t})]):s(i,this.faqFrom.value)),R(()=>{this.isLoading.set(!1),this.ref.close(!0)})).subscribe()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-edit-faq-popup"]],standalone:!0,features:[O,A],decls:22,vars:18,consts:[["loader",""],[1,"flex","flex-col","w-[min(500px,80vw)]"],[1,"p-4","bg-primary","text-white"],["appPerfectScroll","",3,"perfectScrollOptions"],[1,"p-4","min-h-0","flex","flex-auto","flex-col","space-y-4",3,"formGroup"],[1,"flex","flex-col"],["for","question",1,"text-base","font-semibold"],["id","question","type","text","formControlName","ActualQuestion",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"ngClass","placeholder"],["for","order_index",1,"text-base","font-semibold"],["id","order_index","type","number","formControlName","OrderIndex",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"ngClass","placeholder"],[1,"flex","w-full","justify-between","mt-6","space-x-2","gap-4","p-4"],["mat-dialog-close","","type","button",1,"bg-gray-300","w-1/2","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none"],["type","button",1,"inline-flex","items-center","justify-center","gap-2","bg-primary/90","w-1/2","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click","disabled"],[3,"ngTemplateOutlet"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){if(e&1){let r=C();o(0,"div",1)(1,"div",2),c(2),l(),o(3,"mat-dialog-content",3)(4,"div",4)(5,"div",5)(6,"label",6),c(7),l(),f(8,"input",7),l(),o(9,"div",5)(10,"label",8),c(11),l(),f(12,"input",9),l()()(),o(13,"mat-dialog-actions")(14,"div",10)(15,"button",11),c(16),l(),o(17,"button",12),b("click",function(){return _(r),v(t.editFAQ())}),c(18),h(19,$r,1,1,"ng-container",13),l()()()(),h(20,Qr,7,0,"ng-template",null,0,de)}e&2&&(a(2),u(t.lang.locals.edit_question),a(),m("perfectScrollOptions",M(13,jr)),a(),m("formGroup",t.faqFrom),a(3),u(t.lang.locals.question_text),a(),m("ngClass",L(14,nr,t.faqFrom.controls.ActualQuestion.invalid&&t.faqFrom.controls.ActualQuestion.touched&&t.faqFrom.controls.ActualQuestion.dirty))("placeholder",t.lang.locals.question_text),a(3),u(t.lang.locals.order_index),a(),m("ngClass",L(16,nr,t.faqFrom.controls.OrderIndex.invalid&&t.faqFrom.controls.OrderIndex.touched&&t.faqFrom.controls.OrderIndex.dirty))("placeholder",t.lang.locals.order_index),a(4),y(" ",t.lang.locals.cancel," "),a(),m("disabled",t.faqFrom.invalid),a(),y(" ",t.lang.locals.edit_question," "),a(),x(t.isLoading()?19:-1))},dependencies:[Ke,xt,ze,qe,z,re,_t,J,xe,ye,Ce,le,$,W]})};var qr=()=>["FAQ_ADD_QUESTION"],zr=n=>({"h-40":n}),rr=()=>["FAQ_DELETE_QUESTION"],Kr=()=>["FAQ_UPDATE"];function Wr(n,i){n&1&&(S(),o(0,"svg",17),f(1,"path",18),l())}function Zr(n,i){if(n&1){let e=C();o(0,"button",19),b("click",function(){_(e);let r=d();return v(r.addArchivedFAQs())}),c(1),l()}if(n&2){let e=d();m("disabled",!e.selectedBotName.value),a(),y(" ",e.lang.locals.add_faq," ")}}function Xr(n,i){if(n&1){let e=C();o(0,"button",21),b("click",function(){_(e);let r=d(2);return v(r.deleteSelectedFAQs())}),S(),o(1,"svg",22),f(2,"path",23),l(),U(),o(3,"span"),c(4),l(),o(5,"span",24),c(6),l()()}if(n&2){let e=d(2);m("@slideFromBottom",void 0),a(4),u(e.lang.locals.delete),a(2),y(" ",e.selectedFAQ.length," ")}}function Yr(n,i){n&1&&(o(0,"div"),h(1,Xr,7,3,"button",20),l()),n&2&&(a(),m("appHasPermission",M(1,rr)))}function Jr(n,i){if(n&1){let e=C();o(0,"button",30),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.updateArchivedFAQs(r))}),c(1),l()}if(n&2){let e=d(2);a(),y(" ",e.lang.locals.edit," ")}}function ea(n,i){if(n&1){let e=C();o(0,"button",31),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.deleteSelectedFAQs([r]))}),c(1),l()}if(n&2){let e=d(2);a(),y(" ",e.lang.locals.delete," ")}}function ta(n,i){if(n&1){let e=C();o(0,"tr",15)(1,"td",25)(2,"app-checkbox",26),b("onSelect",function(r){let s=_(e).$implicit,g=d();return v(g.toggleSelection(r,s))}),l()(),o(3,"td",27),c(4),l(),o(5,"td",25),h(6,Jr,2,1,"button",28)(7,ea,2,1,"button",29),l()()}if(n&2){let e=i.$implicit,t=i.$index,r=d();a(2),Jt("id",t),m("checked",r.selectedRawKey.has(e.RowKey)),a(2),y(" ",e.ActualQuestion," "),a(2),m("appHasPermission",M(5,Kr)),a(),m("appHasPermission",M(6,rr))}}function ia(n,i){if(n&1&&(o(0,"div",16)(1,"span",32),c(2),l()()),n&2){let e=d();a(2),u(e.lang.locals.update_table)}}var gi=class n extends K(class{}){lang=p(P);faqService=p(yt);chatHistoryService=p(Kn);dialog=p(Pe);searchControl=new ke("",{nonNullable:!0});selectedFAQ=[];allArchivedFAQs=w([]);filteredArchivedFAQs=w([]);selectedBotName=new ke("",{nonNullable:!0});selectedRawKey=new Set;botNames=w([]);isLoading=w(!1);ngOnInit(){this.prepareDate(),this.listenToSearch(),this.listenToBotNameChange()}toggleSelection(i,e){i?(this.selectedFAQ.push(e),this.selectedRawKey.add(e.RowKey)):this.deleteFromSelected(e)}deleteFromSelected(i){let e=this.selectedFAQ.findIndex(t=>t.RowKey===i.RowKey);e>-1&&(this.selectedFAQ.splice(e,1),this.selectedRawKey.delete(i.RowKey))}isAllSelected(){return this.filteredArchivedFAQs().length>0&&this.selectedFAQ.length===this.filteredArchivedFAQs().length}toggleSelectAll(i){i?this.filteredArchivedFAQs().forEach(e=>{this.selectedFAQ.push(e),this.selectedRawKey.add(e.RowKey)}):(this.selectedFAQ=[],this.selectedRawKey.clear())}prepareDate(){this.chatHistoryService.getAllBotNames().pipe(D(i=>this.selectedBotName.patchValue(i.at(0))),D(i=>this.botNames.set(i))).subscribe()}getArchivedFAQs(){return this.isLoading.set(!0),this.faqService.getArchivedFAQs(this.selectedBotName.getRawValue()).pipe(T(this.destroy$),D(i=>{this.allArchivedFAQs.set(i),this.filteredArchivedFAQs.set(i)}),R(()=>this.isLoading.set(!1)))}listenToSearch(){this.searchControl.valueChanges.pipe(T(this.destroy$),Oe(500),Fe()).subscribe(i=>{this.filteredArchivedFAQs.update(()=>this.allArchivedFAQs().filter(e=>e.ActualQuestion.toLowerCase().includes(i.toLowerCase())))})}listenToBotNameChange(){this.selectedBotName.valueChanges.pipe(T(this.destroy$),ne(()=>this.getArchivedFAQs())).subscribe()}addArchivedFAQs(){this.dialog.open(pi,{data:this.selectedBotName.getRawValue()}).afterClosed().pipe(ne(i=>i?this.getArchivedFAQs():Q(null))).subscribe()}updateArchivedFAQs(i){this.dialog.open(ui,{data:{allFAQ:this.allArchivedFAQs(),selectedQuestion:i}}).afterClosed().pipe(ne(e=>e?this.getArchivedFAQs():Q(null))).subscribe()}generateSelectedItemsHTML(i){let e=(i??this.selectedFAQ).map(t=>`<li class="text-xs text-primary bg-gray-200 p-2 rounded-lg">${t.ActualQuestion}</li>`).join("");return`<p class="text-sm text-gray-700 font-medium mb-2">${this.lang.locals.delete_message}</p>
            <ul class="flex flex-col p-4 overflow-auto max-h-80 space-y-2">${e}</ul>`}deleteSelectedFAQs(i){this.dialog.open(Ae,{data:{htmlContent:this.generateSelectedItemsHTML(i)}}).afterClosed().pipe(ne(e=>e?this.faqService.deleteFAQBulk(this.selectedBotName.getRawValue(),i??this.selectedFAQ).pipe(T(this.destroy$),ne(()=>this.getArchivedFAQs()),D(()=>{i?i.forEach(t=>{let r=this.selectedFAQ.findIndex(s=>s.RowKey===t.RowKey);this.selectedRawKey.has(t.RowKey)&&this.selectedRawKey.delete(t.RowKey),r>-1&&this.selectedFAQ.splice(r,1)}):(this.selectedFAQ=[],this.selectedRawKey.clear())})):Q(null))).subscribe()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-faq-list"]],standalone:!0,features:[O,A],decls:24,vars:15,consts:[[1,"max-w-6xl","mx-auto","p-4","bg-gray-50","shadow-md","rounded-lg"],[1,"flex","justify-between","items-start"],[1,"w-full","flex","gap-2","items-start","mb-2"],[1,"w-1/6",3,"placeholder","items","formControl"],["appTemplate","icon"],["type","button","class","bg-primary/90 w-1/6 text-white text-sm mb-2 font-medium py-2 px-4 rounded-lg hover:bg-primary focus:ring-4 focus:ring-gray-300 focus:outline-none disabled:opacity-50",3,"disabled","click",4,"appHasPermission"],["appPerfectScroll","",1,"overflow-x-auto","overflow-y-auto","max-h-[60vh]","bg-white","rounded-md","shadow-sm"],[1,"w-full","table-auto","border-collapse"],[1,"bg-primary","text-white","sticky","top-0","z-10"],[1,"px-3","py-2","text-center","text-sm","font-semibold"],[3,"onSelect","checked"],[1,"sticky","top-9","z-10"],["colspan","3",1,"bg-gray-50","px-3","py-2"],["type","text",1,"w-full","p-2","text-gray-700","text-sm","rounded-md","border","border-gray-300","focus:outline-none","focus:ring","focus:ring-primary/60","placeholder-gray-400",3,"formControl","placeholder"],[1,"relative",3,"ngClass"],[1,"hover:bg-gray-100","border-t"],[1,"absolute","inset-0","bg-black","flex","items-center","justify-center","opacity-70"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"fill-gray-700","w-5","h-5","text-gray-500"],["d","M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A2.5,2.5 0 0,0 5,15.5A2.5,2.5 0 0,0 7.5,18A2.5,2.5 0 0,0 10,15.5A2.5,2.5 0 0,0 7.5,13M16.5,13A2.5,2.5 0 0,0 14,15.5A2.5,2.5 0 0,0 16.5,18A2.5,2.5 0 0,0 19,15.5A2.5,2.5 0 0,0 16.5,13Z"],["type","button",1,"bg-primary/90","w-1/6","text-white","text-sm","mb-2","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click","disabled"],["type","button","class","relative inline-flex items-center px-5 py-2 text-sm font-semibold text-white bg-gray-500 rounded-md hover:bg-gray-600 focus:ring-4 focus:ring-primary/60 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",3,"click",4,"appHasPermission"],["type","button",1,"relative","inline-flex","items-center","px-5","py-2","text-sm","font-semibold","text-white","bg-gray-500","rounded-md","hover:bg-gray-600","focus:ring-4","focus:ring-primary/60","focus:outline-none","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5","me-2"],["d","M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"],[1,"absolute","-top-2","-right-2","flex","items-center","justify-center","w-6","h-6","text-xs","font-bold","text-white","bg-primary","rounded-full","ring-2","ring-white"],[1,"px-3","py-2","text-center"],[3,"onSelect","id","checked"],[1,"px-3","py-2","text-gray-800","text-sm","font-medium"],["type","button","class","bg-primary/80 hover:bg-primary text-white px-3 py-1 text-xs rounded-md mx-4",3,"click",4,"appHasPermission"],["type","button","class","bg-primary/80 hover:bg-primary text-white px-3 py-1 text-xs rounded-md",3,"click",4,"appHasPermission"],["type","button",1,"bg-primary/80","hover:bg-primary","text-white","px-3","py-1","text-xs","rounded-md","mx-4",3,"click"],["type","button",1,"bg-primary/80","hover:bg-primary","text-white","px-3","py-1","text-xs","rounded-md",3,"click"],[1,"text-xl","animate-pulse"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-dropdown",3),h(4,Wr,2,0,"ng-template",4),l(),h(5,Zr,2,2,"button",5),l(),h(6,Yr,2,2,"div"),l(),o(7,"div",6)(8,"table",7)(9,"thead")(10,"tr",8)(11,"th",9)(12,"app-checkbox",10),b("onSelect",function(s){return t.toggleSelectAll(s)}),l()(),o(13,"th",9),c(14),l(),o(15,"th",9),c(16),l()(),o(17,"tr",11)(18,"th",12),f(19,"input",13),l()()(),o(20,"tbody",14),F(21,ta,8,7,"tr",15,H),h(23,ia,3,1,"div",16),l()()()()),e&2&&(a(3),m("placeholder",t.lang.locals.choose_bot_name)("items",t.botNames())("formControl",t.selectedBotName),a(2),m("appHasPermission",M(12,qr)),a(),x(t.selectedRawKey.size?6:-1),a(6),m("checked",t.isAllSelected()),a(2),y(" ",t.lang.locals.question_text," "),a(2),y(" ",t.lang.locals.actions," "),a(3),m("formControl",t.searchControl)("placeholder",t.lang.locals.search_question),a(),m("ngClass",L(13,zr,t.filteredArchivedFAQs().length===0&&t.isLoading())),a(),E(t.filteredArchivedFAQs()),a(2),x(t.isLoading()?23:-1))},dependencies:[z,re,J,Me,Xe,mi,st,$,we],data:{animation:[di]}})};var fi=class n{urlService=p(bt);http=p(ht);Xsearch(i){let e=`${this.urlService.URLS.SOCIAL}/x-search`;return this.http.post(e,i)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=mt({token:n,factory:n.\u0275fac,providedIn:"root"})};function ar(){let n=p(Vn);return n.group({query:n.control("",{nonNullable:!0,validators:[Y.required]}),start_time:n.control(null),end_time:n.control(null),max_results:n.control(null,{validators:[Y.min(1)]})},{validators:$n([["start_time","end_time"]],["timeDateRangeInvalid"])})}var or=()=>({suppressScrollX:!0}),na=()=>["SOCIAL_MEDIA_X_SEACRH"],lr=n=>({$implicit:n});function ra(n,i){if(n&1&&Z(0,6),n&2){d();let e=j(17);m("ngTemplateOutlet",e)}}function aa(n,i){if(n&1){let e=C();o(0,"div",14)(1,"div",15),S(),o(2,"svg",16),f(3,"path",17),l()(),U(),o(4,"div",18)(5,"p",19),c(6),l(),o(7,"article",20)(8,"span"),c(9),pe(10,"date"),l(),o(11,"span"),c(12),pe(13,"date"),l()(),o(14,"p"),c(15),l()(),o(16,"button",21),b("click",function(){let r=_(e).$index,s=d();return v(s.deleteItem(r))}),S(),o(17,"svg",22),f(18,"path",23),l()(),U(),o(19,"button",24),b("click",function(){let r=_(e).$implicit,s=d();return v(s.editItem(r))}),S(),o(20,"svg",25),f(21,"path",26),l()()()}if(n&2){let e,t,r,s,g=i.$implicit,I=d();X("animate-editing",((e=I.editedItem())==null?null:e.id)===g.id),a(5),m("title",g.query),a(),u(g.query),a(3),u((t=Ee(10,7,g.start_time,"MM/dd/yyyy"))!==null&&t!==void 0?t:"-"),a(3),u((r=Ee(13,10,g.end_time,"MM/dd/yyyy"))!==null&&r!==void 0?r:"-"),a(3),u((s=g.max_results)!==null&&s!==void 0?s:"-")}}function oa(n,i){if(n&1&&Z(0,6),n&2){d(3);let e=j(17);m("ngTemplateOutlet",e)}}function la(n,i){if(n&1){let e=C();o(0,"button",28),b("click",function(){_(e);let r=d(2);return v(r.searchX())}),c(1),h(2,oa,1,1,"ng-container",6),l()}if(n&2){let e=d(2);a(),y(" ",e.lang.locals.save_queries," "),a(),x(e.isLoading()?2:-1)}}function sa(n,i){n&1&&(o(0,"div",9),h(1,la,3,2,"button",27),l()),n&2&&(a(),m("appHasPermission",M(1,na)))}function ca(n,i){if(n&1){let e=C();o(0,"div",12),Z(1,29),o(2,"div",30)(3,"button",31),b("click",function(){_(e);let r=d();return v(r.addSearchItem())}),c(4),l()()()}if(n&2){let e=d(),t=j(15);a(),m("ngTemplateOutlet",t)("ngTemplateOutletContext",L(4,lr,e.lang.locals.add_query)),a(2),m("disabled",e.socialMediaForm.invalid),a(),y(" ",e.lang.locals.add_query," ")}}function da(n,i){if(n&1){let e=C();o(0,"div",13),Z(1,29),o(2,"div",32)(3,"button",31),b("click",function(){_(e);let r=d();return v(r.addSearchItem())}),c(4),l(),o(5,"button",33),b("click",function(){_(e);let r=d();return v(r.cancelEdit())}),c(6),l()()()}if(n&2){let e,t=d(),r=j(15);a(),m("ngTemplateOutlet",r)("ngTemplateOutletContext",L(5,lr,t.lang.locals.edit_query+"-"+((e=t.editedItem())==null?null:e.query))),a(2),m("disabled",t.socialMediaForm.invalid),a(),y(" ",t.lang.locals.edit_query," "),a(2),y(" ",t.lang.locals.cancel," ")}}function ma(n,i){if(n&1&&(o(0,"span",39),c(1),l()),n&2){let e=d(2);a(),u(e.lang.locals.required)}}function pa(n,i){if(n&1&&(o(0,"span",39),c(1),l()),n&2){let e=d(2);a(),u(e.lang.locals.date_range_error)}}function ua(n,i){if(n&1&&(o(0,"span",39),c(1),l()),n&2){let e=d(2);a(),u(e.lang.locals.date_range_error)}}function ga(n,i){if(n&1&&(o(0,"span",39),c(1),l()),n&2){let e=d(2);a(),u(e.lang.locals.min_value_error)}}function fa(n,i){if(n&1&&(o(0,"header",4)(1,"p",34),c(2),l()(),o(3,"div",35)(4,"div",36)(5,"label",37),c(6),l(),f(7,"input",38),h(8,ma,2,1,"span",39),l(),o(9,"div",36)(10,"label",40),c(11),l(),f(12,"input",41),h(13,pa,2,1,"span",39),l(),o(14,"div",36)(15,"label",42),c(16),l(),f(17,"input",43),h(18,ua,2,1,"span",39),l(),o(19,"div",36)(20,"label",44),c(21),l(),f(22,"input",45),h(23,ga,2,1,"span",39),l()()),n&2){let e,t,r=i.$implicit,s=d();a(),X("animate-header",s.animateHeader()),m("title",r),a(),y(" ",r," "),a(),m("formGroup",s.socialMediaForm)("perfectScrollOptions",M(24,or)),a(3),u(s.lang.locals.query),a(),X("border-red-500",s.socialMediaForm.controls.query.invalid&&s.socialMediaForm.controls.query.touched),Jt("placeholder",s.lang.locals.query),a(),x(s.socialMediaForm.controls.query.invalid&&s.socialMediaForm.controls.query.touched?8:-1),a(3),u(s.lang.locals.start_time),a(),X("border-red-500",(s.socialMediaForm.errors==null?null:s.socialMediaForm.errors.timeDateRangeInvalid)&&s.socialMediaForm.touched),a(),x(s.socialMediaForm.errors!=null&&s.socialMediaForm.errors.timeDateRangeInvalid&&((e=s.socialMediaForm.get("start_time"))!=null&&e.touched||(e=s.socialMediaForm.get("end_time"))!=null&&e.touched)?13:-1),a(3),u(s.lang.locals.end_time),a(),X("border-red-500",(s.socialMediaForm.errors==null?null:s.socialMediaForm.errors.timeDateRangeInvalid)&&s.socialMediaForm.touched),a(),x(s.socialMediaForm.errors!=null&&s.socialMediaForm.errors.timeDateRangeInvalid&&((t=s.socialMediaForm.get("start_time"))!=null&&t.touched||(t=s.socialMediaForm.get("end_time"))!=null&&t.touched)?18:-1),a(3),u(s.lang.locals.max_results),a(),X("border-red-500",s.socialMediaForm.controls.max_results.invalid&&s.socialMediaForm.controls.max_results.touched),m("placeholder",s.lang.locals.max_results),a(),x(s.socialMediaForm.controls.max_results.invalid&&s.socialMediaForm.controls.max_results.touched?23:-1)}}function ha(n,i){n&1&&(o(0,"div",46)(1,"div",47),S(),o(2,"svg",48),f(3,"path",49)(4,"path",50),l(),U(),o(5,"span",51),c(6,"Loading..."),l()()())}var hi=class n extends K(class{}){lang=p(P);socialMediaService=p(fi);adminService=p(fe);socialMediaForm=ar();items=w([]);prevEditedKey=w(null);animateHeader=w(!1);isLoading=w(!1);isLoadingData=w(!1);editedItem=w(null);isEditing=Re(()=>this.editedItem()!==null);ngOnInit(){this.getXCrawlingItems()}getXCrawlingItems(){this.isLoadingData.set(!0),this.adminService.getXCrawlingData().pipe(T(this.destroy$),D(i=>this.items.set(i)),R(()=>this.isLoadingData.set(!1)),se(i=>{throw console.error(i),i})).subscribe()}searchX(){this.isLoading.set(!0),this.items.update(i=>i.map(e=>Qn(e,["id"]))),this.adminService.updateXScheduleSettings(this.items()).pipe(T(this.destroy$),R(()=>this.isLoading.set(!1)),se(i=>{throw this.isLoading.set(!1),console.error(i),i})).subscribe()}addSearchItem(){let i=Ht(Nt({},this.socialMediaForm.value),{id:jn()});if(this.editedItem()){let e=this.items().findIndex(t=>t===this.editedItem());if(e!==-1){let t=[...this.items()];t[e]=i,this.items.set(t)}}else this.items.update(e=>[...e,i]);this.socialMediaForm.reset(),this.editedItem.set(null)}deleteItem(i){let e=this.items(),t=e[i];e.splice(i,1),this.items.set([...e]),this.editedItem()===t&&this.cancelEdit()}editItem(i){let e=i.id,t=this.prevEditedKey();this.isEditing()&&t&&t!==e&&(this.animateHeader.set(!1),setTimeout(()=>this.animateHeader.set(!0),0)),this.socialMediaForm.patchValue(i),this.editedItem.set(i),this.prevEditedKey.set(e)}cancelEdit(){this.editedItem.set(null),this.socialMediaForm.reset()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-social-media-crawling"]],standalone:!0,features:[O,A],decls:18,vars:8,consts:[["formTemplate",""],["loader",""],[1,"flex","bg-white","h-[75vh]","gap-4","p-2","rounded-md"],[1,"relative","w-3/4","flex","flex-col","border","rounded-lg","bg-gray-200"],[1,"bg-primary","rounded-ss-lg","rounded-se-lg"],[1,"text-center","text-white","p-2","flex","gap-2","items-center","justify-center"],[3,"ngTemplateOutlet"],["appPerfectScroll","",1,"grid","grid-cols-1","md:grid-cols-3","p-4","gap-4","mt-12",3,"perfectScrollOptions"],[1,"relative","group","inline-flex","items-center","bg-gray-100","text-gray-700","shadow-md","p-2","gap-4","rounded-lg",3,"animate-editing"],[1,"absolute","slide-from-top","z-20","px-4","py-2","bg-black/30","shadow-lg","mt-10","rounded-ee-lg","rounded-es-lg","h-12","top-0","w-full","flex","items-center","backdrop-blur-md"],[1,"flip-card","flex","flex-col","w-1/4","bg-gray-200","text-gray-700","rounded-lg"],[1,"flip-card-inner"],[1,"flip-card-front","flip-card-face"],[1,"flip-card-back","flip-card-face"],[1,"relative","group","inline-flex","items-center","bg-gray-100","text-gray-700","shadow-md","p-2","gap-4","rounded-lg"],[1,"flex","flex-shrink-0","justify-center","items-center","size-8","object-cover","bg-black","rounded-full"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 300 300.25","fill","currentColor",1,"size-4","fill-white"],["d","M178.57 127.15 290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59h89.34M36.01 19.54H76.66l187.13 262.13h-40.66"],[1,"flex","flex-col","w-full","max-w-full"],[1,"text-lg","font-semibold","truncate","w-4/5",3,"title"],[1,"flex","gap-2","text-sm","text-gray-500"],[1,"outline-none","flex","items-center","justify-center","border-2","border-gray-300","hover:scale-125","transition-all","duration-300","opacity-0","pointer-events-none","group-hover:opacity-100","group-hover:pointer-events-auto","absolute","-top-2","-left-2","rounded-full","size-6","bg-red-500","hover:bg-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-4","fill-white"],["d","M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"],[1,"outline-none","flex","items-center","justify-center","border-2","border-gray-300","hover:scale-125","transition-all","duration-300","opacity-0","pointer-events-none","group-hover:opacity-100","group-hover:pointer-events-auto","absolute","-bottom-2","-left-2","rounded-full","size-6","bg-gray-700","hover:bg-gray-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4","fill-white"],["d","M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"],["type","button","class","inline-flex items-center justify-center gap-2 bg-primary/90 text-white font-medium py-2 px-4 text-sm rounded-lg hover:bg-primary focus:ring-4 focus:ring-gray-300 focus:outline-none w-1/5",3,"click",4,"appHasPermission"],["type","button",1,"inline-flex","items-center","justify-center","gap-2","bg-primary/90","text-white","font-medium","py-2","px-4","text-sm","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","w-1/5",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-2","mt-auto"],["type","button",1,"inline-flex","items-center","justify-center","gap-2","bg-primary/90","w-full","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click","disabled"],[1,"p-2","mt-auto","flex","gap-2"],["type","button",1,"inline-flex","items-center","justify-center","gap-2","text-gray-700","bg-gray-300","w-full","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-4","focus:ring-gray-300","focus:outline-none",3,"click"],[1,"text-center","text-white","text-lg","p-2","truncate",3,"title"],["appPerfectScroll","",1,"p-2","flex","flex-col","justify-between","space-y-2",3,"formGroup","perfectScrollOptions"],[1,"flex","flex-col"],["for","search_text",1,"text-sm","font-medium"],["formControlName","query","type","text",1,"rounded-md","p-2","border-2","border-gray-300","outline-none","focus:border-primary",3,"placeholder"],[1,"text-red-500","text-xs"],["for","start_time",1,"text-sm","font-medium"],["type","date","formControlName","start_time",1,"rounded-md","p-2","border-2","border-gray-300","outline-none","focus:border-primary"],["for","end_time",1,"text-sm","font-medium"],["type","date","formControlName","end_time",1,"rounded-md","p-2","border-2","border-gray-300","outline-none","focus:border-primary"],["for","max_results",1,"text-sm","font-medium"],["id","max_results","type","number","formControlName","max_results",1,"w-full","p-2","border-2","border-gray-300","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"placeholder"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){e&1&&(o(0,"main",2)(1,"section",3)(2,"header",4)(3,"p",5),c(4),h(5,ra,1,1,"ng-container",6),l()(),o(6,"div",7),F(7,aa,22,13,"div",8,H),l(),h(9,sa,2,2,"div",9),l(),o(10,"aside",10)(11,"div",11),h(12,ca,5,6,"div",12)(13,da,7,7,"div",13),l()()(),h(14,fa,24,25,"ng-template",null,0,de)(16,ha,7,0,"ng-template",null,1,de)),e&2&&(a(4),y(" ",t.lang.locals.queries," "),a(),x(t.isLoadingData()?5:-1),a(),m("perfectScrollOptions",M(7,or)),a(),E(t.items()),a(2),x(t.items().length?9:-1),a(),X("flipped",t.isEditing()),a(2),x(t.isEditing()?13:12))},dependencies:[z,re,_t,J,xe,ye,Ce,W,ii,le,we],styles:[".flip-card[_ngcontent-%COMP%]{perspective:1000px;height:100%}.flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transition:transform .4s;transform-style:preserve-3d}.flipped[_ngcontent-%COMP%]   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-face[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;background:#f3f4f6;display:flex;flex-direction:column}.flip-card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.animate-header[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutIn .3s ease}@keyframes _ngcontent-%COMP%_slideOutIn{0%{opacity:0;transform:translate(20%)}50%{opacity:0;transform:translate(-20%)}to{opacity:1;transform:translate(0)}}.animate-editing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatHighlight 1.2s ease infinite}@keyframes _ngcontent-%COMP%_floatHighlight{0%{transform:scale(1) translateY(0);box-shadow:0 0 #0000}50%{transform:scale(1.03) translateY(-4px);box-shadow:0 6px 12px #0000001a}to{transform:scale(1) translateY(0);box-shadow:0 0 #0000}}.slide-from-top[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDownFade .5s ease-in forwards}@keyframes _ngcontent-%COMP%_slideDownFade{0%{opacity:0;transform:translateY(-30px)}30%{opacity:.5;transform:translateY(-20px)}60%{opacity:.8;transform:translateY(-10px)}80%{opacity:.95;transform:translateY(-3px)}to{opacity:1;transform:translateY(0)}}"]})};var St=class n{http=p(ht);urlService=p(bt);getAllUsers(){let i=`${this.urlService.URLS.ADMIN}/users`;return this.http.get(i)}getUserById(i){let e=`${this.urlService.URLS.ADMIN}/user/${i}`;return this.http.get(e)}addUser(i){let e=`${this.urlService.URLS.ADMIN}/user`,t=new lt().append("username",i);return this.http.post(e,null,{params:t,context:new hn().set(qn,!0)})}deleteUser(i){let e=`${this.urlService.URLS.ADMIN}/user`,t=new lt().append("user_id",i);return this.http.delete(e,{params:t})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=mt({token:n,factory:n.\u0275fac,providedIn:"root"})};var sr=/^[a-zA-Z0-9._-]{3,20}$/;var ba=n=>({"bg-red-50 !border-red-400":n});function _a(n,i){if(n&1&&(o(0,"small",7),c(1),l()),n&2){let e=d(2);a(),y(" ",e.lang.locals.usernameRequired," ")}}function va(n,i){if(n&1&&(o(0,"small",7),c(1),l()),n&2){let e=d(2);a(),y(" ",e.lang.locals.usernameMinLength," ")}}function xa(n,i){if(n&1&&(o(0,"small",7),c(1),l()),n&2){let e=d(2);a(),y(" ",e.lang.locals.usernameMaxLength," ")}}function ya(n,i){if(n&1&&(o(0,"small",7),c(1),l()),n&2){let e=d(2);a(),y(" ",e.lang.locals.usernamePattern," ")}}function Ca(n,i){if(n&1){let e=C();o(0,"div",1)(1,"div",2),c(2),l(),o(3,"div",3),f(4,"input",4),o(5,"small",5),c(6),o(7,"ul",6)(8,"li"),c(9),l(),o(10,"li"),c(11),l(),o(12,"li"),c(13),l()()(),h(14,_a,2,1,"small",7)(15,va,2,1,"small",7)(16,xa,2,1,"small",7)(17,ya,2,1,"small",7),l()(),o(18,"div",8)(19,"button",9),b("click",function(){_(e);let r=d();return v(r.cancel())}),c(20),l(),o(21,"button",10),b("click",function(){_(e);let r=d();return v(r.addUser())}),c(22),l()()}if(n&2){let e=d();a(2),u(e.lang.locals.add_user),a(2),m("ngClass",L(11,ba,e.usernameControl.invalid&&e.usernameControl.touched&&e.usernameControl.dirty))("placeholder",e.lang.locals.username)("formControl",e.usernameControl),a(2),y(" ",e.lang.locals.usernameTip," "),a(3),u(e.lang.locals.usernameLetters),a(2),u(e.lang.locals.usernameNumbers),a(2),u(e.lang.locals.usernameSpecialChars),a(),x(e.usernameControl.errors!=null&&e.usernameControl.errors.required&&e.usernameControl.touched?14:e.usernameControl.errors!=null&&e.usernameControl.errors.minlength&&e.usernameControl.touched?15:e.usernameControl.errors!=null&&e.usernameControl.errors.maxlength&&e.usernameControl.touched?16:e.usernameControl.errors!=null&&e.usernameControl.errors.pattern&&e.usernameControl.touched?17:-1),a(6),y(" ",e.lang.locals.cancel," "),a(2),y(" ",e.lang.locals.add_user," ")}}function wa(n,i){if(n&1&&(o(0,"div",0)(1,"div",11),S(),o(2,"svg",12),f(3,"g",13)(4,"g",14),o(5,"g",15),f(6,"rect",16)(7,"path",17)(8,"path",18),l()()(),U(),o(9,"p",19),c(10),l()()),n&2){let e=d();a(10),u(e.lang.locals.operationSuccess)}}var bi=class n extends K(class{}){ref=p(ue);usernameControl=new ke("",{nonNullable:!0,validators:[Y.required,Y.pattern(sr),Y.minLength(3),Y.maxLength(20)]});lang=p(P);userService=p(St);done=w(!1);addUser(){if(this.usernameControl.invalid){si(this.usernameControl);return}let i=this.usernameControl.value;this.userService.addUser(i).pipe(T(this.destroy$),R(()=>{this.done.set(!0),setTimeout(()=>{this.ref.close()},1500)})).subscribe()}cancel(){this.ref.close()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-add-user-popup"]],standalone:!0,features:[O,A],decls:2,vars:1,consts:[[1,"flex","flex-col","w-[min(500px,80vw)]","h-48","justify-center","items-center","transition-all"],[1,"flex","flex-col","w-[min(500px,80vw)]"],[1,"p-4","bg-primary","text-white"],[1,"p-4","min-h-0","flex","flex-auto","flex-col"],["type","text",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"ngClass","placeholder","formControl"],[1,"block","mt-1","text-sm","text-gray-400"],[1,"list-disc","list-inside"],[1,"block","mt-1","text-sm","text-red-500"],[1,"flex","justify-between","mt-6","space-x-2","gap-4","p-4"],["type","button",1,"bg-gray-300","w-1/2","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none",3,"click"],["type","button",1,"bg-primary/90","w-1/2","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click"],[1,"animated-svg"],["width","100","height","200","viewBox","0 0 48 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["width","48","height","48","fill","white","fill-opacity","0.01"],["d","M24 4L29.2533 7.83204L35.7557 7.81966L37.7533 14.0077L43.0211 17.8197L41 24L43.0211 30.1803L37.7533 33.9923L35.7557 40.1803L29.2533 40.168L24 44L18.7467 40.168L12.2443 40.1803L10.2467 33.9923L4.97887 30.1803L7 24L4.97887 17.8197L10.2467 14.0077L12.2443 7.81966L18.7467 7.83204L24 4Z","fill","#8a1538","stroke","#b0b0b0","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"path"],["d","M17 24L22 29L32 19","stroke","white","stroke-width","4","stroke-linecap","round","stroke-linejoin","round",1,"checkmark"],[1,"p-2","text-gray-700","font-semibold"]],template:function(e,t){e&1&&h(0,Ca,23,13)(1,wa,11,1,"div",0),e&2&&x(t.done()?1:0)},dependencies:[z,re,J,Me,$],styles:[".animated-svg[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100px;height:100px}.path[_ngcontent-%COMP%]{stroke-dasharray:300;stroke-dashoffset:300;animation:_ngcontent-%COMP%_draw 1s ease-in-out forwards}.checkmark[_ngcontent-%COMP%]{stroke-dasharray:50;stroke-dashoffset:50;animation:_ngcontent-%COMP%_draw-check .5s .5s ease-in-out forwards}@keyframes _ngcontent-%COMP%_draw{0%{stroke-dashoffset:300}to{stroke-dashoffset:0}}@keyframes _ngcontent-%COMP%_draw-check{0%{stroke-dashoffset:50}to{stroke-dashoffset:0}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}"]})};var _i=class n{http=p(ht);urlService=p(bt);getAllPermission(){let i=`${this.urlService.URLS.ADMIN}/permissions`;return this.http.get(i)}getPermissionGroups(){let i=`${this.urlService.URLS.ADMIN}/permission-groups`;return this.http.get(i)}assignPermission(i,e){let t=`${this.urlService.URLS.ADMIN}/permission/assign`,r=new lt().append("user_id",i);return this.http.post(t,e,{params:r})}updatePermission(i,e){let t=`${this.urlService.URLS.ADMIN}/permission/update`,r=new lt().append("user_id",i);return this.http.put(t,e,{params:r})}withdrawPermissions(i,e){let t=`${this.urlService.URLS.ADMIN}/permission/remove`,r=new lt().append("user_id",i);return this.http.delete(t,{params:r,body:e})}getUserPermission(i){let e=`${this.urlService.URLS.ADMIN}/user/${i}/permissions`;return this.http.get(e)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=mt({token:n,factory:n.\u0275fac,providedIn:"root"})};function cr(){let n=p(q);return n.group({permissions:n.array([])})}function dr(n){let i=p(q);return i.group({id:i.control(n._id),checked:i.control(!1),children:i.array(n?.children.length?n.children.map(e=>Sa(e)):[])})}function Sa(n){let i=p(q);return i.group({id:i.control(n._id),checked:i.control(!1)})}var Ia=()=>({suppressScrollX:!0}),Ta=n=>({"mb-4":n});function ka(n,i){if(n&1&&Z(0,4),n&2){d();let e=j(14);m("ngTemplateOutlet",e)}}function Aa(n,i){if(n&1){let e=C();Be(0,10),o(1,"app-checkbox",15),b("onSelect",function(){_(e);let r=d(2).$index,s=d(2);return v(s.toggleSelectionChild(r))}),l(),at()}if(n&2){let e=i.$implicit,t=i.$index,r=d(2).$implicit,s=d(2);m("formGroupName",t),a(),m("classes","h-full bg-gray-100 p-3 rounded-lg shadow-md hover:bg-gray-200 transition cursor-pointer")("id",r._id+e._id)("label",s.lang.currentLanguage==="ar"?e.ar_name:e.en_name)}}function Fa(n,i){if(n&1&&(o(0,"div",13)(1,"div",14),F(2,Aa,2,4,"ng-container",10,H),l()()),n&2){let e=d().$implicit;a(2),E(e.children)}}function Ea(n,i){if(n&1){let e=C();Be(0,10),o(1,"app-checkbox",11),b("onSelect",function(r){let s=_(e).$index,g=d(2);return v(g.toggleSelection(r,s))}),l(),Be(2,12),h(3,Fa,4,0,"div",13),at()()}if(n&2){let e=i.$implicit,t=i.$index,r=d(2);m("formGroupName",t),a(),m("ngClass",L(6,Ta,!e.children.length))("classes","h-full bg-gray-100 p-3 rounded-ss-md rounded-se-md shadow-sm hover:bg-gray-200 transition cursor-pointer text-lg")("id",e._id)("label",r.lang.currentLanguage==="ar"?e.ar_name:e.en_name),a(2),x(e.children.length?3:-1)}}function Ma(n,i){if(n&1&&(o(0,"div",5)(1,"div",9),F(2,Ea,4,8,"ng-container",10,H),l()()),n&2){let e=d();m("formGroup",e.permissionsForm),a(2),E(e.permissions())}}function Pa(n,i){if(n&1&&Z(0,4),n&2){d();let e=j(14);m("ngTemplateOutlet",e)}}function Da(n,i){n&1&&(o(0,"div",16)(1,"div",17),S(),o(2,"svg",18),f(3,"path",19)(4,"path",20),l(),U(),o(5,"span",21),c(6,"Loading..."),l()()())}var vi=class n{permissionsService=p(_i);fb=p(q);lang=p(P);ref=p(ue);data=p(ge);permissions=w([]);permissionsForm=cr();isLoading=w(!1);isUpdateLoader=w(!1);injector=p(Ne);permissionGroups$=this.permissionsService.getPermissionGroups();permissions$=this.permissionsService.getAllPermission();get permissionsList(){return this.permissionsForm.get("permissions")}getChildrenList(i){return this.permissionsList.at(i).get("children")}preparePermissionsList(i){this.permissionsList.clear(),i.forEach(e=>Se(this.injector,()=>this.permissionsList.push(dr(e))))}ngOnInit(){this.getAllPermissions()}getAllPermissions(){this.isLoading.set(!0),Ut([this.permissionGroups$,this.permissions$]).pipe(ne(([i,e])=>this.data?this.getUserPermission(e,i):Q(e).pipe(D(t=>this.preparePermissionsForm(t,i)))),R(()=>this.isLoading.set(!1))).subscribe()}preparePermissionsForm(i,e,t=[]){this.categorizePermissions(i,e),this.permissions.set(e),this.preparePermissionsList(e),i.forEach(r=>{let s=this.permissionsList.controls.findIndex(g=>g.value.id===r._id);this.updateChildPermissions(s,t)})}updateChildPermissions(i,e){let t=this.getChildrenList(i),r=!!t.length;t.controls.forEach(s=>{let g=s.value.id,I=e.some(B=>B._id===g);s.get("checked")?.patchValue(I),I||(r=!1)}),this.permissionsList.at(i).get("checked")?.patchValue(r)}categorizePermissions(i,e){e.forEach(t=>{t.children=i.filter(r=>r.group_id===t._id)})}getUserPermission(i,e){return this.permissionsService.getUserPermission(this.data.userId).pipe(D(t=>{this.preparePermissionsForm(i,e,t)}))}getCheckedPermissions(){return this.permissionsList.getRawValue().flatMap(i=>[...i.children.map(e=>e.checked?e.id:null)]).filter(Boolean)}editPermissions(){this.isUpdateLoader.set(!0);let{userId:i}=this.data,e=this.getCheckedPermissions();this.permissionsService.updatePermission(i,e).pipe(R(()=>{this.ref.close(),this.isUpdateLoader.set(!1)})).subscribe()}toggleSelection(i,e){this.getChildrenList(e).controls.forEach(t=>{t.get("checked")?.patchValue(i)})}toggleSelectionChild(i){setTimeout(()=>{let e=this.getChildrenList(i).controls.every(t=>t.get("checked")?.value);this.permissionsList.at(i).get("checked")?.patchValue(e)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-permissions-popup"]],standalone:!0,features:[A],decls:15,vars:8,consts:[["loader",""],[1,"flex","flex-col","w-[min(70rem,80vw)]"],[1,"p-4","bg-primary","text-white","text-lg","font-semibold"],["appPerfectScroll","",3,"perfectScrollOptions"],[3,"ngTemplateOutlet"],[1,"p-4","flex","flex-auto","flex-col",3,"formGroup"],[1,"flex","w-full","justify-between","mt-6","space-x-2","gap-4","p-4"],["mat-dialog-close","","type","button",1,"bg-gray-300","w-1/2","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none"],["type","button",1,"bg-primary/90","w-1/2","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50","inline-flex","gap-2","justify-center","items-center",3,"click","disabled"],["formArrayName","permissions",1,"flex","flex-col"],[3,"formGroupName"],["formControlName","checked",3,"onSelect","ngClass","classes","id","label"],["formArrayName","children"],[1,"bg-gray-50","shadow-md","rounded-es-md","rounded-ee-md","p-4","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["formControlName","checked",3,"onSelect","classes","id","label"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){if(e&1){let r=C();o(0,"div",1)(1,"div",2),c(2),l(),o(3,"mat-dialog-content",3),h(4,ka,1,1,"ng-container",4)(5,Ma,4,1,"div",5),l(),o(6,"mat-dialog-actions")(7,"div",6)(8,"button",7),c(9),l(),o(10,"button",8),b("click",function(){return _(r),v(t.editPermissions())}),c(11),h(12,Pa,1,1,"ng-container",4),l()()()(),h(13,Da,7,0,"ng-template",null,0,de)}e&2&&(a(2),u(t.lang.locals.permission_managment),a(),m("perfectScrollOptions",M(7,Ia)),a(),x(t.isLoading()?4:5),a(5),y(" ",t.lang.locals.cancel," "),a(),m("disabled",t.isUpdateLoader()),a(),y(" ",t.lang.locals.edit_permissions," "),a(),x(t.isUpdateLoader()?12:-1))},dependencies:[z,J,xe,ye,Ce,vt,oi,W,Ke,xt,ze,qe,$,Xe,le]})};var Va=(n,i)=>i._id,La=()=>["ADMIN_ADD_USER"],Ra=(n,i)=>({"text-primary font-bold":n,"text-gray-500":i}),Oa=()=>["ADMIN_UPDATE_PERMISSION"],Na=()=>["ADMIN_DELETE_USER"];function Ha(n,i){if(n&1){let e=C();o(0,"button",10),b("click",function(){_(e);let r=d();return v(r.addUser())}),c(1),l()}if(n&2){let e=d();a(),y(" ",e.lang.locals.add_user,"")}}function Ba(n,i){if(n&1){let e=C();o(0,"button",16),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.editPermissions(r._id))}),c(1),l()}if(n&2){let e=d(2);a(),y(" ",e.lang.locals.edit_permissions," ")}}function Ua(n,i){if(n&1){let e=C();o(0,"button",17),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.deleteUser(r))}),c(1),l()}if(n&2){let e=d(2);a(),y(" ",e.lang.locals.delete," ")}}function Ga(n,i){if(n&1&&(o(0,"tr",9)(1,"td",11),c(2),l(),o(3,"td",12)(4,"span",13),c(5),l()(),o(6,"td",12),h(7,Ba,2,1,"button",14)(8,Ua,2,1,"button",15),l()()),n&2){let e=i.$implicit;a(2),y(" ",e.username," "),a(2),m("ngClass",Ge(5,Ra,e.never_expire,!e.never_expire)),a(),y(" ",e.never_expire?"Yes":"No"," "),a(2),m("appHasPermission",M(8,Oa)),a(),m("appHasPermission",M(9,Na))}}function ja(n,i){if(n&1&&(o(0,"tr")(1,"td",18),c(2),l()()),n&2){let e=d();a(2),u(e.lang.locals.no_users)}}var xi=class n extends K(class{}){userService=p(St);dialog=p(Pe);lang=p(P);users=w([]);filteredUsers=w([]);loading=w(!1);searchControl=new ke("",{nonNullable:!0});ngOnInit(){this.getAllUsers(),this.listenToSearch()}getAllUsers(){this.loading.set(!0),this.userService.getAllUsers().pipe(T(this.destroy$),D(i=>{this.users.set(i),this.filteredUsers.set(i)}),se(()=>Q([])),R(()=>this.loading.set(!1))).subscribe()}listenToSearch(){this.searchControl.valueChanges.pipe(T(this.destroy$),Oe(500),Fe()).subscribe(i=>{this.filteredUsers.update(()=>this.users().filter(e=>e.username.toLowerCase().includes(i.toLowerCase())))})}addUser(){this.dialog.open(bi).afterClosed().pipe(D(()=>this.getAllUsers())).subscribe()}deleteUser(i){this.dialog.open(Ae,{data:{htmlContent:`<p class="flex flex-col gap-4 text-center text-xl text-gray-700">${this.lang.locals.delete_message} <span class="italic text-sm text-primary">${i.username}<span> ? </p>`}}).afterClosed().pipe(ne(e=>e?this.userService.deleteUser(i._id).pipe(T(this.destroy$),D(()=>this.getAllUsers())):Q(null))).subscribe()}editPermissions(i){this.dialog.open(vi,{data:{userId:i}})}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-users"]],standalone:!0,features:[O,A],decls:20,vars:8,consts:[[1,"max-w-6xl","mx-auto","p-4","bg-gray-50","shadow-md","rounded-lg"],["type","button","class","bg-primary/90 w-1/6 text-white text-sm mb-2 font-medium py-2 px-4 rounded-lg hover:bg-primary focus:ring-4 focus:ring-gray-300 focus:outline-none disabled:opacity-50",3,"click",4,"appHasPermission"],[1,"overflow-x-auto","overflow-y-auto","max-h-[70vh]","bg-white","rounded-md","shadow-sm"],[1,"w-full","table-auto","border-collapse"],[1,"bg-primary","text-white","sticky","top-0"],[1,"px-3","py-2","text-center","text-sm","font-semibold"],[1,"sticky","top-9"],["colspan","3",1,"bg-gray-50","px-3","py-2"],["type","text",1,"w-full","p-2","text-gray-700","text-sm","rounded-md","border","border-gray-300","focus:outline-none","focus:ring","focus:ring-primary/60","placeholder-gray-400",3,"formControl","placeholder"],[1,"hover:bg-gray-100","border-t"],["type","button",1,"bg-primary/90","w-1/6","text-white","text-sm","mb-2","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click"],[1,"px-3","py-2","text-center","text-gray-800"],[1,"px-3","py-2","text-center"],[3,"ngClass"],["type","button","class","bg-primary/80 hover:bg-primary text-white px-3 py-1 text-xs rounded-md mx-4",3,"click",4,"appHasPermission"],["type","button","class","bg-primary/80 hover:bg-primary text-white px-3 py-1 text-xs rounded-md",3,"click",4,"appHasPermission"],["type","button",1,"bg-primary/80","hover:bg-primary","text-white","px-3","py-1","text-xs","rounded-md","mx-4",3,"click"],["type","button",1,"bg-primary/80","hover:bg-primary","text-white","px-3","py-1","text-xs","rounded-md",3,"click"],["colspan","3",1,"px-3","py-2","text-center","text-gray-500"]],template:function(e,t){e&1&&(o(0,"div",0),h(1,Ha,2,1,"button",1),c(2,"> "),o(3,"div",2)(4,"table",3)(5,"thead")(6,"tr",4)(7,"th",5),c(8),l(),o(9,"th",5),c(10),l(),o(11,"th",5),c(12),l()(),o(13,"tr",6)(14,"th",7),f(15,"input",8),l()()(),o(16,"tbody"),F(17,Ga,9,10,"tr",9,Va),h(19,ja,3,1,"tr"),l()()()()),e&2&&(a(),m("appHasPermission",M(7,La)),a(7),u(t.lang.locals.username),a(2),u(t.lang.locals.never_expire),a(2),u(t.lang.locals.actions),a(3),m("formControl",t.searchControl)("placeholder",t.lang.locals.search_username),a(2),E(t.filteredUsers()),a(2),x(t.filteredUsers().length===0?19:-1))},dependencies:[z,re,J,Me,$,we]})};var Gi=["*"];function qa(n,i){n&1&&Yt(0)}var za=["tabListContainer"],Ka=["tabList"],Wa=["tabListInner"],Za=["nextPaginator"],Xa=["previousPaginator"],Ya=n=>({animationDuration:n}),Ja=(n,i)=>({value:n,params:i});function eo(n,i){}var to=["tabBodyWrapper"],io=["tabHeader"];function no(n,i){}function ro(n,i){if(n&1&&h(0,no,0,0,"ng-template",12),n&2){let e=d().$implicit;m("cdkPortalOutlet",e.templateLabel)}}function ao(n,i){if(n&1&&c(0),n&2){let e=d().$implicit;u(e.textLabel)}}function oo(n,i){if(n&1){let e=C();o(0,"div",7,2),b("click",function(){let r=_(e),s=r.$implicit,g=r.$index,I=d(),B=j(1);return v(I._handleClick(s,B,g))})("cdkFocusChange",function(r){let s=_(e).$index,g=d();return v(g._tabFocusChanged(r,s))}),f(2,"span",8)(3,"div",9),o(4,"span",10)(5,"span",11),h(6,ro,1,1,null,12)(7,ao,1,1),l()()()}if(n&2){let e=i.$implicit,t=i.$index,r=j(1),s=d();Zt(e.labelClass),X("mdc-tab--active",s.selectedIndex===t),m("id",s._getTabLabelId(t))("disabled",e.disabled)("fitInkBarToContent",s.fitInkBarToContent),it("tabIndex",s._getTabIndex(t))("aria-posinset",t+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(t))("aria-selected",s.selectedIndex===t)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),a(3),m("matRippleTrigger",r)("matRippleDisabled",e.disabled||s.disableRipple),a(3),x(e.templateLabel?6:7)}}function lo(n,i){n&1&&Yt(0)}function so(n,i){if(n&1){let e=C();o(0,"mat-tab-body",13),b("_onCentered",function(){_(e);let r=d();return v(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){_(e);let s=d();return v(s._setTabBodyWrapperHeight(r))}),l()}if(n&2){let e=i.$implicit,t=i.$index,r=d();Zt(e.bodyClass),X("mat-mdc-tab-body-active",r.selectedIndex===t),m("id",r._getTabContentId(t))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),it("tabindex",r.contentTabIndex!=null&&r.selectedIndex===t?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(t))("aria-hidden",r.selectedIndex!==t)}}var co=new pt("MatTabContent"),mo=(()=>{class n{constructor(e){this.template=e}static{this.\u0275fac=function(t){return new(t||n)(V(He))}}static{this.\u0275dir=ce({type:n,selectors:[["","matTabContent",""]],standalone:!0,features:[be([{provide:co,useExisting:n}])]})}}return n})(),po=new pt("MatTabLabel"),ur=new pt("MAT_TAB"),uo=(()=>{class n extends On{constructor(e,t,r){super(e,t),this._closestTab=r}static{this.\u0275fac=function(t){return new(t||n)(V(He),V(Kt),V(ur,8))}}static{this.\u0275dir=ce({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[be([{provide:po,useExisting:n}]),O]})}}return n})(),gr=new pt("MAT_TAB_GROUP"),ji=(()=>{class n{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,t){this._viewContainerRef=e,this._closestTabGroup=t,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new At,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Rn(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static{this.\u0275fac=function(t){return new(t||n)(V(Kt),V(gr,8))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-tab"]],contentQueries:function(t,r,s){if(t&1&&(Mt(s,uo,5),Mt(s,mo,7,He)),t&2){let g;ae(g=oe())&&(r.templateLabel=g.first),ae(g=oe())&&(r._explicitContent=g.first)}},viewQuery:function(t,r){if(t&1&&_e(He,7),t&2){let s;ae(s=oe())&&(r._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",ve],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[be([{provide:ur,useExisting:n}]),tt,nn,A],ngContentSelectors:Gi,decls:1,vars:0,template:function(t,r){t&1&&(Xt(),h(0,qa,1,0,"ng-template"))},encapsulation:2})}}return n})(),Hi="mdc-tab-indicator--active",mr="mdc-tab-indicator--no-transition",Bi=class{constructor(i){this._items=i}hide(){this._items.forEach(i=>i.deactivateInkBar())}alignToElement(i){let e=this._items.find(r=>r.elementRef.nativeElement===i),t=this._currentItem;if(e!==t&&(t?.deactivateInkBar(),e)){let r=t?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(r),this._currentItem=e}}},go=(()=>{class n{constructor(){this._elementRef=p(me),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let t=this._elementRef.nativeElement;if(!e||!t.getBoundingClientRect||!this._inkBarContentElement){t.classList.add(Hi);return}let r=t.getBoundingClientRect(),s=e.width/r.width,g=e.left-r.left;t.classList.add(mr),this._inkBarContentElement.style.setProperty("transform",`translateX(${g}px) scaleX(${s})`),t.getBoundingClientRect(),t.classList.remove(mr),t.classList.add(Hi),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(Hi)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,t=this._inkBarElement=e.createElement("span"),r=this._inkBarContentElement=e.createElement("span");t.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",t.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=ce({type:n,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",ve]},features:[tt]})}}return n})();var fr=(()=>{class n extends go{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static{this.\u0275fac=function(t){return new(t||n)(V(me))}}static{this.\u0275dir=ce({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,r){t&2&&(it("aria-disabled",!!r.disabled),X("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[2,"disabled","disabled",ve]},standalone:!0,features:[tt,O]})}}return n})(),pr=Cn({passive:!0}),fo=650,ho=100,bo=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let t=isNaN(e)?0:e;this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}constructor(e,t,r,s,g,I,B){this._elementRef=e,this._changeDetectorRef=t,this._viewportRuler=r,this._dir=s,this._ngZone=g,this._platform=I,this._animationMode=B,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new At,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new At,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new he,this.indexFocused=new he,this._sharedResizeObserver=p(kn),this._injector=p(Ne),g.runOutsideAngular(()=>{Gt(e.nativeElement,"mouseleave").pipe(T(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Gt(this._previousPaginator.nativeElement,"touchstart",pr).pipe(T(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Gt(this._nextPaginator.nativeElement,"touchstart",pr).pipe(T(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:Q("ltr"),t=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(Oe(32),T(this._destroyed)),r=this._viewportRuler.change(150).pipe(T(this._destroyed)),s=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new In(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),cn(s,{injector:this._injector}),jt(e,r,t,this._items.changes,this._itemsResized()).pipe(T(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),s()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(g=>{this.indexFocused.emit(g),this._setTabFocus(g)})}_itemsResized(){return typeof ResizeObserver!="function"?Wi:this._items.changes.pipe(dt(this._items),ne(e=>new Ki(t=>this._ngZone.runOutsideAngular(()=>{let r=new ResizeObserver(s=>t.next(s));return e.forEach(s=>r.observe(s.elementRef.nativeElement)),()=>{r.disconnect()}}))),Yi(1),$t(e=>e.some(t=>t.contentRect.width>0&&t.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!wn(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let t=this._items.get(this.focusIndex);t&&!t.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let t=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?t.scrollLeft=0:t.scrollLeft=t.scrollWidth-t.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,t=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(t)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let t=this._tabListContainer.nativeElement.offsetWidth,r=(e=="before"?-1:1)*t/3;return this._scrollTo(this._scrollDistance+r)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let t=this._items?this._items.toArray()[e]:null;if(!t)return;let r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:g}=t.elementRef.nativeElement,I,B;this._getLayoutDirection()=="ltr"?(I=s,B=I+g):(B=this._tabListInner.nativeElement.offsetWidth-s,I=B-g);let Ye=this.scrollDistance,qi=this.scrollDistance+r;I<Ye?this.scrollDistance-=Ye-I:B>qi&&(this.scrollDistance+=Math.min(B-qi,I-Ye))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,t=this._elementRef.nativeElement.offsetWidth,r=e-t>=5;r||(this.scrollDistance=0),r!==this._showPaginationControls&&(this._showPaginationControls=r,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,t=this._tabListContainer.nativeElement.offsetWidth;return e-t||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,t=e?e.elementRef.nativeElement:null;t?this._inkBar.alignToElement(t):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,t){t&&t.button!=null&&t.button!==0||(this._stopInterval(),Xi(fo,ho).pipe(T(jt(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:r,distance:s}=this._scrollHeader(e);(s===0||s>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let t=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(t,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:t,distance:this._scrollDistance}}static{this.\u0275fac=function(t){return new(t||n)(V(me),V(Dt),V(Oi),V(ni,8),V(Ft),V(Vt),V(qt,8))}}static{this.\u0275dir=ce({type:n,inputs:{disablePagination:[2,"disablePagination","disablePagination",ve],selectedIndex:[2,"selectedIndex","selectedIndex",ti]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[tt]})}}return n})(),_o=(()=>{class n extends bo{constructor(e,t,r,s,g,I,B){super(e,t,r,s,g,I,B),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new Bi(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static{this.\u0275fac=function(t){return new(t||n)(V(me),V(Dt),V(Oi),V(ni,8),V(Ft),V(Vt),V(qt,8))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,r,s){if(t&1&&Mt(s,fr,4),t&2){let g;ae(g=oe())&&(r._items=g)}},viewQuery:function(t,r){if(t&1&&(_e(za,7),_e(Ka,7),_e(Wa,7),_e(Za,5),_e(Xa,5)),t&2){let s;ae(s=oe())&&(r._tabListContainer=s.first),ae(s=oe())&&(r._tabList=s.first),ae(s=oe())&&(r._tabListInner=s.first),ae(s=oe())&&(r._nextPaginator=s.first),ae(s=oe())&&(r._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(t,r){t&2&&X("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl",r._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",ve]},standalone:!0,features:[tt,O,A],ngContentSelectors:Gi,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(t,r){if(t&1){let s=C();Xt(),o(0,"div",5,0),b("click",function(){return _(s),v(r._handlePaginatorClick("before"))})("mousedown",function(I){return _(s),v(r._handlePaginatorPress("before",I))})("touchend",function(){return _(s),v(r._stopInterval())}),f(2,"div",6),l(),o(3,"div",7,1),b("keydown",function(I){return _(s),v(r._handleKeydown(I))}),o(5,"div",8,2),b("cdkObserveContent",function(){return _(s),v(r._onContentChanges())}),o(7,"div",9,3),Yt(9),l()()(),o(10,"div",10,4),b("mousedown",function(I){return _(s),v(r._handlePaginatorPress("after",I))})("click",function(){return _(s),v(r._handlePaginatorClick("after"))})("touchend",function(){return _(s),v(r._stopInterval())}),f(12,"div",6),l()}t&2&&(X("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),m("matRippleDisabled",r._disableScrollBefore||r.disableRipple),a(3),X("_mat-animation-noopable",r._animationMode==="NoopAnimations"),a(2),it("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null),a(5),X("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),m("matRippleDisabled",r._disableScrollAfter||r.disableRipple))},dependencies:[Ri,Sn],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}}return n})(),vo=new pt("MAT_TABS_CONFIG"),xo={translateTab:$e("translateTab",[ri("center, void, left-origin-center, right-origin-center",ie({transform:"none",visibility:"visible"})),ri("left",ie({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),ri("right",ie({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Te("* => left, * => right, left => center, right => center",Ie("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Te("void => left-origin-center",[ie({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Ie("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Te("void => right-origin-center",[ie({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Ie("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},yo=(()=>{class n extends li{constructor(e,t,r,s){super(e,t,s),this._host=r,this._centeringSub=ct.EMPTY,this._leavingSub=ct.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(dt(this._host._isCenterPosition(this._host._position))).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static{this.\u0275fac=function(t){return new(t||n)(V(on),V(Kt),V(Qt(()=>hr)),V(je))}}static{this.\u0275dir=ce({type:n,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[O]})}}return n})(),hr=(()=>{class n{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,t,r){this._elementRef=e,this._dir=t,this._dirChangeSubscription=ct.EMPTY,this._translateTabComplete=new At,this._onCentering=new he,this._beforeCentering=new he,this._afterLeavingCenter=new he,this._onCentered=new he(!0),this.animationDuration="500ms",this.preserveContent=!1,t&&(this._dirChangeSubscription=t.change.subscribe(s=>{this._computePositionAnimationState(s),r.markForCheck()})),this._translateTabComplete.pipe(Fe((s,g)=>s.fromState===g.fromState&&s.toState===g.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){let t=this._isCenterPosition(e.toState);this._beforeCentering.emit(t),t&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(e){return e=="center"||e=="left-origin-center"||e=="right-origin-center"}_computePositionAnimationState(e=this._getLayoutDirection()){this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(e){let t=this._getLayoutDirection();return t=="ltr"&&e<=0||t=="rtl"&&e>0?"left-origin-center":"right-origin-center"}static{this.\u0275fac=function(t){return new(t||n)(V(me),V(ni,8),V(Dt))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,r){if(t&1&&_e(li,5),t&2){let s;ae(s=oe())&&(r._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[A],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(t,r){if(t&1){let s=C();o(0,"div",1,0),b("@translateTab.start",function(I){return _(s),v(r._onTranslateTabStarted(I))})("@translateTab.done",function(I){return _(s),v(r._translateTabComplete.next(I))}),h(2,eo,0,0,"ng-template",2),l()}t&2&&m("@translateTab",Ge(3,Ja,r._position,L(1,Ya,r.animationDuration)))},dependencies:[yo,Ln],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[xo.translateTab]}})}}return n})(),Co=0,wo=!0,br=(()=>{class n{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){let t=e+"";this._animationDuration=/^\d+$/.test(t)?e+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){if(!wo)throw new Error("mat-tab-group background color must be set through the Sass theming API");let t=this._elementRef.nativeElement.classList;t.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&t.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,t,r,s){this._elementRef=e,this._changeDetectorRef=t,this._animationMode=s,this._tabs=new rn,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=ct.EMPTY,this._tabLabelSubscription=ct.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new he,this.focusChange=new he,this.animationDone=new he,this.selectedTabChange=new he(!0),this._isServer=!p(Vt).isBrowser,this._groupId=Co++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=r&&r.disablePagination!=null?r.disablePagination:!1,this.dynamicHeight=r&&r.dynamicHeight!=null?r.dynamicHeight:!1,r?.contentTabIndex!=null&&(this.contentTabIndex=r.contentTabIndex),this.preserveContent=!!r?.preserveContent,this.fitInkBarToContent=r&&r.fitInkBarToContent!=null?r.fitInkBarToContent:!1,this.stretchTabs=r&&r.stretchTabs!=null?r.stretchTabs:!0}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let t=this._selectedIndex==null;if(!t){this.selectedTabChange.emit(this._createChangeEvent(e));let r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,s)=>r.isActive=s===e),t||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((t,r)=>{t.position=r-e,this._selectedIndex!=null&&t.position==0&&!t.origin&&(t.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let t=this._tabs.toArray(),r;for(let s=0;s<t.length;s++)if(t[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,r=t[s];break}!r&&t[e]&&Promise.resolve().then(()=>{t[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(dt(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(t=>t._closestTabGroup===this||!t._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let t=this._tabHeader;t&&(t.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let t=new Ui;return t.index=e,this._tabs&&this._tabs.length&&(t.tab=this._tabs.toArray()[e]),t}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=jt(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let t=this._tabBodyWrapper.nativeElement;t.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(t.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,t,r){t.focusIndex=r,e.disabled||(this.selectedIndex=r)}_getTabIndex(e){let t=this._lastFocusedTabIndex??this.selectedIndex;return e===t?0:-1}_tabFocusChanged(e,t){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=t)}static{this.\u0275fac=function(t){return new(t||n)(V(me),V(Dt),V(vo,8),V(qt,8))}}static{this.\u0275cmp=k({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,r,s){if(t&1&&Mt(s,ji,5),t&2){let g;ae(g=oe())&&(r._allTabs=g)}},viewQuery:function(t,r){if(t&1&&(_e(to,5),_e(io,5)),t&2){let s;ae(s=oe())&&(r._tabBodyWrapper=s.first),ae(s=oe())&&(r._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(t,r){t&2&&(Zt("mat-"+(r.color||"primary")),Wt("--mat-tab-animation-duration",r.animationDuration),X("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header",r.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",ve],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",ve],dynamicHeight:[2,"dynamicHeight","dynamicHeight",ve],selectedIndex:[2,"selectedIndex","selectedIndex",ti],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",ti],disablePagination:[2,"disablePagination","disablePagination",ve],disableRipple:[2,"disableRipple","disableRipple",ve],preserveContent:[2,"preserveContent","preserveContent",ve],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[be([{provide:gr,useExisting:n}]),tt,A],ngContentSelectors:Gi,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(t,r){if(t&1){let s=C();Xt(),o(0,"mat-tab-header",3,0),b("indexFocused",function(I){return _(s),v(r._focusChanged(I))})("selectFocusedIndex",function(I){return _(s),v(r.selectedIndex=I)}),F(2,oo,8,17,"div",4,rt),l(),h(4,lo,1,0),o(5,"div",5,1),F(7,so,1,13,"mat-tab-body",6,rt),l()}t&2&&(m("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),a(2),E(r._tabs),a(2),x(r._isServer?4:-1),a(),X("_mat-animation-noopable",r._animationMode==="NoopAnimations"),a(2),E(r._tabs))},dependencies:[_o,fr,Tn,Ri,li,hr],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height);font-family:var(--mat-tab-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-app-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-app-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height);border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-app-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}}return n})(),Ui=class{};var yi=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Ji({imports:[Li,Li]})}}return n})();var Io=["keyInput"],To=["valueInput"],ko=()=>({suppressScrollX:!0}),_r=n=>({"[&_input]:bg-red-50 !border-red-400 !border-2":n});function Ao(n,i){if(n&1){let e=C();o(0,"tr",10),Ue(1)(2),o(3,"td",11)(4,"input",12,0),b("keydown",function(r){let s=_(e).$index,g=d();return v(g.handleEnter(r,s,"key"))}),l()(),o(6,"td",11)(7,"input",13,1),b("keydown",function(r){let s=_(e).$index,g=d();return v(g.handleEnter(r,s,"value"))}),l()(),o(9,"td",14)(10,"button",15),b("click",function(){let r=_(e).$index,s=d();return v(s.removeKeyValuePair(r))}),S(),o(11,"svg",16)(12,"title"),c(13),l(),f(14,"path",17),l()()()()}if(n&2){let e,t,r=i.$implicit,s=i.$index,g=d();m("formGroupName",s);let I=((e=r.get("key"))==null?null:e.invalid)&&((e=r.get("key"))==null?null:e.touched)&&((e=r.get("key"))==null?null:e.dirty),B=((t=r.get("value"))==null?null:t.invalid)&&((t=r.get("value"))==null?null:t.touched)&&((t=r.get("value"))==null?null:t.dirty);a(3),m("ngClass",L(10,_r,I)),a(),Di("id","key-",g.urlIndex(),"-",s,""),a(2),m("ngClass",L(12,_r,B)),a(),Di("id","value-",g.urlIndex(),"-",s,""),a(6),u(g.lang.locals.delete)}}var Ci=class n{parentFormGroup;container=p(Qe);arrayName=G.required();fb=p(q);buttonLabel=G.required();lang=p(P);urlIndex=w(0);keyInputs=Et("keyInput");valueInputs=Et("valueInput");ngOnInit(){this.parentFormGroup=this.container.control,this.urlIndex.set(this.container.name)}checkFormArray(i){if(!(i instanceof Dn))throw Error("Please Pass Array")}addKeyValuePair(){let i=this.parentFormGroup.get(this.arrayName());this.checkFormArray(i),i.push(this.fb.group({key:this.fb.control("",[Y.required]),value:this.fb.control("",[Y.required])})),setTimeout(()=>{let e=this.keyInputs().at(-1);e&&e.nativeElement.focus()},0)}get getKeyValuePairArray(){return this.parentFormGroup.get(this.arrayName())}removeKeyValuePair(i){let e=this.parentFormGroup.get(this.arrayName());this.checkFormArray(e),e.removeAt(i)}handleEnter(i,e,t){let r=this.getKeyValuePairArray.at(e),s=r?.get("key"),g=r?.get("value");if(i.key==="Backspace"&&(t==="value"&&g?.value===""?(i.preventDefault(),this.keyInputs()[e]?.nativeElement?.focus()):s?.value===""&&g?.value===""&&(i.preventDefault(),this.removeKeyValuePair(e),setTimeout(()=>{this.valueInputs().length&&this.valueInputs().at(-1)?.nativeElement.focus()},0))),i.key==="Enter"){i.preventDefault();let I=this.getKeyValuePairArray.length,B=e===I-1;t==="key"?this.valueInputs()[e]?.nativeElement.focus():B?(this.addKeyValuePair(),setTimeout(()=>{this.keyInputs()[this.getKeyValuePairArray.length-1]?.nativeElement.focus()},0)):this.keyInputs()[e+1]?.nativeElement.focus()}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-keyvalue-pair-form"]],viewQuery:function(e,t){e&1&&(Pt(t.keyInputs,Io,5),Pt(t.valueInputs,To,5)),e&2&&ut(2)},inputs:{arrayName:[1,"arrayName"],buttonLabel:[1,"buttonLabel"]},standalone:!0,features:[be([],[{provide:Qe,useFactory:()=>p(Qe,{skipSelf:!0})}]),A],decls:16,vars:7,consts:[["keyInput",""],["valueInput",""],[3,"formGroup"],[1,"space-y-4","overflow-auto",3,"formArrayName"],["appPerfectScroll","",1,"max-h-40","overflow-auto",3,"perfectScrollOptions"],[1,"table-auto","w-full","border-collapse","border","border-gray-300"],[1,"bg-gray-100","sticky","top-0","z-10"],[1,"p-2","border","border-gray-300","text-center","text-sm","text-gray-800"],[1,"p-2","border","border-gray-300","text-center","text-gray-800"],["type","button",1,"px-4","py-1","bg-primary/90","text-white","text-sm","font-medium","rounded-lg","hover:bg-primary/80","focus:outline-none","focus:ring","focus:ring-gray-300",3,"click"],[3,"formGroupName"],[1,"p-0","border","border-gray-300","focus-within:!border-primary/60","focus-within:!border-2",3,"ngClass"],["type","text","formControlName","key",1,"w-full","text-sm","p-2","border-0","focus:ring-0","focus:outline-none","text-gray-800",3,"keydown","id"],["type","text","formControlName","value",1,"w-full","text-sm","p-2","border-0","focus:ring-0","focus:outline-none","text-gray-800",3,"keydown","id"],[1,"border","border-gray-300","text-center"],["type","button",1,"bg-transparent","hover:bg-primary/10","rounded-full","group","focus:outline-gray-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","fill-primary/80","group-hover:fill-primary"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"]],template:function(e,t){e&1&&(Be(0,2),o(1,"div",3)(2,"div",4)(3,"table",5)(4,"thead",6)(5,"tr")(6,"th",7),c(7),l(),o(8,"th",7),c(9),l(),o(10,"th",8)(11,"button",9),b("click",function(){return t.addKeyValuePair()}),c(12),l()()()(),o(13,"tbody"),F(14,Ao,15,14,"tr",10,rt),l()()()(),at()),e&2&&(m("formGroup",t.parentFormGroup),a(),m("formArrayName",t.arrayName()),a(),m("perfectScrollOptions",M(6,ko)),a(5),u(t.lang.locals.key),a(2),u(t.lang.locals.value),a(3),y(" ",t.buttonLabel()," "),a(2),E(t.getKeyValuePairArray.controls))},dependencies:[z,re,J,xe,ye,Ce,vt,oi,W,$]})};function Fo(n,i){if(n&1&&(o(0,"div")(1,"label",13),c(2),o(3,"small",8),c(4),l()(),f(5,"app-chips-input",14),l()),n&2){let e=d();a(2),y("",e.lang.locals.topics," "),a(2),y("(",e.lang.locals.chips_tip,")"),a(),m("placeholder",e.lang.locals.add_topic)}}var wi=class n extends K(class{}){lang=p(P);fb=p(q);container=p(Qe);parentFormGroup;urlIndex=w(0);showTopics=w(!1);ngOnInit(){this.initParent(),this.listenToMediaCrawlingChange()}initParent(){this.parentFormGroup=this.container.control,typeof this.container.name=="number"&&this.urlIndex.set(this.container.name)}get settings(){return this.parentFormGroup.get("settings")}get mediaCrawling(){return this.settings.get("mediaCrawling")}toggleTopicsList(i){i?this.settings.addControl("topics",this.fb.control([])):this.settings.get("topics")&&this.settings.removeControl("topics")}listenToMediaCrawlingChange(){this.mediaCrawling?.valueChanges.pipe(T(this.destroy$),dt(this.mediaCrawling?.value),D(i=>{this.showTopics.set(i),this.toggleTopicsList(i)})).subscribe()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-settings-form"]],standalone:!0,features:[be([],[{provide:Qe,useFactory:()=>p(Qe,{skipSelf:!0})}]),O,A],decls:26,vars:25,consts:[[3,"formGroup"],["formGroupName","settings",1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"flex","gap-4","items-center","space-x-3"],["type","checkbox","formControlName","deep",1,"size-5","border-gray-300","rounded-lg","focus:ring","focus:ring-gray-400","accent-primary",3,"id"],[1,"text-sm","font-medium","text-gray-800",3,"for"],["type","checkbox","formControlName","mediaCrawling",1,"size-5","border-gray-300","rounded-lg","focus:ring","focus:ring-gray-400","accent-primary",3,"id"],["for","selectors",1,"block","text-sm","font-medium","text-gray-800"],[1,"mx-2","opacity-70"],["formControlName","selectors",3,"placeholder"],[1,"block","text-sm","font-medium","text-gray-800",3,"for"],["type","text","formControlName","containerName",1,"w-full","p-2","border","border-gray-300","bg-transparent","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"id"],["type","number","formControlName","schedule_by_days",1,"w-full","p-2","border","border-gray-300","bg-transparent","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"id"],["for","topics",1,"block","text-sm","font-medium","text-gray-800"],["formControlName","topics",3,"placeholder"]],template:function(e,t){e&1&&(Be(0,0),o(1,"div",1)(2,"div",2)(3,"div",3),f(4,"input",4),o(5,"label",5),c(6),l()(),o(7,"div",3),f(8,"input",6),o(9,"label",5),c(10),l()()(),o(11,"div")(12,"label",7),c(13),o(14,"small",8),c(15),l()(),f(16,"app-chips-input",9),l(),h(17,Fo,6,3,"div"),o(18,"div")(19,"label",10),c(20),l(),f(21,"input",11),l(),o(22,"div")(23,"label",10),c(24),l(),f(25,"input",12),l()(),at()),e&2&&(m("formGroup",t.parentFormGroup),a(4),Le("id","deep-",t.urlIndex(),""),a(),Le("for","deep-",t.urlIndex(),""),a(),u(t.lang.locals.deep_crawling),a(2),Le("id","mediaCrawling-",t.urlIndex(),""),a(),Le("for","mediaCrawling-",t.urlIndex(),""),a(),u(t.lang.locals.media_crawling),a(3),u(t.lang.locals.selectors),a(2),y("(",t.lang.locals.chips_tip,")"),a(),m("placeholder",t.lang.locals.add_selector),a(),x(t.showTopics()?17:-1),a(2),Le("for","containerName-",t.urlIndex(),""),a(),u(t.lang.locals.container_name),a(),Le("id","containerName-",t.urlIndex(),""),a(2),Le("for","schedule_by_days-",t.urlIndex(),""),a(),u(t.lang.locals.schedule_days),a(),Le("id","schedule_by_days-",t.urlIndex(),""))},dependencies:[z,re,_t,Mn,J,xe,ye,Ce,vt,Ct,tr]})};function Si(){let n=p(q);return n.group({link:n.control("",[Y.required,Y.pattern(er)]),headers:n.array([]),cookies:n.array([]),payload:n.array([]),settings:vr()})}function Ii(){let n=p(q);return n.group({key:n.control(""),value:n.control("")})}function vr(){let n=p(q);return n.group({deep:n.control(!1),selectors:n.control([]),topics:n.control([]),mediaCrawling:n.control(!1),containerName:n.control("rera-storage",[Y.required]),schedule_by_days:n.control(1,[Y.required,Y.min(1)])})}function Eo(){let n=p(q);return n.group({urls:n.array([]),settings:vr()})}function $i(n){let i=p(q);return i.group({last_crawl:i.control(n?.last_crawl??new Date().toISOString().split("T")[0]),crawl_days:i.control(n?.crawl_days,Y.min(1)),crawling_status:i.control(n?.crawling_status??""),crawl_settings:Eo()})}var Mo=()=>({suppressScrollX:!0}),Po=n=>({"bg-red-50 !border-red-400":n});function Do(n,i){if(n&1&&(o(0,"small",10),c(1),l()),n&2){let e,t=d();a(),u(!((e=t.urlForm.get("link"))==null||e.errors==null)&&e.errors.pattern?t.lang.locals.invalid_url:t.lang.locals.required)}}var It=class n{adminService=p(fe);fb=p(q);lang=p(P);ref=p(ue);data=p(ge);urlForm=this.data??Si();isAdd=w(!this.data);addURL(){si(this.urlForm),!this.urlForm.invalid&&this.ref.close(this.urlForm)}cancel(){this.ref.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-add-url-popup"]],standalone:!0,features:[A],decls:39,vars:21,consts:[[1,"flex","flex-col"],[1,"p-4","bg-primary","text-white"],["appPerfectScroll","",3,"perfectScrollOptions"],[1,"p-4","min-h-0","flex","flex-auto","flex-col"],[1,"flex","flex-col","space-y-4",3,"formGroup"],[3,"expanded"],[1,"opacity-50"],[1,"p-2"],["for","link",1,"block","text-sm","font-medium","text-gray-800"],["id","link","type","text","placeholder","http://www.example.com","formControlName","link",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring","focus:ring-gray-300","text-gray-800",3,"ngClass"],[1,"text-red-400"],[3,"label"],["arrayName","headers",3,"buttonLabel"],["arrayName","cookies",3,"buttonLabel"],["arrayName","payload",3,"buttonLabel"],[1,"flex","w-full","justify-center","mt-6","space-x-2","gap-4","p-4"],["type","button",1,"bg-gray-300","w-3/12","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none",3,"click"],["type","button",1,"bg-primary/90","w-3/12","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click"]],template:function(e,t){if(e&1){let r=C();o(0,"div",0)(1,"div",1),c(2),l(),o(3,"mat-dialog-content",2)(4,"div",3)(5,"form",4)(6,"mat-accordion")(7,"mat-expansion-panel",5)(8,"mat-expansion-panel-header")(9,"mat-panel-title"),c(10),l(),o(11,"mat-panel-description",6),c(12),l()(),o(13,"div",7),Ue(14),o(15,"label",8),c(16,"Link"),l(),f(17,"input",9),h(18,Do,2,1,"small",10),l(),o(19,"mat-tab-group")(20,"mat-tab",11),f(21,"app-keyvalue-pair-form",12),l(),o(22,"mat-tab",11),f(23,"app-keyvalue-pair-form",13),l(),o(24,"mat-tab",11),f(25,"app-keyvalue-pair-form",14),l()()(),o(26,"mat-expansion-panel")(27,"mat-expansion-panel-header")(28,"mat-panel-title"),c(29),l(),o(30,"mat-panel-description",6),c(31),l()(),f(32,"app-settings-form",7),l()()()()(),o(33,"mat-dialog-actions")(34,"div",15)(35,"button",16),b("click",function(){return _(r),v(t.cancel())}),c(36),l(),o(37,"button",17),b("click",function(){return _(r),v(t.addURL())}),c(38),l()()()()}if(e&2){let r;a(2),u(t.isAdd()?t.lang.locals.add_url:t.lang.locals.edit_url),a(),m("perfectScrollOptions",M(18,Mo)),a(2),m("formGroup",t.urlForm),a(2),m("expanded",!0),a(3),u(t.lang.locals.url_details),a(2),u(t.lang.locals.url_details_desc);let s=((r=t.urlForm.get("link"))==null?null:r.invalid)&&((r=t.urlForm.get("link"))==null?null:r.touched)&&((r=t.urlForm.get("link"))==null?null:r.dirty);a(5),m("ngClass",L(19,Po,s)),a(),x(s?18:-1),a(2),m("label",t.lang.locals.headers),a(),m("buttonLabel",t.lang.locals.add_header),a(),m("label",t.lang.locals.cookies),a(),m("buttonLabel",t.lang.locals.add_cookie),a(),m("label",t.lang.locals.payload),a(),m("buttonLabel",t.lang.locals.add_payload),a(4),u(t.lang.locals.url_settings),a(2),u(t.lang.locals.url_settings_desc),a(5),y(" ",t.lang.locals.cancel," "),a(2),y(" ",t.isAdd()?t.lang.locals.add_url:t.lang.locals.edit_url," ")}},dependencies:[z,Pn,re,J,xe,ye,Ce,yi,ji,br,Ci,wi,Ct,Jn,Wn,Zn,Yn,Xn,Ke,ze,qe,W,$]})};var Ti=class n{transform(i){return i?JSON.stringify(i,null,2).replace(/"(.*?)":/g,'<span class="text-blue-500">"$1"</span>:').replace(/: "(.*?)"/g,': <span class="text-green-500">"$1"</span>').replace(/: (\d+)/g,': <span class="text-purple-500">$1</span>').replace(/: (true|false)/g,': <span class="text-red-500">$1</span>').replace(/: (null)/g,': <span class="text-gray-500">$1</span>'):""}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=tn({name:"jsonHighlight",type:n,pure:!0,standalone:!0})};var Vo=()=>({suppressScrollX:!0}),Tt=class n{data=p(ge);doc=p(je);lang=p(P);formatedValue=this.data;copyToClipboard(){let i=JSON.stringify(this.formatedValue,null,2);this.doc.defaultView?.navigator.clipboard.writeText(i).then(()=>{console.log("JSON copied to clipboard successfully!")},e=>{console.error("Failed to copy JSON:",e)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-json-previewer-popup"]],standalone:!0,features:[A],decls:10,vars:6,consts:[[1,"felx","flex-col","w-[min(500,80vw)]"],[1,"p-4","bg-primary","text-white"],[1,"p-4","min-h-0","flex","flex-col","flex-auto"],[1,"rounded-lg","relative"],[1,"inline-flex","items-center","gap-2","bg-transparent","text-white","py-1","px-3","hover:scale-110","focus:outline-none","m-2","absolute","z-10",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4","fill-white"],["d","M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"],["dir","ltr","appPerfectScroll","",1,"bg-gray-800","text-left","text-white","p-4","rounded-lg","overflow-auto","max-h-96","whitespace-pre-wrap","relative",3,"perfectScrollOptions","innerHTML"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1),c(2),l(),o(3,"div",2)(4,"div",3)(5,"button",4),b("click",function(){return t.copyToClipboard()}),S(),o(6,"svg",5),f(7,"path",6),l()(),U(),f(8,"pre",7),pe(9,"jsonHighlight"),l()()()),e&2&&(a(2),u(t.lang.locals.json_preview),a(6),m("perfectScrollOptions",M(5,Vo))("innerHTML",ei(9,3,t.formatedValue),et))},dependencies:[Ti,W]})};var Lo=["tab"],xr=()=>({suppressScrollX:!0}),Ro=(n,i,e)=>({"bg-yellow-500":n,"bg-red-500":i,"bg-green-500":e}),Qi=n=>({$implicit:n});function Oo(n,i){if(n&1&&(o(0,"div",3),c(1),l()),n&2){d();let e=gt(1);m("ngClass",mn(2,Ro,e==="InProgress",e==="Error",e==="Success")),a(),y(" ",e," ")}}function No(n,i){n&1&&Z(0)}function Ho(n,i){if(n&1&&h(0,No,1,0,"ng-container",33),n&2){d();let e=j(69),t=gt(0);m("ngTemplateOutlet",e)("ngTemplateOutletContext",L(2,Qi,t.cookies))}}function Bo(n,i){n&1&&Z(0)}function Uo(n,i){if(n&1&&h(0,Bo,1,0,"ng-container",33),n&2){d();let e=j(69),t=gt(0);m("ngTemplateOutlet",e)("ngTemplateOutletContext",L(2,Qi,t.payload))}}function Go(n,i){n&1&&Z(0)}function jo(n,i){if(n&1&&h(0,Go,1,0,"ng-container",33),n&2){d();let e=j(69),t=gt(0);m("ngTemplateOutlet",e)("ngTemplateOutletContext",L(2,Qi,t.headers))}}function $o(n,i){n&1&&(S(),o(0,"svg",28),f(1,"path",34),l())}function Qo(n,i){n&1&&(S(),o(0,"svg",29),f(1,"path",35),l())}function qo(n,i){n&1&&(S(),o(0,"svg",28),f(1,"path",34),l())}function zo(n,i){n&1&&(S(),o(0,"svg",29),f(1,"path",35),l())}function Ko(n,i){if(n&1&&(o(0,"span",32),c(1),l()),n&2){let e=i.$implicit;m("title",e),a(),y(" ",e," ")}}function Wo(n,i){if(n&1&&(o(0,"span",32),c(1),l()),n&2){let e=i.$implicit;m("title",e),a(),y(" ",e," ")}}function Zo(n,i){if(n&1&&(o(0,"div")(1,"span",30),c(2),l(),o(3,"div",31),F(4,Wo,2,2,"span",32,H),l()()),n&2){let e=d(),t=gt(0);a(2),u(e.lang.locals.topics),a(2),E(t.settings.topics)}}function Xo(n,i){if(n&1&&(o(0,"tr",36)(1,"td",21),c(2),l(),o(3,"td",21),c(4),l()()),n&2){let e=i.$implicit;a(2),u(e.key),a(2),u(e.value)}}function Yo(n,i){if(n&1&&F(0,Xo,5,2,"tr",36,H),n&2){let e=i.$implicit;E(e)}}var ki=class n extends K(class{}){adminService=p(fe);dialog=p(Pe);lang=p(P);crawlerSettingGroupForm=G.required();onUrlDelete=Je();onUrlEdit=Je();activeTab=w("headers");indicatorWidth=w("0px");indicatorTransform=w("translateX(0)");tabs=Et("tab");ngAfterViewInit(){setTimeout(()=>{this.updateIndicator()})}setActiveTab(i){this.activeTab.set(i),this.updateIndicator()}updateIndicator(){let i=this.tabs(),e=this.getActiveIndex();if(e!==-1){let t=i[e].nativeElement;this.indicatorWidth.set(`${t.offsetWidth}px`),this.indicatorTransform.set(`translateX(${t.offsetLeft}px)`)}}getActiveIndex(){return["headers","cookies","payload"].indexOf(this.activeTab())}editUrl(){this.dialog.open(It,{data:this.crawlerSettingGroupForm().controls.crawl_settings.controls.urls.at(0),width:"70vw"}).afterClosed().pipe(T(this.destroy$),D(i=>{i&&(this.crawlerSettingGroupForm().patchValue({crawl_days:i?.getRawValue().settings.schedule_by_days}),this.onUrlEdit.emit())})).subscribe()}deleteUrl(){this.dialog.open(Ae,{data:{htmlContent:`<p class="flex flex-col gap-4 text-center text-xl text-gray-700">${this.lang.locals.delete_message} <span class="italic text-sm text-primary">${this.crawlerSettingGroupForm().controls.crawl_settings.controls.urls.at(0).getRawValue().link}<span> ? </p>`}}).afterClosed().pipe(T(this.destroy$),D(i=>{i&&this.onUrlDelete.emit()})).subscribe()}previewUrlAsJSON(){this.dialog.open(Tt,{data:Lt(this.crawlerSettingGroupForm().controls.crawl_settings.controls.urls.at(0).getRawValue())})}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-url-summary-card"]],viewQuery:function(e,t){e&1&&Pt(t.tabs,Lo,5),e&2&&ut()},inputs:{crawlerSettingGroupForm:[1,"crawlerSettingGroupForm"]},outputs:{onUrlDelete:"onUrlDelete",onUrlEdit:"onUrlEdit"},standalone:!0,features:[O,A],decls:70,vars:44,consts:[["tab",""],["rows",""],[1,"relative","flex","flex-col","bg-gray-50","shadow-lg","rounded-lg","w-full"],[1,"text-white","text-xs","absolute","-top-4","-right-1","py-1","px-6","rounded-lg",3,"ngClass"],[1,"flex","justify-between","items-center","text-gray-800","text-lg","font-bold","text-end","bg-gray-50","p-2","rounded-lg","shadow-sm"],[1,"flex","flex-col","gap-1","items-start"],["target","_blank",1,"truncate","no-underline","text-gray-700","hover:text-primary","transition-colors",3,"title","href"],[1,"text-gray-300","text-sm","font-normal"],[1,"flex","gap-2","flex-nowrap"],["type","button",1,"inline-flex","items-center","p-2","hover:scale-105","transition-all","border","border-gray-200","rounded-full","size-8","bg-primary","text-white",3,"click","matTooltip"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4"],["d","M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"],["d","M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z"],["d","M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"],["appPerfectScroll","",1,"w-full","p-4","max-h-64",3,"perfectScrollOptions"],[1,"relative","flex","justify-between","items-center","m-2","bg-gray-200","rounded-md"],["type","button",1,"relative","text-sm","p-2","focus:outline-none","rounded-md","text-primary","font-semibold","hover:underline","hover:cursor-pointer","z-10",3,"click"],[1,"absolute","top-0","left-0","h-full","bg-primary","transition-all","duration-300","rounded-md","z-0"],["appPerfectScroll","",1,"rounded-lg","border","border-gray-200","shadow-sm","max-h-40","m-4",3,"perfectScrollOptions"],[1,"table-auto","w-full","text-center","text-sm","text-gray-700"],[1,"bg-gray-300","sticky","top-0","z-10"],[1,"p-2"],[1,"mt-4"],[1,"text-lg","font-semibold","text-gray-800"],[1,"flex","flex-col","gap-4","text-gray-700","mt-2"],[1,"flex","justify-between","items-center"],[1,"inline-flex","gap-2"],[1,"font-semibold","text-sm","ms-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4","fill-green-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-4","fill-red-400"],[1,"text-sm","font-semibold"],[1,"flex","gap-2","flex-wrap","mt-2"],[1,"p-1","truncate","text-xs","text-center","border","border-primary","bg-primary/30","text-primary","rounded-md",3,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"],[1,"hover:bg-gray-100","transition-all"]],template:function(e,t){if(e&1){let r=C();Ue(0)(1)(2),o(3,"div",2),h(4,Oo,2,6,"div",3),o(5,"div",4)(6,"div",5)(7,"a",6),c(8),l(),o(9,"small",7),c(10),pe(11,"date"),l()(),o(12,"div",8)(13,"button",9),b("click",function(){return _(r),v(t.editUrl())}),S(),o(14,"svg",10),f(15,"path",11),l()(),U(),o(16,"button",9),b("click",function(){return _(r),v(t.previewUrlAsJSON())}),S(),o(17,"svg",10),f(18,"path",12),l()(),U(),o(19,"button",9),b("click",function(){return _(r),v(t.deleteUrl())}),S(),o(20,"svg",10),f(21,"path",13),l()()()(),U(),o(22,"div",14)(23,"div",15)(24,"button",16,0),b("click",function(){return _(r),v(t.setActiveTab("headers"))}),c(26),l(),o(27,"button",16,0),b("click",function(){return _(r),v(t.setActiveTab("cookies"))}),c(29),l(),o(30,"button",16,0),b("click",function(){return _(r),v(t.setActiveTab("payload"))}),c(32),l(),f(33,"div",17),l(),o(34,"div",18)(35,"table",19)(36,"thead",20)(37,"tr")(38,"th",21),c(39),l(),o(40,"th",21),c(41),l()()(),o(42,"tbody"),h(43,Ho,1,4,"ng-container")(44,Uo,1,4,"ng-container")(45,jo,1,4,"ng-container"),l()()(),o(46,"div",22)(47,"span",23),c(48),l(),o(49,"div",24)(50,"div",25)(51,"div",26)(52,"span",27),c(53),l(),h(54,$o,2,0,":svg:svg",28)(55,Qo,2,0,":svg:svg",29),l(),o(56,"div",26)(57,"span",27),c(58),l(),h(59,qo,2,0,":svg:svg",28)(60,zo,2,0,":svg:svg",29),l()(),o(61,"div")(62,"span",30),c(63),l(),o(64,"div",31),F(65,Ko,2,2,"span",32,H),l()(),h(67,Zo,6,1,"div"),l()()()(),h(68,Yo,2,0,"ng-template",null,1,de)}if(e&2){let r,s=Vi(t.crawlerSettingGroupForm().controls.crawl_settings.controls.urls.at(0).getRawValue());a();let g=Vi(t.crawlerSettingGroupForm().getRawValue().crawling_status),I=t.crawlerSettingGroupForm().getRawValue().last_crawl;a(3),x(g?4:-1),a(3),m("title",s.link)("href",s.link,Ve),a(),u(s.link),a(2),ot("",t.lang.locals.last_scheduled_date," ",Ee(11,39,I,"MM/dd/yyyy"),""),a(3),m("matTooltip",t.lang.locals.edit),a(3),m("matTooltip",t.lang.locals.json_preview),a(3),m("matTooltip",t.lang.locals.delete),a(3),m("perfectScrollOptions",M(42,xr)),a(2),X("text-white",t.activeTab()==="headers"),a(2),ot(" ",t.lang.locals.headers," (",s.headers.length,") "),a(),X("text-white",t.activeTab()==="cookies"),a(2),ot(" ",t.lang.locals.cookies," (",s.cookies.length,") "),a(),X("text-white",t.activeTab()==="payload"),a(2),ot(" ",t.lang.locals.payload," (",s.payload.length,") "),a(),Wt("width",t.indicatorWidth())("transform",t.indicatorTransform()),a(),m("perfectScrollOptions",M(43,xr)),a(5),u(t.lang.locals.key),a(2),u(t.lang.locals.value),a(2),x((r=t.activeTab())==="cookies"?43:r==="payload"?44:45),a(5),u(t.lang.locals.settings),a(5),u(t.lang.locals.deep_crawling),a(),x(s.settings.deep?54:55),a(4),u(t.lang.locals.media_crawling),a(),x(s.settings.mediaCrawling?59:60),a(4),u(t.lang.locals.selectors),a(2),E(s.settings.selectors),a(2),x(s.settings.mediaCrawling?67:-1)}},dependencies:[W,le,ci,$,ii]})};var yr=$e("searchAnimation",[Te("* => searching",[Ie("2s linear",An([ie({transform:"translate(0, 0) scale(1)",offset:0}),ie({transform:"translate(-5px, -5px) scale(1.1)",offset:.25}),ie({transform:"translate(5px, 5px) scale(1)",offset:.5}),ie({transform:"translate(-5px, 5px) scale(1.1)",offset:.75}),ie({transform:"translate(0, 0) scale(1)",offset:1})]))])]);var Jo=(n,i)=>i.key,el=()=>({suppressScrollX:!0});function tl(n,i){if(n&1){let e=C();o(0,"button",5),b("click",function(){_(e);let r=d();return v(r.previewJson())}),c(1),S(),o(2,"svg",6),f(3,"path",11),l()()}if(n&2){let e=d();a(),y(" ",e.lang.locals.json_preview," ")}}function il(n,i){if(n&1&&Z(0,12),n&2){d(2);let e=j(15);m("ngTemplateOutlet",e)}}function nl(n,i){n&1&&(S(),o(0,"svg",6),f(1,"path",13),l())}function rl(n,i){if(n&1){let e=C();o(0,"div",9)(1,"button",5),b("click",function(){_(e);let r=d();return v(r.startCrawling())}),c(2),h(3,il,1,1,"ng-container",12)(4,nl,2,0,":svg:svg",6),l()()}if(n&2){let e=d();a(2),y(" ",e.lang.locals.save_urls," "),a(),x(e.isloading()?3:4)}}function al(n,i){if(n&1){let e=C();o(0,"app-url-summary-card",19),b("onUrlEdit",function(){_(e);let r=d(2);return v(r.updateUrlGroup())})("onUrlDelete",function(){let r=_(e).$index,s=d(),g=s.$implicit,I=s.$index,B=d();return v(B.removeUrl(I,r,+g.key))}),l()}if(n&2){let e=i.$implicit;m("crawlerSettingGroupForm",e)}}function ol(n,i){if(n&1&&(o(0,"div",14),f(1,"div",15),o(2,"span",16),c(3),l(),f(4,"div",15),l(),o(5,"div",17),F(6,al,1,1,"app-url-summary-card",18,H),l()),n&2){let e=i.$implicit,t=d();a(3),ot(" ",t.lang.locals.recurring_every," (",e.key,")"),a(3),E(e.value)}}function ll(n,i){n&1&&(o(0,"div",20)(1,"div",21),S(),o(2,"svg",22),f(3,"path",23)(4,"path",24),l(),U(),o(5,"span",25),c(6,"Loading..."),l()()())}var Ai=class n extends K(class{}){crawlerForm=p(q).array([]);doc=p(je);lang=p(P);injector=p(Ne);adminService=p(fe);dialog=p(Pe);selectedTab=w("urls");urlsSignal=w(this.crawlerForm.controls);isloading=w(!1);constructor(){super()}ngOnInit(){this.adminService.getCrawlingData().pipe(T(this.destroy$),D(i=>{i.forEach(e=>{let t=this.createUrlSettings(e);this.crawlerForm.push(t)}),this.updateUrlGroup()})).subscribe()}urlsArray(i){return this.crawlerForm.at(i).get("crawl_settings")?.get("urls")}addUrl(){this.dialog.open(It,{width:"70vw"}).afterClosed().pipe(T(this.destroy$),D(i=>{if(i){let e=Se(this.injector,()=>$i());e.controls.crawl_days.patchValue(i.value.settings?.schedule_by_days),this.crawlerForm.push(e),this.urlsArray(-1).push(i),this.updateUrlGroup()}})).subscribe()}removeUrl(i,e,t){this.urlGroupByDays[t].splice(e,1),this.crawlerForm.removeAt(i),this.urlGroupByDays[t].length||delete this.urlGroupByDays[t]}previewJson(){this.dialog.open(Tt,{data:Lt(this.crawlerForm.getRawValue())})}startCrawling(){this.isloading.set(!0);let i=Lt(this.crawlerForm.getRawValue());this.adminService.scheduleUrl(i,this.lang.locals.save_urls_successfully).pipe(T(this.destroy$),R(()=>this.isloading.set(!1))).subscribe()}groupByCrawlDays(){let i=this.crawlerForm.controls.reduce((e,t)=>{let r=t.value.crawl_days;return(e[r]||=[]).push(t),e},{});return Object.keys(i).map(Number).sort((e,t)=>e-t).reduce((e,t)=>(e[t]=i[t],e),{})}createKeyValuePairs(i){return i?Object.entries(i).map(([e,t])=>({key:e,value:t})):[]}createUrlGroupWithData(i){let e=Se(this.injector,()=>Si());return e.patchValue({link:i.link,settings:i.settings}),i.headers.forEach(t=>{let r=Se(this.injector,()=>Ii());r.patchValue(t),e.controls.headers.push(r)}),i.cookies.forEach(t=>{let r=Se(this.injector,()=>Ii());r.patchValue(t),e.controls.cookies.push(r)}),i.payload.forEach(t=>{let r=Se(this.injector,()=>Ii());r.patchValue(t),e.controls.payload.push(r)}),e}createUrlSettings(i){let e=Se(this.injector,()=>$i());return e.patchValue({last_crawl:i.last_crawl,crawl_days:i.crawl_days??i.crawl_settings.urls.at(0).settings.schedule_by_days,crawling_status:i.crawling_status}),i.crawl_settings.urls.map(t=>Ht(Nt({},t),{headers:this.createKeyValuePairs(t.headers),cookies:this.createKeyValuePairs(t.cookies),payload:this.createKeyValuePairs(t.payload)})).forEach(t=>{let r=this.createUrlGroupWithData(t);e.controls.crawl_settings.controls.urls.push(r)}),e}updateUrlGroup(){this.urlGroupByDays=this.groupByCrawlDays()}originalOrder=()=>0;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-admin-crawler"]],standalone:!0,features:[O,A],decls:16,vars:8,consts:[["loader",""],[1,"flex","h-[75vh]","max-h-[75vh]","bg-transparent","w-full","p-4","overflow-hidden"],[1,"relative","z-20","flex","flex-col","bg-gray-100","rounded-lg","w-full","overflow-hidden"],[1,"flex","items-center","sticky","top-0","p-2","bg-white","rounded-lg","shadow-md","z-20"],[1,"w-1/2"],["type","button",1,"inline-flex","gap-2","rounded-md","justify-center","items-center","bg-primary","p-3","m-2","w-1/3","text-white","hover:shadow-lg",3,"click"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-6"],["d","M7,7H11V9H7A3,3 0 0,0 4,12A3,3 0 0,0 7,15H11V17H7A5,5 0 0,1 2,12A5,5 0 0,1 7,7M17,7A5,5 0 0,1 22,12H20A3,3 0 0,0 17,9H13V7H17M8,11H16V13H8V11M17,12H19V15H22V17H19V20H17V17H14V15H17V12Z"],["type","button",1,"inline-flex","gap-2","rounded-md","justify-center","items-center","bg-primary","p-3","m-2","w-1/3","text-white","hover:shadow-lg"],[1,"flex","justify-end","items-center","w-1/2"],["appPerfectScroll","",1,"p-4","overflow-auto","max-h-[60vh]",3,"perfectScrollOptions"],["d","M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z"],[3,"ngTemplateOutlet"],["d","M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"],[1,"flex","items-center","my-6"],[1,"flex-grow","border-t","border-gray-300"],[1,"mx-4","text-gray-500","font-medium","whitespace-nowrap"],[1,"grid","grid-cols-3","gap-6"],[3,"crawlerSettingGroupForm"],[3,"onUrlEdit","onUrlDelete","crawlerSettingGroupForm"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){if(e&1){let r=C();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),b("click",function(){return _(r),v(t.addUrl())}),c(5),S(),o(6,"svg",6),f(7,"path",7),l()(),h(8,tl,4,1,"button",8),l(),h(9,rl,5,2,"div",9),l(),U(),o(10,"div",10),F(11,ol,8,2,null,null,Jo),pe(13,"keyvalue"),l()()(),h(14,ll,7,0,"ng-template",null,0,de)}e&2&&(a(5),y(" ",t.lang.locals.add_url," "),a(3),x(t.urlsSignal().length?8:-1),a(),x(t.urlsSignal().length?9:-1),a(),m("perfectScrollOptions",M(7,el)),a(),E(Ee(13,4,t.urlGroupByDays,t.originalOrder)))},dependencies:[yi,z,Ct,ft,le,gn,W,ki],styles:[".input-text[_ngcontent-%COMP%]{width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity));padding:.5rem .75rem}.btn-primary[_ngcontent-%COMP%]{margin-top:.5rem;border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));padding:.5rem 1rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.btn-secondary[_ngcontent-%COMP%]{margin-top:.5rem;border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity));padding:.5rem 1rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"],data:{animation:[yr]}})};var wr=$e("expandCollapse",[Te(":enter",[ie({height:"0px",opacity:0,overflow:"hidden"}),Ie("300ms ease-out",ie({height:"*",opacity:1}))]),Te(":leave",[Ie("300ms ease-in",ie({height:"0px",opacity:0,overflow:"hidden"}))])]);var sl=["indexInfo"],cl=()=>["INDEX_INFO"],dl=()=>["RUN_INDEXER"];function ml(n,i){n&1&&(S(),o(0,"svg",16),f(1,"path",17),l())}function pl(n,i){n&1&&(S(),o(0,"svg",16),f(1,"path",18),l())}function ul(n,i){if(n&1){let e=C();o(0,"button",15),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.toggleExpand(r))}),h(1,ml,2,0,":svg:svg",16)(2,pl,2,0,":svg:svg",16),l()}if(n&2){let e=d().$implicit,t=d();a(),x(t.expandedIndex===e?1:2)}}function gl(n,i){n&1&&(o(0,"span",12)(1,"div",19),S(),o(2,"svg",20),f(3,"path",21)(4,"path",22),l()()())}function fl(n,i){n&1&&(o(0,"span",19),S(),o(1,"svg",24),f(2,"path",21)(3,"path",22),l()())}function hl(n,i){if(n&1&&c(0),n&2){let e=d(3);y(" ",e.lang.locals.run_indexer," ")}}function bl(n,i){if(n&1){let e=C();o(0,"button",23),b("click",function(){_(e);let r=d().$implicit,s=d();return v(s.resetAndRunIndexer(r))}),h(1,fl,4,0,"span",19)(2,hl,1,1),l()}if(n&2){let e=d().$implicit,t=d();m("disabled",t.runningIndex===e),a(),x(t.runningIndex===e?1:2)}}function _l(n,i){if(n&1&&(o(0,"div",26),c(1),l()),n&2){let e=d(3);m("@expandCollapse",void 0),a(),u(e.infoErrorMessage)}}function vl(n,i){if(n&1&&(o(0,"div",27)(1,"div",28)(2,"div")(3,"span",29),c(4),l(),o(5,"span",30),c(6),l()(),o(7,"div")(8,"span",29),c(9),l(),o(10,"span",30),c(11),l()(),o(12,"div")(13,"span",29),c(14),l(),o(15,"span",30),c(16),l()(),o(17,"div")(18,"span",29),c(19),l(),o(20,"span",30),c(21),l()(),o(22,"div")(23,"span",29),c(24),l(),o(25,"span",30),c(26),l()(),o(27,"div")(28,"span",29),c(29),l(),o(30,"span",30),c(31),l()()()()),n&2){let e=d(3);m("@expandCollapse",void 0),a(4),u(e.lang.locals.index_name),a(2),u(e.selectedIndexerInfo.index_name),a(3),u(e.lang.locals.indexer_name),a(2),u(e.selectedIndexerInfo.indexer_name),a(3),u(e.lang.locals.data_source),a(2),u(e.selectedIndexerInfo.data_source_name),a(3),u(e.lang.locals.data_storage_type),a(2),u(e.selectedIndexerInfo.data_storage_type),a(3),u(e.lang.locals.data_storage_name),a(2),u(e.selectedIndexerInfo.data_storage_name),a(3),u(e.lang.locals.skillset_name),a(2),u(e.selectedIndexerInfo.skillset_name)}}function xl(n,i){if(n&1&&(o(0,"tr")(1,"td",25),h(2,_l,2,2,"div",26)(3,vl,32,13,"div",27),l()()),n&2){let e=d(2);a(2),x(e.infoErrorMessage?2:3)}}function yl(n,i){if(n&1&&(o(0,"tr",8)(1,"td")(2,"div",9),h(3,ul,3,1,"button",10),o(4,"span",11),c(5),l()(),h(6,gl,5,0,"span",12),l(),o(7,"td",13),h(8,bl,3,2,"button",14),l()(),h(9,xl,4,1,"tr")),n&2){let e=i.$implicit,t=d();a(3),m("appHasPermission",M(5,cl)),a(2),u(e),a(),x(t.loadingIndex===e?6:-1),a(2),m("appHasPermission",M(6,dl)),a(),x(t.expandedIndex===e?9:-1)}}var Fi=class n extends K(class{}){indexers=[];filteredIndexers=[];searchControl=new ke("",{nonNullable:!0});loading=!1;errorMessage="";expandedIndex=null;loadingIndex=null;runningIndex=null;infoErrorMessage=null;adminService=p(fe);lang=p(P);indexInfo;ngOnInit(){this.fetchIndexers(),this.listenToSearch()}fetchIndexers(){this.loading=!0,this.errorMessage="",this.adminService.getIndexes().pipe(T(this.destroy$),D(i=>{this.indexers=i,this.filteredIndexers=i}),se(()=>(this.errorMessage="Failed to fetch indexers.",Q([]))),R(()=>this.loading=!1)).subscribe()}resetAndRunIndexer(i){this.runningIndex=i,this.errorMessage="",this.adminService.runIndexer(i).pipe(T(this.destroy$),se(()=>(this.errorMessage=`Failed to run indexer: ${i}`,Q(null))),R(()=>this.runningIndex=null)).subscribe(()=>{this.errorMessage||alert(`${i} run successfully.`)})}toggleExpand(i){this.expandedIndex===i?(this.expandedIndex=null,this.selectedIndexerInfo={},this.infoErrorMessage=null):this.fetchIndexerInfo(i)}fetchIndexerInfo(i){this.expandedIndex=null,this.loadingIndex=i,this.infoErrorMessage=null,this.errorMessage="",this.adminService.getIndexInfo(i).pipe(T(this.destroy$),se(()=>(this.infoErrorMessage=`${this.lang.locals.indexer_warning} ${i}.`,this.expandedIndex=i,Q(null))),R(()=>this.loadingIndex=null)).subscribe(e=>{e&&(this.selectedIndexerInfo=e,this.expandedIndex=i,setTimeout(()=>{this.indexInfo&&this.indexInfo.nativeElement.scrollIntoView({behavior:"smooth"})},100))})}listenToSearch(){this.searchControl.valueChanges.pipe(T(this.destroy$),Oe(500),Fe()).subscribe(i=>{this.filteredIndexers=this.indexers.filter(e=>e.toLowerCase().includes(i.toLowerCase()))})}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-admin-indexer"]],viewQuery:function(e,t){if(e&1&&_e(sl,5),e&2){let r;ae(r=oe())&&(t.indexInfo=r.first)}},standalone:!0,features:[O,A],decls:15,vars:4,consts:[[1,"max-w-6xl","mx-auto","p-4","bg-gray-50","shadow-md","rounded-lg"],["appPerfectScroll","",1,"overflow-x-auto","overflow-y-auto","max-h-[70vh]","bg-white","rounded-md","shadow-sm"],[1,"w-full","table-auto","border-collapse"],[1,"bg-primary","text-white","sticky","top-0"],[1,"px-3","py-2","text-center","text-sm","font-semibold"],[1,"sticky","top-9"],["colspan","2",1,"bg-gray-50","px-3","py-2"],["type","text",1,"w-full","p-2","text-gray-700","text-sm","rounded-md","border","border-gray-300","focus:outline-none","focus:ring","focus:ring-primary/60","placeholder-gray-400",3,"formControl","placeholder"],[1,"hover:bg-gray-100","border-t"],[1,"flex","gap-2"],["class","w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",3,"click",4,"appHasPermission"],[1,"cursor-pointer","px-3","py-2","text-gray-800","text-sm","font-medium"],[1,"ml-2","flex","items-center"],[1,"px-3","py-2","text-center"],["class","bg-primary/80 text-white px-3 py-1 text-xs rounded-md hover:bg-primary disabled:opacity-50",3,"disabled","click",4,"appHasPermission"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","hover:bg-gray-100",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-5","h-5","fill-gray-600"],["d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"],["d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"],[1,"loader"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","w-4","h-4","text-gray-300","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"bg-primary/80","text-white","px-3","py-1","text-xs","rounded-md","hover:bg-primary","disabled:opacity-50",3,"click","disabled"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","w-4","h-4","text-gray-300","animate-spin","fill-white"],["colspan","2",1,"px-3","py-2","bg-gray-50","border-t"],[1,"text-red-500","text-sm","font-semibold"],[1,"overflow-hidden","transition-all","duration-300","ease-in-out","max-h-96","opacity-100"],[1,"grid","grid-cols-2","gap-4","bg-white","p-4","rounded-md","shadow-md"],[1,"block","font-medium","text-gray-600"],[1,"text-gray-500","text-sm"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr",3)(5,"th",4),c(6),l(),o(7,"th",4),c(8),l()(),o(9,"tr",5)(10,"th",6),f(11,"input",7),l()()(),o(12,"tbody"),F(13,yl,10,7,null,null,H),l()()()()),e&2&&(a(6),y(" ",t.lang.locals.indexer_name," "),a(2),y(" ",t.lang.locals.actions," "),a(3),m("formControl",t.searchControl)("placeholder",t.lang.locals.search_indexer),a(2),E(t.filteredIndexers))},dependencies:[z,re,J,Me,W,we],data:{animation:[wr]}})};var Sr=$e("contentAnimation",[Te(":enter",[Fn(".content-item",[ie({opacity:0,transform:"translateY(20px)"}),En(100,[Ie("300ms ease-out",ie({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]);function Cl(n,i){if(n&1&&(o(0,"li"),c(1),l()),n&2){let e=i.$implicit;a(),u(e)}}function wl(n,i){if(n&1&&(o(0,"div",5)(1,"p",11),c(2),l(),o(3,"ul",12),F(4,Cl,2,1,"li",null,H),l()()),n&2){let e=d();a(2),y("",e.lang.locals.errors,":"),a(2),E(e.errorMessages())}}function Sl(n,i){if(n&1){let e=C();o(0,"div",7),f(1,"img",13),o(2,"div",14)(3,"p",15),c(4),l(),o(5,"p",16),c(6),l()(),o(7,"button",17),b("click",function(){let r=_(e).$index,s=d();return v(s.removeFile(r))}),S(),o(8,"svg",18),f(9,"path",19),l()()()}if(n&2){let e=i.$implicit;a(),m("src",e.extension==="json"?"assets/images/json-file.svg":"assets/images/pdf-file.svg",Ve),a(3),u(e.name),a(2),u(e.extension)}}function Il(n,i){if(n&1&&(o(0,"span"),c(1),l()),n&2){let e=d();a(),u(e.lang.locals.upload)}}function Tl(n,i){if(n&1&&(o(0,"span"),c(1),l()),n&2){let e=d();a(),y("",e.lang.locals.uploading,"...")}}var Ei=class n extends K(class{}){lang=p(P);adminService=p(fe);data=p(ge);ref=p(ue);uploadedFiles=[];errorMessages=w([]);isUploading=!1;onFileSelected(i){let e=i.target;!e.files||e.files.length===0||(this.errorMessages.set([]),Array.from(e.files).forEach(t=>{let r=t.name,s=r.split(".").pop()?.toLowerCase();if(s!=="json"&&s!=="pdf"){this.errorMessages.update(g=>[...g,`'${r}' ${this.lang.locals.not_supported_filetype}`]);return}s==="json"?this.validateJson(t):this.addFile(t,s)}),e.value="")}validateJson(i){return zi(this,null,function*(){let e=["url","title","content"],t=yield i.text();try{let r=JSON.parse(t);if(!e.every(g=>g in r)){this.errorMessages.update(g=>[...g,`'${i.name}' ${this.lang.locals.json_warning}  ${e.join(", ")}.`]);return}this.addFile(i,"json")}catch{this.errorMessages.update(r=>[...r,`'${i.name}' ${this.lang.locals.not_valid_json}`])}})}addFile(i,e){if(this.uploadedFiles.some(t=>t.name===i.name)){this.errorMessages.update(t=>[...t,`'${i.name}' ${this.lang.locals.file_already_added}`]);return}this.uploadedFiles.push({name:i.name,extension:e,file:i})}removeFile(i){this.uploadedFiles.splice(i,1)}uploadFiles(){this.isUploading=!0;let i=this.uploadedFiles.map(r=>r.file),{container_name:e,subfolder_name:t}=this.data;this.adminService.uploadBlobs(i,{container_name:e,subfolder_name:t}).pipe(T(this.destroy$),R(()=>{this.isUploading=!1,this.ref.close()})).subscribe()}static \u0275fac=(()=>{let i;return function(t){return(i||(i=ee(n)))(t||n)}})();static \u0275cmp=k({type:n,selectors:[["app-upload-storage-file-popup"]],standalone:!0,features:[O,A],decls:17,vars:6,consts:[[1,"flex","flex-col","w-[min(500px,80vw)]"],[1,"p-4","bg-primary","text-white"],[1,"p-4","min-h-0","flex","flex-auto","flex-col"],["id","fileInput","type","file","accept",".json,.pdf","multiple","",1,"hidden",3,"change"],["for","fileInput",1,"inline-block","cursor-pointer","text-center","bg-primary/90","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none"],[1,"mt-4","p-4","rounded-md","border-red-400","bg-red-100","border-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4","mt-6","max-h-56","overflow-y-auto"],[1,"border","border-gray-300","rounded-lg","p-4","flex","flex-col","items-center","bg-gray-50","relative","shadow-md"],[1,"flex","justify-end","mt-6","space-x-2","gap-4","p-4"],["type","button",1,"bg-gray-300","text-gray-800","font-medium","py-2","px-4","rounded-lg","hover:bg-gray-400","focus:ring-2","focus:ring-gray-200","focus:outline-none",3,"click"],["type","button",1,"bg-primary/90","text-white","font-medium","py-2","px-4","rounded-lg","hover:bg-primary","focus:ring-4","focus:ring-gray-300","focus:outline-none","disabled:opacity-50",3,"click","disabled"],[1,"text-red-600","font-medium"],[1,"list-disc","list-inside","text-red-500","text-sm"],["alt","file type",1,"size-12",3,"src"],[1,"mt-2","text-center","w-full"],[1,"text-gray-700","font-medium","text-sm","truncate"],[1,"text-gray-500","text-xs"],[1,"absolute","size-6","top-0.5","right-0.5","bg-red-500","hover:bg-red-600","text-white","text-xs","font-bold","py-1","px-2","rounded-full","flex","justify-center","items-center","text-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"fill-white","size-4"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1),c(2),l(),o(3,"div",2)(4,"input",3),b("change",function(s){return t.onFileSelected(s)}),l(),o(5,"label",4),c(6),l(),h(7,wl,6,1,"div",5),o(8,"div",6),F(9,Sl,10,3,"div",7,H),l()()(),o(11,"div",8)(12,"button",9),b("click",function(){return t.ref.close()}),c(13),l(),o(14,"button",10),b("click",function(){return t.uploadFiles()}),h(15,Il,2,1,"span")(16,Tl,2,1,"span"),l()()),e&2&&(a(2),u(t.lang.locals.file_storage),a(4),y(" ",t.lang.locals.choose_files," "),a(),x(t.errorMessages().length>0?7:-1),a(2),E(t.uploadedFiles),a(4),y(" ",t.lang.locals.cancel," "),a(),m("disabled",t.uploadedFiles.length===0||t.isUploading),a(),x(t.isUploading?16:15))}})};var kt=class n{container=G.required();selectionChange=new he;items=[];selectionBox=null;overlay=null;isSelecting=!1;isDragging=!1;boxStartX=0;boxStartY=0;selectedItems=new Set;el=p(me);renderer=p(zt);zone=p(Ft);constructor(){this.zone.runOutsideAngular(()=>{document.addEventListener("click",this.onDocumentClick,!0)})}registerItem(i){this.items.push(i)}toggleSelection(i,e){let t=this.items.find(r=>r.item()===i);t&&(t.setSelected(e),e?this.selectedItems.add(i):this.selectedItems.delete(i),this.emitSelectionChange())}addSelection(i){this.selectedItems.add(i),this.emitSelectionChange()}isSelected(i){return this.selectedItems.has(i)}onContainerClick(i){let e=i.target;if(this.isDragging||this.isIgnoredElement(e))return;this.items.some(s=>s.el.nativeElement.contains(i.target))||this.clearSelection()}onMouseDown(i){i.button===0&&this.zone.runOutsideAngular(()=>{let e=this.el.nativeElement.getBoundingClientRect();this.boxStartX=i.clientX-e.left,this.boxStartY=i.clientY-e.top,this.createSelectionBox(),this.isSelecting=!0,this.isDragging=!1,document.addEventListener("mousemove",this.debouncedMouseMove),document.addEventListener("mouseup",this.onMouseUp)})}onMouseMove=i=>{if(!this.isSelecting||!this.selectionBox)return;let e=this.el.nativeElement.getBoundingClientRect(),t=Math.min(Math.max(i.clientX-e.left,0),e.width),r=Math.min(Math.max(i.clientY-e.top,0),e.height),s=Math.min(this.boxStartX,t),g=Math.min(this.boxStartY,r),I=Math.abs(t-this.boxStartX),B=Math.abs(r-this.boxStartY);this.renderer.setStyle(this.selectionBox,"left",`${s}px`),this.renderer.setStyle(this.selectionBox,"top",`${g}px`),this.renderer.setStyle(this.selectionBox,"width",`${I}px`),this.renderer.setStyle(this.selectionBox,"height",`${B}px`),this.isDragging=!0,this.updateSelectedItems(s,g,s+I,g+B)};onMouseUp=()=>{this.zone.runOutsideAngular(()=>{this.isSelecting=!1,this.cleanupSelectionBox(),this.isDragging&&this.zone.run(()=>this.emitSelectionChange()),document.removeEventListener("mousemove",this.debouncedMouseMove),document.removeEventListener("mouseup",this.onMouseUp)})};createSelectionBox(){this.overlay||(this.overlay=this.renderer.createElement("div"),this.renderer.addClass(this.overlay,"selection-overlay"),this.renderer.setStyle(this.overlay,"position","absolute"),this.renderer.setStyle(this.overlay,"top","0"),this.renderer.setStyle(this.overlay,"left","0"),this.renderer.setStyle(this.overlay,"width","100%"),this.renderer.setStyle(this.overlay,"height","100%"),this.renderer.setStyle(this.overlay,"z-index","10"),this.renderer.setStyle(this.overlay,"pointer-events","none"),this.renderer.appendChild(this.el.nativeElement,this.overlay)),this.selectionBox||(this.selectionBox=this.renderer.createElement("div"),this.renderer.addClass(this.selectionBox,"selection-box"),this.renderer.setStyle(this.selectionBox,"position","absolute"),this.renderer.setStyle(this.selectionBox,"background","rgba(100, 149, 237, 0.3)"),this.renderer.setStyle(this.selectionBox,"border","1px dashed #6495ED"),this.renderer.setStyle(this.selectionBox,"pointer-events","none"),this.renderer.setStyle(this.selectionBox,"z-index","20"),this.renderer.appendChild(this.overlay,this.selectionBox))}cleanupSelectionBox(){this.selectionBox&&(this.renderer.setStyle(this.selectionBox,"width","0px"),this.renderer.setStyle(this.selectionBox,"height","0px"))}updateSelectedItems(i,e,t,r){let s=new Set;this.items.forEach(g=>{let I=g.getBoundingClientRect(),B=this.el.nativeElement.getBoundingClientRect(),Ye=I.top-B.top<r&&I.bottom-B.top>e&&I.left-B.left<t&&I.right-B.left>i;g.setSelected(Ye),Ye&&s.add(g.item())}),this.areSetsEqual(this.selectedItems,s)||(this.selectedItems=s,this.emitSelectionChange())}areSetsEqual(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}onDocumentClick=i=>{let e=i.target,t=this.el.nativeElement.contains(e),r=this.isIgnoredElement(e);!t&&!r&&this.zone.run(()=>this.clearSelection())};clearSelection(){this.selectedItems.clear(),this.items.forEach(i=>i.setSelected(!1)),this.emitSelectionChange()}emitSelectionChange(){this.zone.run(()=>{this.selectionChange.emit(new Set(this.selectedItems))})}debouncedMouseMove=this.debounce(i=>{this.onMouseMove(i)},16);debounce(i,e){let t;return function(...r){clearTimeout(t),t=setTimeout(()=>i(...r),e)}}onKeyDown(i){i.ctrlKey&&i.key==="a"&&(i.preventDefault(),this.selectAllItems())}selectAllItems(){this.items.forEach(i=>{i.setSelected(!0),this.selectedItems.add(i.item())}),this.emitSelectionChange()}isIgnoredElement(i){let e=i;for(;e;){if(e.hasAttribute("ignore-el"))return!0;e=e.parentElement}return!1}ngOnDestroy(){document.removeEventListener("click",this.onDocumentClick,!0),document.removeEventListener("mousemove",this.debouncedMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ce({type:n,selectors:[["","appSelectableContainer",""]],hostBindings:function(e,t){e&1&&b("click",function(s){return t.onContainerClick(s)})("mousedown",function(s){return t.onMouseDown(s)})("keydown",function(s){return t.onKeyDown(s)},!1,an)},inputs:{container:[1,"container"]},outputs:{selectionChange:"selectionChange"},exportAs:["selectableContainer"],standalone:!0})};var Mi=class n{item=G.required();el=p(me);container=p(kt);constructor(){this.container.registerItem(this),this.el.nativeElement.setAttribute("role","option")}setSelected(i){i?(this.el.nativeElement.classList.add("selected"),this.el.nativeElement.setAttribute("aria-selected","true")):(this.el.nativeElement.classList.remove("selected"),this.el.nativeElement.setAttribute("aria-selected","false"))}getBoundingClientRect(){return this.el.nativeElement.getBoundingClientRect()}onClick(i){let e=this.container.isSelected(this.item());i?this.container.toggleSelection(this.item(),!e):(this.container.clearSelection(),this.container.toggleSelection(this.item(),!e))}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ce({type:n,selectors:[["","appSelectableItem",""]],hostBindings:function(e,t){e&1&&b("click",function(s){return t.onClick(s.ctrlKey)})},inputs:{item:[1,"item"]},standalone:!0})};var kl=n=>({width:n}),Al=n=>({"rounded-md scale-105 !bg-gray-300 p-1 [&_span]:font-semibold [&_svg]:size-6 [&_svg]:fill-gray-700":n}),Fl=()=>["STORAGE_DELETE_BLOB_BY_TITLE"],El=()=>["RUN_INDEXER"],Ml=()=>["STORAGE_UPLOAD_BLOB"],Pl=()=>["STORAGE_DELETE_SUBFOLDER"];function Dl(n,i){if(n&1&&f(0,"div",15),n&2){let e=i.$implicit;m("ngStyle",L(1,kl,e+"%"))}}function Vl(n,i){if(n&1&&(o(0,"div",3)(1,"div",14),F(2,Dl,1,3,"div",15,H),l()()),n&2){let e=d();a(2),E(e.skeletonWidths)}}function Ll(n,i){if(n&1){let e=C();o(0,"button",17),b("click",function(){let r=_(e).$implicit,s=d(2);return v(s.updateQueryParams(r))}),S(),o(1,"svg",18),f(2,"path",19),l(),U(),o(3,"span",20),c(4),l()()}if(n&2){let e=i.$implicit,t=d(2);m("ngClass",L(3,Al,t.breadcrumbs()[0]===e)),a(3),m("title",e),a(),u(e)}}function Rl(n,i){if(n&1&&(F(0,Ll,5,5,"button",16,H),pe(2,"async")),n&2){let e=d();E(ei(2,0,e.containers$))}}function Ol(n,i){n&1&&(o(0,"span",22),c(1,"/"),l())}function Nl(n,i){if(n&1){let e=C();o(0,"button",21),b("click",function(){let r=_(e).$index,s=d();return v(s.navigateBreadcrumb(r))}),c(1),l(),h(2,Ol,2,0,"span",22)}if(n&2){let e=i.$implicit,t=i.$index,r=d();a(),y(" ",e," "),a(),x(t<r.breadcrumbs().length-1?2:-1)}}function Hl(n,i){if(n&1){let e=C();o(0,"button",24),b("click",function(){_(e);let r=d(2);return v(r.deleteFiles())}),S(),o(1,"svg",25),f(2,"path",26),l(),U(),o(3,"span"),c(4),l(),o(5,"span",27),c(6),l()()}if(n&2){let e=d(2);m("@slideFromBottom",void 0)("disabled",e.selectedItems.size===0),a(4),u(e.lang.locals.delete),a(2),y(" ",e.selectedItems.size," ")}}function Bl(n,i){n&1&&h(0,Hl,7,4,"button",23),n&2&&m("appHasPermission",M(1,Fl))}function Ul(n,i){if(n&1&&Z(0,30),n&2){d(3);let e=j(18);m("ngTemplateOutlet",e)}}function Gl(n,i){n&1&&(S(),o(0,"svg",25),f(1,"path",31),l())}function jl(n,i){if(n&1){let e=C();o(0,"button",29),b("click",function(){_(e);let r=d(2);return v(r.runIndexer())}),h(1,Ul,1,1,"ng-container",30)(2,Gl,2,0,":svg:svg",25),o(3,"span"),c(4),l()()}if(n&2){let e=d(2);m("@slideFromBottom",void 0),a(),x(e.isLoadingIndexer()?1:2),a(3),u(e.lang.locals.run_indexer)}}function $l(n,i){n&1&&h(0,jl,5,3,"button",28),n&2&&m("appHasPermission",M(1,El))}function Ql(n,i){n&1&&(o(0,"div",32),f(1,"div",33)(2,"div",34),l())}function ql(n,i){if(n&1&&(o(0,"div",12),F(1,Ql,3,0,"div",32,H),l()),n&2){let e=d();a(),E(e.skeletonList)}}function zl(n,i){if(n&1&&(o(0,"p",35),c(1),l()),n&2){let e=d(2);a(),y(" ",e.isSubfolder()?e.lang.locals.open_folder_tip:e.lang.locals.selection_tip," ")}}function Kl(n,i){if(n&1){let e=C();o(0,"button",39),b("click",function(){_(e);let r=d(3);return v(r.openFileUploadDialog())}),o(1,"div",40),S(),o(2,"svg",41),f(3,"path",42),l()()()}}function Wl(n,i){n&1&&h(0,Kl,4,0,"button",38),n&2&&m("appHasPermission",M(1,Ml))}function Zl(n,i){if(n&1){let e=C();o(0,"button",49),b("click",function(){_(e);let r=d(2).$implicit,s=d(2);return v(s.deleteFolder(r))}),S(),o(1,"svg",50),f(2,"path",26),l()()}}function Xl(n,i){if(n&1){let e=C();o(0,"div",45),b("dblclick",function(){_(e);let r=d().$implicit,s=d(2);return v(s.updateQueryParams(s.breadcrumbs()[0],r))}),f(1,"img",46),o(2,"span",47),c(3),l(),h(4,Zl,3,0,"button",48),l()}if(n&2){let e=d().$implicit,t=d(2);m("matTooltip",t.lang.locals.open_folder_tip),a(),m("src","assets/images/folder-colored.svg",Ve),a(),m("title",e),a(),u(e),a(),m("appHasPermission",M(5,Pl))}}function Yl(n,i){if(n&1){let e=C();Ue(0)(1),o(2,"div",44),f(3,"img",51),o(4,"span",47),c(5),l(),o(6,"button",52),b("click",function(r){_(e);let s=d().$implicit,g=d(2);return v(g.downloadBlob(r,g.breadcrumbs()[0],s))}),S(),o(7,"svg",50),f(8,"path",53),l()()()}if(n&2){let e=d().$implicit,t=d(2),r=e.split(".")[1],s=e.split("/")[1];a(2),m("item",e),it("data-item",e),a(),m("src","assets/images/"+(r==="pdf"?"pdf-file.svg":"json-file.svg"),Ve),a(),m("title",s),a(),u(s),a(),m("matTooltip",t.lang.locals.download)}}function Jl(n,i){if(n&1&&h(0,Xl,5,6,"div",43)(1,Yl,9,6,"div",44),n&2){let e=d(2);x(e.isSubfolder()?0:1)}}function es(n,i){if(n&1&&(o(0,"div",13),f(1,"img",54),o(2,"span",55),c(3),l()()),n&2){let e=d(2);a(),m("ngSrc","assets/images/no-files.svg"),a(2),u(e.lang.locals.no_files_message)}}function ts(n,i){if(n&1){let e=C();h(0,zl,2,1,"p",35),o(1,"div",36),b("selectionChange",function(r){_(e);let s=d();return v(s.onSelectionChange(r))}),h(2,Wl,1,2,"button",37),F(3,Jl,2,1,null,null,H),l(),h(5,es,4,2,"div",13)}if(n&2){let e=d();x(e.content().length?0:-1),a(),m("container",e.content())("@contentAnimation",void 0),a(),x(!e.isSubfolder()&&e.breadcrumbs().length?2:-1),a(),E(e.content()),a(2),x(!e.content().length&&e.breadcrumbs().length?5:-1)}}function is(n,i){if(n&1&&(o(0,"div",13),f(1,"img",56),o(2,"span",55),c(3),l()()),n&2){let e=d();a(),m("ngSrc","assets/images/select-item.svg"),a(2),u(e.lang.locals.select_container_message)}}function ns(n,i){n&1&&(o(0,"div",57)(1,"div",58),S(),o(2,"svg",59),f(3,"path",60)(4,"path",61),l(),U(),o(5,"span",62),c(6,"Loading..."),l()()())}var Rt=class n extends K(class{}){lang=p(P);adminService=p(fe);router=p(vn);route=p(bn);dialog=p(Pe);document=p(je);isContainerLoading=w(!0);loading=w(!1);isLoadingIndexer=w(!1);legalContainers$=this.adminService.getContainers().pipe(Bt(i=>i.filter(e=>e==="rera-legal")));containersExceptLegals$=this.adminService.getContainers().pipe(Bt(i=>i.filter(e=>!e.includes("legal"))));isReraLegal=w(this.router.url.split("/").at(-1).includes("rera-legal-storage"));containers$=Zi(()=>this.isReraLegal(),this.legalContainers$,this.containersExceptLegals$).pipe(T(this.destroy$),R(()=>this.isContainerLoading.set(!1)));breadcrumbs=w([]);isSubfolder=w(void 0);content=w([]);skeletonList=Array.from({length:10},(i,e)=>e).fill(0);skeletonWidths=Array.from({length:20},()=>Math.floor(Math.random()*50)+50);selectedItems=new Set;constructor(){super(),this.listenToQueryParams()}listenToQueryParams(){this.containers$.pipe(T(this.destroy$),ne(i=>this.route.queryParams.pipe(Bt(e=>({containerName:e.containerName,folderName:e.folderName,containers:i})))),$t(({containerName:i,containers:e})=>i?e.includes(i):!0),Fe((i,e)=>i.containerName===e.containerName&&i.folderName===e.folderName)).subscribe(({containerName:i,folderName:e})=>{this.handleNavigation(i,e)})}handleNavigation(i,e){i?(this.updateBreadcrumbs(i,e),e?this.openFolder(i,e):this.openContainer(i)):this.resetState()}updateQueryParams(i,e){let t={};i&&(t.containerName=i),t.folderName=e||null,this.router.navigate([],{relativeTo:this.route,queryParams:t,queryParamsHandling:"merge"})}openContainer(i){this.loading.set(!0),this.adminService.getSubfolder(i).pipe(T(this.destroy$),D(e=>{this.content.set(e),this.isSubfolder.set(!0)}),se(e=>(console.error("Error loading container:",e),Q([]))),R(()=>this.loading.set(!1))).subscribe()}openFolder(i,e){this.loading.set(!0),this.adminService.getBlobs(i,e).pipe(T(this.destroy$),D(t=>{this.content.set(t),this.isSubfolder.set(!1)}),se(t=>(console.error("Error loading folder:",t),Q([]))),R(()=>this.loading.set(!1))).subscribe()}navigateBreadcrumb(i){if(i===this.breadcrumbs().length-1)return;let e=this.breadcrumbs().slice(0,i+1);if(this.breadcrumbs.set(e),e.length===1){let t=e[0];this.updateQueryParams(t)}else{let t=e[0],r=e[e.length-1];this.updateQueryParams(t,r)}}updateBreadcrumbs(i,e){this.breadcrumbs.set(e?[i,e]:[i])}resetState(){this.breadcrumbs.set([]),this.content.set([]),this.isSubfolder.set(void 0)}openFileUploadDialog(){let[i,e]=this.breadcrumbs();this.dialog.open(Ei,{data:{container_name:i,subfolder_name:e}})}onSelectionChange(i){this.selectedItems=i}deleteFolder(i){let e=this.breadcrumbs()[0];e&&this.dialog.open(Ae,{data:{htmlContent:`<p class="flex flex-col gap-4 text-center text-xl text-gray-700">${this.lang.locals.delete_message} <span class="italic text-sm text-primary">${i}<span> ? </p>`}}).afterClosed().pipe(ne(t=>t?this.adminService.deleteSubfolder(e,i).pipe(T(this.destroy$),D(()=>this.openContainer(e)),se(r=>(console.error("Error deleting folder:",r),Q(null)))):Q(null))).subscribe()}deleteFiles(){let[i,e]=this.breadcrumbs(),t=Array.from(this.selectedItems);t.length&&this.dialog.open(Ae,{data:{htmlContent:this.generateSelectedItemsHtml(Array.from(this.selectedItems))}}).afterClosed().pipe(ne(r=>r?this.adminService.deleteByListOfTitles(i,e,t).pipe(T(this.destroy$),D(()=>this.openFolder(i,e)),D(()=>this.selectedItems.clear()),se(s=>(console.error("An error occurred:",s),Q(null)))):Q(null))).subscribe()}generateSelectedItemsHtml(i){let e=r=>{let s=r.split(".").pop()?.toLowerCase();return s==="pdf"?"assets/images/pdf-file.svg":"assets/images/json-file.svg"},t=i.map(r=>`
         <li
          class="flex items-center border-b border-gray-200 truncate hover:bg-gray-100 transition-all duration-200 p-4">
            <img src="${e(r)}" alt="item icon" class="w-8 h-8 object-contain" />
            <span title="${r}" class="truncate text-xs text-gray-800 w-full">${r}</span>
          </li>
        `).join("");return`
      <div
        class="w-full max-w-lg mx-auto bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden">
        <div class="p-4 bg-gray-100 border-b border-gray-300">
          <p class="text-sm text-gray-700 font-medium">${this.lang.locals.delete_message}?</p>
        </div>
        <ul class="flex flex-col p-4 overflow-auto max-h-80">
          ${t}
        </ul>
      </div>
    `}runIndexer(i="rera-legal"){this.isLoadingIndexer.set(!0);let e="";this.adminService.runIndexer(i).pipe(T(this.destroy$),se(()=>(e=`Failed to run indexer: ${i}`,Q(null))),R(()=>this.isLoadingIndexer.set(!1))).subscribe(()=>{e||alert(`${i} run successfully.`)})}downloadBlob(i,e,t){i.stopPropagation(),this.adminService.downloadBlob(e,t).pipe(D(r=>{let{data:s}=r,g=this.document.createElement("a");g.href=s??"",g.download=t,document.body.appendChild(g),g.click(),document.body.removeChild(g)})).subscribe(r=>{console.log(r)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-admin-storage"]],standalone:!0,features:[O,A],decls:19,vars:5,consts:[["loader",""],[1,"flex","flex-wrap","gap-4","md:gap-0","md:flex-nowrap","w-full","h-[75vh]","rounded-md"],["appPerfectScroll","",1,"flex","flex-col","items-start","md:max-h-full","max-h-80","gap-2","p-4","w-full","md:w-1/6","border-l-2","rounded-md","md:rounded-tr-md","md:rounded-br-md","border-gray-500","bg-gray-100","overflow-auto"],[1,"w-full"],[1,"relative","w-full","md:w-5/6","bg-gray-200","rounded-md","md:rounded-none","md:rounded-tl-md","md:rounded-bl-md"],[1,"w-full","sticky","top-0","bg-gray-100","border-b","border-gray-300","rounded-tr-md","rounded-tl-md","h-14","flex","flex-nowrap","items-center","px-6","pt-2","gap-4","shadow-md","z-10"],[1,"flex","items-center","gap-2","overflow-hidden"],[1,"rtl:mr-auto","ltr:ml-auto"],[1,"flex","gap-2"],["appIgnoreSelection","","type","button",1,"relative","inline-flex","items-center","px-5","py-2","text-sm","font-semibold","text-white","bg-gray-500","rounded-md","hover:bg-gray-600","focus:ring-4","focus:ring-primary/60","focus:outline-none","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["appIgnoreSelection","","type","button",1,"relative","inline-flex","gap-2","items-center","px-5","py-2","text-sm","font-semibold","text-white","bg-primary/95","rounded-md","hover:bg-primary","focus:ring-4","focus:ring-gray-500/60","focus:outline-none","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed"],["appPerfectScroll","",1,"overflow-y-auto","h-[calc(100%-3.5rem)]","p-4"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-8","mt-4"],[1,"flex","flex-col","justify-center","items-center"],[1,"animate-pulse","flex","flex-col","gap-4"],[1,"h-5","bg-gray-300","rounded","w-5/6",3,"ngStyle"],["type","button",1,"bg-transparent","inline-flex","gap-2","justify-around","items-center","w-full","transition-all",3,"ngClass"],["type","button",1,"bg-transparent","inline-flex","gap-2","justify-around","items-center","w-full","transition-all",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-5","fill-gray-700/50"],["d","M2 4.6V9.4C2 10.3 2.5 11 3.2 11H20.9C21.5 11 22.1 10.3 22.1 9.4V4.6C22 3.7 21.5 3 20.8 3H3.2C2.5 3 2 3.7 2 4.6M10 8V6H9V8H10M5 8H7V6H5V8M20 9H4V5H20V9M2 14.6V19.4C2 20.3 2.5 21 3.2 21H20.9C21.5 21 22.1 20.3 22.1 19.4V14.6C22.1 13.7 21.6 13 20.9 13H3.2C2.5 13 2 13.7 2 14.6M10 18V16H9V18H10M5 18H7V16H5V18M20 19H4V15H20V19Z"],[1,"text-gray-500","text-sm","truncate","w-full",3,"title"],[1,"text-primary/80","truncate","hover:underline","hover:text-primary","text-sm","font-medium","cursor-pointer","bg-transparent","border-none","focus:outline-none","focus:ring-2","ring-blue-300","transition-all","duration-200",3,"click"],[1,"text-gray-500","font-medium"],["appIgnoreSelection","","type","button","class","relative inline-flex items-center px-5 py-2 text-sm font-semibold text-white bg-gray-500 rounded-md hover:bg-gray-600 focus:ring-4 focus:ring-primary/60 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"appHasPermission"],["appIgnoreSelection","","type","button",1,"relative","inline-flex","items-center","px-5","py-2","text-sm","font-semibold","text-white","bg-gray-500","rounded-md","hover:bg-gray-600","focus:ring-4","focus:ring-primary/60","focus:outline-none","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5","me-2"],["d","M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"],[1,"absolute","-top-2","-right-2","flex","items-center","justify-center","w-6","h-6","text-xs","font-bold","text-white","bg-primary","rounded-full","ring-2","ring-white"],["appIgnoreSelection","","type","button","class","relative inline-flex gap-2 items-center px-5 py-2 text-sm font-semibold text-white bg-primary/95 rounded-md hover:bg-primary focus:ring-4 focus:ring-gray-500/60 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",3,"click",4,"appHasPermission"],["appIgnoreSelection","","type","button",1,"relative","inline-flex","gap-2","items-center","px-5","py-2","text-sm","font-semibold","text-white","bg-primary/95","rounded-md","hover:bg-primary","focus:ring-4","focus:ring-gray-500/60","focus:outline-none","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click"],[3,"ngTemplateOutlet"],["d","M8,5.14V19.14L19,12.14L8,5.14Z"],[1,"animate-pulse","flex","flex-col","items-center","px-4","pb-4"],[1,"w-20","h-20","bg-gray-300","rounded"],[1,"w-16","h-4","bg-gray-300","mt-2","rounded"],[1,"text-gray-700","text-base","opacity-40"],["appSelectableContainer","",1,"relative","grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-8","mt-4",3,"selectionChange","container"],["type","button",1,"flex","flex-col","items-center","bg-transparent","outline-none"],["type","button","class","flex flex-col items-center bg-transparent outline-none",3,"click",4,"appHasPermission"],["type","button",1,"flex","flex-col","items-center","bg-transparent","outline-none",3,"click"],[1,"flex","size-32","justify-center","items-center","cursor-pointer","hover:bg-gray-300","transition-colors","border-dashed","border-2","border-gray-500","group","rounded-lg"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-12","opacity-50","group-hover:opacity-100","fill-gray-700","group-hover:scale-105","transition-transform"],["d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"],[1,"content-item","relative","flex","flex-col","items-center","px-4","pb-4","cursor-pointer","group",3,"matTooltip"],["appSelectableItem","",1,"content-item","flex","flex-col","items-center","p-4","rounded-lg","[&.selected]:shadow-lg","group","relative",3,"item"],[1,"content-item","relative","flex","flex-col","items-center","px-4","pb-4","cursor-pointer","group",3,"dblclick","matTooltip"],["alt","folder",1,"w-20","h-auto",3,"src"],[1,"text-sm","text-center","text-gray-700","mt-2","truncate","w-full",3,"title"],["class","outline-none flex items-center justify-center border-2 border-gray-300 hover:scale-125 transition-all duration-300 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto absolute top-0 right-6 rounded-full size-6 bg-red-500 hover:bg-red-600",3,"click",4,"appHasPermission"],[1,"outline-none","flex","items-center","justify-center","border-2","border-gray-300","hover:scale-125","transition-all","duration-300","opacity-0","pointer-events-none","group-hover:opacity-100","group-hover:pointer-events-auto","absolute","top-0","right-6","rounded-full","size-6","bg-red-500","hover:bg-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-4"],["alt","file",1,"w-20","h-auto",3,"src"],[1,"outline-none","flex","items-center","justify-center","border-2","border-gray-300","hover:scale-125","transition-all","duration-300","opacity-0","pointer-events-none","group-hover:opacity-100","group-hover:pointer-events-auto","absolute","top-0","right-6","rounded-full","size-6","bg-accent-500","hover:bg-accent-600",3,"click","matTooltip"],["d","M2 12H4V17H20V12H22V17C22 18.11 21.11 19 20 19H4C2.9 19 2 18.11 2 17V12M12 15L17.55 9.54L16.13 8.13L13 11.25V2H11V11.25L7.88 8.13L6.46 9.55L12 15Z"],["priority","2","alt","no files","width","450","height","300",1,"drop-shadow-md",3,"ngSrc"],[1,"text-gray-700","text-xl"],["priority","3","alt","no files","width","300","height","300",1,"drop-shadow-md",3,"ngSrc"],[1,"loader","flex","items-center","justify-center"],["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"inline","size-6","text-gray-200","animate-spin","fill-primary"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(e,t){e&1&&(o(0,"div",1)(1,"div",2),h(2,Vl,4,0,"div",3)(3,Rl,3,2),l(),o(4,"div",4)(5,"div",5)(6,"nav",6),F(7,Nl,3,2,null,null,H),l(),o(9,"div",7)(10,"div",8),h(11,Bl,1,2,"button",9)(12,$l,1,2,"button",10),l()()(),o(13,"div",11),h(14,ql,3,0,"div",12)(15,ts,6,5)(16,is,4,2,"div",13),l()()(),h(17,ns,7,0,"ng-template",null,0,de)),e&2&&(a(2),x(t.isContainerLoading()?2:3),a(5),E(t.breadcrumbs()),a(4),x(t.selectedItems.size>0?11:-1),a(),x(t.isReraLegal()?12:-1),a(2),x(t.loading()?14:15),a(2),x(!t.breadcrumbs().length&&!t.isContainerLoading()?16:-1))},dependencies:[un,$,fn,pn,kt,Mi,wt,zn,ci,W,le,we],styles:[".selected[_ngcontent-%COMP%]{border-radius:.375rem;border-width:2px;border-style:dashed;--tw-border-opacity: 1;border-color:rgba(var(--app-primary-500-rgb),var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity));--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.content-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]::selection{background-color:transparent!important;box-shadow:none!important;border:none!important}"],data:{animation:[di,Sr]}})};var rs=(n,i)=>({"flex-col justify-center items-start":n,"justify-start items-center":i}),Pi=class n{color=G("primary");icon=G.required();title=G.required();description=G.required();link=G.required();shape=G.required();lang=p(P);isVertical=Re(()=>this.shape()==="vertical");isOutline=Re(()=>this.color().includes("outline"));svgIcons=Un;colorClasses={primary:"bg-primary/90 border-primary/90 hover:border-primary-600/90 hover:bg-primary-600/90 [&_.arrow]:bg-primary-600/90 text-primary-contrast [&_.icon]:text-primary-contrast/70 [&_.desc]:text-primary-contrast/70",accent:"bg-accent/90 border-accent/90 hover:border-accent-600/90 hover:bg-accent-600/90 [&_.arrow]:bg-accent-600/90 text-accent-contrast [&_.icon]:text-accent-contrast/70 [&_.desc]:text-accent-contrast/70",secondary:"bg-secondary/90 border-secondary/90 hover:border-secondary-600/90 hover:bg-secondary-600/90 [&_.arrow]:bg-secondary-600/90 text-secondary-contrast [&_.icon]:text-secondary-contrast/70 [&_.desc]:text-secondary-contrast/70",tertiary:"bg-tertiary/90 border-tertiary/90 hover:border-tertiary-600/90 hover:bg-tertiary-600/90 [&_.arrow]:bg-tertiary-600/90 text-tertiary-contrast [&_.icon]:text-tertiary-contrast/70 [&_.desc]:text-tertiary-contrast/70","primary-outline":"bg-white/70 border-primary-100 hover:bg-primary-50/80 [&_.arrow]:bg-primary-50/80 text-primary [&_.icon]:text-primary-400 [&_.desc]:text-primary-400","accent-outline":"bg-white/70 border-accent-100 hover:bg-accent-50/80 [&_.arrow]:bg-accent-50/80 text-accent [&_.icon]:text-accent-400 [&_.desc]:text-accent-400","secondary-outline":"bg-white/70 border-secondary-100 hover:bg-secondary-50/80 [&_.arrow]:bg-secondary-50/80 text-secondary [&_.icon]:text-secondary-400 [&_.desc]:text-secondary-400","tertiary-outline":"bg-white/70 border-tertiary-100 hover:bg-tertiary-50/80 [&_.arrow]:bg-tertiary-50/80 text-tertiary [&_.icon]:text-tertiary-400 [&_.desc]:text-tertiary-400"};static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-nav-card"]],inputs:{color:[1,"color"],icon:[1,"icon"],title:[1,"title"],description:[1,"description"],link:[1,"link"],shape:[1,"shape"]},standalone:!0,features:[A],decls:10,vars:18,consts:[[3,"routerLink","ngClass"],[1,"arrow","absolute","top-2","end-2","p-2","rounded-full",3,"innerHTML"],[1,"icon","[&_svg]:!size-10",3,"innerHTML"],[1,"flex","flex-col","items-start","justify-center","gap-2"],[1,"title","text-lg","font-semibold"],[1,"desc"]],template:function(e,t){e&1&&(o(0,"a",0),f(1,"div",1),pe(2,"sanitizer"),f(3,"div",2),pe(4,"sanitizer"),o(5,"div",3)(6,"p",4),c(7),l(),o(8,"p",5),c(9),l()()()),e&2&&(nt("h-full relative flex p-8 rounded-lg border-2 hover:shadow-lg gap-4 transition-all ",t.colorClasses[t.color()],""),m("routerLink",t.link())("ngClass",Ge(15,rs,t.isVertical(),!t.isVertical())),a(),m("innerHTML",Ee(2,9,t.lang.isLtr()?t.svgIcons.ARROW_TOP_RIGHT:t.svgIcons.ARROW_TOP_LEFT,"html"),et),a(2),m("innerHTML",Ee(4,12,t.svgIcons[t.icon()],"html"),et),a(4),u(t.title()),a(2),u(t.description()))},dependencies:[ft,$,yn,xn,Gn],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"]})};var as=(n,i)=>({"grid grid-cols-2":n,"flex flex-col":i}),Ir=n=>({"h-full":n});function os(n,i){if(n&1&&f(0,"app-nav-card",3),n&2){let e=d().$implicit,t=d();m("ngClass",L(6,Ir,t.isVertical(e)))("color",t.pages[e].color)("title",t.lang.locals[t.pages[e].title])("description",t.lang.locals[t.pages[e].desc])("icon",t.pages[e].icon)("link",t.pages[e].link)}}function ls(n,i){if(n&1&&f(0,"app-nav-card",3),n&2){let e=d(2).$implicit,t=d();m("ngClass",L(6,Ir,t.isVertical(e)))("color",t.pages[e+1].color)("title",t.lang.locals[t.pages[e+1].title])("description",t.lang.locals[t.pages[e+1].desc])("icon",t.pages[e+1].icon)("link",t.pages[e+1].link)}}function ss(n,i){if(n&1&&h(0,ls,1,8,"app-nav-card",2),n&2){let e=d().$implicit,t=d();m("appHasPermission",t.pages[e+1].permissions)}}function cs(n,i){if(n&1&&(o(0,"div",1),h(1,os,1,8,"app-nav-card",2)(2,ss,1,1,"app-nav-card",3),l()),n&2){let e=i.$implicit,t=d();m("ngClass",Ge(3,as,t.isVertical(e),!t.isVertical(e))),a(),m("appHasPermission",t.pages[e].permissions),a(),x(e+1<t.pages.length?2:-1)}}var Ot=class n{lang=p(P);pages=[{title:"storage",desc:"storage_desc",link:"./storage",icon:"STORAGE",color:"primary",permissions:["STORAGE_GET_ALL_CONTAINERS"]},{title:"legal_document_management",desc:"legal_document_desc",link:"./rera-legal-storage",icon:"LEGAL",color:"primary-outline",permissions:["ADMIN_GET_LEGAL_CONTAINER"]},{title:"indexers",desc:"indexers_desc",link:"./indexer",icon:"INDEXER",color:"accent",permissions:["INDEXES_NAMES"]},{title:"users",desc:"users_desc",link:"./users",icon:"USERS",color:"accent-outline",permissions:["ADMIN_GET_ALL_USER"]},{title:"web_crawler",desc:"web_crawling_desc",link:"./crawler",icon:"WEB_CRAWLER",color:"secondary",permissions:["MEDIA_CRAWL"]},{title:"faq_manager",desc:"faq_manager_desc",link:"./faq",icon:"FAQ",color:"secondary-outline",permissions:["FAQ_GET_ALL_QUESTIONS"]},{title:"social_media_crawling",desc:"social_media_crawling_desc",link:"./social-media",icon:"MEDIA_CRAWLER",color:"tertiary",permissions:["SOCIAL_MEDIA"]}];getIndices(){let i=[];for(let e=0;e<=this.pages.length;e++)e%2===0&&i.push(e);return i}isVertical(i){return!((i-2)%8<4&&(i-2)%8>=0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-admin"]],standalone:!0,features:[A],decls:4,vars:0,consts:[[1,"grid","grid-cols-2","gap-4"],[1,"w-full","h-full","gap-4",3,"ngClass"],["class","w-full","shape","vertical",3,"ngClass","color","title","description","icon","link",4,"appHasPermission"],["shape","vertical",1,"w-full",3,"ngClass","color","title","description","icon","link"]],template:function(e,t){e&1&&(o(0,"div",0),F(1,cs,3,6,"div",1,rt),l(),f(3,"router-outlet")),e&2&&(a(),E(t.getIndices()))},dependencies:[ft,$,_n,Pi,we]})};var ds=[{path:"",component:Ot},{path:"storage",component:Rt,canActivate:[Ze.canActivate],data:{permissions:We.STORAGE_GROUP,hasAnyPermission:!0}},{path:"rera-legal-storage",component:Rt,canActivate:[Ze.canActivate],data:{permissions:We.LEGAL_GROUP,hasAnyPermission:!0}},{path:"indexer",component:Fi,canActivate:[Ze.canActivate],data:{permissions:We.INDEXES_GROUP,hasAnyPermission:!0}},{path:"crawler",component:Ai,canActivate:[Ze.canActivate],data:{permissions:We.WEB_CRAWLING_GROUP,hasAnyPermission:!0}},{path:"users",component:xi,canActivate:[Ze.canActivate],data:{permissions:We.USER_GROUP,hasAnyPermission:!0}},{path:"faq",component:gi,canActivate:[Ze.canActivate],data:{permissions:We.FAQ_GROUP,hasAnyPermission:!0}},{path:"social-media",component:hi,canActivate:[Ze.canActivate],data:{permissions:We.SOCIAL_GROUP,hasAnyPermission:!0}},{path:"**",redirectTo:""}],T1=ds;export{T1 as default};
