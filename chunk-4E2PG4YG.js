import{b as C}from"./chunk-7KIPUCN5.js";import{a as g}from"./chunk-ONGERPF6.js";import{c as u,d}from"./chunk-UIAIQN6Q.js";import{b as m,f as p}from"./chunk-AIKLA22F.js";import{A as i,M as c,a,ha as l,na as n}from"./chunk-QOFJAIQO.js";function b(e){return class extends e{clone(t){let s=this.constructor;return Object.assign(new s,this,t)}}}var o=class extends b(g){constructor(t="",s="user"){super();this.content=t;this.role=s}end_turn;function_call;tool_calls};var f=class e{http=n(m);urlService=n(p);store=n(C);sendMessage(r){return this.messages.update(t=>[...t,new o(r,"user")]),this.http.post(this.urlService.URLS.CHAT,a(a({messages:this.messages()},this.store.streamId()?{stream_id:this.store.streamId()}:null),this.conversationId()?{conversation_id:this.conversationId()}:null)).pipe(c(t=>{throw new o().clone({content:t.message,role:"error"}),new Error(t)})).pipe(i(t=>(t.message.content=u(d(t.message.content,t.message)),t.message=new o().clone(t.message),this.conversationId.set(t.message.conversation_id),this.messages.update(s=>[...s,t.message]),t)))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};export{o as a,f as b};
