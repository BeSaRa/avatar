import{a as G}from"./chunk-S2R2MWN2.js";import{c as I}from"./chunk-IMBJOZZZ.js";import"./chunk-HYTE6KQS.js";import{a as D}from"./chunk-C67PCAHG.js";import"./chunk-HJCQZTYH.js";import{b as j}from"./chunk-55XIR25M.js";import"./chunk-WPFYNPVQ.js";import"./chunk-O7XBGNFH.js";import"./chunk-HTUSIXJQ.js";import{b as Q,c as B}from"./chunk-ORQAB527.js";import"./chunk-Y4YGGR7O.js";import"./chunk-OK5S6IU3.js";import"./chunk-ZZLVWEOU.js";import{b as F}from"./chunk-7YC6CIPS.js";import"./chunk-UUNGGFH6.js";import{Ac as y,Bc as w,Db as L,Eb as M,Gd as R,Ha as s,Ia as c,Ja as v,Ka as x,Lc as E,Nc as z,Ob as _,Oc as O,Rb as k,Sb as f,Va as b,Xb as V,ac as n,bc as r,cc as m,gc as g,jc as d,lc as p,sb as l,ta as C,vd as q,wc as A,xa as S,xc as T,yc as H,zc as u}from"./chunk-FK5TGTUL.js";var $=["avatarVideoComponent"],N=i=>({"-translate-x-full":i}),P=(i,o)=>({"bg-green-700":i,"bg-red-600":o});function J(i,o){i&1&&(n(0,"div",2)(1,"div",15),m(2,"div")(3,"div")(4,"div")(5,"div"),r()())}function K(i,o){if(i&1){let e=g();n(0,"div",16),d("click",function(){s(e);let a=p();return c(a.qrCodeOpened=!1)}),n(1,"div",17),d("click",function(a){return s(e),c(a.stopPropagation())}),n(2,"button",18),d("click",function(){s(e);let a=p();return c(a.qrCodeOpened=!1)}),v(),n(3,"svg",19),m(4,"path",20),r()(),x(),m(5,"qrcode",21),n(6,"span",22),u(7),r()()()}if(i&2){let e=p();l(5),f("qrdata",e.getQRData())("width",256),l(2),w("streamId: ",e.store.streamId(),"")}}function U(i,o){if(i&1&&(n(0,"button",9)(1,"div",23)(2,"span"),u(3),r()()()),i&2){p();let e=H(1);l(3),y(e.onlineStatus())}}function W(i,o){if(i&1){let e=g();n(0,"button",24),d("click",function(){s(e);let a=p();return c(a.toggleStream())}),u(1),r()}if(i&2){let e=p(),t=H(1);f("ngClass",O(2,P,e.store.isStreamStarted(),e.store.isStreamStopped())),l(),w(" ",t.onlineStatus()," ")}}function X(i,o){if(i&1){let e=g();n(0,"button",11),d("click",function(){s(e);let a=p();return c(a.qrCodeOpened=!0)}),v(),n(1,"svg",12)(2,"title"),u(3,"QR code"),r(),m(4,"path",25),r()()}}var h=class i{avatarVideoComponent=M.required("avatarVideoComponent");fullScreen="h-screen w-screen flex items-center justify-center";text=L("");element=C(b);store=C(j);lang=C(F);router=C(I);settingsOpened=!1;qrCodeOpened=!1;recognizing(o){this.text.set(o)}toggleFullScreen(){document.fullscreenElement?document.exitFullscreen().then():this.element.nativeElement.requestFullscreen().then()}toggleStream(){this.store.isStreamLoading()||(this.store.isStreamStopped()?this.avatarVideoComponent().start$.next():this.avatarVideoComponent().stop$.next())}toggleSettings(){this.settingsOpened=!this.settingsOpened}getQRData(){return`${this.getOrigin()}/control?streamId=${this.store.streamId()}`}getOrigin(){let o=location.href.lastIndexOf(this.router.url);return location.href.slice(0,o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-avatar"]],viewQuery:function(e,t){e&1&&A(t.avatarVideoComponent,$,5),e&2&&T()},hostVars:1,hostBindings:function(e,t){e&2&&k("class",t.fullScreen)},standalone:!0,features:[E],decls:19,vars:9,consts:[["avatarVideoComponent",""],[3,"size"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/50","h-full","fixed"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/80","h-full","fixed"],["id","settings",1,"bg-black/50","fixed","left-0","rounded","p-4","transition-transform",3,"ngClass"],[1,"relative","flex","flex-col"],["aria-label","Settings",1,"absolute","-top-2","-right-14","z-20","bg-black/50","rounded-r","text-white",3,"click","matTooltip"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-10"],["d","M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"],["aria-label","close stream",1,"text-white","cursor-progress","size-20","bg-orange-500","rounded-full"],["matRipple","","aria-label","close stream",1,"text-white","size-20","rounded-full",3,"ngClass"],["matRipple","",1,"text-white",3,"click"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"size-20"],["d","M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"],["matRipple","",1,"text-white"],[1,"lds-ellipsis"],[1,"z-50","flex","items-center","justify-center","w-full","bg-black/80","h-full","fixed",3,"click"],[1,"relative","flex","flex-col","justify-center","items-center","gap-2",3,"click"],[1,"absolute","-top-11","-left-11","w-12","h-12","p-1","text-white","rounded-full","bg-black/85",3,"click"],["fill","currentColor","viewBox","0 0 24 24"],["d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"],[3,"qrdata","width"],[1,"p-1","text-white"],[1,"pulse","rounded-full","w-full","h-full","bg-primary","flex","justify-center","items-center"],["matRipple","","aria-label","close stream",1,"text-white","size-20","rounded-full",3,"click","ngClass"],["d","M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z"]],template:function(e,t){if(e&1){let a=g();m(0,"app-avatar-video",1,0),_(2,J,6,0,"div",2)(3,K,8,3,"div",3),n(4,"div",4)(5,"div",5)(6,"button",6),d("click",function(){return s(a),c(t.toggleSettings())}),v(),n(7,"svg",7)(8,"title"),u(9,"cog"),r(),m(10,"path",8),r()(),_(11,U,4,1,"button",9)(12,W,2,5,"button",10),x(),n(13,"button",11),d("click",function(){return s(a),c(t.toggleFullScreen())}),v(),n(14,"svg",12)(15,"title"),u(16,"fullscreen"),r(),m(17,"path",13),r()(),_(18,X,5,0,"button",14),r()()}e&2&&(f("size","life-size"),l(2),V(t.store.isStreamLoading()?2:-1),l(),V(t.qrCodeOpened&&t.store.hasStream()?3:-1),l(),f("ngClass",z(7,N,!t.settingsOpened)),l(2),f("matTooltip",t.lang.locals.settings),l(5),V(t.store.isStreamLoading()?11:12),l(7),V(t.store.hasStream()?18:-1))},dependencies:[R,q,D,G,B,Q]})};export{h as default};
