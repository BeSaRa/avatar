import{f as p}from"./chunk-ZZL437ZE.js";import{B as c,Cb as h,ga as l,ja as o,ld as g,ma as a,r as s,sa as n}from"./chunk-JDPSA7SZ.js";var f={BASE_URL:"",SPEECH_TOKEN:"speech/token",CHAT:"chatbot/chat",INTERACTIVE:"interactive",INTERACTIVE_CHAT:"chatbot/chat/interactive",INTERACTIVE_ACTION:"interactive/action",AVATAR:"avatar",LOCALS:"http://localhost:3333",VIDEO_INDEXER:"https://www.videoindexer.ai/embed",AI_SEARCH:"search/search",CHAT_HISTORY:"chat-history",DOC_INTELLIGENCE:"document-intelligence",MEDIA:"media",ADMIN:"admin",USER:"user",VIDEO_ANALYZER:"vi"};var i=class r{urls=f;URLS={};config;static hasTrailingSlash(t){return(t+"").indexOf("/")===(t+"").length-1}static hasPrefixSlash(t){return(t+"").indexOf("/")===0}static removeTrailingSlash(t){return r.hasTrailingSlash(t)?(t+"").substring(0,(t+"").length-1):t}static removePrefixSlash(t){return r.hasPrefixSlash(t)?r.removePrefixSlash((t+"").substring(1,(t+"").length)):t}prepareUrls(){this.URLS.BASE_URL=r.removeTrailingSlash(this.config.BASE_URL);for(let t in this.urls)t!=="BASE_URL"&&Object.prototype.hasOwnProperty.call(this.urls,t)&&(this.URLS[t]=this.addBaseUrl(this.urls[t]));return this.URLS}addBaseUrl(t){return(this.config.CONFIG.EXTERNAL_PROTOCOLS??[]).some(L=>t.toLowerCase().indexOf(L)===0)?t:this.URLS.BASE_URL+"/"+r.removePrefixSlash(t)}setConfigService(t){this.config=t}static \u0275fac=function(e){return new(e||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};var d=class r{http=n(p);urlService=n(i);locals={};currentLanguage="ar";localChange=h(this.currentLanguage);langChange$=new s(this.currentLanguage);document=n(g);localFile="resources/locals.json";constructor(){this.listenToLanguageChange()}load(){return this.http.get(this.localFile).pipe(o(t=>this.localization=t)).pipe(o(()=>this.prepareCurrentLocal()))}prepareCurrentLocal(){Object.keys(this.localization).forEach(t=>{this.locals[t]=this.localization[t][this.currentLanguage]}),this.locals=new Proxy(this.locals,{get(t,e){return t[e]?t[e]:`[MISSING KEY]: ${e}`}})}changeLanguage(t){this.currentLanguage=t,this.prepareCurrentLocal(),this.langChange$.next(t)}toggleLanguage(){this.changeLanguage(this.currentLanguage==="ar"?"en":"ar")}listenToLanguageChange(){this.langChange$.subscribe(t=>{console.log({lang:t}),this.document.dir=t==="ar"?"rtl":"ltr";let e=this.document.querySelector("html");e&&(e.lang=t),this.localChange.set(t)})}createLocal(t){return this.http.post(this.urlService.URLS.LOCALS,t).pipe(l(e=>this.load().pipe(c(()=>e))))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{i as a,d as b};
