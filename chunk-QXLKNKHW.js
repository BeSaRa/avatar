import{b as u}from"./chunk-IU2XX2OT.js";import{a as b}from"./chunk-X3SJNNNV.js";import{c as g,d}from"./chunk-7CAE2MLH.js";import{b as p,f as C}from"./chunk-WNFCBQ6S.js";import{B as c,N as l,a as i,ia as m,oa as a}from"./chunk-JP5ZFO5H.js";function f(e){return class extends e{clone(o){let n=this.constructor;return Object.assign(new n,this,o)}}}var r=class extends f(b){constructor(o="",n="user"){super();this.content=o;this.role=n}end_turn;function_call;tool_calls};var h=class e{http=a(p);urlService=a(C);store=a(u);sendMessage(s,o){let n=`${this.urlService.URLS.CHAT}/${o}`;return this.messages.update(t=>[...t,new r(s,"user")]),this.http.post(n,i(i({messages:this.messages()},this.store.streamId()?{stream_id:this.store.streamId()}:null),this.conversationId()?{conversation_id:this.conversationId()}:null)).pipe(l(t=>{throw new r().clone({content:t.message,role:"error"}),new Error(t)})).pipe(c(t=>(t.message.content=g(d(t.message.content,t.message)),t.message=new r().clone(t.message),this.conversationId.set(t.message.conversation_id),this.messages.update(T=>[...T,t.message]),t)))}static \u0275fac=function(o){return new(o||e)};static \u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})};export{r as a,h as b};
