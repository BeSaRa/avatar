import{c as At}from"./chunk-A5HZJFT4.js";import{a as St,c as Nt}from"./chunk-BC5X3TTQ.js";import{A as ft,F as V,a as Tt,ca as $,da as Dt,ea as Mt,ga as K,ha as vt,ia as kt,ma as Ot,o as It,p as ut,pa as Ct}from"./chunk-LIRWLR35.js";import{c as Rt,d as F,f as O,g as j,i as Y}from"./chunk-OK5S6IU3.js";import{a as ht,b as pt}from"./chunk-EIL224M6.js";import{e as mt}from"./chunk-GP2ALFCL.js";import{$b as k,$c as dt,Ac as U,Db as A,Ha as Z,Ia as J,Ib as nt,Kc as G,Na as u,Nb as y,P as M,Qb as st,Ra as tt,Va as et,Wb as at,a as h,ac as S,bc as rt,fc as ot,hc as ct,ia as X,ic as _t,jc as lt,ka as c,kc as L,md as Et,na as p,oa as q,q as E,qa as g,rc as P,sa as m,sb as f,sc as x,ta as _,tb as l,tc as H,vb as it,x as D,xa as B,ya as Q,yc as w,za as v}from"./chunk-2X7BKT3F.js";function xt(n,a){if(n&1){let t=ot();k(0,"div",1)(1,"button",2),_t("click",function(){Z(t);let i=L();return J(i.action())}),w(2),S()()}if(n&2){let t=L();f(2),U(" ",t.data.action," ")}}var Ht=["label"];function wt(n,a){}var Ut=Math.pow(2,31)-1,N=class{constructor(a,t){this._overlayRef=t,this._afterDismissed=new E,this._afterOpened=new E,this._onAction=new E,this._dismissedByAction=!1,this.containerInstance=a,a._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(a){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(a,Ut))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},gt=new g("MatSnackBarData"),T=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},Gt=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275dir=v({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}}return n})(),Vt=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275dir=v({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}}return n})(),Ft=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275dir=v({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}}return n})(),Bt=(()=>{class n{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(e){return new(e||n)(l(N),l(gt))}}static{this.\u0275cmp=B({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[G],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,i){e&1&&(k(0,"div",0),w(1),S(),y(2,xt,3,1,"div",1)),e&2&&(f(),U(" ",i.data.message,`
`),f(),at(i.hasAction?2:-1))},dependencies:[St,Gt,Vt,Ft],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return n})(),jt={snackBarState:Rt("state",[j("void, hidden",O({transform:"scale(0.8)",opacity:0})),j("visible",O({transform:"scale(1)",opacity:1})),Y("* => visible",F("150ms cubic-bezier(0, 0, 0.2, 1)")),Y("* => void, * => hidden",F("75ms cubic-bezier(0.4, 0.0, 1, 1)",O({opacity:0})))])},Yt=0,$t=(()=>{class n extends Mt{constructor(t,e,i,s,r){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=r,this._document=_(Et),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new E,this._onExit=new E,this._onEnter=new E,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${Yt++}`,this.attachDomPortal=o=>{this._assertNotAttached();let d=this._portalOutlet.attachDomPortal(o);return this._afterPortalAttached(),d},r.politeness==="assertive"&&!r.announcementMessage?this._live="assertive":r.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();let e=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),e}attachTemplatePortal(t){this._assertNotAttached();let e=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),e}onAnimationEnd(t){let{fromState:e,toState:i}=t;if((i==="void"&&e!=="void"||i==="hidden")&&this._completeExit(),i==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(r=>t.classList.add(r)):t.classList.add(e)),this._exposeToModals();let i=this._label.nativeElement,s="mdc-snackbar__label";i.classList.toggle(s,!i.querySelector(`.${s}`))}_exposeToModals(){let t=this._liveElementId,e=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<e.length;i++){let s=e[i],r=s.getAttribute("aria-owns");this._trackedModals.add(s),r?r.indexOf(t)===-1&&s.setAttribute("aria-owns",r+" "+t):s.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{let e=t.getAttribute("aria-owns");if(e){let i=e.replace(this._liveElementId,"").trim();i.length>0?t.setAttribute("aria-owns",i):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),e=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&e){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),e.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(e){return new(e||n)(l(tt),l(et),l(dt),l(Tt),l(T))}}static{this.\u0275cmp=B({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,i){if(e&1&&(P(K,7),P(Ht,7)),e&2){let s;x(s=H())&&(i._portalOutlet=s.first),x(s=H())&&(i._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(e,i){e&1&&lt("@state.done",function(r){return i.onAnimationEnd(r)}),e&2&&ct("@state",i._animationState)},standalone:!0,features:[nt,G],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){e&1&&(k(0,"div",1)(1,"div",2,0)(3,"div",3),y(4,wt,0,0,"ng-template",4),S(),rt(5,"div"),S()()),e&2&&(f(5),st("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[K],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[jt.snackBarState]}})}}return n})();function Kt(){return new T}var zt=new g("mat-snack-bar-default-options",{providedIn:"root",factory:Kt}),z=(()=>{class n{get _openedSnackBarRef(){let t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,e,i,s,r,o){this._overlay=t,this._live=e,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=r,this._defaultConfig=o,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Bt,this.snackBarContainerComponent=$t,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e="",i){let s=h(h({},this._defaultConfig),i);return s.data={message:t,action:e},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){let i=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=u.create({parent:i||this._injector,providers:[{provide:T,useValue:e}]}),r=new $(this.snackBarContainerComponent,e.viewContainerRef,s),o=t.attach(r);return o.instance.snackBarConfig=e,o.instance}_attach(t,e){let i=h(h(h({},new T),this._defaultConfig),e),s=this._createOverlay(i),r=this._attachSnackBarContainer(s,i),o=new N(r,s);if(t instanceof it){let d=new Dt(t,null,{$implicit:i.data,snackBarRef:o});o.instance=r.attachTemplatePortal(d)}else{let d=this._createInjector(i,o),Lt=new $(t,void 0,d),Pt=r.attachComponentPortal(Lt);o.instance=Pt.instance}return this._breakpointObserver.observe(ut.HandsetPortrait).pipe(X(s.detachments())).subscribe(d=>{s.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),i.announcementMessage&&r._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(o,i),this._openedSnackBarRef=o,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),e.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(e.duration))}_createOverlay(t){let e=new kt;e.direction=t.direction;let i=this._overlay.position().global(),s=t.direction==="rtl",r=t.horizontalPosition==="left"||t.horizontalPosition==="start"&&!s||t.horizontalPosition==="end"&&s,o=!r&&t.horizontalPosition!=="center";return r?i.left("0"):o?i.right("0"):i.centerHorizontally(),t.verticalPosition==="top"?i.top("0"):i.bottom("0"),e.positionStrategy=i,this._overlay.create(e)}_createInjector(t,e){let i=t&&t.viewContainerRef&&t.viewContainerRef.injector;return u.create({parent:i||this._injector,providers:[{provide:N,useValue:e},{provide:gt,useValue:t.data}]})}static{this.\u0275fac=function(e){return new(e||n)(m(Ot),m(ft),m(u),m(It),m(n,12),m(zt))}}static{this.\u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ie=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=Q({type:n})}static{this.\u0275inj=q({providers:[z],imports:[Ct,vt,Nt,V,Bt,V]})}}return n})();var C=class n{_snackBar=_(z);showError(a,t){this._snackBar.open(a,t)}showInfo(a,t){this._snackBar.open(a,t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};var b={CHATBOT:"CHATBOT",MEDIA:"MEDIA",INTERACTIVE_CHAT:"INTERACTIVE_CHAT",SEARCH:"SEARCH",AVATAR:"AVATAR",SPEECH:"SPEECH",DOCUMENT_INTELLIGENCE:"DOCUMENT_INTELLIGENCE",ADMIN:"ADMIN",CHAT_HISTORY:"CHAT_HISTORY",ADMIN_CRAWLER:"ADMIN_CRAWLER",ADMIN_UPLOAD_BLOB:"ADMIN_UPLOAD_BLOB",ADMIN_GET_BLOB:"ADMIN_GET_BLOB",ADMIN_GET_ALL_CONTAINERS:"ADMIN_GET_ALL_CONTAINERS",ADMIN_GET_SUBFOLDER:"ADMIN_GET_SUBFOLDER",ADMIN_DELETE_SUBFOLDER:"ADMIN_DELETE_SUBFOLDER",ADMIN_DELETE_BLOB_BY_METADATA:"ADMIN_DELETE_BLOB_BY_METADATA",ADMIN_DELETE_BLOB_BY_TITLE:"ADMIN_DELETE_BLOB_BY_TITLE",ADMIN_RESET_INDEX:"ADMIN_RESET_INDEX",ADMIN_RUN_INDEXER:"ADMIN_RUN_INDEXER",ADMIN_INDEX_INFO:"ADMIN_INDEX_INFO",ADMIN_INDEXES_NAMES:"ADMIN_INDEXES_NAMES",MEDIA_GENERATE_REPORT:"MEDIA_GENERATE_REPORT",MEDIA_CRAWL:"MEDIA_CRAWL",MEDIA_SENTIMENT:"MEDIA_SENTIMENT",MEDIA_DETECT_LANGUAGE:"MEDIA_DETECT_LANGUAGE",MEDIA_KEY_PHRASES:"MEDIA_KEY_PHRASES",MEDIA_ENTITY_RECOGNITION:"MEDIA_ENTITY_RECOGNITION",MEDIA_IMAGE_ANALYSIS:"MEDIA_IMAGE_ANALYSIS",MEDIA_IMAGE_EMBEDDING:"MEDIA_IMAGE_EMBEDDING",CHATBOT_WEBSITE:"CHATBOT_WEBSITE",CHATBOT_UPLOAD_DOCUMENT:"CHATBOT_UPLOAD_DOCUMENT",INTERACTIVE_DEPARTMENT_TYPES:"INTERACTIVE_DEPARTMENT_TYPES",INTERACTIVE_VACATION_TYPES:"INTERACTIVE_VACATION_TYPES",INTERACTIVE_SUBMIT_FORM:"INTERACTIVE_SUBMIT_FORM",INTERACTIVE_APPROVE:"INTERACTIVE_APPROVE",INTERACTIVE_REJECT:"INTERACTIVE_REJECT",INTERACTIVE_PENDING:"INTERACTIVE_PENDING",INTERACTIVE_FILTER_FORMS:"INTERACTIVE_FILTER_FORMS",INTERACTIVE_ALL_FORMS:"INTERACTIVE_ALL_FORMS",AVATAR_START_STREAM:"AVATAR_START_STREAM",AVATAR_SEND_CANDIDATE:"AVATAR_SEND_CANDIDATE",AVATAR_SEND_ANSWER:"AVATAR_SEND_ANSWER",AVATAR_RENDER_TEXT:"AVATAR_RENDER_TEXT",AVATAR_STOP_RENDER:"AVATAR_STOP_RENDER",AVATAR_CLOSE_STREAM:"AVATAR_CLOSE_STREAM",SPEECH_TOKEN:"SPEECH_TOKEN",SPEECH_TRANSCRIPT:"SPEECH_TRANSCRIPT",CHAT_HISTORY_CONVERSATION:"CHAT_HISTORY_CONVERSATION",CHAT_HISTORY_ALL_CONVERSATION:"CHAT_HISTORY_ALL_CONVERSATION",CHAT_HISTORY_CHAT:"CHAT_HISTORY_CHAT",CHAT_HISTORY_SENTIMENT:"CHAT_HISTORY_SENTIMENT",CHAT_HISTORY_ADD_FEEDBACK:"CHAT_HISTORY_ADD_FEEDBACK",CHAT_HISTORY_BOT_NAMES:"CHAT_HISTORY_BOT_NAMES",CHAT_HISTORY_ADD_MSG:"CHAT_HISTORY_ADD_MSG",DOCUMENT_INTELLIGENCE_ANALYZE_PDF:"DOCUMENT_INTELLIGENCE_ANALYZE_PDF",SEARCH_BOT_NAME:"SEARCH_BOT_NAME",ADMIN_ADD_PERMISSION_TO_USER:"ADMIN_ADD_PERMISSION_TO_USER",ADMIN_ADD_PERMISSION_TO_TABLE:"ADMIN_ADD_PERMISSION_TO_TABLE",CHATBOT_LEGAL:"CHATBOT_LEGAL",CHATBOT_MEDIA:"CHATBOT_MEDIA",CHATBOT_INTERACTIVE:"CHATBOT_INTERACTIVE",CHATBOT_QREP:"CHATBOT_QREP",CHATBOT_DOC_INTELLIGENCE:"CHATBOT_DOC_INTELLIGENCE",ADMIN_ADD_USER:"ADMIN_ADD_USER",ADMIN_DELETE_USER:"ADMIN_DELETE_USER",ADMIN_UPDATE_USER:"ADMIN_UPDATE_USER",ADMIN_GET_ALL_USER:"ADMIN_GET_ALL_USER",ADMIN_GET_USER:"ADMIN_GET_USER",ADMIN_GET_PERMISSION:"ADMIN_GET_PERMISSION",ADMIN_GET_ALL_PERMISSION:"ADMIN_GET_ALL_PERMISSION",ADMIN_REMOVE_PERMISSION:"ADMIN_REMOVE_PERMISSION",ADMIN_ASSIGN_PERMISSION:"ADMIN_ASSIGN_PERMISSION",ADMIN_GET_ALL_SETTINGS:"ADMIN_GET_ALL_SETTINGS",ADMIN_ADD_SETTING:"ADMIN_ADD_SETTING",ADMIN_UPDATE_SETTING:"ADMIN_UPDATE_SETTING",ADMIN_DELETE_SETTING:"ADMIN_DELETE_SETTING",ADMIN_GET_SETTING:"ADMIN_GET_SETTING"};var I=class{_permissions=[];_permissionsKeys=[];_refresh_token=A("");_access_token=A("");isRefreshing=A(!1);set permissions(a){this._permissions=a,this._permissionsKeys=a.map(t=>t._Permission__key)}get permissions(){return this._permissions}get permissionsKeys(){return this._permissionsKeys}get access_token(){return this._access_token()}set access_token(a){this._access_token.set(a)}set refresh_token(a){this._refresh_token.set(a)}get refresh_token(){return this._refresh_token()}hasPermission(a){return this._permissionsKeys.includes(b[a])}hasAnyPermission(a){return a.some(t=>this._permissionsKeys.includes(b[t]))}hasAllPermission(a){return a.every(t=>this._permissionsKeys.includes(b[t]))}hasToken(){return!!this.access_token&&!this.isRefreshing()}};var R={USER:"user",PERMISSIONS_KEYS:"permissionsKeys"};var W={TOKEN_HEADER_KEY:"Authorization"};var yt=class n{_http=_(mt);_urlService=_(ht);_router=_(At);messagesService=_(C);lang=_(pt);$applicationUser=A(new I);$isAuthenticated=A(!1);login(a,t){let e=`${this._urlService.URLS.USER}/login`;return this._http.post(e,{username:a,password:t}).pipe(c(i=>this.$applicationUser.update(s=>(s.access_token=i.access_token,s.refresh_token=i.refresh_token,s.permissions=i.permissions,s))),c(i=>localStorage.setItem(R.USER,JSON.stringify(i))),c(i=>localStorage.setItem(R.PERMISSIONS_KEYS,JSON.stringify(i.permissions.map(s=>s._Permission__key)))),c(()=>this.$isAuthenticated.set(!0)),c(()=>this._router.navigate(["/home"])),c(()=>this.messagesService.showInfo(`${this.lang.locals.welcome_user}, ${a}! ${this.lang.locals.welcome_back}`)),M(()=>(this.$isAuthenticated.set(!1),this.messagesService.showError(`${this.lang.locals.login_failed}`),D(new I))))}generateRefreshToken(){let a=`${this._urlService.URLS.USER}/refresh-token`;this.$applicationUser().isRefreshing.set(!0);let t={headers:{[W.TOKEN_HEADER_KEY]:this.$applicationUser().refresh_token}};return this._http.get(a,t).pipe(c(e=>this.$applicationUser.update(i=>(i.refresh_token=e.refresh_token,i))),c(()=>this.$applicationUser().isRefreshing.set(!1)),M(()=>(this.$applicationUser().isRefreshing.set(!1),D({refresh_token:""}))))}generateAccessToken(){let a=`${this._urlService.URLS.USER}/access-token`,t={headers:{[W.TOKEN_HEADER_KEY]:this.$applicationUser().access_token}};return this._http.get(a,t).pipe(c(e=>this.$applicationUser.update(i=>(i.access_token=e.access_token,i)),M(()=>(this._router.navigate(["/auth/login"]),D({access_token:""})))))}tryAuthenticate(){let a=localStorage.getItem(R.USER);a&&this.$applicationUser.update(t=>{let e=JSON.parse(a);return t.access_token=e.access_token,t.refresh_token=e.refresh_token,t.permissions=e.permissions,t}),this.$isAuthenticated.set(!!a),!this.$isAuthenticated()&&this._router.navigate(["/auth/login"])}logout(){this.$isAuthenticated.set(!1),this.$applicationUser.set(new I),localStorage.removeItem(R.USER),this._router.navigate(["/auth/login"])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{zt as a,Ie as b,C as c,W as d,yt as e};
