import{a as bt}from"./chunk-5UO7E6B5.js";import{a as J}from"./chunk-LW5BK7FI.js";import{b as xt,c as Y}from"./chunk-JBQTXQGX.js";import{b as Ze,c as q,f as Qe,g as et,h as tt,i as rt}from"./chunk-PUOFABER.js";import{a as _t,b as gt,c as D}from"./chunk-V7ZCYTZO.js";import{a as A,b as ue,c as me,d as Z,e as he,f as N,g as Nt,h as ve,i as ye,j as u,k as Q,l as wt,m as Rt,n as kt,o as Tt,p as Mt,q as Pt}from"./chunk-4XZWUBEK.js";import{a as Ye,b as Je}from"./chunk-LX6LIX5A.js";import{b as ht}from"./chunk-SZ6QA4YV.js";import{a as ot}from"./chunk-3MSRG7IT.js";import{a as vt,c as yt}from"./chunk-JPXSHT5W.js";import{a as Ct,b as St}from"./chunk-PMUIQYPP.js";import{a as It}from"./chunk-BBST3SGX.js";import{b as F}from"./chunk-ZPRGCDHT.js";import{b as At}from"./chunk-Q4Y5B4TC.js";import{b as it,c as nt,g as st}from"./chunk-OEPHUH2H.js";import{a as Et}from"./chunk-B3LQ2IDW.js";import"./chunk-WK44F4QQ.js";import"./chunk-OK5S6IU3.js";import{A as mt,c as lt,e as X,h as pt,i as dt,p as ct,s as ft,x as ut}from"./chunk-SLIRYUJ2.js";import{a as at,b as O}from"./chunk-UR3XF2OI.js";import{f as We,g as Ke,h as qe,i as Xe}from"./chunk-7UCX2ERW.js";import{$a as Le,B as Ne,Ba as Pe,Bb as Ve,Bc as _,Ca as Oe,Cc as E,Dc as Ge,H as we,Na as Fe,Nc as M,Ob as $,P as G,Ra as De,Ub as fe,X as Re,Yc as He,Z as ke,Zb as z,a as S,ad as $e,cc as y,dc as m,ec as W,ha as ce,jd as ze,ka as I,la as Te,lc as K,na as k,pb as H,pd as P,q as Ie,qa as Me,sb as v,ta as c,ub as Ue,wb as Be,x as Ee,xa as T,y as Ae,yb as je}from"./chunk-OUJ2UPQI.js";var Ot={VERSION:"v0.0.13",BASE_ENVIRONMENT:"",ENVIRONMENTS_URLS:{},BASE_URL:"",API_VERSION:"v1",KUNA:"",EXTERNAL_PROTOCOLS:["http","https"]};var x=class t{http=c(We);CONFIG=Ot;BASE_URL="";load(){return this.http.get("resources/environment.json").pipe(I(r=>this.CONFIG=S(S({},this.CONFIG),r))).pipe(I(()=>this.prepareBaseUrl()))}prepareBaseUrl(){if(!Object.prototype.hasOwnProperty.call(this.CONFIG,"ENVIRONMENTS_URLS")||!Object.keys(this.CONFIG.ENVIRONMENTS_URLS).length)throw Error("There is no ENVIRONMENTS_URLS Property or empty provided inside resources/environment.json file Kindly check it");if(typeof this.CONFIG.BASE_ENVIRONMENT>"u")throw Error("there is no BASE_ENVIRONMENT_INDEX provided inside resources/environment.json file");if(typeof this.CONFIG.ENVIRONMENTS_URLS[this.CONFIG.BASE_ENVIRONMENT]>"u")throw Error("the provided BASE_ENVIRONMENT not exists inside ENVIRONMENTS_URLS array in resources/environment.json file");return this.BASE_URL=this.CONFIG.ENVIRONMENTS_URLS[this.CONFIG.BASE_ENVIRONMENT],Object.prototype.hasOwnProperty.call(this.CONFIG,"API_VERSION")&&this.CONFIG.API_VERSION&&(this.BASE_URL.lastIndexOf("/")!==this.BASE_URL.length-1&&(this.BASE_URL+="/"),this.BASE_URL+=this.CONFIG.API_VERSION),this.BASE_URL}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var ee=class t{config=c(x);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-version"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"bg-white/60","text-primary","flex","items-center","justify-center","text-sm","px-3","rounded-xl"]],template:function(e,a){e&1&&(y(0,"div",0)(1,"span"),_(2),m()()),e&2&&(v(2),E(a.config.CONFIG.VERSION))},changeDetection:0})};function tr(t,r){t&1&&(y(0,"mat-error"),_(1,"required"),m())}function rr(t,r){t&1&&(y(0,"mat-error"),_(1,"required"),m())}function ar(t,r){t&1&&(y(0,"mat-error"),_(1,"required"),m())}var te=class t{lang=c(O);fb=c(ut);ref=c(vt);form=this.fb.nonNullable.group({key:["",X.required],ar:["",X.required],en:["",X.required]});save=new Ie;ngOnInit(){this.listenToSave()}listenToSave(){this.save.pipe(Ne(()=>({key:this.form.value.key.toLowerCase().trim().replaceAll(" ","_"),ar:this.form.value.ar,en:this.form.value.en})),Re(r=>this.lang.createLocal(r))).subscribe(()=>{this.ref.close()})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-local-popup"]],standalone:!0,features:[M],decls:24,vars:10,consts:[[1,"flex","flex-col","overflow-hidden","dialog-container","min-w-[400px]"],[1,"bg-primary","text-white","text-xl","p-4"],[1,"p-4","flex","flex-col","flex-auto",3,"formGroup"],[1,"w-full"],["formControlName","key","type","text","matInput",""],["formControlName","ar","matInput",""],["formControlName","en","matInput",""],[1,"p-4"],["mat-raised-button","",1,"primary",3,"click","disabled"]],template:function(e,a){e&1&&(y(0,"div",0)(1,"div",1),_(2),m(),y(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),_(6),m(),W(7,"input",4),$(8,tr,2,0,"mat-error"),m(),y(9,"mat-form-field",3)(10,"mat-label"),_(11),m(),y(12,"textarea",5),_(13," "),m(),$(14,rr,2,0,"mat-error"),m(),y(15,"mat-form-field",3)(16,"mat-label"),_(17),m(),y(18,"textarea",6),_(19," "),m(),$(20,ar,2,0,"mat-error"),m()(),y(21,"div",7)(22,"button",8),K("click",function(){return a.save.next()}),_(23),m()()()),e&2&&(v(2),E(a.lang.locals.localization),v(),fe("formGroup",a.form),v(3),E(a.lang.locals.local_key),v(2),z(a.form.controls.key.hasError("required")?8:-1),v(3),E(a.lang.locals.arabic_local),v(3),z(a.form.controls.ar.hasError("required")?14:-1),v(3),E(a.lang.locals.english_local),v(3),z(a.form.controls.en.hasError("required")?20:-1),v(2),fe("disabled",a.form.invalid),v(),Ge(" ",a.lang.locals.save," "))},dependencies:[ot,it,st,ht,mt,lt,pt,dt,ct,ft,nt]})};var re=class t{dialog=c(yt);lang=c(O);store=c(F);document=c(P);storeEffect=ze(()=>{this.document.body.style.setProperty("--app-primary-color",this.store.backgroundColor())});openLocalDialog(r){r.preventDefault(),this.dialog.open(te,{direction:document.dir})}toggleLanguage(){this.lang.toggleLanguage()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-root"]],hostBindings:function(e,a){e&1&&K("keyup.Control.Alt.a",function(i){return a.openLocalDialog(i)},!1,H)("keyup.Control.Alt.\u0634",function(i){return a.openLocalDialog(i)},!1,H)("keyup.Control.Alt.l",function(i){return a.toggleLanguage(i)},!1,H)},standalone:!0,features:[M],decls:2,vars:0,consts:[[1,"absolute","left-5","bottom-5"]],template:function(e,a){e&1&&W(0,"router-outlet")(1,"app-version",0)},dependencies:[Ze,ee]})};var Dt=(t,r)=>{let e=c(x),a=c(D);return r(t.clone({setHeaders:S({},e.CONFIG.BASE_ENVIRONMENT==="AQARAT_STG"?{"x-functions-key":e.CONFIG.KUNA}:void 0)})).pipe(ke(()=>{t.context.has(bt)&&a.showInfo("Done successfully !")}))};var Lt=(t,r)=>{let e=c(D),a=c(P);return r(t).pipe(G(o=>{if(console.error(o),o.status===0)switch(a.defaultView?.navigator.onLine){case!0:e.showError("Error!!");break;case!1:e.showError("Network Error");break}else or(o);return Ae(()=>o)}))},or=t=>{let r=c(D),e=c(q);switch(t.status){case 400:case 409:case 422:r.showError(t.error.message);break;case 401:e.navigate(["auth/login"]);break;case 403:r.showError("Forbidden");break;case 404:r.showError("Not found");break;case 500:case 502:case 503:r.showError("Internal Server Error");break;default:break}};var Ut=(t,r)=>{let e=c(Y),a=t;return t.context.get(Ct)||(a=t.clone({setHeaders:S({},e.$applicationUser().hasToken()?{[xt.TOKEN_HEADER_KEY]:`Bearer ${e.$applicationUser().access_token}`}:void 0)})),r(a)};var ae=class{send(r){return delete r.$$__service_name__$$,r}receive(r){return r}};var oe=()=>{let t=c(F),r=c(St);return t.streamId()&&r.closeStream().subscribe(),confirm("Stream will be closed")};var w=class t{applicationUserService=c(Y);router=c(q);canActivate(){return this.applicationUserService.$isAuthenticated()||this.applicationUserService.tryAuthenticate(),this.applicationUserService.$isAuthenticated()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var Bt=[{path:"home",loadComponent:()=>import("./chunk-2DAXU3Y3.js"),loadChildren:()=>import("./chunk-QRJ7E54R.js"),canActivate:[w]},{path:"avatar",loadComponent:()=>import("./chunk-2C7JN5RS.js"),pathMatch:"full",canActivate:[w,J.canActivate],data:{permissions:["AVATAR"],hasAnyPermission:!1},canDeactivate:[oe]},{path:"ms-avatar",loadComponent:()=>import("./chunk-DRMLCTZJ.js"),pathMatch:"full",canActivate:[w,J.canActivate],data:{permissions:["AVATAR"],hasAnyPermission:!1},canDeactivate:[oe]},{path:"video-generator",loadComponent:()=>import("./chunk-CLUARRM3.js"),pathMatch:"full",canActivate:[w,J.canActivate],data:{permissions:["AVATAR"],hasAnyPermission:!1},canDeactivate:[oe]},{path:"auth",loadComponent:()=>import("./chunk-P5R66Q2Y.js"),loadChildren:()=>import("./chunk-PWI37KW3.js")},{path:"**",redirectTo:"home"}];var ir="@",nr=(()=>{class t{constructor(e,a,o,i,n){this.doc=e,this.delegate=a,this.zone=o,this.animationType=i,this.moduleImpl=n,this._rendererFactoryPromise=null,this.scheduler=c(Be,{optional:!0}),this.loadingSchedulerFn=c(sr,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-QWZTSQOZ.js").then(o=>o),a;return this.loadingSchedulerFn?a=this.loadingSchedulerFn(e):a=e(),a.catch(o=>{throw new Te(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:i})=>{this._engine=o(this.animationType,this.doc);let n=new i(this.delegate,this._engine,this.zone);return this.delegate=n,n})}createRenderer(e,a){let o=this.delegate.createRenderer(e,a);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let i=new _e(o);return a?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(n=>{let s=n.createRenderer(e,a);i.use(s),this.scheduler?.notify(10)}).catch(n=>{i.use(o)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(a){Ue()}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})(),_e=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let e of this.replay)e(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,e){this.delegate.appendChild(r,e)}insertBefore(r,e,a,o){this.delegate.insertBefore(r,e,a,o)}removeChild(r,e,a){this.delegate.removeChild(r,e,a)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,a,o){this.delegate.setAttribute(r,e,a,o)}removeAttribute(r,e,a){this.delegate.removeAttribute(r,e,a)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,a,o){this.delegate.setStyle(r,e,a,o)}removeStyle(r,e,a){this.delegate.removeStyle(r,e,a)}setProperty(r,e,a){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(r,e,a)),this.delegate.setProperty(r,e,a)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,a){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(r,e,a)),this.delegate.listen(r,e,a)}shouldReplay(r){return this.replay!==null&&r.startsWith(ir)}},sr=new Me("");function jt(t="animations"){return Ve("NgAsyncAnimations"),Pe([{provide:je,useFactory:(r,e,a)=>new nr(r,e,a,t),deps:[P,Ye,De]},{provide:Le,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Vt={provide:He,useFactory:(t,r,e,a,o)=>()=>we([t.load()]).pipe(I(()=>r.setConfigService(t)),I(()=>r.prepareUrls()),ce(()=>a.generateSpeechToken().pipe(I(i=>e.get(F).updateSpeechToken(i)),G(i=>(console.error("Error generating speech token:",i),Ee(null))))),ce(()=>o.load())),deps:[x,at,Fe,It,O],multi:!0};var Gt={providers:[{provide:Et,useValue:{position:"above"}},{provide:_t,useValue:{horizontalPosition:"right",verticalPosition:"top",duration:2e3,panelClass:["rounded-md","bg-primary","text-white","font-semibold"]}},Vt,Ke(Xe(),qe([Lt,Dt,Ut])),$e({eventCoalescing:!0}),Qe(Bt,et(),tt(),rt()),jt(),Pt(Mt()),Oe(gt),At([ae])]};var Ht=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),B={toTextLines:function(t){var r=[],e;for(t=[].concat(t);t.length;)e=t.pop(),typeof e=="string"?r.unshift.apply(r,e.split(`
`)):Array.isArray(e)?t.push.apply(t,e):A(t)||r.unshift(""+e);return r},textSize:function(t,r,e){var a=[].concat(r),o=a.length,i=t.font,n=0,s;for(t.font=e.string,s=0;s<o;++s)n=Math.max(t.measureText(a[s]).width,n);return t.font=i,{height:o*e.lineHeight,width:n}},bound:function(t,r,e){return Math.max(t,Math.min(r,e))},arrayDiff:function(t,r){var e=t.slice(),a=[],o,i,n,s;for(o=0,n=r.length;o<n;++o)s=r[o],i=e.indexOf(s),i===-1?a.push([s,1]):e.splice(i,1);for(o=0,n=e.length;o<n;++o)a.push([e[o],-1]);return a},rasterize:function(t){return Math.round(t*Ht)/Ht}};function ge(t,r){var e=r.x,a=r.y;if(e===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var o=t.x-e,i=t.y-a,n=Math.sqrt(o*o+i*i);return{x:n?o/n:0,y:n?i/n:-1}}function lr(t,r,e,a,o){switch(o){case"center":e=a=0;break;case"bottom":e=0,a=1;break;case"right":e=1,a=0;break;case"left":e=-1,a=0;break;case"top":e=0,a=-1;break;case"start":e=-e,a=-a;break;case"end":break;default:o*=Math.PI/180,e=Math.cos(o),a=Math.sin(o);break}return{x:t,y:r,vx:e,vy:a}}var pr=0,zt=1,Wt=2,Kt=4,qt=8;function ie(t,r,e){var a=pr;return t<e.left?a|=zt:t>e.right&&(a|=Wt),r<e.top?a|=qt:r>e.bottom&&(a|=Kt),a}function dr(t,r){for(var e=t.x0,a=t.y0,o=t.x1,i=t.y1,n=ie(e,a,r),s=ie(o,i,r),l,p,d;!(!(n|s)||n&s);)l=n||s,l&qt?(p=e+(o-e)*(r.top-a)/(i-a),d=r.top):l&Kt?(p=e+(o-e)*(r.bottom-a)/(i-a),d=r.bottom):l&Wt?(d=a+(i-a)*(r.right-e)/(o-e),p=r.right):l&zt&&(d=a+(i-a)*(r.left-e)/(o-e),p=r.left),l===n?(e=p,a=d,n=ie(e,a,r)):(o=p,i=d,s=ie(o,i,r));return{x0:e,x1:o,y0:a,y1:i}}function ne(t,r){var e=r.anchor,a=t,o,i;return r.clamp&&(a=dr(a,r.area)),e==="start"?(o=a.x0,i=a.y0):e==="end"?(o=a.x1,i=a.y1):(o=(a.x0+a.x1)/2,i=(a.y0+a.y1)/2),lr(o,i,t.vx,t.vy,r.align)}var se={arc:function(t,r){var e=(t.startAngle+t.endAngle)/2,a=Math.cos(e),o=Math.sin(e),i=t.innerRadius,n=t.outerRadius;return ne({x0:t.x+a*i,y0:t.y+o*i,x1:t.x+a*n,y1:t.y+o*n,vx:a,vy:o},r)},point:function(t,r){var e=ge(t,r.origin),a=e.x*t.options.radius,o=e.y*t.options.radius;return ne({x0:t.x-a,y0:t.y-o,x1:t.x+a,y1:t.y+o,vx:e.x,vy:e.y},r)},bar:function(t,r){var e=ge(t,r.origin),a=t.x,o=t.y,i=0,n=0;return t.horizontal?(a=Math.min(t.x,t.base),i=Math.abs(t.base-t.x)):(o=Math.min(t.y,t.base),n=Math.abs(t.base-t.y)),ne({x0:a,y0:o+n,x1:a+i,y1:o,vx:e.x,vy:e.y},r)},fallback:function(t,r){var e=ge(t,r.origin);return ne({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:e.x,vy:e.y},r)}},b=B.rasterize;function cr(t){var r=t.borderWidth||0,e=t.padding,a=t.size.height,o=t.size.width,i=-o/2,n=-a/2;return{frame:{x:i-e.left-r,y:n-e.top-r,w:o+e.width+r*2,h:a+e.height+r*2},text:{x:i,y:n,w:o,h:a}}}function fr(t,r){var e=r.chart.getDatasetMeta(r.datasetIndex).vScale;if(!e)return null;if(e.xCenter!==void 0&&e.yCenter!==void 0)return{x:e.xCenter,y:e.yCenter};var a=e.getBasePixel();return t.horizontal?{x:a,y:null}:{x:null,y:a}}function ur(t){return t instanceof wt?se.arc:t instanceof Rt?se.point:t instanceof kt?se.bar:se.fallback}function mr(t,r,e,a,o,i){var n=Math.PI/2;if(i){var s=Math.min(i,o/2,a/2),l=r+s,p=e+s,d=r+a-s,f=e+o-s;t.moveTo(r,p),l<d&&p<f?(t.arc(l,p,s,-Math.PI,-n),t.arc(d,p,s,-n,0),t.arc(d,f,s,0,n),t.arc(l,f,s,n,Math.PI)):l<d?(t.moveTo(l,e),t.arc(d,p,s,-n,n),t.arc(l,p,s,n,Math.PI+n)):p<f?(t.arc(l,p,s,-Math.PI,0),t.arc(l,f,s,0,Math.PI)):t.arc(l,p,s,-Math.PI,Math.PI),t.closePath(),t.moveTo(r,e)}else t.rect(r,e,a,o)}function hr(t,r,e){var a=e.backgroundColor,o=e.borderColor,i=e.borderWidth;!a&&(!o||!i)||(t.beginPath(),mr(t,b(r.x)+i/2,b(r.y)+i/2,b(r.w)-i,b(r.h)-i,e.borderRadius),t.closePath(),a&&(t.fillStyle=a,t.fill()),o&&i&&(t.strokeStyle=o,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}function vr(t,r,e){var a=e.lineHeight,o=t.w,i=t.x,n=t.y+a/2;return r==="center"?i+=o/2:(r==="end"||r==="right")&&(i+=o),{h:a,w:o,x:i,y:n}}function yr(t,r,e){var a=t.shadowBlur,o=e.stroked,i=b(e.x),n=b(e.y),s=b(e.w);o&&t.strokeText(r,i,n,s),e.filled&&(a&&o&&(t.shadowBlur=0),t.fillText(r,i,n,s),a&&o&&(t.shadowBlur=a))}function _r(t,r,e,a){var o=a.textAlign,i=a.color,n=!!i,s=a.font,l=r.length,p=a.textStrokeColor,d=a.textStrokeWidth,f=p&&d,g;if(!(!l||!n&&!f))for(e=vr(e,o,s),t.font=s.string,t.textAlign=o,t.textBaseline="middle",t.shadowBlur=a.textShadowBlur,t.shadowColor=a.textShadowColor,n&&(t.fillStyle=i),f&&(t.lineJoin="round",t.lineWidth=d,t.strokeStyle=p),g=0,l=r.length;g<l;++g)yr(t,r[g],{stroked:f,filled:n,w:e.w,x:e.x,y:e.y+e.h*g})}var Xt=function(t,r,e,a){var o=this;o._config=t,o._index=a,o._model=null,o._rects=null,o._ctx=r,o._el=e};N(Xt.prototype,{_modelize:function(t,r,e,a){var o=this,i=o._index,n=ye(u([e.font,{}],a,i)),s=u([e.color,Nt.color],a,i);return{align:u([e.align,"center"],a,i),anchor:u([e.anchor,"center"],a,i),area:a.chart.chartArea,backgroundColor:u([e.backgroundColor,null],a,i),borderColor:u([e.borderColor,null],a,i),borderRadius:u([e.borderRadius,0],a,i),borderWidth:u([e.borderWidth,0],a,i),clamp:u([e.clamp,!1],a,i),clip:u([e.clip,!1],a,i),color:s,display:t,font:n,lines:r,offset:u([e.offset,4],a,i),opacity:u([e.opacity,1],a,i),origin:fr(o._el,a),padding:ve(u([e.padding,4],a,i)),positioner:ur(o._el),rotation:u([e.rotation,0],a,i)*(Math.PI/180),size:B.textSize(o._ctx,r,n),textAlign:u([e.textAlign,"start"],a,i),textShadowBlur:u([e.textShadowBlur,0],a,i),textShadowColor:u([e.textShadowColor,s],a,i),textStrokeColor:u([e.textStrokeColor,s],a,i),textStrokeWidth:u([e.textStrokeWidth,0],a,i)}},update:function(t){var r=this,e=null,a=null,o=r._index,i=r._config,n,s,l,p=u([i.display,!0],t,o);p&&(n=t.dataset.data[o],s=me(Z(i.formatter,[n,t]),n),l=A(s)?[]:B.toTextLines(s),l.length&&(e=r._modelize(p,l,i,t),a=cr(e))),r._model=e,r._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,r){var e=this,a=t.ctx,o=e._model,i=e._rects,n;this.visible()&&(a.save(),o.clip&&(n=o.area,a.beginPath(),a.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),a.clip()),a.globalAlpha=B.bound(0,o.opacity,1),a.translate(b(r.x),b(r.y)),a.rotate(o.rotation),hr(a,i.frame,o),_r(a,o.lines,i.text,o),a.restore())}});var gr=Number.MIN_SAFE_INTEGER||-9007199254740991,br=Number.MAX_SAFE_INTEGER||9007199254740991;function U(t,r,e){var a=Math.cos(e),o=Math.sin(e),i=r.x,n=r.y;return{x:i+a*(t.x-i)-o*(t.y-n),y:n+o*(t.x-i)+a*(t.y-n)}}function $t(t,r){var e=br,a=gr,o=r.origin,i,n,s,l,p;for(i=0;i<t.length;++i)n=t[i],s=n.x-o.x,l=n.y-o.y,p=r.vx*s+r.vy*l,e=Math.min(e,p),a=Math.max(a,p);return{min:e,max:a}}function le(t,r){var e=r.x-t.x,a=r.y-t.y,o=Math.sqrt(e*e+a*a);return{vx:(r.x-t.x)/o,vy:(r.y-t.y)/o,origin:t,ln:o}}var Yt=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};N(Yt.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,r,e){this._rotation=e,this._rect={x:r.x+t.x,y:r.y+t.y,w:r.w,h:r.h}},contains:function(t){var r=this,e=1,a=r._rect;return t=U(t,r.center(),-r._rotation),!(t.x<a.x-e||t.y<a.y-e||t.x>a.x+a.w+e*2||t.y>a.y+a.h+e*2)},intersects:function(t){var r=this._points(),e=t._points(),a=[le(r[0],r[1]),le(r[0],r[3])],o,i,n;for(this._rotation!==t._rotation&&a.push(le(e[0],e[1]),le(e[0],e[3])),o=0;o<a.length;++o)if(i=$t(r,a[o]),n=$t(e,a[o]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var t=this,r=t._rect,e=t._rotation,a=t.center();return[U({x:r.x,y:r.y},a,e),U({x:r.x+r.w,y:r.y},a,e),U({x:r.x+r.w,y:r.y+r.h},a,e),U({x:r.x,y:r.y+r.h},a,e)]}});function Jt(t,r,e){var a=r.positioner(t,r),o=a.vx,i=a.vy;if(!o&&!i)return{x:a.x,y:a.y};var n=e.w,s=e.h,l=r.rotation,p=Math.abs(n/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),d=Math.abs(n/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),f=1/Math.max(Math.abs(o),Math.abs(i));return p*=o*f,d*=i*f,p+=r.offset*o,d+=r.offset*i,{x:a.x+p,y:a.y+d}}function xr(t,r){var e,a,o,i;for(e=t.length-1;e>=0;--e)for(o=t[e].$layout,a=e-1;a>=0&&o._visible;--a)i=t[a].$layout,i._visible&&o._box.intersects(i._box)&&r(o,i);return t}function Cr(t){var r,e,a,o,i,n,s;for(r=0,e=t.length;r<e;++r)a=t[r],o=a.$layout,o._visible&&(s=new Proxy(a._el,{get:(l,p)=>l.getProps([p],!0)[p]}),i=a.geometry(),n=Jt(s,a.model(),i),o._box.update(n,i,a.rotation()));return xr(t,function(l,p){var d=l._hidable,f=p._hidable;d&&f||f?p._visible=!1:d&&(l._visible=!1)})}var j={prepare:function(t){var r=[],e,a,o,i,n;for(e=0,o=t.length;e<o;++e)for(a=0,i=t[e].length;a<i;++a)n=t[e][a],r.push(n),n.$layout={_box:new Yt,_hidable:!1,_visible:!0,_set:e,_idx:n._index};return r.sort(function(s,l){var p=s.$layout,d=l.$layout;return p._idx===d._idx?d._set-p._set:d._idx-p._idx}),this.update(r),r},update:function(t){var r=!1,e,a,o,i,n;for(e=0,a=t.length;e<a;++e)o=t[e],i=o.model(),n=o.$layout,n._hidable=i&&i.display==="auto",n._visible=o.visible(),r|=n._hidable;r&&Cr(t)},lookup:function(t,r){var e,a;for(e=t.length-1;e>=0;--e)if(a=t[e].$layout,a&&a._visible&&a._box.contains(r))return t[e];return null},draw:function(t,r){var e,a,o,i,n,s;for(e=0,a=r.length;e<a;++e)o=r[e],i=o.$layout,i._visible&&(n=o.geometry(),s=Jt(o._el,o.model(),n),i._box.update(s,n,o.rotation()),o.draw(t,s))}},Sr=function(t){if(A(t))return null;var r=t,e,a,o;if(ue(t))if(!A(t.label))r=t.label;else if(!A(t.r))r=t.r;else for(r="",e=Object.keys(t),o=0,a=e.length;o<a;++o)r+=(o!==0?", ":"")+e[o]+": "+t[e[o]];return""+r},Ir={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Sr,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},h="$datalabels",Zt="$default";function Er(t,r){var e=t.datalabels,a={},o=[],i,n;return e===!1?null:(e===!0&&(e={}),r=N({},[r,e]),i=r.labels||{},n=Object.keys(i),delete r.labels,n.length?n.forEach(function(s){i[s]&&o.push(N({},[r,i[s],{_key:s}]))}):o.push(r),a=o.reduce(function(s,l){return he(l.listeners||{},function(p,d){s[d]=s[d]||{},s[d][l._key||Zt]=p}),delete l.listeners,s},{}),{labels:o,listeners:a})}function be(t,r,e,a){if(r){var o=e.$context,i=e.$groups,n;r[i._set]&&(n=r[i._set][i._key],n&&Z(n,[o,a])===!0&&(t[h]._dirty=!0,e.update(o)))}}function Ar(t,r,e,a,o){var i,n;!e&&!a||(e?a?e!==a&&(n=i=!0):n=!0:i=!0,n&&be(t,r.leave,e,o),i&&be(t,r.enter,a,o))}function Nr(t,r){var e=t[h],a=e._listeners,o,i;if(!(!a.enter&&!a.leave)){if(r.type==="mousemove")i=j.lookup(e._labels,r);else if(r.type!=="mouseout")return;o=e._hovered,e._hovered=i,Ar(t,a,o,i,r)}}function wr(t,r){var e=t[h],a=e._listeners.click,o=a&&j.lookup(e._labels,r);o&&be(t,a,o,r)}var Qt={id:"datalabels",defaults:Ir,beforeInit:function(t){t[h]={_actives:[]}},beforeUpdate:function(t){var r=t[h];r._listened=!1,r._listeners={},r._datasets=[],r._labels=[]},afterDatasetUpdate:function(t,r,e){var a=r.index,o=t[h],i=o._datasets[a]=[],n=t.isDatasetVisible(a),s=t.data.datasets[a],l=Er(s,e),p=r.meta.data||[],d=t.ctx,f,g,xe,Ce,pe,Se,R,C;for(d.save(),f=0,xe=p.length;f<xe;++f)if(R=p[f],R[h]=[],n&&R&&t.getDataVisibility(f)&&!R.skip)for(g=0,Ce=l.labels.length;g<Ce;++g)pe=l.labels[g],Se=pe._key,C=new Xt(pe,d,R,f),C.$groups={_set:a,_key:Se||Zt},C.$context={active:!1,chart:t,dataIndex:f,dataset:s,datasetIndex:a},C.update(C.$context),R[h].push(C),i.push(C);d.restore(),N(o._listeners,l.listeners,{merger:function(V,de,er){de[V]=de[V]||{},de[V][r.index]=er[V],o._listened=!0}})},afterUpdate:function(t){t[h]._labels=j.prepare(t[h]._datasets)},afterDatasetsDraw:function(t){j.draw(t,t[h]._labels)},beforeEvent:function(t,r){if(t[h]._listened){var e=r.event;switch(e.type){case"mousemove":case"mouseout":Nr(t,e);break;case"click":wr(t,e);break}}},afterEvent:function(t){var r=t[h],e=r._actives,a=r._actives=t.getActiveElements(),o=B.arrayDiff(e,a),i,n,s,l,p,d,f;for(i=0,n=o.length;i<n;++i)if(p=o[i],p[1])for(f=p[0].element[h]||[],s=0,l=f.length;s<l;++s)d=f[s],d.$context.active=p[1]===1,d.update(d.$context);(r._dirty||o.length)&&(j.update(r._labels),t.render()),delete r._dirty}};Q.register(...Tt,Qt);Q.defaults.plugins.datalabels.display=!1;Q.defaults.font.family="Roboto, Lusail";Je(re,Gt).catch(t=>console.error(t));
