import{b as v}from"./chunk-ZPRGCDHT.js";import{a as S}from"./chunk-UR3XF2OI.js";import{b as m,c as u,d as c,e as d,f as h}from"./chunk-7UCX2ERW.js";import{K as o,a,ha as i,ka as p,na as l,ta as r,x as n}from"./chunk-OUJ2UPQI.js";var A=new c(()=>!1);var R=class s{urlService=r(S);http=r(h);store=r(v);startStream(t){return this.http.post(this.urlService.URLS.AVATAR+"/start-stream",{},{params:a({},t?{size:"life-size"}:void 0)}).pipe(p(e=>this.store.updateStreamId(e.data.id)))}closeStream(){let t=this.store.streamId();return this.store.updateStreamId(""),this.http.delete(this.urlService.URLS.AVATAR+`/close-stream/${t}`)}sendCandidate(t){return this.http.post(this.urlService.URLS.AVATAR+`/send-candidate/${this.store.streamId()}`,{candidate:t})}sendAnswer(t){return this.http.put(this.urlService.URLS.AVATAR+`/send-answer/${this.store.streamId()}`,{answer:t})}interruptAvatar(){return this.http.delete(this.urlService.URLS.AVATAR+`/stop-render/${this.store.streamId()}`)}renderText(t){return this.http.post(this.urlService.URLS.AVATAR+`/render-text/${this.store.streamId()}`,{},{params:{text:t}})}updateVideo(t){return this.http.post(this.urlService.URLS.AVATAR+"/update-video",{},{params:{text:t}})}retrieveVideo(){return this.http.get(this.urlService.URLS.AVATAR+"/retrieve-video").pipe(i(t=>t.status==="RENDERING"?o(5e3).pipe(i(()=>this.retrieveVideo())):n(t.data)))}greeting(t,e){let b=`${this.urlService.URLS.AVATAR}/greeting/${t}/${this.store.streamId()}`,C=new u().append("is_ar",e);return this.http.post(b,null,{params:C})}getMSICEServerInfo(){return this.http.get(`https://${this.store.speechToken.region()}.tts.speech.microsoft.com/cognitiveservices/avatar/relay/token/v1`,{context:new d().set(A,!0),headers:new m().set("Authorization",`Bearer ${this.store.speechToken.token()}`)})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})};export{A as a,R as b};
